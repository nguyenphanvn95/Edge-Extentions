var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,r,n,a,s){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof i[a]&&i[a],l=o.cache||{},u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(e,r){if(!l[e]){if(!t[e]){var n="function"==typeof i[a]&&i[a];if(!r&&n)return n(e,!0);if(o)return o(e,!0);if(u&&"string"==typeof e)return u(e);var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}p.resolve=function(r){var n=t[e][1][r];return null!=n?n:r},p.cache={};var d=l[e]=new c.Module(e);t[e][0].call(d.exports,p,d,d.exports,this)}return l[e].exports;function p(e){var t=p.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=t,c.cache=l,c.parent=o,c.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]},Object.defineProperty(c,"root",{get:function(){return i[a]}}),i[a]=c;for(var d=0;d<r.length;d++)c(r[d]);if(n){var p=c(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof e&&e.amd&&e(function(){return p})}}({"41cPv":[function(e,t,r){e("df672649076af185").register(JSON.parse('{"fQq0o":"index.js","2qOg2":"llm_chain.aad111ed.js","dQ0EI":"sequential_chain.d8e5548c.js","2AzJW":"combine_docs_chain.38b4ca8d.js","iZHrI":"prompt.821d1ded.js","kJFUv":"few_shot.9508bad2.js","gLhAl":"vector_db_qa.b384c45a.js","1KVcI":"api_chain.8bfc1852.js"}'))},{df672649076af185:"fcUCD"}],fcUCD:[function(e,t,r){var n={};t.exports.register=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)n[t[r]]=e[t[r]]},t.exports.resolve=function(e){var t=n[e];if(null==t)throw Error("Could not resolve bundle with id "+e);return t}},{}],iCFoN:[function(e,t,r){e("./messaging"),e("../../../src/extension/background/index")},{"./messaging":"7VW5C","../../../src/extension/background/index":"6LUM3"}],"7VW5C":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js"),a=e("~background/messages/checkIsOnToolbar"),s=n.interopDefault(a),i=e("~background/messages/fetchCompletion"),o=n.interopDefault(i),l=e("~background/messages/fetchModels"),u=n.interopDefault(l),c=e("~background/messages/toggleSidepanel"),d=n.interopDefault(c),p=e("~background/ports/streamCompletion"),f=n.interopDefault(p);globalThis.__plasmoInternalPortMap=new Map,chrome.runtime.onMessageExternal.addListener((e,t,r)=>{switch(e.name){case"checkIsOnToolbar":(0,s.default)({sender:t,...e},{send:e=>r(e)});break;case"fetchCompletion":(0,o.default)({sender:t,...e},{send:e=>r(e)});break;case"fetchModels":(0,u.default)({sender:t,...e},{send:e=>r(e)});break;case"toggleSidepanel":(0,d.default)({sender:t,...e},{send:e=>r(e)})}return!0}),chrome.runtime.onMessage.addListener((e,t,r)=>{switch(e.name){case"checkIsOnToolbar":(0,s.default)({sender:t,...e},{send:e=>r(e)});break;case"fetchCompletion":(0,o.default)({sender:t,...e},{send:e=>r(e)});break;case"fetchModels":(0,u.default)({sender:t,...e},{send:e=>r(e)});break;case"toggleSidepanel":(0,d.default)({sender:t,...e},{send:e=>r(e)})}return!0}),chrome.runtime.onConnect.addListener(function(e){globalThis.__plasmoInternalPortMap.set(e.name,e),e.onMessage.addListener(function(t){"streamCompletion"===e.name&&(0,f.default)({port:e,...t},{send:t=>e.postMessage(t)})})})},{"~background/messages/checkIsOnToolbar":"29tFZ","~background/messages/fetchCompletion":"dbQNg","~background/messages/fetchModels":"2DMD5","~background/messages/toggleSidepanel":"gi3oQ","~background/ports/streamCompletion":"5wQxf","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"29tFZ":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"checkIsOnToolbar",()=>o);var a=e("~/domains/redux/store"),s=e("~/domains/settings/store/settingsSlice"),i=n.interopDefault(s);async function o(){let e=await chrome.action.getUserSettings();return(0,a.store).dispatch((0,i.default).actions.setIsOnToolbar(e.isOnToolbar))}let l=async(e,t)=>{t.send({message:await o()})};r.default=l},{"~/domains/redux/store":"8W8rk","~/domains/settings/store/settingsSlice":"ccLxl","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8W8rk":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"store",()=>L),n.export(r,"persistor",()=>F),n.export(r,"useAppDispatch",()=>D),n.export(r,"useAppSelector",()=>z);var a=e("react-redux"),s=e("@plasmohq/redux-persist"),i=e("@plasmohq/redux-persist/lib/storage"),o=n.interopDefault(i),l=e("@plasmohq/storage"),u=e("@/domains/anki/ankiApiSlice"),c=e("@/domains/anki/ankiSlice"),d=n.interopDefault(c),p=e("@/domains/flashcard/flashCardSlice"),f=e("@/domains/input/inputSlice"),h=n.interopDefault(f),m=e("@/domains/integrations/youtube/youtubeApiSlice"),g=e("@/domains/navigation/navigationSlice"),y=n.interopDefault(g),v=e("@/domains/openai/openaiApiSlice"),b=e("@/domains/openai/promptSlice"),_=n.interopDefault(b),w=e("@/domains/redux/proxyStore"),j=e("@/domains/settings/store/settingsSlice"),x=n.interopDefault(j),S=e("@/domains/sidebar/sidebarSlice"),k=n.interopDefault(S),P=e("@/domains/theme/themeSlice"),O=n.interopDefault(P),I=e("@reduxjs/toolkit"),C=e("lodash"),E=e("redux-persist-webextension-storage"),T=e("~/domains/config");let A=(e,t)=>(0,s.persistReducer)({key:t,version:1,storage:T.appConfig.isExtension?E.localStorage:o.default},e),R=(e,t)=>(0,s.persistReducer)({key:t,version:1,storage:T.appConfig.isExtension?E.syncStorage:o.default},e),N={[k.default.name]:R(k.default.reducer,"sidebar"),[d.default.name]:A(d.default.reducer,"anki"),[u.ankiApiSlice.reducerPath]:u.ankiApiSlice.reducer,[m.youtubeApiSlice.reducerPath]:m.youtubeApiSlice.reducer,[v.openaiApiSlice.reducerPath]:v.openaiApiSlice.reducer,[_.default.name]:A(_.default.reducer,"prompt"),[h.default.name]:A(h.default.reducer,"input"),[y.default.name]:A(y.default.reducer,"navigation"),[O.default.name]:R(O.default.reducer,"theme"),[x.default.name]:R(x.default.reducer,"settings"),[p.flashCardsSlice.name]:A(p.flashCardsSlice.reducer,"flashCards"),[p.highlightsSlice.name]:A(p.highlightsSlice.reducer,"highlights")},M=(0,I.combineReducers)(N);(0,I.configureStore)({reducer:M});let L=(0,I.configureStore)({reducer:M,middleware:e=>e({serializableCheck:{ignoredActions:[s.FLUSH,s.REHYDRATE,s.PAUSE,s.PERSIST,s.PURGE,s.REGISTER,s.RESYNC]}}).concat(u.ankiApiSlice.middleware,m.youtubeApiSlice.middleware,v.openaiApiSlice.middleware)});(0,w.setProxyStore)(L);let F=(0,s.persistStore)(L),$=(0,C.throttle)(()=>{F.resync()},1e3,{trailing:!0});new(0,l.Storage)({allCopied:!0}).watch({...(e=>{let t={};return Object.keys(e).forEach(e=>{t[`persist:${e}`]=()=>{$()}}),t})(N)});let D=a.useDispatch,z=a.useSelector},{"react-redux":"jxBlS","@plasmohq/redux-persist":"jZkfj","@plasmohq/redux-persist/lib/storage":"aG0Zu","@plasmohq/storage":"gwigI","@/domains/anki/ankiApiSlice":"f8XNO","@/domains/anki/ankiSlice":"aIF2y","@/domains/flashcard/flashCardSlice":"e9O94","@/domains/input/inputSlice":"fgSQe","@/domains/integrations/youtube/youtubeApiSlice":"jc8hR","@/domains/navigation/navigationSlice":"d5PcS","@/domains/openai/openaiApiSlice":"iXemX","@/domains/openai/promptSlice":"ki7pM","@/domains/redux/proxyStore":"glsXe","@/domains/settings/store/settingsSlice":"ccLxl","@/domains/sidebar/sidebarSlice":"fZTrC","@/domains/theme/themeSlice":"ftIi2","@reduxjs/toolkit":"6029V",lodash:"cu6CP","redux-persist-webextension-storage":"6LJzq","~/domains/config":"5KEGu","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jxBlS:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"batch",()=>i.unstable_batchedUpdates);var a=e("use-sync-external-store/shim"),s=e("use-sync-external-store/shim/with-selector"),i=e("./utils/reactBatchedUpdates"),o=e("./utils/batch"),l=e("./hooks/useSelector"),u=e("./components/connect"),c=e("./exports");n.exportAll(c,r),(0,l.initializeUseSelector)(s.useSyncExternalStoreWithSelector),(0,u.initializeConnect)(a.useSyncExternalStore),(0,o.setBatch)(i.unstable_batchedUpdates)},{"use-sync-external-store/shim":"a5uwG","use-sync-external-store/shim/with-selector":"2JiIv","./utils/reactBatchedUpdates":"7yYid","./utils/batch":"cLD2v","./hooks/useSelector":"deUhy","./components/connect":"gILeY","./exports":"aw0gP","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],a5uwG:[function(e,t,r){t.exports=e("8b974a2950a0796c")},{"8b974a2950a0796c":"5Bh1Z"}],"5Bh1Z":[function(e,t,r){var n=e("2f7d03d9688f598f"),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useState,i=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),a=n[0].inst,c=n[1];return o(function(){a.value=r,a.getSnapshot=t,u(a)&&c({inst:a})},[e,r,t]),i(function(){return u(a)&&c({inst:a}),e(function(){u(a)&&c({inst:a})})},[e]),l(r),r};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},{"2f7d03d9688f598f":"fMilz"}],fMilz:[function(e,t,r){t.exports=e("956f36295e4e0134")},{"956f36295e4e0134":"j8UCp"}],j8UCp:[function(e,t,r){var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||m}function b(){}function _(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=_.prototype=new b;w.constructor=_,g(w,v.prototype),w.isPureReactComponent=!0;var j=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)x.call(t,a)&&!k.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:S.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function E(e,t,r){if(null==e)return e;var s=[],i=0;return function e(t,r,s,i,o){var l,u,c,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var p=!1;if(null===t)p=!0;else switch(d){case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case n:case a:p=!0}}if(p)return o=o(p=t),t=""===i?"."+C(p,0):i,j(o)?(s="",null!=t&&(s=t.replace(I,"$&/")+"/"),e(o,r,s,"",function(e){return e})):null!=o&&(O(o)&&(l=o,u=s+(!o.key||p&&p.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+t,o={$$typeof:n,type:l.type,key:u,ref:l.ref,props:l.props,_owner:l._owner}),r.push(o)),1;if(p=0,i=""===i?".":i+":",j(t))for(var f=0;f<t.length;f++){var m=i+C(d=t[f],f);p+=e(d,r,s,m,o)}else if("function"==typeof(m=null===(c=t)||"object"!=typeof c?null:"function"==typeof(c=h&&c[h]||c["@@iterator"])?c:null))for(t=m.call(t),f=0;!(d=t.next()).done;)m=i+C(d=d.value,f++),p+=e(d,r,s,m,o);else if("object"===d)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return p}(e,s,"","",function(e){return t.call(r,e,i++)}),s}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},R={transition:null};function N(){throw Error("act(...) is not supported in production builds of React.")}r.Children={map:E,forEach:function(e,t,r){E(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return E(e,function(){t++}),t},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},r.Component=v,r.Fragment=s,r.Profiler=o,r.PureComponent=_,r.StrictMode=i,r.Suspense=d,r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:R,ReactCurrentOwner:S},r.act=N,r.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=g({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)x.call(t,u)&&!k.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},r.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},r.createElement=P,r.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:c,render:e}},r.isValidElement=O,r.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:T}},r.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},r.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},r.unstable_act=N,r.useCallback=function(e,t){return A.current.useCallback(e,t)},r.useContext=function(e){return A.current.useContext(e)},r.useDebugValue=function(){},r.useDeferredValue=function(e){return A.current.useDeferredValue(e)},r.useEffect=function(e,t){return A.current.useEffect(e,t)},r.useId=function(){return A.current.useId()},r.useImperativeHandle=function(e,t,r){return A.current.useImperativeHandle(e,t,r)},r.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},r.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},r.useMemo=function(e,t){return A.current.useMemo(e,t)},r.useReducer=function(e,t,r){return A.current.useReducer(e,t,r)},r.useRef=function(e){return A.current.useRef(e)},r.useState=function(e){return A.current.useState(e)},r.useSyncExternalStore=function(e,t,r){return A.current.useSyncExternalStore(e,t,r)},r.useTransition=function(){return A.current.useTransition()},r.version="18.3.1"},{}],"2JiIv":[function(e,t,r){t.exports=e("646f3adc157912dd")},{"646f3adc157912dd":"jfkbR"}],jfkbR:[function(e,t,r){var n=e("2c99ce9e3cb5debf"),a=e("969be431eae4eb00"),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,c=n.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var d=o(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;var f=i(e,(d=u(function(){function e(e){if(!l){if(l=!0,i=e,e=n(e),void 0!==a&&p.hasValue){var t=p.value;if(a(t,e))return o=t}return o=e}if(t=o,s(i,e))return t;var r=n(e);return void 0!==a&&a(t,r)?t:(i=e,o=r)}var i,o,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,a]))[0],d[1]);return l(function(){p.hasValue=!0,p.value=f},[f]),c(f),f}},{"2c99ce9e3cb5debf":"fMilz","969be431eae4eb00":"a5uwG"}],"7yYid":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"unstable_batchedUpdates",()=>a.unstable_batchedUpdates);var a=e("react-dom")},{"react-dom":"ibWo2","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ibWo2:[function(e,t,r){(function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}})(),t.exports=e("9223fb8c5161e54b")},{"9223fb8c5161e54b":"drJtH"}],drJtH:[function(e,t,r){var n,a,s,i,o,l,u=e("5393afc8c463ef07"),c=e("ece50e903283a22f");function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,f={};function h(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(f[e]=t,e=0;e<t.length;e++)p.add(t[e])}var g=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},_={};function w(e,t,r,n,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){j[e]=new w(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];j[t]=new w(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){j[e]=new w(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){j[e]=new w(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){j[e]=new w(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){j[e]=new w(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){j[e]=new w(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){j[e]=new w(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){j[e]=new w(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function S(e){return e[1].toUpperCase()}function k(e,t,r,n){var a,s=j.hasOwnProperty(t)?j[t]:null;(null!==s?0!==s.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(n)return!1;if(null!==r)return!r.acceptsBooleans;return"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,n)&&(r=null),n||null===s?(a=t,(!!y.call(_,a)||!y.call(b,a)&&(v.test(a)?_[a]=!0:(b[a]=!0,!1)))&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r))):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,n=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,S);j[t]=new w(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,S);j[t]=new w(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,S);j[t]=new w(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){j[e]=new w(e,1,!1,e.toLowerCase(),null,!1,!1)}),j.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){j[e]=new w(e,1,!1,e.toLowerCase(),null,!0,!0)});var P=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),I=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),$=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var z=Symbol.iterator;function U(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}var B,Z=Object.assign;function q(e){if(void 0===B)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var V=!1;function K(e,t){if(!e||V)return"";V=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var a=t.stack.split("\n"),s=n.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=o)break}}}finally{V=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?q(e):""}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=W(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function G(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return Z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function X(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ee(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function et(e,t){ee(e,t);var r=H(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n){e.removeAttribute("value");return}t.hasOwnProperty("value")?en(e,t.type,r):t.hasOwnProperty("defaultValue")&&en(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function er(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function en(e,t,r){("number"!==t||G(e.ownerDocument)!==e)&&(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ea=Array.isArray;function es(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(a=0,r=""+H(r),t=null;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ei(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(d(91));return Z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eo(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(d(92));if(ea(r)){if(1<r.length)throw Error(d(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function el(e,t){var r=H(t.value),n=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function eu(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ec(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ed(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ec(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ep,ef,eh=(ep=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ef=ef||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ef.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return ep(e,t,r,n)})}:ep);function em(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType){r.nodeValue=t;return}}e.textContent=t}var eg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ey=["Webkit","ms","Moz","O"];function ev(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||eg.hasOwnProperty(e)&&eg[e]?(""+t).trim():t+"px"}function eb(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=ev(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(eg).forEach(function(e){ey.forEach(function(t){eg[t=t+e.charAt(0).toUpperCase()+e.substring(1)]=eg[e]})});var e_=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ew(e,t){if(t){if(e_[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(d(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(d(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(d(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(d(62))}}function ej(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ex=null;function eS(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ek=null,eP=null,eO=null;function eI(e){if(e=nL(e)){if("function"!=typeof ek)throw Error(d(280));var t=e.stateNode;t&&(t=n$(t),ek(e.stateNode,e.type,t))}}function eC(e){eP?eO?eO.push(e):eO=[e]:eP=e}function eE(){if(eP){var e=eP,t=eO;if(eO=eP=null,eI(e),t)for(e=0;e<t.length;e++)eI(t[e])}}function eT(e,t){return e(t)}function eA(){}var eR=!1;function eN(e,t,r){if(eR)return e(t,r);eR=!0;try{return eT(e,t,r)}finally{eR=!1,(null!==eP||null!==eO)&&(eA(),eE())}}function eM(e,t){var r=e.stateNode;if(null===r)return null;var n=n$(r);if(null===n)return null;switch(r=n[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(d(231,t,typeof r));return r}var eL=!1;if(g)try{var eF={};Object.defineProperty(eF,"passive",{get:function(){eL=!0}}),window.addEventListener("test",eF,eF),window.removeEventListener("test",eF,eF)}catch(e){eL=!1}function e$(e,t,r,n,a,s,i,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(e){this.onError(e)}}var eD=!1,ez=null,eU=!1,eB=null,eZ={onError:function(e){eD=!0,ez=e}};function eq(e,t,r,n,a,s,i,o,l){eD=!1,ez=null,e$.apply(eZ,arguments)}function eV(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(r=t.return),e=t.return;while(e)}return 3===t.tag?r:null}function eK(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function eH(e){if(eV(e)!==e)throw Error(d(188))}function eW(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=eV(e)))throw Error(d(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(n=a.return)){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return eH(a),e;if(s===n)return eH(a),t;s=s.sibling}throw Error(d(188))}if(r.return!==n.return)r=a,n=s;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=s;break}if(o===n){i=!0,n=a,r=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===r){i=!0,r=s,n=a;break}if(o===n){i=!0,n=s,r=a;break}o=o.sibling}if(!i)throw Error(d(189))}}if(r.alternate!==n)throw Error(d(190))}if(3!==r.tag)throw Error(d(188));return r.stateNode.current===r?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var r=e(t);if(null!==r)return r;t=t.sibling}return null}(e):null}var eJ=c.unstable_scheduleCallback,eQ=c.unstable_cancelCallback,eG=c.unstable_shouldYield,eY=c.unstable_requestPaint,eX=c.unstable_now,e0=c.unstable_getCurrentPriorityLevel,e1=c.unstable_ImmediatePriority,e2=c.unstable_UserBlockingPriority,e4=c.unstable_NormalPriority,e3=c.unstable_LowPriority,e5=c.unstable_IdlePriority,e6=null,e9=null,e8=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(e7(e)/te|0)|0},e7=Math.log,te=Math.LN2,tt=64,tr=4194304;function tn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ta(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~a;0!==o?n=tn(o):0!=(s&=i)&&(n=tn(s))}else 0!=(i=r&~a)?n=tn(i):0!==s&&(n=tn(s));if(0===n)return 0;if(0!==t&&t!==n&&0==(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&0!=(4194240&s)))return t;if(0!=(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-e8(t)),n|=e[r],t&=~a;return n}function ts(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ti(){var e=tt;return 0==(4194240&(tt<<=1))&&(tt=64),e}function to(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function tl(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-e8(t)]=r}function tu(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-e8(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var tc=0;function td(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var tp,tf,th,tm,tg,ty=!1,tv=[],tb=null,t_=null,tw=null,tj=new Map,tx=new Map,tS=[],tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tP(e,t){switch(e){case"focusin":case"focusout":tb=null;break;case"dragenter":case"dragleave":t_=null;break;case"mouseover":case"mouseout":tw=null;break;case"pointerover":case"pointerout":tj.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tx.delete(t.pointerId)}}function tO(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&null!==(t=nL(t))&&tf(t)):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a)),e}function tI(e){var t=nM(e.target);if(null!==t){var r=eV(t);if(null!==r){if(13===(t=r.tag)){if(null!==(t=eK(r))){e.blockedOn=t,tg(e.priority,function(){th(r)});return}}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===r.tag?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tC(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=tz(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=nL(r))&&tf(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);ex=n,r.target.dispatchEvent(n),ex=null,t.shift()}return!0}function tE(e,t,r){tC(e)&&r.delete(t)}function tT(){ty=!1,null!==tb&&tC(tb)&&(tb=null),null!==t_&&tC(t_)&&(t_=null),null!==tw&&tC(tw)&&(tw=null),tj.forEach(tE),tx.forEach(tE)}function tA(e,t){e.blockedOn===t&&(e.blockedOn=null,ty||(ty=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,tT)))}function tR(e){function t(t){return tA(t,e)}if(0<tv.length){tA(tv[0],e);for(var r=1;r<tv.length;r++){var n=tv[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==tb&&tA(tb,e),null!==t_&&tA(t_,e),null!==tw&&tA(tw,e),tj.forEach(t),tx.forEach(t),r=0;r<tS.length;r++)(n=tS[r]).blockedOn===e&&(n.blockedOn=null);for(;0<tS.length&&null===(r=tS[0]).blockedOn;)tI(r),null===r.blockedOn&&tS.shift()}var tN=P.ReactCurrentBatchConfig,tM=!0;function tL(e,t,r,n){var a=tc,s=tN.transition;tN.transition=null;try{tc=1,t$(e,t,r,n)}finally{tc=a,tN.transition=s}}function tF(e,t,r,n){var a=tc,s=tN.transition;tN.transition=null;try{tc=4,t$(e,t,r,n)}finally{tc=a,tN.transition=s}}function t$(e,t,r,n){if(tM){var a=tz(e,t,r,n);if(null===a)no(e,t,n,tD,r),tP(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return tb=tO(tb,e,t,r,n,a),!0;case"dragenter":return t_=tO(t_,e,t,r,n,a),!0;case"mouseover":return tw=tO(tw,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return tj.set(s,tO(tj.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,tx.set(s,tO(tx.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(tP(e,n),4&t&&-1<tk.indexOf(e)){for(;null!==a;){var s=nL(a);if(null!==s&&tp(s),null===(s=tz(e,t,r,n))&&no(e,t,n,tD,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else no(e,t,n,null,r)}}var tD=null;function tz(e,t,r,n){if(tD=null,null!==(e=nM(e=eS(n)))){if(null===(t=eV(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=eK(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}return tD=e,null}function tU(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e0()){case e1:return 1;case e2:return 4;case e4:case e3:return 16;case e5:return 536870912;default:return 16}default:return 16}}var tB=null,tZ=null,tq=null;function tV(){if(tq)return tq;var e,t,r=tZ,n=r.length,a="value"in tB?tB.value:tB.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return tq=a.slice(e,1<t?1-t:void 0)}function tK(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tH(){return!0}function tW(){return!1}function tJ(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?tH:tW,this.isPropagationStopped=tW,this}return Z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tH)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tH)},persist:function(){},isPersistent:tH}),t}var tQ,tG,tY,tX={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t0=tJ(tX),t1=Z({},tX,{view:0,detail:0}),t2=tJ(t1),t4=Z({},t1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ra,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tY&&(tY&&"mousemove"===e.type?(tQ=e.screenX-tY.screenX,tG=e.screenY-tY.screenY):tG=tQ=0,tY=e),tQ)},movementY:function(e){return"movementY"in e?e.movementY:tG}}),t3=tJ(t4),t5=tJ(Z({},t4,{dataTransfer:0})),t6=tJ(Z({},t1,{relatedTarget:0})),t9=tJ(Z({},tX,{animationName:0,elapsedTime:0,pseudoElement:0})),t8=tJ(Z({},tX,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),t7=tJ(Z({},tX,{data:0})),re={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=rr[e])&&!!t[e]}function ra(){return rn}var rs=tJ(Z({},t1,{key:function(e){if(e.key){var t=re[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tK(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?rt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ra,charCode:function(e){return"keypress"===e.type?tK(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tK(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),ri=tJ(Z({},t4,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),ro=tJ(Z({},t1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ra})),rl=tJ(Z({},tX,{propertyName:0,elapsedTime:0,pseudoElement:0})),ru=tJ(Z({},t4,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),rc=[9,13,27,32],rd=g&&"CompositionEvent"in window,rp=null;g&&"documentMode"in document&&(rp=document.documentMode);var rf=g&&"TextEvent"in window&&!rp,rh=g&&(!rd||rp&&8<rp&&11>=rp),rm=!1;function rg(e,t){switch(e){case"keyup":return -1!==rc.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ry(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var rv=!1,rb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!rb[e.type]:"textarea"===t}function rw(e,t,r,n){eC(n),0<(t=nu(t,"onChange")).length&&(r=new t0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var rj=null,rx=null;function rS(e){nt(e,0)}function rk(e){if(Q(nF(e)))return e}function rP(e,t){if("change"===e)return t}var rO=!1;if(g){if(g){var rI="oninput"in document;if(!rI){var rC=document.createElement("div");rC.setAttribute("oninput","return;"),rI="function"==typeof rC.oninput}n=rI}else n=!1;rO=n&&(!document.documentMode||9<document.documentMode)}function rE(){rj&&(rj.detachEvent("onpropertychange",rT),rx=rj=null)}function rT(e){if("value"===e.propertyName&&rk(rx)){var t=[];rw(t,rx,e,eS(e)),eN(rS,t)}}function rA(e,t,r){"focusin"===e?(rE(),rj=t,rx=r,rj.attachEvent("onpropertychange",rT)):"focusout"===e&&rE()}function rR(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return rk(rx)}function rN(e,t){if("click"===e)return rk(t)}function rM(e,t){if("input"===e||"change"===e)return rk(t)}var rL="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function rF(e,t){if(rL(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!y.call(t,a)||!rL(e[a],t[a]))return!1}return!0}function r$(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rD(e,t){var r,n=r$(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r$(n)}}function rz(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(r)e=t.contentWindow;else break;t=G(e.document)}return t}function rU(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rB=g&&"documentMode"in document&&11>=document.documentMode,rZ=null,rq=null,rV=null,rK=!1;function rH(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;rK||null==rZ||rZ!==G(n)||(n="selectionStart"in(n=rZ)&&rU(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},rV&&rF(rV,n)||(rV=n,0<(n=nu(rq,"onSelect")).length&&(t=new t0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=rZ)))}function rW(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var rJ={animationend:rW("Animation","AnimationEnd"),animationiteration:rW("Animation","AnimationIteration"),animationstart:rW("Animation","AnimationStart"),transitionend:rW("Transition","TransitionEnd")},rQ={},rG={};function rY(e){if(rQ[e])return rQ[e];if(!rJ[e])return e;var t,r=rJ[e];for(t in r)if(r.hasOwnProperty(t)&&t in rG)return rQ[e]=r[t];return e}g&&(rG=document.createElement("div").style,"AnimationEvent"in window||(delete rJ.animationend.animation,delete rJ.animationiteration.animation,delete rJ.animationstart.animation),"TransitionEvent"in window||delete rJ.transitionend.transition);var rX=rY("animationend"),r0=rY("animationiteration"),r1=rY("animationstart"),r2=rY("transitionend"),r4=new Map,r3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function r5(e,t){r4.set(e,t),h(t,[e])}for(var r6=0;r6<r3.length;r6++){var r9=r3[r6];r5(r9.toLowerCase(),"on"+(r9[0].toUpperCase()+r9.slice(1)))}r5(rX,"onAnimationEnd"),r5(r0,"onAnimationIteration"),r5(r1,"onAnimationStart"),r5("dblclick","onDoubleClick"),r5("focusin","onFocus"),r5("focusout","onBlur"),r5(r2,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var r8="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r7=new Set("cancel close invalid load scroll toggle".split(" ").concat(r8));function ne(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,s,i,o,l){if(eq.apply(this,arguments),eD){if(eD){var u=ez;eD=!1,ez=null}else throw Error(d(198));eU||(eU=!0,eB=u)}}(n,t,void 0,e),e.currentTarget=null}function nt(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;ne(a,o,u),s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,u=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;ne(a,o,u),s=l}}}if(eU)throw e=eB,eU=!1,eB=null,e}function nr(e,t){var r=t[nA];void 0===r&&(r=t[nA]=new Set);var n=e+"__bubble";r.has(n)||(ni(t,e,2,!1),r.add(n))}function nn(e,t,r){var n=0;t&&(n|=4),ni(r,e,n,t)}var na="_reactListening"+Math.random().toString(36).slice(2);function ns(e){if(!e[na]){e[na]=!0,p.forEach(function(t){"selectionchange"!==t&&(r7.has(t)||nn(t,!1,e),nn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[na]||(t[na]=!0,nn("selectionchange",!1,t))}}function ni(e,t,r,n){switch(tU(t)){case 1:var a=tL;break;case 4:a=tF;break;default:a=t$}r=a.bind(null,t,r,e),a=void 0,eL&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function no(e,t,r,n,a){var s=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=nM(o)))return;if(5===(l=i.tag)||6===l){n=s=i;continue e}o=o.parentNode}}n=n.return}eN(function(){var n=s,a=eS(r),i=[];e:{var o=r4.get(e);if(void 0!==o){var l=t0,u=e;switch(e){case"keypress":if(0===tK(r))break e;case"keydown":case"keyup":l=rs;break;case"focusin":u="focus",l=t6;break;case"focusout":u="blur",l=t6;break;case"beforeblur":case"afterblur":l=t6;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=t3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=t5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=ro;break;case rX:case r0:case r1:l=t9;break;case r2:l=rl;break;case"scroll":l=t2;break;case"wheel":l=ru;break;case"copy":case"cut":case"paste":l=t8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=ri}var c=0!=(4&t),d=!c&&"scroll"===e,p=c?null!==o?o+"Capture":null:o;c=[];for(var f,h=n;null!==h;){var m=(f=h).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==p&&null!=(m=eM(h,p))&&c.push(nl(h,m,f))),d)break;h=h.return}0<c.length&&(o=new l(o,u,null,r,a),i.push({event:o,listeners:c}))}}if(0==(7&t)){if(o="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,!(o&&r!==ex&&(u=r.relatedTarget||r.fromElement)&&(nM(u)||u[nT]))&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(u=r.relatedTarget||r.toElement,l=n,null!==(u=u?nM(u):null)&&(d=eV(u),u!==d||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(c=t3,m="onMouseLeave",p="onMouseEnter",h="mouse",("pointerout"===e||"pointerover"===e)&&(c=ri,m="onPointerLeave",p="onPointerEnter",h="pointer"),d=null==l?o:nF(l),f=null==u?o:nF(u),(o=new c(m,h+"leave",l,r,a)).target=d,o.relatedTarget=f,m=null,nM(a)===n&&((c=new c(p,h+"enter",u,r,a)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)t:{for(c=l,p=u,h=0,f=c;f;f=nc(f))h++;for(f=0,m=p;m;m=nc(m))f++;for(;0<h-f;)c=nc(c),h--;for(;0<f-h;)p=nc(p),f--;for(;h--;){if(c===p||null!==p&&c===p.alternate)break t;c=nc(c),p=nc(p)}c=null}else c=null;null!==l&&nd(i,o,l,c,!1),null!==u&&null!==d&&nd(i,d,u,c,!0)}e:{if("select"===(l=(o=n?nF(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g,y=rP;else if(r_(o)){if(rO)y=rM;else{y=rR;var v=rA}}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(y=rN);if(y&&(y=y(e,n))){rw(i,y,r,a);break e}v&&v(e,o,n),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&en(o,"number",o.value)}switch(v=n?nF(n):window,e){case"focusin":(r_(v)||"true"===v.contentEditable)&&(rZ=v,rq=n,rV=null);break;case"focusout":rV=rq=rZ=null;break;case"mousedown":rK=!0;break;case"contextmenu":case"mouseup":case"dragend":rK=!1,rH(i,r,a);break;case"selectionchange":if(rB)break;case"keydown":case"keyup":rH(i,r,a)}if(rd)t:{switch(e){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else rv?rg(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(rh&&"ko"!==r.locale&&(rv||"onCompositionStart"!==b?"onCompositionEnd"===b&&rv&&(g=tV()):(tZ="value"in(tB=a)?tB.value:tB.textContent,rv=!0)),0<(v=nu(n,b)).length&&(b=new t7(b,e,null,r,a),i.push({event:b,listeners:v}),g?b.data=g:null!==(g=ry(r))&&(b.data=g))),(g=rf?function(e,t){switch(e){case"compositionend":return ry(t);case"keypress":if(32!==t.which)return null;return rm=!0," ";case"textInput":return" "===(e=t.data)&&rm?null:e;default:return null}}(e,r):function(e,t){if(rv)return"compositionend"===e||!rd&&rg(e,t)?(e=tV(),tq=tZ=tB=null,rv=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rh&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(n=nu(n,"onBeforeInput")).length&&(a=new t7("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=g)}nt(i,t)})}function nl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function nu(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=eM(e,r))&&n.unshift(nl(e,s,a)),null!=(s=eM(e,t))&&n.push(nl(e,s,a))),e=e.return}return n}function nc(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag)return e||null}function nd(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==u&&(o=u,a?null!=(l=eM(r,s))&&i.unshift(nl(r,l,o)):a||null!=(l=eM(r,s))&&i.push(nl(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var np=/\r\n?/g,nf=/\u0000|\uFFFD/g;function nh(e){return("string"==typeof e?e:""+e).replace(np,"\n").replace(nf,"")}function nm(e,t,r){if(t=nh(t),nh(e)!==t&&r)throw Error(d(425))}function ng(){}var ny=null,nv=null;function nb(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var n_="function"==typeof setTimeout?setTimeout:void 0,nw="function"==typeof clearTimeout?clearTimeout:void 0,nj="function"==typeof Promise?Promise:void 0,nx="function"==typeof queueMicrotask?queueMicrotask:void 0!==nj?function(e){return nj.resolve(null).then(e).catch(nS)}:n_;function nS(e){setTimeout(function(){throw e})}function nk(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType){if("/$"===(r=a.data)){if(0===n){e.removeChild(a),tR(t);return}n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++}r=a}while(r)tR(t)}function nP(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function nO(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var nI=Math.random().toString(36).slice(2),nC="__reactFiber$"+nI,nE="__reactProps$"+nI,nT="__reactContainer$"+nI,nA="__reactEvents$"+nI,nR="__reactListeners$"+nI,nN="__reactHandles$"+nI;function nM(e){var t=e[nC];if(t)return t;for(var r=e.parentNode;r;){if(t=r[nT]||r[nC]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=nO(e);null!==e;){if(r=e[nC])return r;e=nO(e)}return t}r=(e=r).parentNode}return null}function nL(e){return(e=e[nC]||e[nT])&&(5===e.tag||6===e.tag||13===e.tag||3===e.tag)?e:null}function nF(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(d(33))}function n$(e){return e[nE]||null}var nD=[],nz=-1;function nU(e){return{current:e}}function nB(e){0>nz||(e.current=nD[nz],nD[nz]=null,nz--)}function nZ(e,t){nD[++nz]=e.current,e.current=t}var nq={},nV=nU(nq),nK=nU(!1),nH=nq;function nW(e,t){var r=e.type.contextTypes;if(!r)return nq;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function nJ(e){return null!=(e=e.childContextTypes)}function nQ(){nB(nK),nB(nV)}function nG(e,t,r){if(nV.current!==nq)throw Error(d(168));nZ(nV,t),nZ(nK,r)}function nY(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(d(108,function(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case C:return"Fragment";case I:return"Portal";case T:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case L:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case R:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case N:var r=t.render;return(t=t.displayName)||(t=""!==(t=r.displayName||r.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case F:return null!==(r=t.displayName||null)?r:e(t.type)||"Memo";case $:r=t._payload,t=t._init;try{return e(t(r))}catch(e){}}return null}(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}(e)||"Unknown",a));return Z({},r,n)}function nX(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nq,nH=nV.current,nZ(nV,e),nZ(nK,nK.current),!0}function n0(e,t,r){var n=e.stateNode;if(!n)throw Error(d(169));r?(e=nY(e,t,nH),n.__reactInternalMemoizedMergedChildContext=e,nB(nK),nB(nV),nZ(nV,e)):nB(nK),nZ(nK,r)}var n1=null,n2=!1,n4=!1;function n3(e){null===n1?n1=[e]:n1.push(e)}function n5(){if(!n4&&null!==n1){n4=!0;var e=0,t=tc;try{var r=n1;for(tc=1;e<r.length;e++){var n=r[e];do n=n(!0);while(null!==n)}n1=null,n2=!1}catch(t){throw null!==n1&&(n1=n1.slice(e+1)),eJ(e1,n5),t}finally{tc=t,n4=!1}}return null}var n6=[],n9=0,n8=null,n7=0,ae=[],at=0,ar=null,an=1,aa="";function as(e,t){n6[n9++]=n7,n6[n9++]=n8,n8=e,n7=t}function ai(e,t,r){ae[at++]=an,ae[at++]=aa,ae[at++]=ar,ar=e;var n=an;e=aa;var a=32-e8(n)-1;n&=~(1<<a),r+=1;var s=32-e8(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,an=1<<32-e8(t)+a|r<<a|n,aa=s+e}else an=1<<s|r<<a|n,aa=e}function ao(e){null!==e.return&&(as(e,1),ai(e,1,0))}function al(e){for(;e===n8;)n8=n6[--n9],n6[n9]=null,n7=n6[--n9],n6[n9]=null;for(;e===ar;)ar=ae[--at],ae[at]=null,aa=ae[--at],ae[at]=null,an=ae[--at],ae[at]=null}var au=null,ac=null,ad=!1,ap=null;function af(e,t){var r=oW(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ah(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,au=e,ac=nP(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,au=e,ac=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==ar?{id:an,overflow:aa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=oW(18,null,null,0)).stateNode=t,r.return=e,e.child=r,au=e,ac=null,!0);default:return!1}}function am(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ag(e){if(ad){var t=ac;if(t){var r=t;if(!ah(e,t)){if(am(e))throw Error(d(418));t=nP(r.nextSibling);var n=au;t&&ah(e,t)?af(n,r):(e.flags=-4097&e.flags|2,ad=!1,au=e)}}else{if(am(e))throw Error(d(418));e.flags=-4097&e.flags|2,ad=!1,au=e}}}function ay(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;au=e}function av(e){if(e!==au)return!1;if(!ad)return ay(e),ad=!0,!1;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nb(e.type,e.memoizedProps)),t&&(t=ac)){if(am(e))throw ab(),Error(d(418));for(;t;)af(e,t),t=nP(t.nextSibling)}if(ay(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(d(317));e:{for(t=0,e=e.nextSibling;e;){if(8===e.nodeType){var t,r=e.data;if("/$"===r){if(0===t){ac=nP(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ac=null}}else ac=au?nP(e.stateNode.nextSibling):null;return!0}function ab(){for(var e=ac;e;)e=nP(e.nextSibling)}function a_(){ac=au=null,ad=!1}function aw(e){null===ap?ap=[e]:ap.push(e)}var aj=P.ReactCurrentBatchConfig;function ax(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(d(309));var n=r.stateNode}if(!n)throw Error(d(147,e));var a=n,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=a.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(d(284));if(!r._owner)throw Error(d(290,e))}return e}function aS(e,t){throw Error(d(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ak(e){return(0,e._init)(e._payload)}function aP(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=oQ(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return(t.index=n,e)?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,n){return null===t||6!==t.tag?(t=o0(r,e.mode,n)).return=e:(t=a(t,r)).return=e,t}function l(e,t,r,n){var s=r.type;return s===C?c(e,t,r.props.children,n,r.key):(null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===$&&ak(s)===t.type)?(n=a(t,r.props)).ref=ax(e,t,r):(n=oG(r.type,r.key,r.props,null,e.mode,n)).ref=ax(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?(t=o1(r,e.mode,n)).return=e:(t=a(t,r.children||[])).return=e,t}function c(e,t,r,n,s){return null===t||7!==t.tag?(t=oY(r,e.mode,n,s)).return=e:(t=a(t,r)).return=e,t}function p(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=o0(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case O:return(r=oG(t.type,t.key,t.props,null,e.mode,r)).ref=ax(e,null,t),r.return=e,r;case I:return(t=o1(t,e.mode,r)).return=e,t;case $:return p(e,(0,t._init)(t._payload),r)}if(ea(t)||U(t))return(t=oY(t,e.mode,r,null)).return=e,t;aS(e,t)}return null}function f(e,t,r,n){var a=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==a?null:o(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case O:return r.key===a?l(e,t,r,n):null;case I:return r.key===a?u(e,t,r,n):null;case $:return f(e,t,(a=r._init)(r._payload),n)}if(ea(r)||U(r))return null!==a?null:c(e,t,r,n,null);aS(e,r)}return null}function h(e,t,r,n,a){if("string"==typeof n&&""!==n||"number"==typeof n)return o(t,e=e.get(r)||null,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case O:return l(t,e=e.get(null===n.key?r:n.key)||null,n,a);case I:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a);case $:return h(e,t,r,(0,n._init)(n._payload),a)}if(ea(n)||U(n))return c(t,e=e.get(r)||null,n,a,null);aS(t,n)}return null}return function o(l,u,c,m){if("object"==typeof c&&null!==c&&c.type===C&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case O:e:{for(var g=c.key,y=u;null!==y;){if(y.key===g){if((g=c.type)===C){if(7===y.tag){r(l,y.sibling),(u=a(y,c.props.children)).return=l,l=u;break e}}else if(y.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===$&&ak(g)===y.type){r(l,y.sibling),(u=a(y,c.props)).ref=ax(l,y,c),u.return=l,l=u;break e}r(l,y);break}t(l,y),y=y.sibling}c.type===C?((u=oY(c.props.children,l.mode,m,c.key)).return=l,l=u):((m=oG(c.type,c.key,c.props,null,l.mode,m)).ref=ax(l,u,c),m.return=l,l=m)}return i(l);case I:e:{for(y=c.key;null!==u;){if(u.key===y){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){r(l,u.sibling),(u=a(u,c.children||[])).return=l,l=u;break e}r(l,u);break}t(l,u),u=u.sibling}(u=o1(c,l.mode,m)).return=l,l=u}return i(l);case $:return o(l,u,(y=c._init)(c._payload),m)}if(ea(c))return function(a,i,o,l){for(var u=null,c=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(a,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(a,d),i=s(y,i,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===o.length)return r(a,d),ad&&as(a,m),u;if(null===d){for(;m<o.length;m++)null!==(d=p(a,o[m],l))&&(i=s(d,i,m),null===c?u=d:c.sibling=d,c=d);return ad&&as(a,m),u}for(d=n(a,d);m<o.length;m++)null!==(g=h(d,a,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=s(g,i,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(a,e)}),ad&&as(a,m),u}(l,u,c,m);if(U(c))return function(a,i,o,l){var u=U(o);if("function"!=typeof u)throw Error(d(150));if(null==(o=u.call(o)))throw Error(d(151));for(var c=u=null,m=i,g=i=0,y=null,v=o.next();null!==m&&!v.done;g++,v=o.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(a,m,v.value,l);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(a,m),i=s(b,i,g),null===c?u=b:c.sibling=b,c=b,m=y}if(v.done)return r(a,m),ad&&as(a,g),u;if(null===m){for(;!v.done;g++,v=o.next())null!==(v=p(a,v.value,l))&&(i=s(v,i,g),null===c?u=v:c.sibling=v,c=v);return ad&&as(a,g),u}for(m=n(a,m);!v.done;g++,v=o.next())null!==(v=h(m,a,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),i=s(v,i,g),null===c?u=v:c.sibling=v,c=v);return e&&m.forEach(function(e){return t(a,e)}),ad&&as(a,g),u}(l,u,c,m);aS(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c?(c=""+c,null!==u&&6===u.tag?(r(l,u.sibling),(u=a(u,c)).return=l):(r(l,u),(u=o0(c,l.mode,m)).return=l),i(l=u)):r(l,u)}}var aO=aP(!0),aI=aP(!1),aC=nU(null),aE=null,aT=null,aA=null;function aR(){aA=aT=aE=null}function aN(e){var t=aC.current;nB(aC),e._currentValue=t}function aM(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function aL(e,t){aE=e,aA=aT=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ii=!0),e.firstContext=null)}function aF(e){var t=e._currentValue;if(aA!==e){if(e={context:e,memoizedValue:t,next:null},null===aT){if(null===aE)throw Error(d(308));aT=e,aE.dependencies={lanes:0,firstContext:e}}else aT=aT.next=e}return t}var a$=null;function aD(e){null===a$?a$=[e]:a$.push(e)}function az(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,aD(t)):(r.next=a.next,a.next=r),t.interleaved=r,aU(e,n)}function aU(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var aB=!1;function aZ(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aq(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function aV(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aK(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&i3)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,aU(e,r)}return null===(a=n.interleaved)?(t.next=t,aD(n)):(t.next=a.next,a.next=t),n.interleaved=t,aU(e,r)}function aH(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&r))){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,tu(e,r)}}function aW(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r)null===s?a=s=t:s=s.next=t}else a=s=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function aJ(e,t,r,n){var a=e.updateQueue;aB=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,u=l.next;l.next=null,null===i?s=u:i.next=u,i=l;var c=e.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l)}if(null!==s){var d=a.baseState;for(i=0,c=u=l=null,o=s;;){var p=o.lane,f=o.eventTime;if((n&p)===p){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,m=o;switch(p=t,f=r,m.tag){case 1:if("function"==typeof(h=m.payload)){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(p="function"==typeof(h=m.payload)?h.call(f,d,p):h))break e;d=Z({},d,p);break e;case 2:aB=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,i|=p;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(p=o).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===c&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do i|=a.lane,a=a.next;while(a!==t)}else null===s&&(a.shared.lanes=0);or|=i,e.lanes=i,e.memoizedState=d}}function aQ(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!=typeof a)throw Error(d(191,a));a.call(n)}}}var aG={},aY=nU(aG),aX=nU(aG),a0=nU(aG);function a1(e){if(e===aG)throw Error(d(174));return e}function a2(e,t){switch(nZ(a0,t),nZ(aX,e),nZ(aY,aG),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ed(null,"");break;default:t=ed(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}nB(aY),nZ(aY,t)}function a4(){nB(aY),nB(aX),nB(a0)}function a3(e){a1(a0.current);var t=a1(aY.current),r=ed(t,e.type);t!==r&&(nZ(aX,e),nZ(aY,r))}function a5(e){aX.current===e&&(nB(aY),nB(aX))}var a6=nU(0);function a9(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var a8=[];function a7(){for(var e=0;e<a8.length;e++)a8[e]._workInProgressVersionPrimary=null;a8.length=0}var se=P.ReactCurrentDispatcher,st=P.ReactCurrentBatchConfig,sr=0,sn=null,sa=null,ss=null,si=!1,so=!1,sl=0,su=0;function sc(){throw Error(d(321))}function sd(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rL(e[r],t[r]))return!1;return!0}function sp(e,t,r,n,a,s){if(sr=s,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,se.current=null===e||null===e.memoizedState?sJ:sQ,e=r(n,a),so){s=0;do{if(so=!1,sl=0,25<=s)throw Error(d(301));s+=1,ss=sa=null,t.updateQueue=null,se.current=sG,e=r(n,a)}while(so)}if(se.current=sW,t=null!==sa&&null!==sa.next,sr=0,ss=sa=sn=null,si=!1,t)throw Error(d(300));return e}function sf(){var e=0!==sl;return sl=0,e}function sh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ss?sn.memoizedState=ss=e:ss=ss.next=e,ss}function sm(){if(null===sa){var e=sn.alternate;e=null!==e?e.memoizedState:null}else e=sa.next;var t=null===ss?sn.memoizedState:ss.next;if(null!==t)ss=t,sa=e;else{if(null===e)throw Error(d(310));e={memoizedState:(sa=e).memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},null===ss?sn.memoizedState=ss=e:ss=ss.next=e}return ss}function sg(e,t){return"function"==typeof t?t(e):t}function sy(e){var t=sm(),r=t.queue;if(null===r)throw Error(d(311));r.lastRenderedReducer=e;var n=sa,a=n.baseQueue,s=r.pending;if(null!==s){if(null!==a){var i=a.next;a.next=s.next,s.next=i}n.baseQueue=a=s,r.pending=null}if(null!==a){s=a.next,n=n.baseState;var o=i=null,l=null,u=s;do{var c=u.lane;if((sr&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var p={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(o=l=p,i=n):l=l.next=p,sn.lanes|=c,or|=c}u=u.next}while(null!==u&&u!==s)null===l?i=n:l.next=o,rL(n,t.memoizedState)||(ii=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do s=a.lane,sn.lanes|=s,or|=s,a=a.next;while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function sv(e){var t=sm(),r=t.queue;if(null===r)throw Error(d(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(null!==a){r.pending=null;var i=a=a.next;do s=e(s,i.action),i=i.next;while(i!==a)rL(s,t.memoizedState)||(ii=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function sb(){}function s_(e,t){var r=sn,n=sm(),a=t(),s=!rL(n.memoizedState,a);if(s&&(n.memoizedState=a,ii=!0),n=n.queue,sA(sx.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==ss&&1&ss.memoizedState.tag){if(r.flags|=2048,sO(9,sj.bind(null,r,n,a,t),void 0,null),null===i5)throw Error(d(349));0!=(30&sr)||sw(r,t,a)}return a}function sw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=sn.updateQueue)?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function sj(e,t,r,n){t.value=r,t.getSnapshot=n,sS(t)&&sk(e)}function sx(e,t,r){return r(function(){sS(t)&&sk(e)})}function sS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rL(e,r)}catch(e){return!0}}function sk(e){var t=aU(e,1);null!==t&&oj(t,e,1,-1)}function sP(e){var t=sh();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sg,lastRenderedState:e},t.queue=e,e=e.dispatch=sq.bind(null,sn,e),[t.memoizedState,e]}function sO(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=sn.updateQueue)?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function sI(){return sm().memoizedState}function sC(e,t,r,n){var a=sh();sn.flags|=e,a.memoizedState=sO(1|t,r,void 0,void 0===n?null:n)}function sE(e,t,r,n){var a=sm();n=void 0===n?null:n;var s=void 0;if(null!==sa){var i=sa.memoizedState;if(s=i.destroy,null!==n&&sd(n,i.deps)){a.memoizedState=sO(t,r,s,n);return}}sn.flags|=e,a.memoizedState=sO(1|t,r,s,n)}function sT(e,t){return sC(8390656,8,e,t)}function sA(e,t){return sE(2048,8,e,t)}function sR(e,t){return sE(4,2,e,t)}function sN(e,t){return sE(4,4,e,t)}function sM(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function sL(e,t,r){return r=null!=r?r.concat([e]):null,sE(4,4,sM.bind(null,t,e),r)}function sF(){}function s$(e,t){var r=sm();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&sd(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function sD(e,t){var r=sm();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&sd(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function sz(e,t,r){return 0==(21&sr)?(e.baseState&&(e.baseState=!1,ii=!0),e.memoizedState=r):(rL(r,t)||(r=ti(),sn.lanes|=r,or|=r,e.baseState=!0),t)}function sU(e,t){var r=tc;tc=0!==r&&4>r?r:4,e(!0);var n=st.transition;st.transition={};try{e(!1),t()}finally{tc=r,st.transition=n}}function sB(){return sm().memoizedState}function sZ(e,t,r){var n=ow(e);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},sV(e)?sK(t,r):null!==(r=az(e,t,r,n))&&(oj(r,e,n,o_()),sH(r,t,n))}function sq(e,t,r){var n=ow(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(sV(e))sK(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,rL(o,i)){var l=t.interleaved;null===l?(a.next=a,aD(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch(e){}finally{}null!==(r=az(e,t,a,n))&&(oj(r,e,n,a=o_()),sH(r,t,n))}}function sV(e){var t=e.alternate;return e===sn||null!==t&&t===sn}function sK(e,t){so=si=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function sH(e,t,r){if(0!=(4194240&r)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,tu(e,r)}}var sW={readContext:aF,useCallback:sc,useContext:sc,useEffect:sc,useImperativeHandle:sc,useInsertionEffect:sc,useLayoutEffect:sc,useMemo:sc,useReducer:sc,useRef:sc,useState:sc,useDebugValue:sc,useDeferredValue:sc,useTransition:sc,useMutableSource:sc,useSyncExternalStore:sc,useId:sc,unstable_isNewReconciler:!1},sJ={readContext:aF,useCallback:function(e,t){return sh().memoizedState=[e,void 0===t?null:t],e},useContext:aF,useEffect:sT,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,sC(4194308,4,sM.bind(null,t,e),r)},useLayoutEffect:function(e,t){return sC(4194308,4,e,t)},useInsertionEffect:function(e,t){return sC(4,2,e,t)},useMemo:function(e,t){var r=sh();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=sh();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=sZ.bind(null,sn,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},sh().memoizedState=e},useState:sP,useDebugValue:sF,useDeferredValue:function(e){return sh().memoizedState=e},useTransition:function(){var e=sP(!1),t=e[0];return e=sU.bind(null,e[1]),sh().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=sn,a=sh();if(ad){if(void 0===r)throw Error(d(407));r=r()}else{if(r=t(),null===i5)throw Error(d(349));0!=(30&sr)||sw(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,sT(sx.bind(null,n,s,e),[e]),n.flags|=2048,sO(9,sj.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=sh(),t=i5.identifierPrefix;if(ad){var r=aa,n=an;t=":"+t+"R"+(r=(n&~(1<<32-e8(n)-1)).toString(32)+r),0<(r=sl++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=su++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sQ={readContext:aF,useCallback:s$,useContext:aF,useEffect:sA,useImperativeHandle:sL,useInsertionEffect:sR,useLayoutEffect:sN,useMemo:sD,useReducer:sy,useRef:sI,useState:function(){return sy(sg)},useDebugValue:sF,useDeferredValue:function(e){return sz(sm(),sa.memoizedState,e)},useTransition:function(){return[sy(sg)[0],sm().memoizedState]},useMutableSource:sb,useSyncExternalStore:s_,useId:sB,unstable_isNewReconciler:!1},sG={readContext:aF,useCallback:s$,useContext:aF,useEffect:sA,useImperativeHandle:sL,useInsertionEffect:sR,useLayoutEffect:sN,useMemo:sD,useReducer:sv,useRef:sI,useState:function(){return sv(sg)},useDebugValue:sF,useDeferredValue:function(e){var t=sm();return null===sa?t.memoizedState=e:sz(t,sa.memoizedState,e)},useTransition:function(){return[sv(sg)[0],sm().memoizedState]},useMutableSource:sb,useSyncExternalStore:s_,useId:sB,unstable_isNewReconciler:!1};function sY(e,t){if(e&&e.defaultProps)for(var r in t=Z({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}function sX(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:Z({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var s0={isMounted:function(e){return!!(e=e._reactInternals)&&eV(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=o_(),a=ow(e),s=aV(n,a);s.payload=t,null!=r&&(s.callback=r),null!==(t=aK(e,s,a))&&(oj(t,e,a,n),aH(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=o_(),a=ow(e),s=aV(n,a);s.tag=1,s.payload=t,null!=r&&(s.callback=r),null!==(t=aK(e,s,a))&&(oj(t,e,a,n),aH(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=o_(),n=ow(e),a=aV(r,n);a.tag=2,null!=t&&(a.callback=t),null!==(t=aK(e,a,n))&&(oj(t,e,n,r),aH(t,e,n))}};function s1(e,t,r,n,a,s,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||!rF(r,n)||!rF(a,s)}function s2(e,t,r){var n=!1,a=nq,s=t.contextType;return"object"==typeof s&&null!==s?s=aF(s):(a=nJ(t)?nH:nV.current,s=(n=null!=(n=t.contextTypes))?nW(e,a):nq),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=s0,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function s4(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&s0.enqueueReplaceState(t,t.state,null)}function s3(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},aZ(e);var s=t.contextType;"object"==typeof s&&null!==s?a.context=aF(s):(s=nJ(t)?nH:nV.current,a.context=nW(e,s)),a.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(sX(e,t,s,r),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&s0.enqueueReplaceState(a,a.state,null),aJ(e,r,a,n),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function s5(e,t){try{var r="",n=t;do r+=function(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 1:return e=K(e.type,!0);default:return""}}(n),n=n.return;while(n)var a=r}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a,digest:null}}function s6(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function s9(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var s8="function"==typeof WeakMap?WeakMap:Map;function s7(e,t,r){(r=aV(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){oc||(oc=!0,od=n),s9(e,t)},r}function ie(e,t,r){(r=aV(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){s9(e,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(r.callback=function(){s9(e,t),"function"!=typeof n&&(null===op?op=new Set([this]):op.add(this));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})}),r}function it(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new s8;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=oZ.bind(null,e,t,r),t.then(e,e))}function ir(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e)return null}function ia(e,t,r,n,a){return 0==(1&e.mode)?e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=aV(-1,1)).tag=2,aK(r,t,1))),r.lanes|=1):(e.flags|=65536,e.lanes=a),e}var is=P.ReactCurrentOwner,ii=!1;function io(e,t,r,n){t.child=null===e?aI(t,null,r,n):aO(t,e.child,r,n)}function il(e,t,r,n,a){r=r.render;var s=t.ref;return(aL(t,a),n=sp(e,t,r,n,s,a),r=sf(),null===e||ii)?(ad&&r&&ao(t),t.flags|=1,io(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,iI(e,t,a))}function iu(e,t,r,n,a){if(null===e){var s=r.type;return"function"!=typeof s||oJ(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=oG(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ic(e,t,s,n,a))}if(s=e.child,0==(e.lanes&a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:rF)(i,n)&&e.ref===t.ref)return iI(e,t,a)}return t.flags|=1,(e=oQ(s,n)).ref=t.ref,e.return=t,t.child=e}function ic(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(rF(s,n)&&e.ref===t.ref){if(ii=!1,t.pendingProps=n=s,0==(e.lanes&a))return t.lanes=e.lanes,iI(e,t,a);0!=(131072&e.flags)&&(ii=!0)}}return ih(e,t,r,n,a)}function id(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nZ(i7,i8),i8|=r;else{if(0==(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nZ(i7,i8),i8|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,nZ(i7,i8),i8|=n}}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,nZ(i7,i8),i8|=n;return io(e,t,a,r),t.child}function ip(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ih(e,t,r,n,a){var s=nJ(r)?nH:nV.current;return(s=nW(t,s),aL(t,a),r=sp(e,t,r,n,s,a),n=sf(),null===e||ii)?(ad&&n&&ao(t),t.flags|=1,io(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,iI(e,t,a))}function im(e,t,r,n,a){if(nJ(r)){var s=!0;nX(t)}else s=!1;if(aL(t,a),null===t.stateNode)iO(e,t),s2(t,r,n),s3(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,u=r.contextType;u="object"==typeof u&&null!==u?aF(u):nW(t,u=nJ(r)?nH:nV.current);var c=r.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==n||l!==u)&&s4(t,i,n,u),aB=!1;var p=t.memoizedState;i.state=p,aJ(t,n,i,a),l=t.memoizedState,o!==n||p!==l||nK.current||aB?("function"==typeof c&&(sX(t,r,c,n),l=t.memoizedState),(o=aB||s1(t,r,o,n,p,l,u))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=u,n=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,aq(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:sY(t.type,o),i.props=u,d=t.pendingProps,p=i.context,l="object"==typeof(l=r.contextType)&&null!==l?aF(l):nW(t,l=nJ(r)?nH:nV.current);var f=r.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==d||p!==l)&&s4(t,i,n,l),aB=!1,p=t.memoizedState,i.state=p,aJ(t,n,i,a);var h=t.memoizedState;o!==d||p!==h||nK.current||aB?("function"==typeof f&&(sX(t,r,f,n),h=t.memoizedState),(u=aB||s1(t,r,u,n,p,h,l)||!1)?(c||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(n,h,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,h,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),i.props=n,i.state=h,i.context=l,n=u):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return ig(e,t,r,n,s,a)}function ig(e,t,r,n,a,s){ip(e,t);var i=0!=(128&t.flags);if(!n&&!i)return a&&n0(t,r,!1),iI(e,t,s);n=t.stateNode,is.current=t;var o=i&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=aO(t,e.child,null,s),t.child=aO(t,null,o,s)):io(e,t,o,s),t.memoizedState=n.state,a&&n0(t,r,!0),t.child}function iy(e){var t=e.stateNode;t.pendingContext?nG(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nG(e,t.context,!1),a2(e,t.containerInfo)}function iv(e,t,r,n,a){return a_(),aw(a),t.flags|=256,io(e,t,r,n),t.child}var ib={dehydrated:null,treeContext:null,retryLane:0};function i_(e){return{baseLanes:e,cachePool:null,transitions:null}}function iw(e,t,r){var n,a=t.pendingProps,s=a6.current,i=!1,o=0!=(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!=(2&s)),n?(i=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(s|=1),nZ(a6,1&s),null===e)return(ag(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated))?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=a.children,e=a.fallback,i?(a=t.mode,i=t.child,o={mode:"hidden",children:o},0==(1&a)&&null!==i?(i.childLanes=0,i.pendingProps=o):i=oX(o,a,0,null),e=oY(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=i_(r),t.memoizedState=ib,e):ij(t,o));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,a,s,i){if(r)return 256&t.flags?(t.flags&=-257,ix(e,t,i,n=s6(Error(d(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,a=t.mode,n=oX({mode:"visible",children:n.children},a,0,null),s=oY(s,a,i,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!=(1&t.mode)&&aO(t,e.child,null,i),t.child.memoizedState=i_(i),t.memoizedState=ib,s);if(0==(1&t.mode))return ix(e,t,i,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var o=n.dgst;return n=o,ix(e,t,i,n=s6(s=Error(d(419)),n,void 0))}if(o=0!=(i&e.childLanes),ii||o){if(null!==(n=i5)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!=(a&(n.suspendedLanes|i))?0:a)&&a!==s.retryLane&&(s.retryLane=a,aU(e,a),oj(n,e,a,-1))}return oM(),ix(e,t,i,n=s6(Error(d(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=oV.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ac=nP(a.nextSibling),au=t,ad=!0,ap=null,null!==e&&(ae[at++]=an,ae[at++]=aa,ae[at++]=ar,an=e.id,aa=e.overflow,ar=t),t=ij(t,n.children),t.flags|=4096,t)}(e,t,o,a,n,s,r);if(i){i=a.fallback,o=t.mode,n=(s=e.child).sibling;var l={mode:"hidden",children:a.children};return 0==(1&o)&&t.child!==s?((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null):(a=oQ(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==n?i=oQ(n,i):(i=oY(i,o,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,o=null===(o=e.child.memoizedState)?i_(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=ib,a}return e=(i=e.child).sibling,a=oQ(i,{mode:"visible",children:a.children}),0==(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function ij(e,t){return(t=oX({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ix(e,t,r,n){return null!==n&&aw(n),aO(t,e.child,null,r),e=ij(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iS(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),aM(e.return,t,r)}function ik(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function iP(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(io(e,t,n.children,r),0!=(2&(n=a6.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&iS(e,r,t);else if(19===e.tag)iS(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(nZ(a6,n),0==(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(a=null,r=t.child;null!==r;)null!==(e=r.alternate)&&null===a9(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ik(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===a9(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ik(t,!0,r,null,s);break;case"together":ik(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function iO(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function iI(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),or|=t.lanes,0==(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(d(153));if(null!==t.child){for(r=oQ(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=oQ(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function iC(e,t){if(!ad)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function iE(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}a=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},s=function(){},i=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,a1(aY.current);var s,i=null;switch(r){case"input":a=Y(e,a),n=Y(e,n),i=[];break;case"select":a=Z({},a,{value:void 0}),n=Z({},n,{value:void 0}),i=[];break;case"textarea":a=ei(e,a),n=ei(e,n),i=[];break;default:"function"!=typeof a.onClick&&"function"==typeof n.onClick&&(e.onclick=ng)}for(u in ew(r,n),r=null,a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u]){if("style"===u){var o=a[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(f.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null))}for(u in n){var l=n[u];if(o=null!=a?a[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(null!=l||null!=o)){if("style"===u){if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(i||(i=[]),i.push(u,r)),r=l}else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(i=i||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(i=i||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(f.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&nr("scroll",e),i||o===l||(i=[])):(i=i||[]).push(u,l))}}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},o=function(e,t,r,n){r!==n&&(t.flags|=4)};var iT=!1,iA=!1,iR="function"==typeof WeakSet?WeakSet:Set,iN=null;function iM(e,t){var r=e.ref;if(null!==r){if("function"==typeof r)try{r(null)}catch(r){oB(e,t,r)}else r.current=null}}function iL(e,t,r){try{r()}catch(r){oB(e,t,r)}}var iF=!1;function i$(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&iL(t,r,s)}a=a.next}while(a!==n)}}function iD(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function iz(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function iU(e){return 5===e.tag||3===e.tag||4===e.tag}function iB(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||iU(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var iZ=null,iq=!1;function iV(e,t,r){for(r=r.child;null!==r;)iK(e,t,r),r=r.sibling}function iK(e,t,r){if(e9&&"function"==typeof e9.onCommitFiberUnmount)try{e9.onCommitFiberUnmount(e6,r)}catch(e){}switch(r.tag){case 5:iA||iM(r,t);case 6:var n=iZ,a=iq;iZ=null,iV(e,t,r),iZ=n,iq=a,null!==iZ&&(iq?(e=iZ,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):iZ.removeChild(r.stateNode));break;case 18:null!==iZ&&(iq?(e=iZ,r=r.stateNode,8===e.nodeType?nk(e.parentNode,r):1===e.nodeType&&nk(e,r),tR(e)):nk(iZ,r.stateNode));break;case 4:n=iZ,a=iq,iZ=r.stateNode.containerInfo,iq=!0,iV(e,t,r),iZ=n,iq=a;break;case 0:case 11:case 14:case 15:if(!iA&&null!==(n=r.updateQueue)&&null!==(n=n.lastEffect)){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!=(2&s)?iL(r,t,i):0!=(4&s)&&iL(r,t,i)),a=a.next}while(a!==n)}iV(e,t,r);break;case 1:if(!iA&&(iM(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(e){oB(r,t,e)}iV(e,t,r);break;case 21:default:iV(e,t,r);break;case 22:1&r.mode?(iA=(n=iA)||null!==r.memoizedState,iV(e,t,r),iA=n):iV(e,t,r)}}function iH(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new iR),t.forEach(function(t){var n=oK.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function iW(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,i=s;e:for(;null!==i;){switch(i.tag){case 5:iZ=i.stateNode,iq=!1;break e;case 3:case 4:iZ=i.stateNode.containerInfo,iq=!0;break e}i=i.return}if(null===iZ)throw Error(d(160));iK(e,s,a),iZ=null,iq=!1;var o=a.alternate;null!==o&&(o.return=null),a.return=null}catch(e){oB(a,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)iJ(t,e),t=t.sibling}function iJ(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(iW(t,e),iQ(e),4&n){try{i$(3,e,e.return),iD(3,e)}catch(t){oB(e,e.return,t)}try{i$(5,e,e.return)}catch(t){oB(e,e.return,t)}}break;case 1:iW(t,e),iQ(e),512&n&&null!==r&&iM(r,r.return);break;case 5:if(iW(t,e),iQ(e),512&n&&null!==r&&iM(r,r.return),32&e.flags){var a=e.stateNode;try{em(a,"")}catch(t){oB(e,e.return,t)}}if(4&n&&null!=(a=e.stateNode)){var s=e.memoizedProps,i=null!==r?r.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===s.type&&null!=s.name&&ee(a,s),ej(o,i);var u=ej(o,s);for(i=0;i<l.length;i+=2){var c=l[i],p=l[i+1];"style"===c?eb(a,p):"dangerouslySetInnerHTML"===c?eh(a,p):"children"===c?em(a,p):k(a,c,p,u)}switch(o){case"input":et(a,s);break;case"textarea":el(a,s);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var h=s.value;null!=h?es(a,!!s.multiple,h,!1):!!s.multiple!==f&&(null!=s.defaultValue?es(a,!!s.multiple,s.defaultValue,!0):es(a,!!s.multiple,s.multiple?[]:"",!1))}a[nE]=s}catch(t){oB(e,e.return,t)}}break;case 6:if(iW(t,e),iQ(e),4&n){if(null===e.stateNode)throw Error(d(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(t){oB(e,e.return,t)}}break;case 3:if(iW(t,e),iQ(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{tR(t.containerInfo)}catch(t){oB(e,e.return,t)}break;case 4:default:iW(t,e),iQ(e);break;case 13:iW(t,e),iQ(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,s&&(null===a.alternate||null===a.alternate.memoizedState)&&(oo=eX())),4&n&&iH(e);break;case 22:if(c=null!==r&&null!==r.memoizedState,1&e.mode?(iA=(u=iA)||c,iW(t,e),iA=u):iW(t,e),iQ(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&0!=(1&e.mode))for(iN=e,c=e.child;null!==c;){for(p=iN=c;null!==iN;){switch(h=(f=iN).child,f.tag){case 0:case 11:case 14:case 15:i$(4,f,f.return);break;case 1:iM(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){oB(n,r,e)}}break;case 5:iM(f,f.return);break;case 22:if(null!==f.memoizedState){iY(p);continue}}null!==h?(h.return=f,iN=h):iY(p)}c=c.sibling}e:for(c=null,p=e;;){if(5===p.tag){if(null===c){c=p;try{a=p.stateNode,u?(s=a.style,"function"==typeof s.setProperty?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,i=null!=(l=p.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=ev("display",i))}catch(t){oB(e,e.return,t)}}}else if(6===p.tag){if(null===c)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(t){oB(e,e.return,t)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;c===p&&(c=null),p=p.return}c===p&&(c=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:iW(t,e),iQ(e),4&n&&iH(e);case 21:}}function iQ(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(iU(r)){var n=r;break e}r=r.return}throw Error(d(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(em(a,""),n.flags&=-33);var s=iB(e);!function e(t,r,n){var a=t.tag;if(5===a||6===a)t=t.stateNode,r?n.insertBefore(t,r):n.appendChild(t);else if(4!==a&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,s,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=iB(e);!function e(t,r,n){var a=t.tag;if(5===a||6===a)t=t.stateNode,r?8===n.nodeType?n.parentNode.insertBefore(t,r):n.insertBefore(t,r):(8===n.nodeType?(r=n.parentNode).insertBefore(t,n):(r=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==r.onclick||(r.onclick=ng));else if(4!==a&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,o,i);break;default:throw Error(d(161))}}catch(t){oB(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function iG(e){for(;null!==iN;){var t=iN;if(0!=(8772&t.flags)){var r=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:iA||iD(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!iA){if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:sY(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}}var s=t.updateQueue;null!==s&&aQ(t,s,n);break;case 3:var i=t.updateQueue;if(null!==i){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}aQ(t,i,r)}break;case 5:var o=t.stateNode;if(null===r&&4&t.flags){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var p=c.dehydrated;null!==p&&tR(p)}}}break;default:throw Error(d(163))}iA||512&t.flags&&iz(t)}catch(e){oB(t,t.return,e)}}if(t===e){iN=null;break}if(null!==(r=t.sibling)){r.return=t.return,iN=r;break}iN=t.return}}function iY(e){for(;null!==iN;){var t=iN;if(t===e){iN=null;break}var r=t.sibling;if(null!==r){r.return=t.return,iN=r;break}iN=t.return}}function iX(e){for(;null!==iN;){var t=iN;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{iD(4,t)}catch(e){oB(t,r,e)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(e){oB(t,a,e)}}var s=t.return;try{iz(t)}catch(e){oB(t,s,e)}break;case 5:var i=t.return;try{iz(t)}catch(e){oB(t,i,e)}}}catch(e){oB(t,t.return,e)}if(t===e){iN=null;break}var o=t.sibling;if(null!==o){o.return=t.return,iN=o;break}iN=t.return}}var i0=Math.ceil,i1=P.ReactCurrentDispatcher,i2=P.ReactCurrentOwner,i4=P.ReactCurrentBatchConfig,i3=0,i5=null,i6=null,i9=0,i8=0,i7=nU(0),oe=0,ot=null,or=0,on=0,oa=0,os=null,oi=null,oo=0,ol=1/0,ou=null,oc=!1,od=null,op=null,of=!1,oh=null,om=0,og=0,oy=null,ov=-1,ob=0;function o_(){return 0!=(6&i3)?eX():-1!==ov?ov:ov=eX()}function ow(e){return 0==(1&e.mode)?1:0!=(2&i3)&&0!==i9?i9&-i9:null!==aj.transition?(0===ob&&(ob=ti()),ob):0!==(e=tc)?e:e=void 0===(e=window.event)?16:tU(e.type)}function oj(e,t,r,n){if(50<og)throw og=0,oy=null,Error(d(185));tl(e,r,n),(0==(2&i3)||e!==i5)&&(e===i5&&(0==(2&i3)&&(on|=r),4===oe&&oO(e,i9)),ox(e,n),1===r&&0===i3&&0==(1&t.mode)&&(ol=eX()+500,n2&&n5()))}function ox(e,t){var r,n=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-e8(s),o=1<<i,l=a[i];-1===l?(0==(o&r)||0!=(o&n))&&(a[i]=function(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var a=ta(e,e===i5?i9:0);if(0===a)null!==n&&eQ(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&eQ(n),1===t)0===e.tag?(r=oI.bind(null,e),n2=!0,n3(r)):n3(oI.bind(null,e)),nx(function(){0==(6&i3)&&n5()}),n=null;else{switch(td(a)){case 1:n=e1;break;case 4:n=e2;break;case 16:default:n=e4;break;case 536870912:n=e5}n=eJ(n,oS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oS(e,t){if(ov=-1,ob=0,0!=(6&i3))throw Error(d(327));var r=e.callbackNode;if(oz()&&e.callbackNode!==r)return null;var n=ta(e,e===i5?i9:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||t)t=oL(e,n);else{t=n;var a=i3;i3|=2;var s=oN();for((i5!==e||i9!==t)&&(ou=null,ol=eX()+500,oA(e,t));;)try{(function(){for(;null!==i6&&!eG();)oF(i6)})();break}catch(t){oR(e,t)}aR(),i1.current=s,i3=a,null!==i6?t=0:(i5=null,i9=0,t=oe)}if(0!==t){if(2===t&&0!==(a=ts(e))&&(n=a,t=ok(e,a)),1===t)throw r=ot,oA(e,0),oO(e,n),ox(e,eX()),r;if(6===t)oO(e,n);else{if(a=e.current.alternate,0==(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!rL(s(),a))return!1}catch(e){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=oL(e,n))&&0!==(s=ts(e))&&(n=s,t=ok(e,s)),1===t))throw r=ot,oA(e,0),oO(e,n),ox(e,eX()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(d(345));case 2:case 5:oD(e,oi,ou);break;case 3:if(oO(e,n),(130023424&n)===n&&10<(t=oo+500-eX())){if(0!==ta(e,0))break;if(((a=e.suspendedLanes)&n)!==n){o_(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=n_(oD.bind(null,e,oi,ou),t);break}oD(e,oi,ou);break;case 4:if(oO(e,n),(4194240&n)===n)break;for(a=-1,t=e.eventTimes;0<n;){var i=31-e8(n);s=1<<i,(i=t[i])>a&&(a=i),n&=~s}if(n=a,10<(n=(120>(n=eX()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*i0(n/1960))-n)){e.timeoutHandle=n_(oD.bind(null,e,oi,ou),n);break}oD(e,oi,ou);break;default:throw Error(d(329))}}}return ox(e,eX()),e.callbackNode===r?oS.bind(null,e):null}function ok(e,t){var r=os;return e.current.memoizedState.isDehydrated&&(oA(e,t).flags|=256),2!==(e=oL(e,t))&&(t=oi,oi=r,null!==t&&oP(t)),e}function oP(e){null===oi?oi=e:oi.push.apply(oi,e)}function oO(e,t){for(t&=~oa,t&=~on,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-e8(t),n=1<<r;e[r]=-1,t&=~n}}function oI(e){if(0!=(6&i3))throw Error(d(327));oz();var t=ta(e,0);if(0==(1&t))return ox(e,eX()),null;var r=oL(e,t);if(0!==e.tag&&2===r){var n=ts(e);0!==n&&(t=n,r=ok(e,n))}if(1===r)throw r=ot,oA(e,0),oO(e,t),ox(e,eX()),r;if(6===r)throw Error(d(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,oD(e,oi,ou),ox(e,eX()),null}function oC(e,t){var r=i3;i3|=1;try{return e(t)}finally{0===(i3=r)&&(ol=eX()+500,n2&&n5())}}function oE(e){null!==oh&&0===oh.tag&&0==(6&i3)&&oz();var t=i3;i3|=1;var r=i4.transition,n=tc;try{if(i4.transition=null,tc=1,e)return e()}finally{tc=n,i4.transition=r,0==(6&(i3=t))&&n5()}}function oT(){i8=i7.current,nB(i7)}function oA(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,nw(r)),null!==i6)for(r=i6.return;null!==r;){var n=r;switch(al(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&nQ();break;case 3:a4(),nB(nK),nB(nV),a7();break;case 5:a5(n);break;case 4:a4();break;case 13:case 19:nB(a6);break;case 10:aN(n.type._context);break;case 22:case 23:oT()}r=r.return}if(i5=e,i6=e=oQ(e.current,null),i9=i8=t,oe=0,ot=null,oa=on=or=0,oi=os=null,null!==a$){for(t=0;t<a$.length;t++)if(null!==(n=(r=a$[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var i=s.next;s.next=a,n.next=i}r.pending=n}a$=null}return e}function oR(e,t){for(;;){var r=i6;try{if(aR(),se.current=sW,si){for(var n=sn.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}si=!1}if(sr=0,ss=sa=sn=null,so=!1,sl=0,i2.current=null,null===r||null===r.return){oe=1,ot=t,i6=null;break}e:{var s=e,i=r.return,o=r,l=t;if(t=i9,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=o,p=c.tag;if(0==(1&c.mode)&&(0===p||11===p||15===p)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=ir(i);if(null!==h){h.flags&=-257,ia(h,i,o,s,t),1&h.mode&&it(s,u,t),t=h,l=u;var m=t.updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0==(1&t)){it(s,u,t),oM();break e}l=Error(d(426))}else if(ad&&1&o.mode){var y=ir(i);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),ia(y,i,o,s,t),aw(s5(l,o));break e}}s=l=s5(l,o),4!==oe&&(oe=2),null===os?os=[s]:os.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=s7(s,l,t);aW(s,v);break e;case 1:o=l;var b=s.type,_=s.stateNode;if(0==(128&s.flags)&&("function"==typeof b.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===op||!op.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=ie(s,o,t);aW(s,w);break e}}s=s.return}while(null!==s)}o$(r)}catch(e){t=e,i6===r&&null!==r&&(i6=r=r.return);continue}break}}function oN(){var e=i1.current;return i1.current=sW,null===e?sW:e}function oM(){(0===oe||3===oe||2===oe)&&(oe=4),null===i5||0==(268435455&or)&&0==(268435455&on)||oO(i5,i9)}function oL(e,t){var r=i3;i3|=2;var n=oN();for((i5!==e||i9!==t)&&(ou=null,oA(e,t));;)try{(function(){for(;null!==i6;)oF(i6)})();break}catch(t){oR(e,t)}if(aR(),i3=r,i1.current=n,null!==i6)throw Error(d(261));return i5=null,i9=0,oe}function oF(e){var t=l(e.alternate,e,i8);e.memoizedProps=e.pendingProps,null===t?o$(e):i6=t,i2.current=null}function o$(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(r=function(e,t,r){var n=t.pendingProps;switch(al(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return iE(t),null;case 1:case 17:return nJ(t.type)&&nQ(),iE(t),null;case 3:return n=t.stateNode,a4(),nB(nK),nB(nV),a7(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&(av(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ap&&(oP(ap),ap=null))),s(e,t),iE(t),null;case 5:a5(t);var l=a1(a0.current);if(r=t.type,null!==e&&null!=t.stateNode)i(e,t,r,n,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(d(166));return iE(t),null}if(e=a1(aY.current),av(t)){n=t.stateNode,r=t.type;var u=t.memoizedProps;switch(n[nC]=t,n[nE]=u,e=0!=(1&t.mode),r){case"dialog":nr("cancel",n),nr("close",n);break;case"iframe":case"object":case"embed":nr("load",n);break;case"video":case"audio":for(l=0;l<r8.length;l++)nr(r8[l],n);break;case"source":nr("error",n);break;case"img":case"image":case"link":nr("error",n),nr("load",n);break;case"details":nr("toggle",n);break;case"input":X(n,u),nr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!u.multiple},nr("invalid",n);break;case"textarea":eo(n,u),nr("invalid",n)}for(var c in ew(r,u),l=null,u)if(u.hasOwnProperty(c)){var p=u[c];"children"===c?"string"==typeof p?n.textContent!==p&&(!0!==u.suppressHydrationWarning&&nm(n.textContent,p,e),l=["children",p]):"number"==typeof p&&n.textContent!==""+p&&(!0!==u.suppressHydrationWarning&&nm(n.textContent,p,e),l=["children",""+p]):f.hasOwnProperty(c)&&null!=p&&"onScroll"===c&&nr("scroll",n)}switch(r){case"input":J(n),er(n,u,!0);break;case"textarea":J(n),eu(n);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(n.onclick=ng)}n=l,t.updateQueue=n,null!==n&&(t.flags|=4)}else{c=9===l.nodeType?l:l.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ec(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=c.createElement("div")).innerHTML="<script></script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),"select"===r&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[nC]=t,e[nE]=n,a(e,t,!1,!1),t.stateNode=e;e:{switch(c=ej(r,n),r){case"dialog":nr("cancel",e),nr("close",e),l=n;break;case"iframe":case"object":case"embed":nr("load",e),l=n;break;case"video":case"audio":for(l=0;l<r8.length;l++)nr(r8[l],e);l=n;break;case"source":nr("error",e),l=n;break;case"img":case"image":case"link":nr("error",e),nr("load",e),l=n;break;case"details":nr("toggle",e),l=n;break;case"input":X(e,n),l=Y(e,n),nr("invalid",e);break;case"option":default:l=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},l=Z({},n,{value:void 0}),nr("invalid",e);break;case"textarea":eo(e,n),l=ei(e,n),nr("invalid",e)}for(u in ew(r,l),p=l)if(p.hasOwnProperty(u)){var h=p[u];"style"===u?eb(e,h):"dangerouslySetInnerHTML"===u?null!=(h=h?h.__html:void 0)&&eh(e,h):"children"===u?"string"==typeof h?("textarea"!==r||""!==h)&&em(e,h):"number"==typeof h&&em(e,""+h):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(f.hasOwnProperty(u)?null!=h&&"onScroll"===u&&nr("scroll",e):null!=h&&k(e,u,h,c))}switch(r){case"input":J(e),er(e,n,!1);break;case"textarea":J(e),eu(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(u=n.value)?es(e,!!n.multiple,u,!1):null!=n.defaultValue&&es(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=ng)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return iE(t),null;case 6:if(e&&null!=t.stateNode)o(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(d(166));if(r=a1(a0.current),a1(aY.current),av(t)){if(n=t.stateNode,r=t.memoizedProps,n[nC]=t,(u=n.nodeValue!==r)&&null!==(e=au))switch(e.tag){case 3:nm(n.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&nm(n.nodeValue,r,0!=(1&e.mode))}u&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[nC]=t,t.stateNode=n}return iE(t),null;case 13:if(nB(a6),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ad&&null!==ac&&0!=(1&t.mode)&&0==(128&t.flags))ab(),a_(),t.flags|=98560,u=!1;else if(u=av(t),null!==n&&null!==n.dehydrated){if(null===e){if(!u)throw Error(d(318));if(!(u=null!==(u=t.memoizedState)?u.dehydrated:null))throw Error(d(317));u[nC]=t}else a_(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;iE(t),u=!1}else null!==ap&&(oP(ap),ap=null),u=!0;if(!u)return 65536&t.flags?t:null}if(0!=(128&t.flags))return t.lanes=r,t;return(n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&a6.current)?0===oe&&(oe=3):oM())),null!==t.updateQueue&&(t.flags|=4),iE(t),null;case 4:return a4(),s(e,t),null===e&&ns(t.stateNode.containerInfo),iE(t),null;case 10:return aN(t.type._context),iE(t),null;case 19:if(nB(a6),null===(u=t.memoizedState))return iE(t),null;if(n=0!=(128&t.flags),null===(c=u.rendering)){if(n)iC(u,!1);else{if(0!==oe||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=a9(e))){for(t.flags|=128,iC(u,!1),null!==(n=c.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)u=r,e=n,u.flags&=14680066,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return nZ(a6,1&a6.current|2),t.child}e=e.sibling}null!==u.tail&&eX()>ol&&(t.flags|=128,n=!0,iC(u,!1),t.lanes=4194304)}}else{if(!n){if(null!==(e=a9(c))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),iC(u,!0),null===u.tail&&"hidden"===u.tailMode&&!c.alternate&&!ad)return iE(t),null}else 2*eX()-u.renderingStartTime>ol&&1073741824!==r&&(t.flags|=128,n=!0,iC(u,!1),t.lanes=4194304)}u.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=u.last)?r.sibling=c:t.child=c,u.last=c)}if(null!==u.tail)return t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=eX(),t.sibling=null,r=a6.current,nZ(a6,n?1&r|2:1&r),t;return iE(t),null;case 22:case 23:return oT(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!=(1&t.mode)?0!=(1073741824&i8)&&(iE(t),6&t.subtreeFlags&&(t.flags|=8192)):iE(t),null;case 24:case 25:return null}throw Error(d(156,t.tag))}(r,t,i8))){i6=r;return}}else{if(null!==(r=function(e,t){switch(al(t),t.tag){case 1:return nJ(t.type)&&nQ(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return a4(),nB(nK),nB(nV),a7(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return a5(t),null;case 13:if(nB(a6),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(d(340));a_()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return nB(a6),null;case 4:return a4(),null;case 10:return aN(t.type._context),null;case 22:case 23:return oT(),null;default:return null}}(r,t))){r.flags&=32767,i6=r;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oe=6,i6=null;return}}if(null!==(t=t.sibling)){i6=t;return}i6=t=e}while(null!==t)0===oe&&(oe=5)}function oD(e,t,r){var n=tc,a=i4.transition;try{i4.transition=null,tc=1,function(e,t,r,n){do oz();while(null!==oh)if(0!=(6&i3))throw Error(d(327));r=e.finishedWork;var a=e.finishedLanes;if(null!==r){if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(d(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-e8(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,s),e===i5&&(i6=i5=null,i9=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||of||(of=!0,i=function(){return oz(),null},eJ(e4,i)),s=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||s){s=i4.transition,i4.transition=null;var i,o,l,u,c=tc;tc=1;var p=i3;i3|=4,i2.current=null,function(e,t){if(ny=tM,rU(e=rz())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a,s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(e){r=null;break e}var o=0,l=-1,u=-1,c=0,p=0,f=e,h=null;t:for(;;){for(;f!==r||0!==s&&3!==f.nodeType||(l=o+s),f!==i||0!==n&&3!==f.nodeType||(u=o+n),3===f.nodeType&&(o+=f.nodeValue.length),null!==(a=f.firstChild);)h=f,f=a;for(;;){if(f===e)break t;if(h===r&&++c===s&&(l=o),h===i&&++p===n&&(u=o),null!==(a=f.nextSibling))break;h=(f=h).parentNode}f=a}r=-1===l||-1===u?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(nv={focusedElem:e,selectionRange:r},tM=!1,iN=t;null!==iN;)if(e=(t=iN).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,iN=e;else for(;null!==iN;){t=iN;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:sY(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(d(163))}}catch(e){oB(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,iN=e;break}iN=t.return}m=iF,iF=!1}(e,r),iJ(r,e),function(e){var t=rz(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&function e(t,r){return!!t&&!!r&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(r.ownerDocument.documentElement,r)){if(null!==n&&rU(r)){if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=rD(r,s);var i=rD(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}(nv),tM=!!ny,nv=ny=null,e.current=r,o=r,l=e,u=a,iN=o,function e(t,r,n){for(var a=0!=(1&t.mode);null!==iN;){var s=iN,i=s.child;if(22===s.tag&&a){var o=null!==s.memoizedState||iT;if(!o){var l=s.alternate,u=null!==l&&null!==l.memoizedState||iA;l=iT;var c=iA;if(iT=o,(iA=u)&&!c)for(iN=s;null!==iN;)u=(o=iN).child,22===o.tag&&null!==o.memoizedState?iX(s):null!==u?(u.return=o,iN=u):iX(s);for(;null!==i;)iN=i,e(i,r,n),i=i.sibling;iN=s,iT=l,iA=c}iG(t,r,n)}else 0!=(8772&s.subtreeFlags)&&null!==i?(i.return=s,iN=i):iG(t,r,n)}}(o,l,u),eY(),i3=p,tc=c,i4.transition=s}else e.current=r;if(of&&(of=!1,oh=e,om=a),0===(s=e.pendingLanes)&&(op=null),function(e){if(e9&&"function"==typeof e9.onCommitFiberRoot)try{e9.onCommitFiberRoot(e6,e,void 0,128==(128&e.current.flags))}catch(e){}}(r.stateNode,n),ox(e,eX()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n((a=t[r]).value,{componentStack:a.stack,digest:a.digest});if(oc)throw oc=!1,e=od,od=null,e;0!=(1&om)&&0!==e.tag&&oz(),0!=(1&(s=e.pendingLanes))?e===oy?og++:(og=0,oy=e):og=0,n5()}}(e,t,r,n)}finally{i4.transition=a,tc=n}return null}function oz(){if(null!==oh){var e=td(om),t=i4.transition,r=tc;try{if(i4.transition=null,tc=16>e?16:e,null===oh)var n=!1;else{if(e=oh,oh=null,om=0,0!=(6&i3))throw Error(d(331));var a=i3;for(i3|=4,iN=e.current;null!==iN;){var s=iN,i=s.child;if(0!=(16&iN.flags)){var o=s.deletions;if(null!==o){for(var l=0;l<o.length;l++){var u=o[l];for(iN=u;null!==iN;){var c=iN;switch(c.tag){case 0:case 11:case 15:i$(8,c,s)}var p=c.child;if(null!==p)p.return=c,iN=p;else for(;null!==iN;){var f=(c=iN).sibling,h=c.return;if(function e(t){var r=t.alternate;null!==r&&(t.alternate=null,e(r)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(r=t.stateNode)&&(delete r[nC],delete r[nE],delete r[nA],delete r[nR],delete r[nN]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(c),c===u){iN=null;break}if(null!==f){f.return=h,iN=f;break}iN=h}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}iN=s}}if(0!=(2064&s.subtreeFlags)&&null!==i)i.return=s,iN=i;else for(;null!==iN;){if(s=iN,0!=(2048&s.flags))switch(s.tag){case 0:case 11:case 15:i$(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,iN=v;break}iN=s.return}}var b=e.current;for(iN=b;null!==iN;){var _=(i=iN).child;if(0!=(2064&i.subtreeFlags)&&null!==_)_.return=i,iN=_;else for(i=b;null!==iN;){if(o=iN,0!=(2048&o.flags))try{switch(o.tag){case 0:case 11:case 15:iD(9,o)}}catch(e){oB(o,o.return,e)}if(o===i){iN=null;break}var w=o.sibling;if(null!==w){w.return=o.return,iN=w;break}iN=o.return}}if(i3=a,n5(),e9&&"function"==typeof e9.onPostCommitFiberRoot)try{e9.onPostCommitFiberRoot(e6,e)}catch(e){}n=!0}return n}finally{tc=r,i4.transition=t}}return!1}function oU(e,t,r){t=s7(e,t=s5(r,t),1),e=aK(e,t,1),t=o_(),null!==e&&(tl(e,1,t),ox(e,t))}function oB(e,t,r){if(3===e.tag)oU(e,e,r);else for(;null!==t;){if(3===t.tag){oU(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===op||!op.has(n))){e=ie(t,e=s5(r,e),1),t=aK(t,e,1),e=o_(),null!==t&&(tl(t,1,e),ox(t,e));break}}t=t.return}}function oZ(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=o_(),e.pingedLanes|=e.suspendedLanes&r,i5===e&&(i9&r)===r&&(4===oe||3===oe&&(130023424&i9)===i9&&500>eX()-oo?oA(e,0):oa|=r),ox(e,t)}function oq(e,t){0===t&&(0==(1&e.mode)?t=1:(t=tr,0==(130023424&(tr<<=1))&&(tr=4194304)));var r=o_();null!==(e=aU(e,t))&&(tl(e,t,r),ox(e,r))}function oV(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),oq(e,r)}function oK(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(d(314))}null!==n&&n.delete(t),oq(e,r)}function oH(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oW(e,t,r,n){return new oH(e,t,r,n)}function oJ(e){return!(!(e=e.prototype)||!e.isReactComponent)}function oQ(e,t){var r=e.alternate;return null===r?((r=oW(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function oG(e,t,r,n,a,s){var i=2;if(n=e,"function"==typeof e)oJ(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case C:return oY(r.children,a,s,t);case E:i=8,a|=8;break;case T:return(e=oW(12,r,t,2|a)).elementType=T,e.lanes=s,e;case M:return(e=oW(13,r,t,a)).elementType=M,e.lanes=s,e;case L:return(e=oW(19,r,t,a)).elementType=L,e.lanes=s,e;case D:return oX(r,a,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case A:i=10;break e;case R:i=9;break e;case N:i=11;break e;case F:i=14;break e;case $:i=16,n=null;break e}throw Error(d(130,null==e?e:typeof e,""))}return(t=oW(i,r,t,a)).elementType=e,t.type=n,t.lanes=s,t}function oY(e,t,r,n){return(e=oW(7,e,n,t)).lanes=r,e}function oX(e,t,r,n){return(e=oW(22,e,n,t)).elementType=D,e.lanes=r,e.stateNode={isHidden:!1},e}function o0(e,t,r){return(e=oW(6,e,null,t)).lanes=r,e}function o1(e,t,r){return(t=oW(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function o2(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=to(0),this.expirationTimes=to(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function o4(e,t,r,n,a,s,i,o,l){return e=new o2(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=oW(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},aZ(s),e}function o3(e){if(!e)return nq;e=e._reactInternals;e:{if(eV(e)!==e||1!==e.tag)throw Error(d(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nJ(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t)throw Error(d(171))}if(1===e.tag){var r=e.type;if(nJ(r))return nY(e,r,t)}return t}function o5(e,t,r,n,a,s,i,o,l){return(e=o4(r,n,!0,e,a,s,i,o,l)).context=o3(null),r=e.current,(s=aV(n=o_(),a=ow(r))).callback=null!=t?t:null,aK(r,s,a),e.current.lanes=a,tl(e,a,n),ox(e,n),e}function o6(e,t,r,n){var a=t.current,s=o_(),i=ow(a);return r=o3(r),null===t.context?t.context=r:t.pendingContext=r,(t=aV(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=aK(a,t,i))&&(oj(e,a,i,s),aH(e,a,i)),i}function o9(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function o8(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function o7(e,t){o8(e,t),(e=e.alternate)&&o8(e,t)}l=function(e,t,r){if(null!==e){if(e.memoizedProps!==t.pendingProps||nK.current)ii=!0;else{if(0==(e.lanes&r)&&0==(128&t.flags))return ii=!1,function(e,t,r){switch(t.tag){case 3:iy(t),a_();break;case 5:a3(t);break;case 1:nJ(t.type)&&nX(t);break;case 4:a2(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;nZ(aC,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState)){if(null!==n.dehydrated)return nZ(a6,1&a6.current),t.flags|=128,null;if(0!=(r&t.child.childLanes))return iw(e,t,r);return nZ(a6,1&a6.current),null!==(e=iI(e,t,r))?e.sibling:null}nZ(a6,1&a6.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(128&e.flags)){if(n)return iP(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),nZ(a6,a6.current),!n)return null;break;case 22:case 23:return t.lanes=0,id(e,t,r)}return iI(e,t,r)}(e,t,r);ii=0!=(131072&e.flags)}}else ii=!1,ad&&0!=(1048576&t.flags)&&ai(t,n7,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;iO(e,t),e=t.pendingProps;var a=nW(t,nV.current);aL(t,r),a=sp(null,t,n,e,a,r);var s=sf();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nJ(n)?(s=!0,nX(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,aZ(t),a.updater=s0,t.stateNode=a,a._reactInternals=t,s3(t,n,e,r),t=ig(null,t,n,!0,s,r)):(t.tag=0,ad&&s&&ao(t),io(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(iO(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"==typeof e)return oJ(e)?1:0;if(null!=e){if((e=e.$$typeof)===N)return 11;if(e===F)return 14}return 2}(n),e=sY(n,e),a){case 0:t=ih(null,t,n,e,r);break e;case 1:t=im(null,t,n,e,r);break e;case 11:t=il(null,t,n,e,r);break e;case 14:t=iu(null,t,n,sY(n.type,e),r);break e}throw Error(d(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:sY(n,a),ih(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:sY(n,a),im(e,t,n,a,r);case 3:e:{if(iy(t),null===e)throw Error(d(387));n=t.pendingProps,a=(s=t.memoizedState).element,aq(e,t),aJ(t,n,null,r);var i=t.memoizedState;if(n=i.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){a=s5(Error(d(423)),t),t=iv(e,t,n,r,a);break e}if(n!==a){a=s5(Error(d(424)),t),t=iv(e,t,n,r,a);break e}for(ac=nP(t.stateNode.containerInfo.firstChild),au=t,ad=!0,ap=null,r=aI(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(a_(),n===a){t=iI(e,t,r);break e}io(e,t,n,r)}t=t.child}return t;case 5:return a3(t),null===e&&ag(t),n=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,i=a.children,nb(n,a)?i=null:null!==s&&nb(n,s)&&(t.flags|=32),ip(e,t),io(e,t,i,r),t.child;case 6:return null===e&&ag(t),null;case 13:return iw(e,t,r);case 4:return a2(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=aO(t,null,n,r):io(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:sY(n,a),il(e,t,n,a,r);case 7:return io(e,t,t.pendingProps,r),t.child;case 8:case 12:return io(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value,nZ(aC,n._currentValue),n._currentValue=i,null!==s){if(rL(s.value,i)){if(s.children===a.children&&!nK.current){t=iI(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var o=s.dependencies;if(null!==o){i=s.child;for(var l=o.firstContext;null!==l;){if(l.context===n){if(1===s.tag){(l=aV(-1,r&-r)).tag=2;var u=s.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),aM(s.return,r,t),o.lanes|=r;break}l=l.next}}else if(10===s.tag)i=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(i=s.return))throw Error(d(341));i.lanes|=r,null!==(o=i.alternate)&&(o.lanes|=r),aM(i,r,t),i=s.sibling}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}}io(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,aL(t,r),n=n(a=aF(a)),t.flags|=1,io(e,t,n,r),t.child;case 14:return a=sY(n=t.type,t.pendingProps),a=sY(n.type,a),iu(e,t,n,a,r);case 15:return ic(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:sY(n,a),iO(e,t),t.tag=1,nJ(n)?(e=!0,nX(t)):e=!1,aL(t,r),s2(t,n,a),s3(t,n,a,r),ig(null,t,n,!0,e,r);case 19:return iP(e,t,r);case 22:return id(e,t,r)}throw Error(d(156,t.tag))};var le="function"==typeof reportError?reportError:function(e){console.error(e)};function lt(e){this._internalRoot=e}function lr(e){this._internalRoot=e}function ln(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function la(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ls(){}function li(e,t,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if("function"==typeof a){var o=a;a=function(){var e=o9(i);o.call(e)}}o6(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"==typeof n){var s=n;n=function(){var e=o9(i);s.call(e)}}var i=o5(t,n,e,0,null,!1,!1,"",ls);return e._reactRootContainer=i,e[nT]=i.current,ns(8===e.nodeType?e.parentNode:e),oE(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof n){var o=n;n=function(){var e=o9(l);o.call(e)}}var l=o4(e,0,!1,null,null,!1,!1,"",ls);return e._reactRootContainer=l,e[nT]=l.current,ns(8===e.nodeType?e.parentNode:e),oE(function(){o6(t,l,r,n)}),l}(r,t,e,a,n);return o9(i)}lr.prototype.render=lt.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(d(409));o6(e,t,null,null)},lr.prototype.unmount=lt.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;oE(function(){o6(null,e,null,null)}),t[nT]=null}},lr.prototype.unstable_scheduleHydration=function(e){if(e){var t=tm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tS.length&&0!==t&&t<tS[r].priority;r++);tS.splice(r,0,e),0===r&&tI(e)}},tp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=tn(t.pendingLanes);0!==r&&(tu(t,1|r),ox(t,eX()),0==(6&i3)&&(ol=eX()+500,n5()))}break;case 13:oE(function(){var t=aU(e,1);null!==t&&oj(t,e,1,o_())}),o7(e,1)}},tf=function(e){if(13===e.tag){var t=aU(e,134217728);null!==t&&oj(t,e,134217728,o_()),o7(e,134217728)}},th=function(e){if(13===e.tag){var t=ow(e),r=aU(e,t);null!==r&&oj(r,e,t,o_()),o7(e,t)}},tm=function(){return tc},tg=function(e,t){var r=tc;try{return tc=e,t()}finally{tc=r}},ek=function(e,t,r){switch(t){case"input":if(et(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=n$(n);if(!a)throw Error(d(90));Q(n),et(n,a)}}}break;case"textarea":el(e,r);break;case"select":null!=(t=r.value)&&es(e,!!r.multiple,t,!1)}},eT=oC,eA=oE;var lo={findFiberByHostInstance:nM,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ll={bundleType:lo.bundleType,version:lo.version,rendererPackageName:lo.rendererPackageName,rendererConfig:lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=eW(e))?null:e.stateNode},findFiberByHostInstance:lo.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{e6=lu.inject(ll),e9=lu}catch(e){}}r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={usingClientEntryPoint:!1,Events:[nL,nF,n$,eC,eE,oC]},r.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ln(t))throw Error(d(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},r.createRoot=function(e,t){if(!ln(e))throw Error(d(299));var r=!1,n="",a=le;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=o4(e,1,!1,null,null,r,!1,n,a),e[nT]=t.current,ns(8===e.nodeType?e.parentNode:e),new lt(t)},r.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(d(188));throw Error(d(268,e=Object.keys(e).join(",")))}return e=null===(e=eW(t))?null:e.stateNode},r.flushSync=function(e){return oE(e)},r.hydrate=function(e,t,r){if(!la(t))throw Error(d(200));return li(null,e,t,!0,r)},r.hydrateRoot=function(e,t,r){if(!ln(e))throw Error(d(405));var n=null!=r&&r.hydratedSources||null,a=!1,s="",i=le;if(null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(i=r.onRecoverableError)),t=o5(t,null,e,1,null!=r?r:null,a,!1,s,i),e[nT]=t.current,ns(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new lr(t)},r.render=function(e,t,r){if(!la(t))throw Error(d(200));return li(null,e,t,!1,r)},r.unmountComponentAtNode=function(e){if(!la(e))throw Error(d(40));return!!e._reactRootContainer&&(oE(function(){li(null,null,e,!1,function(){e._reactRootContainer=null,e[nT]=null})}),!0)},r.unstable_batchedUpdates=oC,r.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!la(r))throw Error(d(200));if(null==e||void 0===e._reactInternals)throw Error(d(38));return li(e,t,r,!1,n)},r.version="18.3.1-next-f1338f8080-20240426"},{"5393afc8c463ef07":"fMilz",ece50e903283a22f:"68H0g"}],"68H0g":[function(e,t,r){t.exports=e("15840f0beed8ff36")},{"15840f0beed8ff36":"3lnRO"}],"3lnRO":[function(e,t,r){function n(e,t){var r=e.length;for(e.push(t);0<r;){var n=r-1>>>1,a=e[n];if(0<i(a,t))e[n]=t,e[r]=a,r=n;else break}}function a(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;for(var n=0,a=e.length,s=a>>>1;n<s;){var o=2*(n+1)-1,l=e[o],u=o+1,c=e[u];if(0>i(l,r))u<a&&0>i(c,l)?(e[n]=c,e[u]=r,n=u):(e[n]=l,e[o]=r,n=o);else if(u<a&&0>i(c,r))e[n]=c,e[u]=r,n=u;else break}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o,l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],p=[],f=1,h=null,m=3,g=!1,y=!1,v=!1,b="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,w="undefined"!=typeof setImmediate?setImmediate:null;function j(e){for(var t=a(p);null!==t;){if(null===t.callback)s(p);else if(t.startTime<=e)s(p),t.sortIndex=t.expirationTime,n(d,t);else break;t=a(p)}}function x(e){if(v=!1,j(e),!y){if(null!==a(d))y=!0,N(S);else{var t=a(p);null!==t&&M(x,t.startTime-e)}}}function S(e,t){y=!1,v&&(v=!1,_(O),O=-1),g=!0;var n=m;try{for(j(t),h=a(d);null!==h&&(!(h.expirationTime>t)||e&&!E());){var i=h.callback;if("function"==typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=t);t=r.unstable_now(),"function"==typeof o?h.callback=o:h===a(d)&&s(d),j(t)}else s(d);h=a(d)}if(null!==h)var l=!0;else{var u=a(p);null!==u&&M(x,u.startTime-t),l=!1}return l}finally{h=null,m=n,g=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k=!1,P=null,O=-1,I=5,C=-1;function E(){return!(r.unstable_now()-C<I)}function T(){if(null!==P){var e=r.unstable_now();C=e;var t=!0;try{t=P(!0,e)}finally{t?o():(k=!1,P=null)}}else k=!1}if("function"==typeof w)o=function(){w(T)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=T,o=function(){R.postMessage(null)}}else o=function(){b(T,0)};function N(e){P=e,k||(k=!0,o())}function M(e,t){O=b(function(){e(r.unstable_now())},t)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(e){e.callback=null},r.unstable_continueExecution=function(){y||g||(y=!0,N(S))},r.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return a(d)},r.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},r.unstable_scheduleCallback=function(e,t,s){var i=r.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?i+s:i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=s+o,e={id:f++,callback:t,priorityLevel:e,startTime:s,expirationTime:o,sortIndex:-1},s>i?(e.sortIndex=s,n(p,e),null===a(d)&&e===a(p)&&(v?(_(O),O=-1):v=!0,M(x,s-i))):(e.sortIndex=o,n(d,e),y||g||(y=!0,N(S))),e},r.unstable_shouldYield=E,r.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},{}],"2SNmR":[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],cLD2v:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"setBatch",()=>s),n.export(r,"getBatch",()=>i);let a=function(e){e()},s=e=>a=e,i=()=>a},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],deUhy:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeUseSelector",()=>l),n.export(r,"createSelectorHook",()=>c),n.export(r,"useSelector",()=>d);var a=e("react"),s=e("./useReduxContext"),i=e("../components/Context");let o=e("../utils/useSyncExternalStore").notInitialized,l=e=>{o=e},u=(e,t)=>e===t;function c(e=i.ReactReduxContext){let t=e===i.ReactReduxContext?s.useReduxContext:(0,s.createReduxContextHook)(e);return function(e,r={}){let{equalityFn:n=u,stabilityCheck:s,noopCheck:i}="function"==typeof r?{equalityFn:r}:r,{store:l,subscription:c,getServerState:d,stabilityCheck:p,noopCheck:f}=t();(0,a.useRef)(!0);let h=(0,a.useCallback)({[e.name]:t=>e(t)}[e.name],[e,p,s]),m=o(c.addNestedSub,l.getState,d||l.getState,h,n);return(0,a.useDebugValue)(m),m}}let d=c()},{react:"fMilz","./useReduxContext":"fftxA","../components/Context":"fv2AW","../utils/useSyncExternalStore":"pgsGT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fftxA:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"createReduxContextHook",()=>i),n.export(r,"useReduxContext",()=>o);var a=e("react"),s=e("../components/Context");function i(e=s.ReactReduxContext){return function(){return(0,a.useContext)(e)}}let o=i()},{react:"fMilz","../components/Context":"fv2AW","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fv2AW:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ReactReduxContext",()=>o);var a=e("react");let s=Symbol.for("react-redux-context"),i="undefined"!=typeof globalThis?globalThis:{},o=function(){var e;if(!a.createContext)return{};let t=null!=(e=i[s])?e:i[s]=new Map,r=t.get(a.createContext);return r||(r=a.createContext(null),t.set(a.createContext,r)),r}();r.default=o},{react:"fMilz","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],pgsGT:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"notInitialized",()=>a);let a=()=>{throw Error("uSES not initialized!")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gILeY:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeConnect",()=>P);var a=e("@babel/runtime/helpers/esm/extends"),s=n.interopDefault(a),i=e("@babel/runtime/helpers/esm/objectWithoutPropertiesLoose"),o=n.interopDefault(i),l=e("hoist-non-react-statics"),u=n.interopDefault(l),c=e("react"),d=e("react-is"),p=e("../connect/selectorFactory"),f=n.interopDefault(p),h=e("../connect/mapDispatchToProps"),m=e("../connect/mapStateToProps"),g=e("../connect/mergeProps"),y=e("../utils/Subscription"),v=e("../utils/useIsomorphicLayoutEffect"),b=e("../utils/shallowEqual"),_=n.interopDefault(b),w=e("../utils/warning");n.interopDefault(w);var j=e("./Context"),x=e("../utils/useSyncExternalStore");let S=["reactReduxForwardedRef"],k=x.notInitialized,P=e=>{k=e},O=[null,null];function I(e,t){return e===t}r.default=function(e,t,r,{pure:n,areStatesEqual:a=I,areOwnPropsEqual:i=_.default,areStatePropsEqual:l=_.default,areMergedPropsEqual:p=_.default,forwardRef:b=!1,context:w=j.ReactReduxContext}={}){let x=(0,m.mapStateToPropsFactory)(e),P=(0,h.mapDispatchToPropsFactory)(t),C=(0,g.mergePropsFactory)(r),E=!!e;return e=>{let t=e.displayName||e.name||"Component",r=`Connect(${t})`,n={shouldHandleStateChanges:E,displayName:r,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:x,initMapDispatchToProps:P,initMergeProps:C,areStatesEqual:a,areStatePropsEqual:l,areOwnPropsEqual:i,areMergedPropsEqual:p};function h(t){var r;let a;let[i,l,u]=c.useMemo(()=>{let{reactReduxForwardedRef:e}=t,r=(0,o.default)(t,S);return[t.context,e,r]},[t]),p=c.useMemo(()=>i&&i.Consumer&&(0,d.isContextConsumer)(c.createElement(i.Consumer,null))?i:w,[i,w]),h=c.useContext(p),m=!!t.store&&!!t.store.getState&&!!t.store.dispatch,g=!!h&&!!h.store,b=m?t.store:h.store,_=g?h.getServerState:b.getState,j=c.useMemo(()=>(0,f.default)(b.dispatch,n),[b]),[x,P]=c.useMemo(()=>{if(!E)return O;let e=(0,y.createSubscription)(b,m?void 0:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[b,m,h]),I=c.useMemo(()=>m?h:(0,s.default)({},h,{subscription:x}),[m,h,x]),C=c.useRef(),T=c.useRef(u),A=c.useRef(),R=c.useRef(!1);c.useRef(!1);let N=c.useRef(!1),M=c.useRef();(0,v.useIsomorphicLayoutEffect)(()=>(N.current=!0,()=>{N.current=!1}),[]);let L=c.useMemo(()=>()=>A.current&&u===T.current?A.current:j(b.getState(),u),[b,u]),F=c.useMemo(()=>e=>x?function(e,t,r,n,a,s,i,o,l,u,c){if(!e)return()=>{};let d=!1,p=null,f=()=>{let e,r;if(d||!o.current)return;let f=t.getState();try{e=n(f,a.current)}catch(e){r=e,p=e}r||(p=null),e===s.current?i.current||u():(s.current=e,l.current=e,i.current=!0,c())};return r.onStateChange=f,r.trySubscribe(),f(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,p)throw p}}(E,b,x,j,T,C,R,N,A,P,e):()=>{},[x]);r=[T,C,R,u,A,P],(0,v.useIsomorphicLayoutEffect)(()=>(function(e,t,r,n,a,s){e.current=n,r.current=!1,a.current&&(a.current=null,s())})(...r),void 0);try{a=k(F,L,_?()=>j(_(),u):L)}catch(e){throw M.current&&(e.message+=`
The error may be correlated with this previous error:
${M.current.stack}

`),e}(0,v.useIsomorphicLayoutEffect)(()=>{M.current=void 0,A.current=void 0,C.current=a});let $=c.useMemo(()=>c.createElement(e,(0,s.default)({},a,{ref:l})),[l,e,a]);return c.useMemo(()=>E?c.createElement(p.Provider,{value:I},$):$,[p,$,I])}let m=c.memo(h);if(m.WrappedComponent=e,m.displayName=h.displayName=r,b){let t=c.forwardRef(function(e,t){return c.createElement(m,(0,s.default)({},e,{reactReduxForwardedRef:t}))});return t.displayName=r,t.WrappedComponent=e,(0,u.default)(t,e)}return(0,u.default)(m,e)}}},{"@babel/runtime/helpers/esm/extends":"gqvGZ","@babel/runtime/helpers/esm/objectWithoutPropertiesLoose":"3L2L4","hoist-non-react-statics":"91JSw",react:"fMilz","react-is":"irU5p","../connect/selectorFactory":"6SHJD","../connect/mapDispatchToProps":"fL03E","../connect/mapStateToProps":"kTYEQ","../connect/mergeProps":"g0RPw","../utils/Subscription":"k3Oxl","../utils/useIsomorphicLayoutEffect":"35TZJ","../utils/shallowEqual":"kTOlr","../utils/warning":"3AWrY","./Context":"fv2AW","../utils/useSyncExternalStore":"pgsGT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gqvGZ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}n.defineInteropFlag(r),n.export(r,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3L2L4":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}n.defineInteropFlag(r),n.export(r,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"91JSw":[function(e,t,r){var n=e("c03b486d83967636"),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return n.isMemo(e)?i:o[e.$$typeof]||a}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=i;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;t.exports=function e(t,r,n){if("string"!=typeof r){if(h){var a=f(r);a&&a!==h&&e(t,a,n)}var i=c(r);d&&(i=i.concat(d(r)));for(var o=l(t),m=l(r),g=0;g<i.length;++g){var y=i[g];if(!s[y]&&!(n&&n[y])&&!(m&&m[y])&&!(o&&o[y])){var v=p(r,y);try{u(t,y,v)}catch(e){}}}}return t}},{c03b486d83967636:"7puwf"}],"7puwf":[function(e,t,r){t.exports=e("f93b3bf7385544f5")},{f93b3bf7385544f5:"fRqVo"}],fRqVo:[function(e,t,r){var n="function"==typeof Symbol&&Symbol.for,a=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function j(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case d:case p:case i:case l:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case g:case u:return e;default:return t}}case s:return t}}}function x(e){return j(e)===p}r.AsyncMode=d,r.ConcurrentMode=p,r.ContextConsumer=c,r.ContextProvider=u,r.Element=a,r.ForwardRef=f,r.Fragment=i,r.Lazy=y,r.Memo=g,r.Portal=s,r.Profiler=l,r.StrictMode=o,r.Suspense=h,r.isAsyncMode=function(e){return x(e)||j(e)===d},r.isConcurrentMode=x,r.isContextConsumer=function(e){return j(e)===c},r.isContextProvider=function(e){return j(e)===u},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},r.isForwardRef=function(e){return j(e)===f},r.isFragment=function(e){return j(e)===i},r.isLazy=function(e){return j(e)===y},r.isMemo=function(e){return j(e)===g},r.isPortal=function(e){return j(e)===s},r.isProfiler=function(e){return j(e)===l},r.isStrictMode=function(e){return j(e)===o},r.isSuspense=function(e){return j(e)===h},r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===p||e===l||e===o||e===h||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===b||e.$$typeof===_||e.$$typeof===w||e.$$typeof===v)},r.typeOf=j},{}],irU5p:[function(e,t,r){t.exports=e("c09df6e873313925")},{c09df6e873313925:"9UCTG"}],"9UCTG":[function(e,t,r){var n,a=Symbol.for("react.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case i:case l:case o:case f:case h:return e;default:switch(e=e&&e.$$typeof){case d:case c:case p:case g:case m:case u:return e;default:return t}}case s:return t}}}n=Symbol.for("react.module.reference"),r.ContextConsumer=c,r.ContextProvider=u,r.Element=a,r.ForwardRef=p,r.Fragment=i,r.Lazy=g,r.Memo=m,r.Portal=s,r.Profiler=l,r.StrictMode=o,r.Suspense=f,r.SuspenseList=h,r.isAsyncMode=function(){return!1},r.isConcurrentMode=function(){return!1},r.isContextConsumer=function(e){return v(e)===c},r.isContextProvider=function(e){return v(e)===u},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},r.isForwardRef=function(e){return v(e)===p},r.isFragment=function(e){return v(e)===i},r.isLazy=function(e){return v(e)===g},r.isMemo=function(e){return v(e)===m},r.isPortal=function(e){return v(e)===s},r.isProfiler=function(e){return v(e)===l},r.isStrictMode=function(e){return v(e)===o},r.isSuspense=function(e){return v(e)===f},r.isSuspenseList=function(e){return v(e)===h},r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===l||e===o||e===f||e===h||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===p||e.$$typeof===n||void 0!==e.getModuleId)},r.typeOf=v},{}],"6SHJD":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"pureFinalPropsSelectorFactory",()=>l),n.export(r,"default",()=>u);var a=e("@babel/runtime/helpers/esm/objectWithoutPropertiesLoose"),s=n.interopDefault(a),i=e("./verifySubselectors");n.interopDefault(i);let o=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function l(e,t,r,n,{areStatesEqual:a,areOwnPropsEqual:s,areStatePropsEqual:i}){let o,l,u,c,d,p=!1;return function(f,h){return p?function(p,f){let h=!s(f,l),m=!a(p,o,f,l);return(o=p,l=f,h&&m)?(u=e(o,l),t.dependsOnOwnProps&&(c=t(n,l)),d=r(u,c,l)):h?(e.dependsOnOwnProps&&(u=e(o,l)),t.dependsOnOwnProps&&(c=t(n,l)),d=r(u,c,l)):m?function(){let t=e(o,l),n=!i(t,u);return u=t,n&&(d=r(u,c,l)),d}():d}(f,h):(u=e(o=f,l=h),c=t(n,l),d=r(u,c,l),p=!0,d)}}function u(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:a}=t,i=(0,s.default)(t,o);return l(r(e,i),n(e,i),a(e,i),e,i)}},{"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose":"3L2L4","./verifySubselectors":"dZPvH","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],dZPvH:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>o);var a=e("../utils/warning"),s=n.interopDefault(a);function i(e,t){if(e)"mapStateToProps"!==t&&"mapDispatchToProps"!==t||Object.prototype.hasOwnProperty.call(e,"dependsOnOwnProps")||(0,s.default)(`The selector for ${t} of connect did not specify a value for dependsOnOwnProps.`);else throw Error(`Unexpected value for ${t} in connect.`)}function o(e,t,r){i(e,"mapStateToProps"),i(t,"mapDispatchToProps"),i(r,"mergeProps")}},{"../utils/warning":"3AWrY","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3AWrY":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw Error(e)}catch(e){}}n.defineInteropFlag(r),n.export(r,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fL03E:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"mapDispatchToPropsFactory",()=>l);var a=e("../utils/bindActionCreators"),s=n.interopDefault(a),i=e("./wrapMapToProps"),o=e("./invalidArgFactory");function l(e){return e&&"object"==typeof e?(0,i.wrapMapToPropsConstant)(t=>(0,s.default)(e,t)):e?"function"==typeof e?(0,i.wrapMapToPropsFunc)(e,"mapDispatchToProps"):(0,o.createInvalidArgFactory)(e,"mapDispatchToProps"):(0,i.wrapMapToPropsConstant)(e=>({dispatch:e}))}},{"../utils/bindActionCreators":"fKD0l","./wrapMapToProps":"bIIWf","./invalidArgFactory":"5YQim","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fKD0l:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e,t){let r={};for(let n in e){let a=e[n];"function"==typeof a&&(r[n]=(...e)=>t(a(...e)))}return r}n.defineInteropFlag(r),n.export(r,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bIIWf:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"wrapMapToPropsConstant",()=>s),n.export(r,"getDependsOnOwnProps",()=>i),n.export(r,"wrapMapToPropsFunc",()=>o);var a=e("../utils/verifyPlainObject");function s(e){return function(t){let r=e(t);function n(){return r}return n.dependsOnOwnProps=!1,n}}function i(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function o(e,t){return function(t,{displayName:r}){let n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e,void 0)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=i(e);let a=n(t,r);return"function"==typeof a&&(n.mapToProps=a,n.dependsOnOwnProps=i(a),a=n(t,r)),a},n}}n.interopDefault(a)},{"../utils/verifyPlainObject":"kDxLq","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kDxLq:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>l);var a=e("./isPlainObject"),s=n.interopDefault(a),i=e("./warning"),o=n.interopDefault(i);function l(e,t,r){(0,s.default)(e)||(0,o.default)(`${r}() in ${t} must return a plain object. Instead received ${e}.`)}},{"./isPlainObject":"8zNoU","./warning":"3AWrY","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8zNoU":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);if(null===t)return!0;let r=t;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}n.defineInteropFlag(r),n.export(r,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5YQim":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e,t){return(r,n)=>{throw Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}n.defineInteropFlag(r),n.export(r,"createInvalidArgFactory",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kTYEQ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"mapStateToPropsFactory",()=>i);var a=e("./wrapMapToProps"),s=e("./invalidArgFactory");function i(e){return e?"function"==typeof e?(0,a.wrapMapToPropsFunc)(e,"mapStateToProps"):(0,s.createInvalidArgFactory)(e,"mapStateToProps"):(0,a.wrapMapToPropsConstant)(()=>({}))}},{"./wrapMapToProps":"bIIWf","./invalidArgFactory":"5YQim","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],g0RPw:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"defaultMergeProps",()=>l),n.export(r,"wrapMergePropsFunc",()=>u),n.export(r,"mergePropsFactory",()=>c);var a=e("@babel/runtime/helpers/esm/extends"),s=n.interopDefault(a),i=e("../utils/verifyPlainObject");n.interopDefault(i);var o=e("./invalidArgFactory");function l(e,t,r){return(0,s.default)({},r,e,t)}function u(e){return function(t,{displayName:r,areMergedPropsEqual:n}){let a,s=!1;return function(t,r,i){let o=e(t,r,i);return s?n(o,a)||(a=o):(s=!0,a=o),a}}}function c(e){return e?"function"==typeof e?u(e):(0,o.createInvalidArgFactory)(e,"mergeProps"):()=>l}},{"@babel/runtime/helpers/esm/extends":"gqvGZ","../utils/verifyPlainObject":"kDxLq","./invalidArgFactory":"5YQim","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],k3Oxl:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"createSubscription",()=>i);var a=e("./batch");let s={notify(){},get:()=>[]};function i(e,t){let r;let n=s,i=0,o=!1;function l(){d.onStateChange&&d.onStateChange()}function u(){i++,r||(r=t?t.addNestedSub(l):e.subscribe(l),n=function(){let e=(0,a.getBatch)(),t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let e=t;for(;e;)e.callback(),e=e.next})},get(){let e=[],r=t;for(;r;)e.push(r),r=r.next;return e},subscribe(e){let n=!0,a=r={callback:e,next:null,prev:r};return a.prev?a.prev.next=a:t=a,function(){n&&null!==t&&(n=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}())}function c(){i--,r&&0===i&&(r(),r=void 0,n.clear(),n=s)}let d={addNestedSub:function(e){u();let t=n.subscribe(e),r=!1;return()=>{r||(r=!0,t(),c())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:l,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,u())},tryUnsubscribe:function(){o&&(o=!1,c())},getListeners:()=>n};return d}},{"./batch":"cLD2v","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"35TZJ":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"canUseDOM",()=>s),n.export(r,"useIsomorphicLayoutEffect",()=>i);var a=e("react");let s=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement),i=s?a.useLayoutEffect:a.useEffect},{react:"fMilz","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kTOlr:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function s(e,t){if(a(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!a(e[r[n]],t[r[n]]))return!1;return!0}n.defineInteropFlag(r),n.export(r,"default",()=>s)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aw0gP:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Provider",()=>s.default),n.export(r,"ReactReduxContext",()=>l.ReactReduxContext),n.export(r,"connect",()=>o.default),n.export(r,"useDispatch",()=>u.useDispatch),n.export(r,"createDispatchHook",()=>u.createDispatchHook),n.export(r,"useSelector",()=>c.useSelector),n.export(r,"createSelectorHook",()=>c.createSelectorHook),n.export(r,"useStore",()=>d.useStore),n.export(r,"createStoreHook",()=>d.createStoreHook),n.export(r,"shallowEqual",()=>f.default);var a=e("./components/Provider"),s=n.interopDefault(a),i=e("./components/connect"),o=n.interopDefault(i),l=e("./components/Context"),u=e("./hooks/useDispatch"),c=e("./hooks/useSelector"),d=e("./hooks/useStore"),p=e("./utils/shallowEqual"),f=n.interopDefault(p),h=e("./types");n.exportAll(h,r)},{"./components/Provider":"5thjr","./components/connect":"gILeY","./components/Context":"fv2AW","./hooks/useDispatch":"gwREi","./hooks/useSelector":"deUhy","./hooks/useStore":"joIVa","./utils/shallowEqual":"kTOlr","./types":"jOdUa","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5thjr":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var n=e("react"),a=e("./Context"),s=e("../utils/Subscription"),i=e("../utils/useIsomorphicLayoutEffect");r.default=function({store:e,context:t,children:r,serverState:o,stabilityCheck:l="once",noopCheck:u="once"}){let c=n.useMemo(()=>{let t=(0,s.createSubscription)(e);return{store:e,subscription:t,getServerState:o?()=>o:void 0,stabilityCheck:l,noopCheck:u}},[e,o,l,u]),d=n.useMemo(()=>e.getState(),[e]);(0,i.useIsomorphicLayoutEffect)(()=>{let{subscription:t}=c;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),d!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}},[c,d]);let p=t||a.ReactReduxContext;return n.createElement(p.Provider,{value:c},r)}},{react:"fMilz","./Context":"fv2AW","../utils/Subscription":"k3Oxl","../utils/useIsomorphicLayoutEffect":"35TZJ","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gwREi:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"createDispatchHook",()=>i),n.export(r,"useDispatch",()=>o);var a=e("../components/Context"),s=e("./useStore");function i(e=a.ReactReduxContext){let t=e===a.ReactReduxContext?s.useStore:(0,s.createStoreHook)(e);return function(){return t().dispatch}}let o=i()},{"../components/Context":"fv2AW","./useStore":"joIVa","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],joIVa:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"createStoreHook",()=>i),n.export(r,"useStore",()=>o);var a=e("../components/Context"),s=e("./useReduxContext");function i(e=a.ReactReduxContext){let t=e===a.ReactReduxContext?s.useReduxContext:(0,s.createReduxContextHook)(e);return function(){let{store:e}=t();return e}}let o=i()},{"../components/Context":"fv2AW","./useReduxContext":"fftxA","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jOdUa:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jZkfj:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"persistReducer",()=>s.default),n.export(r,"persistCombineReducers",()=>o.default),n.export(r,"persistStore",()=>u.default),n.export(r,"createMigrate",()=>d.default),n.export(r,"createTransform",()=>f.default),n.export(r,"getStoredState",()=>m.default),n.export(r,"createPersistoid",()=>y.default),n.export(r,"purgeStoredState",()=>b.default);var a=e("./persistReducer"),s=n.interopDefault(a),i=e("./persistCombineReducers"),o=n.interopDefault(i),l=e("./persistStore"),u=n.interopDefault(l),c=e("./createMigrate"),d=n.interopDefault(c),p=e("./createTransform"),f=n.interopDefault(p),h=e("./getStoredState"),m=n.interopDefault(h),g=e("./createPersistoid"),y=n.interopDefault(g),v=e("./purgeStoredState"),b=n.interopDefault(v),_=e("./constants");n.exportAll(_,r)},{"./persistReducer":"ej7wm","./persistCombineReducers":"9FMJJ","./persistStore":"cXYMQ","./createMigrate":"2NsWO","./createTransform":"gmjn2","./getStoredState":"20MEB","./createPersistoid":"kDZTw","./purgeStoredState":"6UHeP","./constants":"5ENru","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ej7wm:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>h);var a=e("./constants"),s=e("./stateReconciler/autoMergeLevel1"),i=n.interopDefault(s),o=e("./createPersistoid"),l=n.interopDefault(o),u=e("./getStoredState"),c=n.interopDefault(u),d=e("./purgeStoredState"),p=n.interopDefault(d),f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};function h(e,t){let r=void 0!==e.version?e.version:a.DEFAULT_VERSION,n=void 0===e.stateReconciler?i.default:e.stateReconciler,s=e.getStoredState||c.default,o=void 0!==e.timeout?e.timeout:5e3,u=null,d=!1,h=!0,m=e=>(e._persist.rehydrated&&u&&!h&&u.update(e),e);return(i,c)=>{let g=i||{},{_persist:y}=g,v=f(g,["_persist"]);if(c.type===a.PERSIST){let n=!1,a=(t,r)=>{n||(c.rehydrate(e.key,t,r),n=!0)};if(o&&setTimeout(()=>{n||a(void 0,Error(`redux-persist: persist timed out for persist key "${e.key}"`))},o),h=!1,u||(u=(0,l.default)(e)),y)return Object.assign(Object.assign({},t(v,c)),{_persist:y});if("function"!=typeof c.rehydrate||"function"!=typeof c.register)throw Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return c.register(e.key),s(e).then(t=>{t&&(e.migrate||((e,t)=>Promise.resolve(e)))(t,r).then(e=>{a(e)},e=>{a(void 0,e)})},e=>{a(void 0,e)}),Object.assign(Object.assign({},t(v,c)),{_persist:{version:r,rehydrated:!1}})}if(c.type===a.PURGE)return d=!0,c.result((0,p.default)(e)),Object.assign(Object.assign({},t(v,c)),{_persist:y});if(c.type===a.RESYNC)return s(e).then(t=>c.rehydrate(e.key,t,void 0),t=>c.rehydrate(e.key,void 0,t)).then(()=>c.result()),Object.assign(Object.assign({},t(v,c)),{_persist:{version:r,rehydrated:!1}});if(c.type===a.FLUSH)return c.result(u&&u.flush()),Object.assign(Object.assign({},t(v,c)),{_persist:y});if(c.type===a.PAUSE)h=!0;else if(c.type===a.REHYDRATE){if(d)return Object.assign(Object.assign({},v),{_persist:Object.assign(Object.assign({},y),{rehydrated:!0})});if(c.key===e.key){let r=t(v,c),a=c.payload;return m(Object.assign(Object.assign({},!1!==n&&void 0!==a?n(a,i,r,e):r),{_persist:Object.assign(Object.assign({},y),{rehydrated:!0})}))}}if(!y)return t(i,c);let b=t(v,c);return b===v?i:m(Object.assign(Object.assign({},b),{_persist:y}))}}},{"./constants":"5ENru","./stateReconciler/autoMergeLevel1":"ivJ0b","./createPersistoid":"kDZTw","./getStoredState":"20MEB","./purgeStoredState":"6UHeP","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5ENru":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"KEY_PREFIX",()=>a),n.export(r,"FLUSH",()=>s),n.export(r,"REHYDRATE",()=>i),n.export(r,"RESYNC",()=>o),n.export(r,"PAUSE",()=>l),n.export(r,"PERSIST",()=>u),n.export(r,"PURGE",()=>c),n.export(r,"REGISTER",()=>d),n.export(r,"DEFAULT_VERSION",()=>p);let a="persist:",s="persist/FLUSH",i="persist/REHYDRATE",o="persist/RESYNC",l="persist/PAUSE",u="persist/PERSIST",c="persist/PURGE",d="persist/REGISTER",p=-1},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ivJ0b:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e,t,r,{debug:n}){let a=Object.assign({},r);return e&&"object"==typeof e&&Object.keys(e).forEach(n=>{"_persist"!==n&&t[n]===r[n]&&(a[n]=e[n])}),a}n.defineInteropFlag(r),n.export(r,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kDZTw:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>s);var a=e("./constants");function s(e){let t;let r=e.blacklist||null,n=e.whitelist||null,s=e.transforms||[],o=e.throttle||0,l=`${void 0!==e.keyPrefix?e.keyPrefix:a.KEY_PREFIX}${e.key}`,u=e.storage;t=!1===e.serialize?e=>e:"function"==typeof e.serialize?e.serialize:i;let c=e.writeFailHandler||null,d={},p={},f=[],h=null,m=null;function g(){if(0===f.length){h&&clearInterval(h),h=null;return}let e=f.shift();if(void 0===e)return;let r=s.reduce((t,r)=>r.in(t,e,d),d[e]);if(void 0!==r)try{p[e]=t(r)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete p[e];0===f.length&&(Object.keys(p).forEach(e=>{void 0===d[e]&&delete p[e]}),m=u.setItem(l,t(p)).catch(v))}function y(e){return(!n||-1!==n.indexOf(e)||"_persist"===e)&&(!r||-1===r.indexOf(e))}function v(e){c&&c(e)}return{update:e=>{Object.keys(e).forEach(t=>{y(t)&&d[t]!==e[t]&&-1===f.indexOf(t)&&f.push(t)}),Object.keys(d).forEach(t=>{void 0===e[t]&&y(t)&&-1===f.indexOf(t)&&void 0!==d[t]&&f.push(t)}),null===h&&(h=setInterval(g,o)),d=e},flush:()=>{for(;0!==f.length;)g();return m||Promise.resolve()}}}function i(e){return JSON.stringify(e)}},{"./constants":"5ENru","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"20MEB":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>s);var a=e("./constants");function s(e){let t;let r=e.transforms||[],n=`${void 0!==e.keyPrefix?e.keyPrefix:a.KEY_PREFIX}${e.key}`,s=e.storage;return e.debug,t=!1===e.deserialize?e=>e:"function"==typeof e.deserialize?e.deserialize:i,s.getItem(n).then(e=>{if(e)try{let n={},a=t(e);return Object.keys(a).forEach(e=>{n[e]=r.reduceRight((t,r)=>r.out(t,e,a),t(a[e]))}),n}catch(e){throw e}})}function i(e){return JSON.parse(e)}},{"./constants":"5ENru","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6UHeP":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>s);var a=e("./constants");function s(e){let t=e.storage,r=`${void 0!==e.keyPrefix?e.keyPrefix:a.KEY_PREFIX}${e.key}`;return t.removeItem(r,i)}function i(e){}},{"./constants":"5ENru","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"9FMJJ":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>u);var a=e("redux"),s=e("./persistReducer"),i=n.interopDefault(s),o=e("./stateReconciler/autoMergeLevel2"),l=n.interopDefault(o);function u(e,t){return e.stateReconciler=void 0===e.stateReconciler?l.default:e.stateReconciler,(0,i.default)(e,(0,a.combineReducers)(t))}},{redux:"5F3Kg","./persistReducer":"ej7wm","./stateReconciler/autoMergeLevel2":"2WyUl","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5F3Kg":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"__DO_NOT_USE__ActionTypes",()=>u),n.export(r,"applyMiddleware",()=>g),n.export(r,"bindActionCreators",()=>h),n.export(r,"combineReducers",()=>p),n.export(r,"compose",()=>m),n.export(r,"createStore",()=>c),n.export(r,"legacy_createStore",()=>d);var a=e("@babel/runtime/helpers/esm/objectSpread2"),s=n.interopDefault(a);function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var o="function"==typeof Symbol&&Symbol.observable||"@@observable",l=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function c(e,t,r){if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw Error(i(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw Error(i(1));return r(c)(e,t)}if("function"!=typeof e)throw Error(i(2));var n,a=e,s=t,l=[],d=l,p=!1;function f(){d===l&&(d=l.slice())}function h(){if(p)throw Error(i(3));return s}function m(e){if("function"!=typeof e)throw Error(i(4));if(p)throw Error(i(5));var t=!0;return f(),d.push(e),function(){if(t){if(p)throw Error(i(6));t=!1,f();var r=d.indexOf(e);d.splice(r,1),l=null}}}function g(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(i(7));if(void 0===e.type)throw Error(i(8));if(p)throw Error(i(9));try{p=!0,s=a(s,e)}finally{p=!1}for(var t=l=d,r=0;r<t.length;r++)(0,t[r])();return e}return g({type:u.INIT}),(n={dispatch:g,subscribe:m,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw Error(i(10));a=e,g({type:u.REPLACE})}})[o]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(i(11));function t(){e.next&&e.next(h())}return t(),{unsubscribe:m(t)}}})[o]=function(){return this},e},n}var d=c;function p(e){for(var t,r=Object.keys(e),n={},a=0;a<r.length;a++){var s=r[a];"function"==typeof e[s]&&(n[s]=e[s])}var o=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var r=e[t];if(void 0===r(void 0,{type:u.INIT}))throw Error(i(12));if(void 0===r(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw Error(i(13))})}(n)}catch(e){t=e}return function(e,r){if(void 0===e&&(e={}),t)throw t;for(var a=!1,s={},l=0;l<o.length;l++){var u=o[l],c=n[u],d=e[u],p=c(d,r);if(void 0===p)throw r&&r.type,Error(i(14));s[u]=p,a=a||p!==d}return(a=a||o.length!==Object.keys(e).length)?s:e}}function f(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"==typeof e)return f(e,t);if("object"!=typeof e||null===e)throw Error(i(16));var r={};for(var n in e){var a=e[n];"function"==typeof a&&(r[n]=f(a,t))}return r}function m(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function g(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw Error(i(15))},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map(function(e){return e(a)});return n=m.apply(void 0,o)(r.dispatch),(0,s.default)((0,s.default)({},r),{},{dispatch:n})}}}},{"@babel/runtime/helpers/esm/objectSpread2":"2PgsS","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2PgsS":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>o);var a=e("./defineProperty.js"),s=n.interopDefault(a);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}},{"./defineProperty.js":"kB1rw","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kB1rw:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>i);var a=e("./toPropertyKey.js"),s=n.interopDefault(a);function i(e,t,r){return(t=(0,s.default)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{"./toPropertyKey.js":"1T2iE","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"1T2iE":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>l);var a=e("./typeof.js"),s=n.interopDefault(a),i=e("./toPrimitive.js"),o=n.interopDefault(i);function l(e){var t=(0,o.default)(e,"string");return"symbol"==(0,s.default)(t)?t:t+""}},{"./typeof.js":"34Jsj","./toPrimitive.js":"9Utpu","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"34Jsj":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.defineInteropFlag(r),n.export(r,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"9Utpu":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>i);var a=e("./typeof.js"),s=n.interopDefault(a);function i(e,t){if("object"!=(0,s.default)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=(0,s.default)(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},{"./typeof.js":"34Jsj","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2WyUl":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e,t,r,{debug:n}){let a=Object.assign({},r);return e&&"object"==typeof e&&Object.keys(e).forEach(n=>{if("_persist"!==n&&t[n]===r[n]){var s;if(null!==(s=r[n])&&!Array.isArray(s)&&"object"==typeof s){a[n]=Object.assign(Object.assign({},a[n]),e[n]);return}a[n]=e[n]}}),a}n.defineInteropFlag(r),n.export(r,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],cXYMQ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>l);var a=e("redux"),s=e("./constants");let i={registry:[],bootstrapped:!1},o=(e=i,t)=>{let r=e.registry.indexOf(t.key),n=[...e.registry];switch(t.type){case s.REGISTER:return Object.assign(Object.assign({},e),{registry:[...e.registry,t.key]});case s.REHYDRATE:return n.splice(r,1),Object.assign(Object.assign({},e),{registry:n,bootstrapped:0===n.length});default:return e}};function l(e,t,r){let n=r||!1,l=(0,a.createStore)(o,i,t&&t.enhancer?t.enhancer:void 0),u=e=>{l.dispatch({type:s.REGISTER,key:e})},c=(t,r,a)=>{let i={type:s.REHYDRATE,payload:r,err:a,key:t};e.dispatch(i),l.dispatch(i),"function"==typeof n&&d.getState().bootstrapped&&(n(),n=!1)},d=Object.assign(Object.assign({},l),{purge:()=>{let t=[];return e.dispatch({type:s.PURGE,result:e=>{t.push(e)}}),Promise.all(t)},flush:()=>{let t=[];return e.dispatch({type:s.FLUSH,result:e=>{t.push(e)}}),Promise.all(t)},pause:()=>{e.dispatch({type:s.PAUSE})},persist:()=>{e.dispatch({type:s.PERSIST,register:u,rehydrate:c})},resync:()=>new Promise(t=>{e.dispatch({type:s.RESYNC,rehydrate:c,result:()=>t()})})});return t&&t.manualPersist||d.persist(),d}},{redux:"5F3Kg","./constants":"5ENru","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2NsWO":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>s);var a=e("./constants");function s(e,t){let{debug:r}=t||{};return function(t,r){if(!t)return Promise.resolve(void 0);let n=t._persist&&void 0!==t._persist.version?t._persist.version:a.DEFAULT_VERSION;if(n===r||n>r)return Promise.resolve(t);let s=Object.keys(e).map(e=>parseInt(e)).filter(e=>r>=e&&e>n).sort((e,t)=>e-t);try{let r=s.reduce((t,r)=>e[r](t),t);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}}},{"./constants":"5ENru","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gmjn2:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e,t,r={}){let n=r.whitelist||null,a=r.blacklist||null;function s(e){return!!n&&-1===n.indexOf(e)||!!a&&-1!==a.indexOf(e)}return{in:(t,r,n)=>!s(r)&&e?e(t,r,n):t,out:(e,r,n)=>!s(r)&&t?t(e,r,n):e}}n.defineInteropFlag(r),n.export(r,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aG0Zu:[function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let a=n(e("c0ca4dd610ccb7d9"));r.default=a.default("local")},{c0ca4dd610ccb7d9:"bivfX"}],bivfX:[function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let a=n(e("b20a606deece9e6a"));r.default=function(e){let t=a.default(e);return{getItem:e=>new Promise(r=>{r(t.getItem(e))}),setItem:(e,r)=>new Promise(n=>{n(t.setItem(e,r))}),removeItem:e=>new Promise(r=>{r(t.removeItem(e))})}}},{b20a606deece9e6a:"ciRke"}],ciRke:[function(e,t,r){function n(){}Object.defineProperty(r,"__esModule",{value:!0});let a={getItem:n,setItem:n,removeItem:n,keys:[],getAllKeys:n};r.default=function(e){let t=`${e}Storage`;return!function(e){if("object"!=typeof self||!(e in self))return!1;try{let t=self[e],r=`redux-persist ${e} test`;t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch(e){return!1}return!0}(t)?a:self[t]}},{}],gwigI:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseStorage",()=>o),n.export(r,"Storage",()=>l);var a=e("pify"),s=n.interopDefault(a),i=()=>{try{let e=globalThis.navigator?.userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if("Chrome"===e[1])return 100>parseInt(e[2])||globalThis.chrome.runtime?.getManifest()?.manifest_version===2}catch{}return!1},o=class{#e;#t;get primaryClient(){return this.#t}#r;get secondaryClient(){return this.#r}#n;get area(){return this.#n}get hasWebApi(){try{return"u">typeof window&&!!window.localStorage}catch(e){return console.error(e),!1}}#a=new Map;#s;get copiedKeySet(){return this.#s}isCopied=e=>this.hasWebApi&&(this.allCopied||this.copiedKeySet.has(e));#i=!1;get allCopied(){return this.#i}getExtStorageApi=()=>globalThis.browser?.storage||globalThis.chrome?.storage;get hasExtensionApi(){try{return!!this.getExtStorageApi()}catch(e){return console.error(e),!1}}isWatchSupported=()=>this.hasExtensionApi;keyNamespace="";isValidKey=e=>e.startsWith(this.keyNamespace);getNamespacedKey=e=>`${this.keyNamespace}${e}`;getUnnamespacedKey=e=>e.slice(this.keyNamespace.length);serde={serializer:JSON.stringify,deserializer:JSON.parse};constructor({area:e="sync",allCopied:t=!1,copiedKeyList:r=[],serde:n={}}={}){this.setCopiedKeySet(r),this.#n=e,this.#i=t,this.serde={...this.serde,...n};try{this.hasWebApi&&(t||r.length>0)&&(this.#r=window.localStorage)}catch{}try{this.hasExtensionApi&&(this.#e=this.getExtStorageApi(),i()?this.#t=(0,s.default)(this.#e[this.area],{exclude:["getBytesInUse"],errorFirst:!1}):this.#t=this.#e[this.area])}catch{}}setCopiedKeySet(e){this.#s=new Set(e)}rawGetAll=()=>this.#t?.get();getAll=async()=>Object.entries(await this.rawGetAll()).filter(([e])=>this.isValidKey(e)).reduce((e,[t,r])=>(e[this.getUnnamespacedKey(t)]=r,e),{});copy=async e=>{let t=void 0===e;if(!t&&!this.copiedKeySet.has(e)||!this.allCopied||!this.hasExtensionApi)return!1;let r=this.allCopied?await this.rawGetAll():await this.#t.get((t?[...this.copiedKeySet]:[e]).map(this.getNamespacedKey));if(!r)return!1;let n=!1;for(let e in r){let t=r[e],a=this.#r?.getItem(e);this.#r?.setItem(e,t),n||=t!==a}return n};rawGet=async e=>(await this.rawGetMany([e]))[e];rawGetMany=async e=>this.hasExtensionApi?await this.#t.get(e):e.filter(this.isCopied).reduce((e,t)=>(e[t]=this.#r?.getItem(t),e),{});rawSet=async(e,t)=>await this.rawSetMany({[e]:t});rawSetMany=async e=>(this.#r&&Object.entries(e).filter(([e])=>this.isCopied(e)).forEach(([e,t])=>this.#r.setItem(e,t)),this.hasExtensionApi&&await this.#t.set(e),null);clear=async(e=!1)=>{e&&this.#r?.clear(),await this.#t.clear()};rawRemove=async e=>{await this.rawRemoveMany([e])};rawRemoveMany=async e=>{this.#r&&e.filter(this.isCopied).forEach(e=>this.#r.removeItem(e)),this.hasExtensionApi&&await this.#t.remove(e)};removeAll=async()=>{let e=Object.keys(await this.getAll());await this.removeMany(e)};watch=e=>{let t=this.isWatchSupported();return t&&this.#o(e),t};#o=e=>{for(let t in e){let r=this.getNamespacedKey(t),n=this.#a.get(r)?.callbackSet||new Set;if(n.add(e[t]),n.size>1)continue;let a=(e,t)=>{if(t!==this.area||!e[r])return;let n=this.#a.get(r);if(!n)throw Error(`Storage comms does not exist for nsKey: ${r}`);Promise.all([this.parseValue(e[r].newValue),this.parseValue(e[r].oldValue)]).then(([e,r])=>{for(let a of n.callbackSet)a({newValue:e,oldValue:r},t)})};this.#e.onChanged.addListener(a),this.#a.set(r,{callbackSet:n,listener:a})}};unwatch=e=>{let t=this.isWatchSupported();return t&&this.#l(e),t};#l(e){for(let t in e){let r=this.getNamespacedKey(t),n=e[t],a=this.#a.get(r);a&&(a.callbackSet.delete(n),0===a.callbackSet.size&&(this.#a.delete(r),this.#e.onChanged.removeListener(a.listener)))}}unwatchAll=()=>this.#u();#u(){this.#a.forEach(({listener:e})=>this.#e.onChanged.removeListener(e)),this.#a.clear()}async getItem(e){return this.get(e)}async getItems(e){return await this.getMany(e)}async setItem(e,t){await this.set(e,t)}async setItems(e){await await this.setMany(e)}async removeItem(e){return this.remove(e)}async removeItems(e){return await this.removeMany(e)}},l=class extends o{get=async e=>{let t=this.getNamespacedKey(e),r=await this.rawGet(t);return this.parseValue(r)};getMany=async e=>{let t=e.map(this.getNamespacedKey),r=await this.rawGetMany(t),n=await Promise.all(Object.values(r).map(this.parseValue));return Object.keys(r).reduce((e,t,r)=>(e[this.getUnnamespacedKey(t)]=n[r],e),{})};set=async(e,t)=>{let r=this.getNamespacedKey(e),n=this.serde.serializer(t);return this.rawSet(r,n)};setMany=async e=>{let t=Object.entries(e).reduce((e,[t,r])=>(e[this.getNamespacedKey(t)]=this.serde.serializer(r),e),{});return await this.rawSetMany(t)};remove=async e=>{let t=this.getNamespacedKey(e);return this.rawRemove(t)};removeMany=async e=>{let t=e.map(this.getNamespacedKey);return await this.rawRemoveMany(t)};setNamespace=e=>{this.keyNamespace=e};parseValue=async e=>{try{if(void 0!==e)return this.serde.deserializer(e)}catch(e){console.error(e)}}}},{pify:"4gCMK","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4gCMK":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",()=>i);let a=(e,t,r,n)=>function(...a){return new t.promiseModule((s,i)=>{t.multiArgs?a.push((...e)=>{t.errorFirst?e[0]?i(e):(e.shift(),s(e)):s(e)}):t.errorFirst?a.push((e,t)=>{e?i(e):s(t)}):a.push(s),Reflect.apply(e,this===r?n:this,a)})},s=new WeakMap;function i(e,t){t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};let r=typeof e;if(!(null!==e&&("object"===r||"function"===r)))throw TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===e?"null":r}\``);let n=(e,r)=>{let n=s.get(e);if(n||(n={},s.set(e,n)),r in n)return n[r];let a=e=>"string"==typeof e||"symbol"==typeof r?r===e:e.test(r),i=Reflect.getOwnPropertyDescriptor(e,r),o=void 0===i||i.writable||i.configurable,l=(t.include?t.include.some(e=>a(e)):!t.exclude.some(e=>a(e)))&&o;return n[r]=l,l},i=new WeakMap,o=new Proxy(e,{apply(e,r,n){let s=i.get(e);if(s)return Reflect.apply(s,r,n);let l=t.excludeMain?e:a(e,t,o,e);return i.set(e,l),Reflect.apply(l,r,n)},get(e,r){let s=e[r];if(!n(e,r)||s===Function.prototype[r])return s;let l=i.get(s);if(l)return l;if("function"==typeof s){let r=a(s,t,o,e);return i.set(s,r),r}return s}});return o}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],f8XNO:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ankiApiSlice",()=>o),n.export(r,"useGetDeckNamesQuery",()=>l),n.export(r,"useAddNoteMutation",()=>u),n.export(r,"useAddDeckMutation",()=>c),n.export(r,"useGuiBrowseMutation",()=>d),n.export(r,"useGuiAddCardsMutation",()=>p),n.export(r,"useLazyGetDeckNamesQuery",()=>f);var a=e("@reduxjs/toolkit/query/react"),s=e("@/domains/anki/services/AnkiClient"),i=e("@/domains/redux/getAnkiKey");let o=(0,a.createApi)({reducerPath:"ankiApi",baseQuery:(0,a.fetchBaseQuery)({baseUrl:"/api"}),tagTypes:["DeckNames"],endpoints:e=>({getDeckNames:e.query({queryFn:async()=>{let e=(0,i.getAnkiKey)();try{let t=await new(0,s.AnkiClient)({key:e}).getDeckNames({ankiKey:e});if(!t.ok)return{error:t.statusText};let r=await t.json();if(r.error)return{error:r.error};return{data:r.result??null}}catch(e){return{error:e.message}}},providesTags:["DeckNames"]}),addNote:e.mutation({queryFn:async({question:e,answer:t,source:r,deck:n,picture:a})=>{let o=(0,i.getAnkiKey)();try{return{data:await new(0,s.AnkiClient)({key:o}).addNote(Math.random().toString(),n,"Basic",{Front:e+"\n<br/>\n",Back:t+"\n<br/>\n",Example:`
<a href="${r}">${r}</a>
`},a,["GeneratedByAi"])??null}}catch(e){return{error:e.message??"Error adding note"}}}}),addDeck:e.mutation({invalidatesTags:["DeckNames"],queryFn:async({deckName:e})=>{let t=(0,i.getAnkiKey)();try{let r=await new(0,s.AnkiClient)({key:t}).createDeck(e);if("number"==typeof r)return{data:r};return{error:r.error}}catch(e){return{error:e.message}}}}),guiAddCards:e.mutation({queryFn:async({note:e})=>{let t=(0,i.getAnkiKey)();try{let r=await new(0,s.AnkiClient)({key:t}).guiAddCards(e);if(r.error)return{error:r.error};return{data:r.result}}catch(e){return{error:e.message}}}}),guiBrowse:e.mutation({queryFn:async()=>{let e=(0,i.getAnkiKey)();try{let t=await new(0,s.AnkiClient)({key:e}).guiBrowse();if(t.error)return{error:t.error};return{data:t.result}}catch(e){return{error:e.message}}}})})}),{useGetDeckNamesQuery:l,useAddNoteMutation:u,useAddDeckMutation:c,useGuiBrowseMutation:d,useGuiAddCardsMutation:p,useLazyGetDeckNamesQuery:f}=o},{"@reduxjs/toolkit/query/react":"aALcd","@/domains/anki/services/AnkiClient":"dF0Dz","@/domains/redux/getAnkiKey":"aUMIx","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aALcd:[function(e,t,r){var n,a,s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(r),s.export(r,"ApiProvider",()=>R),s.export(r,"createApi",()=>N),s.export(r,"reactHooksModule",()=>A),s.export(r,"reactHooksModuleName",()=>T);var i=e("@reduxjs/toolkit/query"),o=e("@reduxjs/toolkit"),l=e("react"),u=e("react-redux");s.exportAll(i,r);var c=s.interopDefault(l);e("de50a014d8bd0037");var d=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},p=Object.defineProperty,f=Object.defineProperties,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=function(e,t,r){return t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},b=function(e,t){for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(m)for(var n=0,a=m(t);n<a.length;n++){var r=a[n];y.call(t,r)&&v(e,r,t[r])}return e},_=function(e,t){return f(e,h(t))};function w(e,t,r,n){var a=(0,l.useMemo)(function(){return{queryArgs:e,serialized:"object"==typeof e?t({queryArgs:e,endpointDefinition:r,endpointName:n}):e}},[e,t,r,n]),s=(0,l.useRef)(a);return(0,l.useEffect)(function(){s.current.serialized!==a.serialized&&(s.current=a)},[a]),s.current.serialized===a.serialized?s.current.queryArgs:e}var j=Symbol();function x(e){var t=(0,l.useRef)(e);return(0,l.useEffect)(function(){(0,u.shallowEqual)(t.current,e)||(t.current=e)},[e]),(0,u.shallowEqual)(t.current,e)?t.current:e}var S=WeakMap?new WeakMap:void 0,k=function(e){var t=e.endpointName,r=e.queryArgs,n="",a=null==S?void 0:S.get(r);if("string"==typeof a)n=a;else{var s=JSON.stringify(r,function(e,t){return(0,o.isPlainObject)(t)?Object.keys(t).sort().reduce(function(e,r){return e[r]=t[r],e},{}):t});(0,o.isPlainObject)(r)&&(null==S||S.set(r,s)),n=s}return t+"("+n+")"},P="undefined"!=typeof window&&window.document&&window.document.createElement?l.useLayoutEffect:l.useEffect,O=function(e){return e},I=function(e){return e.isUninitialized?_(b({},e),{isUninitialized:!1,isFetching:!0,isLoading:void 0===e.data,status:i.QueryStatus.pending}):e};function C(e){return e.replace(e[0],e[0].toUpperCase())}function E(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.assign.apply(Object,d([e],t))}(n=a||(a={})).query="query",n.mutation="mutation";var T=Symbol(),A=function(e){var t=void 0===e?{}:e,r=t.batch,n=void 0===r?u.batch:r,s=t.useDispatch,c=void 0===s?u.useDispatch:s,d=t.useSelector,p=void 0===d?u.useSelector:d,f=t.useStore,h=void 0===f?u.useStore:f,m=t.unstable__sideEffectsInRender,g=void 0!==m&&m;return{name:T,init:function(e,t,r){var s=function(e){var t=e.api,r=e.moduleOptions,n=r.batch,a=r.useDispatch,s=r.useSelector,c=r.useStore,d=r.unstable__sideEffectsInRender,p=e.serializeQueryArgs,f=e.context,h=d?function(e){return e()}:l.useEffect;return{buildQueryHooks:function(e){var r=function(r,n){var s=void 0===n?{}:n,o=s.refetchOnReconnect,u=s.refetchOnFocus,c=s.refetchOnMountOrArgChange,d=s.skip,p=s.pollingInterval,m=t.endpoints[e].initiate,g=a(),y=w(void 0!==d&&d?i.skipToken:r,k,f.endpointDefinitions[e],e),v=x({refetchOnReconnect:o,refetchOnFocus:u,pollingInterval:void 0===p?0:p}),b=(0,l.useRef)(!1),_=(0,l.useRef)(),j=_.current||{},S=j.queryCacheKey,P=j.requestId,O=!1;S&&P&&(O=!!g(t.internalActions.internal_probeSubscription({queryCacheKey:S,requestId:P})));var I=!O&&b.current;return h(function(){b.current=O}),h(function(){I&&(_.current=void 0)},[I]),h(function(){var e,t=_.current;if(y===i.skipToken){null==t||t.unsubscribe(),_.current=void 0;return}var r=null==(e=_.current)?void 0:e.subscriptionOptions;if(t&&t.arg===y)v!==r&&t.updateSubscriptionOptions(v);else{null==t||t.unsubscribe();var n=g(m(y,{subscriptionOptions:v,forceRefetch:c}));_.current=n}},[g,m,c,y,v,I]),(0,l.useEffect)(function(){return function(){var e;null==(e=_.current)||e.unsubscribe(),_.current=void 0}},[]),(0,l.useMemo)(function(){return{refetch:function(){var e;if(!_.current)throw Error("Cannot refetch a query that has not been started yet.");return null==(e=_.current)?void 0:e.refetch()}}},[])},d=function(r){var s=void 0===r?{}:r,i=s.refetchOnReconnect,o=s.refetchOnFocus,u=s.pollingInterval,c=t.endpoints[e].initiate,d=a(),p=(0,l.useState)(j),f=p[0],m=p[1],g=(0,l.useRef)(),y=x({refetchOnReconnect:i,refetchOnFocus:o,pollingInterval:void 0===u?0:u});h(function(){var e,t;y!==(null==(e=g.current)?void 0:e.subscriptionOptions)&&(null==(t=g.current)||t.updateSubscriptionOptions(y))},[y]);var v=(0,l.useRef)(y);h(function(){v.current=y},[y]);var b=(0,l.useCallback)(function(e,t){var r;return void 0===t&&(t=!1),n(function(){var n;null==(n=g.current)||n.unsubscribe(),g.current=r=d(c(e,{subscriptionOptions:v.current,forceRefetch:!t})),m(e)}),r},[d,c]);return(0,l.useEffect)(function(){return function(){var e;null==(e=null==g?void 0:g.current)||e.unsubscribe()}},[]),(0,l.useEffect)(function(){f===j||g.current||b(f,!0)},[f,b]),(0,l.useMemo)(function(){return[b,f]},[b,f])},g=function(r,n){var a=void 0===n?{}:n,d=a.skip,h=a.selectFromResult,g=t.endpoints[e].select,y=w(void 0!==d&&d?i.skipToken:r,p,f.endpointDefinitions[e],e),v=(0,l.useRef)(),b=(0,l.useMemo)(function(){return(0,o.createSelector)([g(y),function(e,t){return t},function(e){return y}],m)},[g,y]),_=(0,l.useMemo)(function(){return h?(0,o.createSelector)([b],h):b},[b,h]),j=s(function(e){return _(e,v.current)},u.shallowEqual),x=b(c().getState(),v.current);return P(function(){v.current=x},[x]),j};return{useQueryState:g,useQuerySubscription:r,useLazyQuerySubscription:d,useLazyQuery:function(e){var t=d(e),r=t[0],n=t[1],a=g(n,_(b({},e),{skip:n===j})),s=(0,l.useMemo)(function(){return{lastArg:n}},[n]);return(0,l.useMemo)(function(){return[r,a,s]},[r,a,s])},useQuery:function(e,t){var n=r(e,t),a=g(e,b({selectFromResult:e===i.skipToken||(null==t?void 0:t.skip)?void 0:I},t)),s=a.data,o=a.status,u=a.isLoading,c=a.isSuccess,d=a.isError,p=a.error;return(0,l.useDebugValue)({data:s,status:o,isLoading:u,isSuccess:c,isError:d,error:p}),(0,l.useMemo)(function(){return b(b({},a),n)},[a,n])}}},buildMutationHook:function(e){return function(r){var i=void 0===r?{}:r,c=i.selectFromResult,d=void 0===c?O:c,p=i.fixedCacheKey,f=t.endpoints[e],h=f.select,m=f.initiate,g=a(),y=(0,l.useState)(),v=y[0],w=y[1];(0,l.useEffect)(function(){return function(){(null==v?void 0:v.arg.fixedCacheKey)||null==v||v.reset()}},[v]);var j=(0,l.useCallback)(function(e){var t=g(m(e,{fixedCacheKey:p}));return w(t),t},[g,m,p]),x=(v||{}).requestId,S=s((0,l.useMemo)(function(){return(0,o.createSelector)([h({fixedCacheKey:p,requestId:null==v?void 0:v.requestId})],d)},[h,v,d,p]),u.shallowEqual),k=null==p?null==v?void 0:v.arg.originalArgs:void 0,P=(0,l.useCallback)(function(){n(function(){v&&w(void 0),p&&g(t.internalActions.removeMutationResult({requestId:x,fixedCacheKey:p}))})},[g,p,v,x]),I=S.endpointName,C=S.data,E=S.status,T=S.isLoading,A=S.isSuccess,R=S.isError,N=S.error;(0,l.useDebugValue)({endpointName:I,data:C,status:E,isLoading:T,isSuccess:A,isError:R,error:N});var M=(0,l.useMemo)(function(){return _(b({},S),{originalArgs:k,reset:P})},[S,k,P]);return(0,l.useMemo)(function(){return[j,M]},[j,M])}},usePrefetch:function(e,r){var n=a(),s=x(r);return(0,l.useCallback)(function(r,a){return n(t.util.prefetch(e,r,b(b({},s),a)))},[e,n,s])}};function m(e,t,r){if((null==t?void 0:t.endpointName)&&e.isUninitialized){var n=t.endpointName,a=f.endpointDefinitions[n];p({queryArgs:t.originalArgs,endpointDefinition:a,endpointName:n})===p({queryArgs:r,endpointDefinition:a,endpointName:n})&&(t=void 0)}var s=e.isSuccess?e.data:null==t?void 0:t.data;void 0===s&&(s=e.data);var i=void 0!==s,o=e.isLoading,l=!i&&o,u=e.isSuccess||o&&i;return _(b({},e),{data:s,currentData:e.data,isFetching:o,isLoading:l,isSuccess:u})}}({api:e,moduleOptions:{batch:n,useDispatch:c,useSelector:p,useStore:h,unstable__sideEffectsInRender:g},serializeQueryArgs:t.serializeQueryArgs,context:r}),d=s.buildQueryHooks,f=s.buildMutationHook;return E(e,{usePrefetch:s.usePrefetch}),E(r,{batch:n}),{injectEndpoint:function(t,r){if(r.type===a.query){var n=d(t),s=n.useQuery,i=n.useLazyQuery,o=n.useLazyQuerySubscription,l=n.useQueryState,u=n.useQuerySubscription;E(e.endpoints[t],{useQuery:s,useLazyQuery:i,useLazyQuerySubscription:o,useQueryState:l,useQuerySubscription:u}),e["use"+C(t)+"Query"]=s,e["useLazy"+C(t)+"Query"]=i}else if(r.type===a.mutation){var c=f(t);E(e.endpoints[t],{useMutation:c}),e["use"+C(t)+"Mutation"]=c}}}}}};function R(e){var t=(0,c.default).useState(function(){var t;return(0,o.configureStore)({reducer:((t={})[e.api.reducerPath]=e.api.reducer,t),middleware:function(t){return t().concat(e.api.middleware)}})})[0];return(0,l.useEffect)(function(){return!1===e.setupListeners?void 0:(0,i.setupListeners)(t.dispatch,e.setupListeners)},[e.setupListeners,t.dispatch]),(0,c.default).createElement(u.Provider,{store:t,context:e.context},e.children)}var N=(0,i.buildCreateApi)((0,i.coreModule)(),A())},{de50a014d8bd0037:"7XEqq","@reduxjs/toolkit/query":"3Srsp","@reduxjs/toolkit":"6029V",react:"fMilz","react-redux":"jxBlS","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7XEqq":[function(e,t,r){let n,a,s,i;var o=Object.create,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of c(t))p.call(e,a)||a===r||l(e,a,{get:()=>t[a],enumerable:!(n=u(t,a))||n.enumerable});return e},h=(e,t,r)=>(r=null!=e?o(d(e)):{},f(!t&&e&&e.__esModule?r:l(r,"default",{value:e,enumerable:!0}),e)),m=(n=(e,t)=>{var r,n,a=t.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var l,u=[],c=!1,d=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&f())}function f(){if(!c){var e=o(p);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||c||o(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},()=>(a||n((a={exports:{}}).exports,a),a.exports)),g={};((e,t)=>{for(var r in t)l(e,r,{get:t[r],enumerable:!0})})(g,{default:()=>v}),t.exports=f(l({},"__esModule",{value:!0}),g);var y=h(m());s=h(m()),i=t.exports,f(g,s,"default"),i&&f(i,s,"default");var v=y.default},{}],"3Srsp":[function(e,t,r){var n,a,s,i,o,l=e("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(r),l.export(r,"QueryStatus",()=>s),l.export(r,"buildCreateApi",()=>eu),l.export(r,"copyWithStructuralSharing",()=>I),l.export(r,"coreModule",()=>ex),l.export(r,"coreModuleName",()=>ej),l.export(r,"createApi",()=>eS),l.export(r,"defaultSerializeQueryArgs",()=>el),l.export(r,"fakeBaseQuery",()=>ec),l.export(r,"fetchBaseQuery",()=>R),l.export(r,"retry",()=>F),l.export(r,"setupListeners",()=>Z),l.export(r,"skipSelector",()=>en),l.export(r,"skipToken",()=>er);var u=e("@reduxjs/toolkit"),c=e("immer"),d=e("reselect");e("51a55a5d1c6cd353");var p=arguments[3],f=function(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},h=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},m=Object.defineProperty,g=Object.defineProperties,y=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,w=function(e,t,r){return t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},j=function(e,t){for(var r in t||(t={}))b.call(t,r)&&w(e,r,t[r]);if(v)for(var n=0,a=v(t);n<a.length;n++){var r=a[n];_.call(t,r)&&w(e,r,t[r])}return e},x=function(e,t){return g(e,y(t))},S=function(e,t){var r={};for(var n in e)b.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&v)for(var a=0,s=v(e);a<s.length;a++){var n=s[a];0>t.indexOf(n)&&_.call(e,n)&&(r[n]=e[n])}return r},k=function(e,t,r){return new Promise(function(n,a){var s=function(e){try{o(r.next(e))}catch(e){a(e)}},i=function(e){try{o(r.throw(e))}catch(e){a(e)}},o=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(s,i)};o((r=r.apply(e,t)).next())})};(n=s||(s={})).uninitialized="uninitialized",n.pending="pending",n.fulfilled="fulfilled",n.rejected="rejected";var P=function(e){return[].concat.apply([],e)},O=u.isPlainObject;function I(e,t){if(e===t||!(O(e)&&O(t)||Array.isArray(e)&&Array.isArray(t)))return t;for(var r=Object.keys(t),n=Object.keys(e),a=r.length===n.length,s=Array.isArray(t)?[]:{},i=0;i<r.length;i++){var o=r[i];s[o]=I(e[o],t[o]),a&&(a=e[o]===s[o])}return a?e:s}var C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fetch.apply(void 0,e)},E=function(e){return e.status>=200&&e.status<=299},T=function(e){return/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"")};function A(e){if(!(0,u.isPlainObject)(e))return e;for(var t=j({},e),r=0,n=Object.entries(t);r<n.length;r++){var a=n[r],s=a[0];void 0===a[1]&&delete t[s]}return t}function R(e){var t=this;void 0===e&&(e={});var r=e,n=r.baseUrl,a=r.prepareHeaders,s=void 0===a?function(e){return e}:a,i=r.fetchFn,o=void 0===i?C:i,l=r.paramsSerializer,c=r.isJsonContentType,d=void 0===c?T:c,p=r.jsonContentType,h=void 0===p?"application/json":p,m=r.jsonReplacer,g=r.timeout,y=r.responseHandler,v=r.validateStatus,b=S(r,["baseUrl","prepareHeaders","fetchFn","paramsSerializer","isJsonContentType","jsonContentType","jsonReplacer","timeout","responseHandler","validateStatus"]);return"undefined"==typeof fetch&&o===C&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),function(e,r){return k(t,null,function(){var t,a,i,c,p,_,w,P,O,I,C,T,R,N,M,L,F,$,D,z,U,B,Z,q,V,K,H,W,J,Q,G,Y,X,ee,et;return f(this,function(er){switch(er.label){case 0:return t=r.signal,a=r.getState,i=r.extra,c=r.endpoint,p=r.forced,_=r.type,O=(P="string"==typeof e?{url:e}:e).url,C=void 0===(I=P.headers)?new Headers(b.headers):I,R=void 0===(T=P.params)?void 0:T,M=void 0===(N=P.responseHandler)?null!=y?y:"json":N,F=void 0===(L=P.validateStatus)?null!=v?v:E:L,D=void 0===($=P.timeout)?g:$,z=S(P,["url","headers","params","responseHandler","validateStatus","timeout"]),U=j(x(j({},b),{signal:t}),z),C=new Headers(A(C)),B=U,[4,s(C,{getState:a,extra:i,endpoint:c,forced:p,type:_})];case 1:B.headers=er.sent()||C,Z=function(e){return"object"==typeof e&&((0,u.isPlainObject)(e)||Array.isArray(e)||"function"==typeof e.toJSON)},!U.headers.has("content-type")&&Z(U.body)&&U.headers.set("content-type",h),Z(U.body)&&d(U.headers)&&(U.body=JSON.stringify(U.body,m)),R&&(q=~O.indexOf("?")?"&":"?",V=l?l(R):new URLSearchParams(A(R)),O+=q+V),K=new Request(O=function(e,t){if(!e)return t;if(!t)return e;if(r=t,RegExp("(^|:)//").test(r))return t;var r,n=e.endsWith("/")||!t.startsWith("?")?"/":"";return""+(e=e.replace(/\/$/,""))+n+(t=t.replace(/^\//,""))}(n,O),U),w={request:new Request(O,U)},W=!1,J=D&&setTimeout(function(){W=!0,r.abort()},D),er.label=2;case 2:return er.trys.push([2,4,5,6]),[4,o(K)];case 3:return H=er.sent(),[3,6];case 4:return Q=er.sent(),[2,{error:{status:W?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(Q)},meta:w}];case 5:return J&&clearTimeout(J),[7];case 6:G=H.clone(),w.response=G,X="",er.label=7;case 7:return er.trys.push([7,9,,10]),[4,Promise.all([(function(e,t){return k(this,null,function(){var r;return f(this,function(n){switch(n.label){case 0:if("function"==typeof t)return[2,t(e)];if("content-type"===t&&(t=d(e.headers)?"json":"text"),"json"!==t)return[3,2];return[4,e.text()];case 1:return[2,(r=n.sent()).length?JSON.parse(r):null];case 2:return[2,e.text()]}})})})(H,M).then(function(e){return Y=e},function(e){return ee=e}),G.text().then(function(e){return X=e},function(){})])];case 8:if(er.sent(),ee)throw ee;return[3,10];case 9:return et=er.sent(),[2,{error:{status:"PARSING_ERROR",originalStatus:H.status,data:X,error:String(et)},meta:w}];case 10:return[2,F(H,Y)?{data:Y,meta:w}:{error:{status:H.status,data:Y},meta:w}]}})})}}var N=function(e,t){void 0===t&&(t=void 0),this.value=e,this.meta=t};function M(e,t){return void 0===e&&(e=0),void 0===t&&(t=5),k(this,null,function(){var r;return f(this,function(n){switch(n.label){case 0:return r=~~((Math.random()+.4)*(300<<Math.min(e,t))),[4,new Promise(function(e){return setTimeout(function(t){return e(t)},r)})];case 1:return n.sent(),[2]}})})}var L={},F=Object.assign(function(e,t){return function(r,n,a){return k(void 0,null,function(){var s,i,o,l,u,c;return f(this,function(d){switch(d.label){case 0:s=[5,(t||L).maxRetries,(a||L).maxRetries].filter(function(e){return void 0!==e}).slice(-1)[0],i=function(e,t,r){return r.attempt<=s},o=j(j({maxRetries:s,backoff:M,retryCondition:i},t),a),l=0,d.label=1;case 1:d.label=2;case 2:return d.trys.push([2,4,,6]),[4,e(r,n,a)];case 3:if((u=d.sent()).error)throw new N(u);return[2,u];case 4:if(c=d.sent(),l++,c.throwImmediately){if(c instanceof N)return[2,c.value];throw c}if(c instanceof N&&!o.retryCondition(c.value.error,r,{attempt:l,baseQueryApi:n,extraOptions:a}))return[2,c.value];return[4,o.backoff(l,o.maxRetries)];case 5:return d.sent(),[3,6];case 6:return[3,1];case 7:return[2]}})})}},{fail:function(e){throw Object.assign(new N({error:e}),{throwImmediately:!0})}}),$=(0,u.createAction)("__rtkq/focused"),D=(0,u.createAction)("__rtkq/unfocused"),z=(0,u.createAction)("__rtkq/online"),U=(0,u.createAction)("__rtkq/offline"),B=!1;function Z(e,t){var r,n,a,s;return t?t(e,{onFocus:$,onFocusLost:D,onOffline:U,onOnline:z}):(r=function(){return e($())},n=function(){return e(z())},a=function(){return e(U())},s=function(){"visible"===window.document.visibilityState?r():e(D())},!B&&"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("visibilitychange",s,!1),window.addEventListener("focus",r,!1),window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),B=!0),function(){window.removeEventListener("focus",r),window.removeEventListener("visibilitychange",s),window.removeEventListener("online",n),window.removeEventListener("offline",a),B=!1})}function q(e){return e.type===i.query}function V(e,t,r,n,a,s){return"function"==typeof e?e(t,r,n,a).map(K).map(s):Array.isArray(e)?e.map(K).map(s):[]}function K(e){return"string"==typeof e?{type:e}:e}function H(e){return null!=e}(a=i||(i={})).query="query",a.mutation="mutation";var W=Symbol("forceQueryFn"),J=function(e){return"function"==typeof e[W]};function Q(e){return e}function G(e,t,r,n){return V(r[e.meta.arg.endpointName][t],(0,u.isFulfilled)(e)?e.payload:void 0,(0,u.isRejectedWithValue)(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function Y(e,t,r){var n=e[t];n&&r(n)}function X(e){var t;return null!=(t="arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)?t:e.requestId}function ee(e,t,r){var n=e[X(t)];n&&r(n)}var et={},er=Symbol.for("RTKQ/skipToken"),en=er,ea={status:s.uninitialized},es=(0,u.createNextState)(ea,function(){}),ei=(0,u.createNextState)(ea,function(){}),eo=WeakMap?new WeakMap:void 0,el=function(e){var t=e.endpointName,r=e.queryArgs,n="",a=null==eo?void 0:eo.get(r);if("string"==typeof a)n=a;else{var s=JSON.stringify(r,function(e,t){return(0,u.isPlainObject)(t)?Object.keys(t).sort().reduce(function(e,r){return e[r]=t[r],e},{}):t});(0,u.isPlainObject)(r)&&(null==eo||eo.set(r,s)),n=s}return t+"("+n+")"};function eu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var r=(0,d.defaultMemoize)(function(e){var r,n;return null==(n=t.extractRehydrationInfo)?void 0:n.call(t,e,{reducerPath:null!=(r=t.reducerPath)?r:"api"})}),n=x(j({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},t),{extractRehydrationInfo:r,serializeQueryArgs:function(e){var r=el;if("serializeQueryArgs"in e.endpointDefinition){var n=e.endpointDefinition.serializeQueryArgs;r=function(e){var t=n(e);return"string"==typeof t?t:el(x(j({},e),{queryArgs:t}))}}else t.serializeQueryArgs&&(r=t.serializeQueryArgs);return r(e)},tagTypes:h([],t.tagTypes||[])}),a={endpointDefinitions:{},batch:function(e){e()},apiUid:(0,u.nanoid)(),extractRehydrationInfo:r,hasRehydrationInfo:(0,d.defaultMemoize)(function(e){return null!=r(e)})},s={injectEndpoints:function(e){for(var t=e.endpoints({query:function(e){return x(j({},e),{type:i.query})},mutation:function(e){return x(j({},e),{type:i.mutation})}}),r=0,n=Object.entries(t);r<n.length;r++){var l=n[r],u=l[0],c=l[1];if(e.overrideExisting||!(u in a.endpointDefinitions)){a.endpointDefinitions[u]=c;for(var d=0;d<o.length;d++)o[d].injectEndpoint(u,c)}}return s},enhanceEndpoints:function(e){var t=e.addTagTypes,r=e.endpoints;if(t)for(var i=0;i<t.length;i++){var o=t[i];n.tagTypes.includes(o)||n.tagTypes.push(o)}if(r)for(var l=0,u=Object.entries(r);l<u.length;l++){var c=u[l],d=c[0],p=c[1];"function"==typeof p?p(a.endpointDefinitions[d]):Object.assign(a.endpointDefinitions[d]||{},p)}return s}},o=e.map(function(e){return e.init(s,n,a)});return s.injectEndpoints({endpoints:t.endpoints})}}function ec(){return function(){throw Error("When using `fakeBaseQuery`, all queries & mutations must use the `queryFn` definition syntax.")}}var ed=function(e){var t=e.reducerPath,r=e.api,n=e.context,a=e.internalState,s=r.internalActions,i=s.removeQueryResult,o=s.unsubscribeQueryResult;function l(e){var t=a.currentSubscriptions[e];return!!t&&!function(e){for(var t in e)return!1;return!0}(t)}var u={};function c(e,t,r,a){var s,o=n.endpointDefinitions[t],c=null!=(s=null==o?void 0:o.keepUnusedDataFor)?s:a.keepUnusedDataFor;if(c!==1/0){var d=Math.max(0,Math.min(c,2147482.647));if(!l(e)){var p=u[e];p&&clearTimeout(p),u[e]=setTimeout(function(){l(e)||r.dispatch(i({queryCacheKey:e})),delete u[e]},1e3*d)}}}return function(e,a,s){var i;if(o.match(e)){var l=a.getState()[t],d=e.payload.queryCacheKey;c(d,null==(i=l.queries[d])?void 0:i.endpointName,a,l.config)}if(r.util.resetApiState.match(e))for(var p=0,f=Object.entries(u);p<f.length;p++){var h=f[p],m=h[0],g=h[1];g&&clearTimeout(g),delete u[m]}if(n.hasRehydrationInfo(e))for(var l=a.getState()[t],y=n.extractRehydrationInfo(e).queries,v=0,b=Object.entries(y);v<b.length;v++){var _=b[v],d=_[0],w=_[1];c(d,null==w?void 0:w.endpointName,a,l.config)}}},ep=function(e){var t=e.reducerPath,r=e.context,n=e.context.endpointDefinitions,a=e.mutationThunk,i=e.api,o=e.assertTagType,l=e.refetchQuery,c=i.internalActions.removeQueryResult,d=(0,u.isAnyOf)((0,u.isFulfilled)(a),(0,u.isRejectedWithValue)(a));function p(e,n){var a=n.getState(),o=a[t],u=i.util.selectInvalidatedBy(a,e);r.batch(function(){for(var e,t=Array.from(u.values()),r=0;r<t.length;r++){var a=t[r].queryCacheKey,i=o.queries[a],d=null!=(e=o.subscriptions[a])?e:{};i&&(0===Object.keys(d).length?n.dispatch(c({queryCacheKey:a})):i.status!==s.uninitialized&&n.dispatch(l(i,a)))}})}return function(e,t){d(e)&&p(G(e,"invalidatesTags",n,o),t),i.util.invalidateTags.match(e)&&p(V(e.payload,void 0,void 0,void 0,void 0,o),t)}},ef=function(e){var t=e.reducerPath,r=e.queryThunk,n=e.api,a=e.refetchQuery,i=e.internalState,o={};function l(e,r){var n=e.queryCacheKey,l=r.getState()[t].queries[n],u=i.currentSubscriptions[n];if(l&&l.status!==s.uninitialized){var c=d(u);if(Number.isFinite(c)){var p=o[n];(null==p?void 0:p.timeout)&&(clearTimeout(p.timeout),p.timeout=void 0);var f=Date.now()+c,h=o[n]={nextPollTimestamp:f,pollingInterval:c,timeout:setTimeout(function(){h.timeout=void 0,r.dispatch(a(l,n))},c)}}}}function u(e,r){var n=e.queryCacheKey,a=r.getState()[t].queries[n],u=i.currentSubscriptions[n];if(a&&a.status!==s.uninitialized){var p=d(u);if(!Number.isFinite(p)){c(n);return}var f=o[n],h=Date.now()+p;(!f||h<f.nextPollTimestamp)&&l({queryCacheKey:n},r)}}function c(e){var t=o[e];(null==t?void 0:t.timeout)&&clearTimeout(t.timeout),delete o[e]}function d(e){void 0===e&&(e={});var t=Number.POSITIVE_INFINITY;for(var r in e)e[r].pollingInterval&&(t=Math.min(e[r].pollingInterval,t));return t}return function(e,t){(n.internalActions.updateSubscriptionOptions.match(e)||n.internalActions.unsubscribeQueryResult.match(e))&&u(e.payload,t),(r.pending.match(e)||r.rejected.match(e)&&e.meta.condition)&&u(e.meta.arg,t),(r.fulfilled.match(e)||r.rejected.match(e)&&!e.meta.condition)&&l(e.meta.arg,t),n.util.resetApiState.match(e)&&function(){for(var e=0,t=Object.keys(o);e<t.length;e++)c(t[e])}()}},eh=function(e){var t=e.reducerPath,r=e.context,n=e.api,a=e.refetchQuery,i=e.internalState,o=n.internalActions.removeQueryResult;function l(e,n){var l=e.getState()[t],u=l.queries,c=i.currentSubscriptions;r.batch(function(){for(var t=0,r=Object.keys(c);t<r.length;t++){var i=r[t],d=u[i],p=c[i];p&&d&&(Object.values(p).some(function(e){return!0===e[n]})||Object.values(p).every(function(e){return void 0===e[n]})&&l.config[n])&&(0===Object.keys(p).length?e.dispatch(o({queryCacheKey:i})):d.status!==s.uninitialized&&e.dispatch(a(d,i)))}})}return function(e,t){$.match(e)&&l(t,"refetchOnFocus"),z.match(e)&&l(t,"refetchOnReconnect")}},em=Error("Promise never resolved before cacheEntryRemoved."),eg=function(e){var t=e.api,r=e.reducerPath,n=e.context,a=e.queryThunk,s=e.mutationThunk;e.internalState;var o=(0,u.isAsyncThunkAction)(a),l=(0,u.isAsyncThunkAction)(s),c=(0,u.isFulfilled)(a,s),d={};function p(e,r,a,s,o){var l=n.endpointDefinitions[e],u=null==l?void 0:l.onCacheEntryAdded;if(u){var c={},p=new Promise(function(e){c.cacheEntryRemoved=e}),f=Promise.race([new Promise(function(e){c.valueResolved=e}),p.then(function(){throw em})]);f.catch(function(){}),d[a]=c;var h=t.endpoints[e].select(l.type===i.query?r:a),m=s.dispatch(function(e,t,r){return r}),g=x(j({},s),{getCacheEntry:function(){return h(s.getState())},requestId:o,extra:m,updateCachedData:l.type===i.query?function(n){return s.dispatch(t.util.updateQueryData(e,r,n))}:void 0,cacheDataLoaded:f,cacheEntryRemoved:p});Promise.resolve(u(r,g)).catch(function(e){if(e!==em)throw e})}}return function(e,n,i){var u=o(e)?e.meta.arg.queryCacheKey:l(e)?e.meta.requestId:t.internalActions.removeQueryResult.match(e)?e.payload.queryCacheKey:t.internalActions.removeMutationResult.match(e)?X(e.payload):"";if(a.pending.match(e)){var f=i[r].queries[u],h=n.getState()[r].queries[u];!f&&h&&p(e.meta.arg.endpointName,e.meta.arg.originalArgs,u,n,e.meta.requestId)}else if(s.pending.match(e)){var h=n.getState()[r].mutations[u];h&&p(e.meta.arg.endpointName,e.meta.arg.originalArgs,u,n,e.meta.requestId)}else if(c(e)){var m=d[u];(null==m?void 0:m.valueResolved)&&(m.valueResolved({data:e.payload,meta:e.meta.baseQueryMeta}),delete m.valueResolved)}else if(t.internalActions.removeQueryResult.match(e)||t.internalActions.removeMutationResult.match(e)){var m=d[u];m&&(delete d[u],m.cacheEntryRemoved())}else if(t.util.resetApiState.match(e))for(var g=0,y=Object.entries(d);g<y.length;g++){var v=y[g],b=v[0],m=v[1];delete d[b],m.cacheEntryRemoved()}}},ey=function(e){var t=e.api,r=e.context,n=e.queryThunk,a=e.mutationThunk,s=(0,u.isPending)(n,a),o=(0,u.isRejected)(n,a),l=(0,u.isFulfilled)(n,a),c={};return function(e,n){var a,u,d;if(s(e)){var p=e.meta,f=p.requestId,h=p.arg,m=h.endpointName,g=h.originalArgs,y=r.endpointDefinitions[m],v=null==y?void 0:y.onQueryStarted;if(v){var b={},_=new Promise(function(e,t){b.resolve=e,b.reject=t});_.catch(function(){}),c[f]=b;var w=t.endpoints[m].select(y.type===i.query?g:f),S=n.dispatch(function(e,t,r){return r}),k=x(j({},n),{getCacheEntry:function(){return w(n.getState())},requestId:f,extra:S,updateCachedData:y.type===i.query?function(e){return n.dispatch(t.util.updateQueryData(m,g,e))}:void 0,queryFulfilled:_});v(g,k)}}else if(l(e)){var P=e.meta,f=P.requestId,O=P.baseQueryMeta;null==(a=c[f])||a.resolve({data:e.payload,meta:O}),delete c[f]}else if(o(e)){var I=e.meta,f=I.requestId,C=I.rejectedWithValue,O=I.baseQueryMeta;null==(d=c[f])||d.reject({error:null!=(u=e.payload)?u:e.error,isUnhandledError:!C,meta:O}),delete c[f]}}},ev=function(e){var t=e.api,r=e.context.apiUid;return e.reducerPath,function(e,n){t.util.resetApiState.match(e)&&n.dispatch(t.internalActions.middlewareRegistered(r))}},eb="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:void 0!==p?p:globalThis):function(e){return(o||(o=Promise.resolve())).then(e).catch(function(e){return setTimeout(function(){throw e},0)})},e_=function(e){var t=e.api,r=e.queryThunk,n=e.internalState,a=t.reducerPath+"/subscriptions",s=null,i=!1,o=t.internalActions,l=o.updateSubscriptionOptions,u=o.unsubscribeQueryResult,d=function(e,n){var a,s,i,o,c,d,p,f,h;if(l.match(n)){var m=n.payload,g=m.queryCacheKey,y=m.requestId,v=m.options;return(null==(a=null==e?void 0:e[g])?void 0:a[y])&&(e[g][y]=v),!0}if(u.match(n)){var b=n.payload,g=b.queryCacheKey,y=b.requestId;return e[g]&&delete e[g][y],!0}if(t.internalActions.removeQueryResult.match(n))return delete e[n.payload.queryCacheKey],!0;if(r.pending.match(n)){var _=n.meta,w=_.arg,y=_.requestId;if(w.subscribe){var j=null!=(i=e[s=w.queryCacheKey])?i:e[s]={};return j[y]=null!=(c=null!=(o=w.subscriptionOptions)?o:j[y])?c:{},!0}}if(r.rejected.match(n)){var x=n.meta,S=x.condition,w=x.arg,y=x.requestId;if(S&&w.subscribe){var j=null!=(p=e[d=w.queryCacheKey])?p:e[d]={};return j[y]=null!=(h=null!=(f=w.subscriptionOptions)?f:j[y])?h:{},!0}}return!1};return function(e,o){if(s||(s=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(e))return s=n.currentSubscriptions={},[!0,!1];if(t.internalActions.internal_probeSubscription.match(e)){var l,u,p=e.payload,f=p.queryCacheKey,h=p.requestId;return[!1,!!(null==(l=n.currentSubscriptions[f])?void 0:l[h])]}if(d(n.currentSubscriptions,e)){i||(eb(function(){var e=JSON.parse(JSON.stringify(n.currentSubscriptions)),r=(0,c.produceWithPatches)(s,function(){return e})[1];o.next(t.internalActions.subscriptionsUpdated(r)),s=e,i=!1}),i=!0);var m=!!(null==(u=e.type)?void 0:u.startsWith(a)),g=r.rejected.match(e)&&e.meta.condition&&!!e.meta.arg.subscribe;return[!m&&!g,!1]}return[!0,!1]}};function ew(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.assign.apply(Object,h([e],t))}var ej=Symbol(),ex=function(){return{name:ej,init:function(e,t,r){var n,a,o,l,d,p,m,g,y,v,b,_,w,S,O,C,E,T,A,R,M,L,F,B,Z,en,ea,eo,el,eu,ec,em=t.baseQuery,eb=(t.tagTypes,t.reducerPath),ex=t.serializeQueryArgs,eS=t.keepUnusedDataFor,ek=t.refetchOnMountOrArgChange,eP=t.refetchOnFocus,eO=t.refetchOnReconnect;(0,c.enablePatches)();var eI=function(e){return e};Object.assign(e,{reducerPath:eb,endpoints:{},internalActions:{onOnline:z,onOffline:U,onFocus:$,onFocusLost:D},util:{}});var eC=function(e){var t=this,r=e.reducerPath,n=e.baseQuery,a=e.context.endpointDefinitions,i=e.serializeQueryArgs,o=e.api,l=e.assertTagType,d=function(e,r){return k(t,[e,r],function(e,t){var r,s,i,o,l,c,d,h,m,g,y,v=t.signal,b=t.abort,_=t.rejectWithValue,w=t.fulfillWithValue,j=t.dispatch,x=t.getState,S=t.extra;return f(this,function(t){switch(t.label){case 0:r=a[e.endpointName],t.label=1;case 1:if(t.trys.push([1,8,,13]),s=Q,i=void 0,o={signal:v,abort:b,dispatch:j,getState:x,extra:S,endpoint:e.endpointName,type:e.type,forced:"query"===e.type?p(e,x()):void 0},!(l="query"===e.type?e[W]:void 0))return[3,2];return i=l(),[3,6];case 2:if(!r.query)return[3,4];return[4,n(r.query(e.originalArgs),o,r.extraOptions)];case 3:return i=t.sent(),r.transformResponse&&(s=r.transformResponse),[3,6];case 4:return[4,r.queryFn(e.originalArgs,o,r.extraOptions,function(e){return n(e,o,r.extraOptions)})];case 5:i=t.sent(),t.label=6;case 6:if(i.error)throw new N(i.error,i.meta);return c=w,[4,s(i.data,i.meta,e.originalArgs)];case 7:return[2,c.apply(void 0,[t.sent(),((g={fulfilledTimeStamp:Date.now(),baseQueryMeta:i.meta})[u.SHOULD_AUTOBATCH]=!0,g)])];case 8:if(!((d=t.sent())instanceof N))return[3,12];h=Q,r.query&&r.transformErrorResponse&&(h=r.transformErrorResponse),t.label=9;case 9:return t.trys.push([9,11,,12]),m=_,[4,h(d.value,d.meta,e.originalArgs)];case 10:return[2,m.apply(void 0,[t.sent(),((y={baseQueryMeta:d.meta})[u.SHOULD_AUTOBATCH]=!0,y)])];case 11:return d=t.sent(),[3,12];case 12:throw console.error(d),d;case 13:return[2]}})})};function p(e,t){var n,a,s,i,o=null==(a=null==(n=t[r])?void 0:n.queries)?void 0:a[e.queryCacheKey],l=null==(s=t[r])?void 0:s.config.refetchOnMountOrArgChange,u=null==o?void 0:o.fulfilledTimeStamp,c=null!=(i=e.forceRefetch)?i:e.subscribe&&l;return!!c&&(!0===c||(Number(new Date)-Number(u))/1e3>=c)}function h(e){return function(t){var r,n;return(null==(n=null==(r=null==t?void 0:t.meta)?void 0:r.arg)?void 0:n.endpointName)===e}}return{queryThunk:(0,u.createAsyncThunk)(r+"/executeQuery",d,{getPendingMeta:function(){var e;return(e={startedTimeStamp:Date.now()})[u.SHOULD_AUTOBATCH]=!0,e},condition:function(e,t){var n,s,i,o=(0,t.getState)(),l=null==(s=null==(n=o[r])?void 0:n.queries)?void 0:s[e.queryCacheKey],u=null==l?void 0:l.fulfilledTimeStamp,c=e.originalArgs,d=null==l?void 0:l.originalArgs,f=a[e.endpointName];return!!J(e)||(null==l?void 0:l.status)!=="pending"&&(!!(p(e,o)||q(f)&&(null==(i=null==f?void 0:f.forceRefetch)?void 0:i.call(f,{currentArg:c,previousArg:d,endpointState:l,state:o})))||!u)},dispatchConditionRejection:!0}),mutationThunk:(0,u.createAsyncThunk)(r+"/executeMutation",d,{getPendingMeta:function(){var e;return(e={startedTimeStamp:Date.now()})[u.SHOULD_AUTOBATCH]=!0,e}}),prefetch:function(e,t,r){return function(n,a){var s="force"in r&&r.force,i="ifOlderThan"in r&&r.ifOlderThan,l=function(r){return void 0===r&&(r=!0),o.endpoints[e].initiate(t,{forceRefetch:r})},u=o.endpoints[e].select(t)(a());if(s)n(l());else if(i){var c=null==u?void 0:u.fulfilledTimeStamp;if(!c){n(l());return}(Number(new Date)-Number(new Date(c)))/1e3>=i&&n(l())}else n(l(!1))}},updateQueryData:function(e,t,r,n){return void 0===n&&(n=!0),function(a,i){var l,u,d,p=o.endpoints[e].select(t)(i()),f={patches:[],inversePatches:[],undo:function(){return a(o.util.patchQueryData(e,t,f.inversePatches,n))}};if(p.status===s.uninitialized)return f;if("data"in p){if((0,c.isDraftable)(p.data)){var h=(0,c.produceWithPatches)(p.data,r),m=h[0],g=h[1],y=h[2];(l=f.patches).push.apply(l,g),(u=f.inversePatches).push.apply(u,y),d=m}else d=r(p.data),f.patches.push({op:"replace",path:[],value:d}),f.inversePatches.push({op:"replace",path:[],value:p.data})}return a(o.util.patchQueryData(e,t,f.patches,n)),f}},upsertQueryData:function(e,t,r){return function(n){var a;return n(o.endpoints[e].initiate(t,((a={subscribe:!1,forceRefetch:!0})[W]=function(){return{data:r}},a)))}},patchQueryData:function(e,t,r,n){return function(s,u){var c=a[e],d=i({queryArgs:t,endpointDefinition:c,endpointName:e});if(s(o.internalActions.queryResultPatched({queryCacheKey:d,patches:r})),n){var p=o.endpoints[e].select(t)(u()),f=V(c.providesTags,p.data,void 0,t,{},l);s(o.internalActions.updateProvidedBy({queryCacheKey:d,providedTags:f}))}}},buildMatchThunkActions:function(e,t){return{matchPending:(0,u.isAllOf)((0,u.isPending)(e),h(t)),matchFulfilled:(0,u.isAllOf)((0,u.isFulfilled)(e),h(t)),matchRejected:(0,u.isAllOf)((0,u.isRejected)(e),h(t))}}}}({baseQuery:em,reducerPath:eb,context:r,api:e,serializeQueryArgs:ex,assertTagType:eI}),eE=eC.queryThunk,eT=eC.mutationThunk,eA=eC.patchQueryData,eR=eC.updateQueryData,eN=eC.upsertQueryData,eM=eC.prefetch,eL=eC.buildMatchThunkActions,eF=(S=(w={context:r,queryThunk:eE,mutationThunk:eT,reducerPath:eb,assertTagType:eI,config:{refetchOnFocus:eP,refetchOnReconnect:eO,refetchOnMountOrArgChange:ek,keepUnusedDataFor:eS,reducerPath:eb}}).reducerPath,O=w.queryThunk,C=w.mutationThunk,T=(E=w.context).endpointDefinitions,A=E.apiUid,R=E.extractRehydrationInfo,M=E.hasRehydrationInfo,L=w.assertTagType,F=w.config,B=(0,u.createAction)(S+"/resetApiState"),Z=(0,u.createSlice)({name:S+"/queries",initialState:et,reducers:{removeQueryResult:{reducer:function(e,t){var r=t.payload.queryCacheKey;delete e[r]},prepare:(0,u.prepareAutoBatched)()},queryResultPatched:{reducer:function(e,t){var r=t.payload,n=r.queryCacheKey,a=r.patches;Y(e,n,function(e){e.data=(0,c.applyPatches)(e.data,a.concat())})},prepare:(0,u.prepareAutoBatched)()}},extraReducers:function(e){e.addCase(O.pending,function(e,t){var r,n=t.meta,a=t.meta.arg,i=J(a);(a.subscribe||i)&&(null!=e[r=a.queryCacheKey]||(e[r]={status:s.uninitialized,endpointName:a.endpointName})),Y(e,a.queryCacheKey,function(e){e.status=s.pending,e.requestId=i&&e.requestId?e.requestId:n.requestId,void 0!==a.originalArgs&&(e.originalArgs=a.originalArgs),e.startedTimeStamp=n.startedTimeStamp})}).addCase(O.fulfilled,function(e,t){var r=t.meta,n=t.payload;Y(e,r.arg.queryCacheKey,function(e){if(e.requestId===r.requestId||J(r.arg)){var t,a=T[r.arg.endpointName].merge;if(e.status=s.fulfilled,a){if(void 0!==e.data){var i=r.fulfilledTimeStamp,o=r.arg,l=r.baseQueryMeta,d=r.requestId,p=(0,u.createNextState)(e.data,function(e){return a(e,n,{arg:o.originalArgs,baseQueryMeta:l,fulfilledTimeStamp:i,requestId:d})});e.data=p}else e.data=n}else e.data=null==(t=T[r.arg.endpointName].structuralSharing)||t?I((0,c.isDraft)(e.data)?(0,c.original)(e.data):e.data,n):n;delete e.error,e.fulfilledTimeStamp=r.fulfilledTimeStamp}})}).addCase(O.rejected,function(e,t){var r=t.meta,n=r.condition,a=r.arg,i=r.requestId,o=t.error,l=t.payload;Y(e,a.queryCacheKey,function(e){if(n);else{if(e.requestId!==i)return;e.status=s.rejected,e.error=null!=l?l:o}})}).addMatcher(M,function(e,t){for(var r=R(t).queries,n=0,a=Object.entries(r);n<a.length;n++){var i=a[n],o=i[0],l=i[1];((null==l?void 0:l.status)===s.fulfilled||(null==l?void 0:l.status)===s.rejected)&&(e[o]=l)}})}}),en=(0,u.createSlice)({name:S+"/mutations",initialState:et,reducers:{removeMutationResult:{reducer:function(e,t){var r=X(t.payload);r in e&&delete e[r]},prepare:(0,u.prepareAutoBatched)()}},extraReducers:function(e){e.addCase(C.pending,function(e,t){var r=t.meta,n=t.meta,a=n.requestId,i=n.arg,o=n.startedTimeStamp;i.track&&(e[X(r)]={requestId:a,status:s.pending,endpointName:i.endpointName,startedTimeStamp:o})}).addCase(C.fulfilled,function(e,t){var r=t.payload,n=t.meta;n.arg.track&&ee(e,n,function(e){e.requestId===n.requestId&&(e.status=s.fulfilled,e.data=r,e.fulfilledTimeStamp=n.fulfilledTimeStamp)})}).addCase(C.rejected,function(e,t){var r=t.payload,n=t.error,a=t.meta;a.arg.track&&ee(e,a,function(e){e.requestId===a.requestId&&(e.status=s.rejected,e.error=null!=r?r:n)})}).addMatcher(M,function(e,t){for(var r=R(t).mutations,n=0,a=Object.entries(r);n<a.length;n++){var i=a[n],o=i[0],l=i[1];((null==l?void 0:l.status)===s.fulfilled||(null==l?void 0:l.status)===s.rejected)&&o!==(null==l?void 0:l.requestId)&&(e[o]=l)}})}}),ea=(0,u.createSlice)({name:S+"/invalidation",initialState:et,reducers:{updateProvidedBy:{reducer:function(e,t){for(var r,n,a,s,i=t.payload,o=i.queryCacheKey,l=i.providedTags,u=0,c=Object.values(e);u<c.length;u++)for(var d=c[u],p=0,f=Object.values(d);p<f.length;p++){var h=f[p],m=h.indexOf(o);-1!==m&&h.splice(m,1)}for(var g=0;g<l.length;g++){var y=l[g],v=y.type,b=y.id,_=null!=(s=(n=null!=(r=e[v])?r:e[v]={})[a=b||"__internal_without_id"])?s:n[a]=[];_.includes(o)||_.push(o)}},prepare:(0,u.prepareAutoBatched)()}},extraReducers:function(e){e.addCase(Z.actions.removeQueryResult,function(e,t){for(var r=t.payload.queryCacheKey,n=0,a=Object.values(e);n<a.length;n++)for(var s=a[n],i=0,o=Object.values(s);i<o.length;i++){var l=o[i],u=l.indexOf(r);-1!==u&&l.splice(u,1)}}).addMatcher(M,function(e,t){for(var r,n,a,s,i=R(t).provided,o=0,l=Object.entries(i);o<l.length;o++)for(var u=l[o],c=u[0],d=u[1],p=0,f=Object.entries(d);p<f.length;p++)for(var h=f[p],m=h[0],g=h[1],y=null!=(s=(n=null!=(r=e[c])?r:e[c]={})[a=m||"__internal_without_id"])?s:n[a]=[],v=0;v<g.length;v++){var b=g[v];y.includes(b)||y.push(b)}}).addMatcher((0,u.isAnyOf)((0,u.isFulfilled)(O),(0,u.isRejectedWithValue)(O)),function(e,t){var r=G(t,"providesTags",T,L),n=t.meta.arg.queryCacheKey;ea.caseReducers.updateProvidedBy(e,ea.actions.updateProvidedBy({queryCacheKey:n,providedTags:r}))})}}),eo=(0,u.createSlice)({name:S+"/subscriptions",initialState:et,reducers:{updateSubscriptionOptions:function(e,t){},unsubscribeQueryResult:function(e,t){},internal_probeSubscription:function(e,t){}}}),el=(0,u.createSlice)({name:S+"/internalSubscriptions",initialState:et,reducers:{subscriptionsUpdated:{reducer:function(e,t){return(0,c.applyPatches)(e,t.payload)},prepare:(0,u.prepareAutoBatched)()}}}),eu=(0,u.createSlice)({name:S+"/config",initialState:j({online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine,focused:"undefined"==typeof document||"hidden"!==document.visibilityState,middlewareRegistered:!1},F),reducers:{middlewareRegistered:function(e,t){var r=t.payload;e.middlewareRegistered="conflict"!==e.middlewareRegistered&&A===r||"conflict"}},extraReducers:function(e){e.addCase(z,function(e){e.online=!0}).addCase(U,function(e){e.online=!1}).addCase($,function(e){e.focused=!0}).addCase(D,function(e){e.focused=!1}).addMatcher(M,function(e){return j({},e)})}}),ec=(0,u.combineReducers)({queries:Z.reducer,mutations:en.reducer,provided:ea.reducer,subscriptions:el.reducer,config:eu.reducer}),{reducer:function(e,t){return ec(B.match(t)?void 0:e,t)},actions:x(j(j(j(j(j(j({},eu.actions),Z.actions),eo.actions),el.actions),en.actions),ea.actions),{unsubscribeMutationResult:en.actions.removeMutationResult,resetApiState:B})}),e$=eF.reducer,eD=eF.actions;ew(e.util,{patchQueryData:eA,updateQueryData:eR,upsertQueryData:eN,prefetch:eM,resetApiState:eD.resetApiState}),ew(e.internalActions,eD);var ez=function(e){var t=e.reducerPath,r=e.queryThunk,n=e.api,a=e.context,s=a.apiUid,i={invalidateTags:(0,u.createAction)(t+"/invalidateTags")},o=[ev,ed,ep,ef,eg,ey];return{middleware:function(r){var i=!1,u=x(j({},e),{internalState:{currentSubscriptions:{}},refetchQuery:l}),c=o.map(function(e){return e(u)}),d=e_(u),p=eh(u);return function(e){return function(o){i||(i=!0,r.dispatch(n.internalActions.middlewareRegistered(s)));var l,u=x(j({},r),{next:e}),f=r.getState(),h=d(o,u,f),m=h[0],g=h[1];if(l=m?e(o):g,r.getState()[t]&&(p(o,u,f),o&&"string"==typeof o.type&&o.type.startsWith(t+"/")||a.hasRehydrationInfo(o)))for(var y=0;y<c.length;y++)(0,c[y])(o,u,f);return l}}},actions:i};function l(e,t,n){return void 0===n&&(n={}),r(j({type:"query",endpointName:e.endpointName,originalArgs:e.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t},n))}}({reducerPath:eb,context:r,queryThunk:eE,mutationThunk:eT,api:e,assertTagType:eI}),eU=ez.middleware,eB=ez.actions;ew(e.util,eB),ew(e,{reducer:e$,middleware:eU});var eZ=function(e){var t=e.serializeQueryArgs,r=e.reducerPath,n=function(e){return es},a=function(e){return ei};return{buildQuerySelector:function(e,a){return function(s){var o=t({queryArgs:s,endpointDefinition:a,endpointName:e}),l=s===er?n:function(e){var t,n,a;return null!=(a=null==(n=null==(t=e[r])?void 0:t.queries)?void 0:n[o])?a:es};return(0,u.createSelector)(l,i)}},buildMutationSelector:function(){return function(e){var t,n,s=(n="object"==typeof e?null!=(t=X(e))?t:er:e)===er?a:function(e){var t,a,s;return null!=(s=null==(a=null==(t=e[r])?void 0:t.mutations)?void 0:a[n])?s:ei};return(0,u.createSelector)(s,i)}},selectInvalidatedBy:function(e,t){for(var n,a=e[r],s=new Set,i=0,o=t.map(K);i<o.length;i++){var l=o[i],u=a.provided[l.type];if(u)for(var c=null!=(n=void 0!==l.id?u[l.id]:P(Object.values(u)))?n:[],d=0;d<c.length;d++){var p=c[d];s.add(p)}}return P(Array.from(s.values()).map(function(e){var t=a.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]}))}};function i(e){var t;return j(j({},e),{status:t=e.status,isUninitialized:t===s.uninitialized,isLoading:t===s.pending,isSuccess:t===s.fulfilled,isError:t===s.rejected})}}({serializeQueryArgs:ex,reducerPath:eb}),eq=eZ.buildQuerySelector,eV=eZ.buildMutationSelector,eK=eZ.selectInvalidatedBy;ew(e.util,{selectInvalidatedBy:eK});var eH=(a=(n={queryThunk:eE,mutationThunk:eT,api:e,serializeQueryArgs:ex,context:r}).serializeQueryArgs,o=n.queryThunk,l=n.mutationThunk,d=n.api,p=n.context,m=new Map,g=new Map,v=(y=d.internalActions).unsubscribeQueryResult,b=y.removeMutationResult,_=y.updateSubscriptionOptions,{buildInitiateQuery:function(e,t){var r=function(n,s){var i=void 0===s?{}:s,l=i.subscribe,u=void 0===l||l,c=i.forceRefetch,p=i.subscriptionOptions,h=i[W];return function(s,i){var l,g,y=a({queryArgs:n,endpointDefinition:t,endpointName:e}),b=o(((l={type:"query",subscribe:u,forceRefetch:c,subscriptionOptions:p,endpointName:e,originalArgs:n,queryCacheKey:y})[W]=h,l)),w=d.endpoints[e].select(n),j=s(b),x=w(i()),S=j.requestId,P=j.abort,O=x.requestId!==S,I=null==(g=m.get(s))?void 0:g[y],C=function(){return w(i())},E=Object.assign(h?j.then(C):O&&!I?Promise.resolve(x):Promise.all([I,j]).then(C),{arg:n,requestId:S,subscriptionOptions:p,queryCacheKey:y,abort:P,unwrap:function(){return k(this,null,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,E];case 1:if((e=t.sent()).isError)throw e.error;return[2,e.data]}})})},refetch:function(){return s(r(n,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){u&&s(v({queryCacheKey:y,requestId:S}))},updateSubscriptionOptions:function(t){E.subscriptionOptions=t,s(_({endpointName:e,requestId:S,queryCacheKey:y,options:t}))}});if(!I&&!O&&!h){var T=m.get(s)||{};T[y]=E,m.set(s,T),E.then(function(){delete T[y],Object.keys(T).length||m.delete(s)})}return E}};return r},buildInitiateMutation:function(e){return function(t,r){var n=void 0===r?{}:r,a=n.track,s=void 0===a||a,i=n.fixedCacheKey;return function(r,n){var a=r(l({type:"mutation",endpointName:e,originalArgs:t,track:s,fixedCacheKey:i})),o=a.requestId,u=a.abort,c=a.unwrap,d=a.unwrap().then(function(e){return{data:e}}).catch(function(e){return{error:e}}),p=function(){r(b({requestId:o,fixedCacheKey:i}))},f=Object.assign(d,{arg:a.arg,requestId:o,abort:u,unwrap:c,unsubscribe:p,reset:p}),h=g.get(r)||{};return g.set(r,h),h[o]=f,f.then(function(){delete h[o],Object.keys(h).length||g.delete(r)}),i&&(h[i]=f,f.then(function(){h[i]!==f||(delete h[i],Object.keys(h).length||g.delete(r))})),f}}},getRunningQueryThunk:function(e,t){return function(r){var n,s=a({queryArgs:t,endpointDefinition:p.endpointDefinitions[e],endpointName:e});return null==(n=m.get(r))?void 0:n[s]}},getRunningMutationThunk:function(e,t){return function(e){var r;return null==(r=g.get(e))?void 0:r[t]}},getRunningQueriesThunk:function(){return function(e){return Object.values(m.get(e)||{}).filter(H)}},getRunningMutationsThunk:function(){return function(e){return Object.values(g.get(e)||{}).filter(H)}},getRunningOperationPromises:function(){var e=function(e){return Array.from(e.values()).flatMap(function(e){return e?Object.values(e):[]})};return h(h([],e(m)),e(g)).filter(H)},removalWarning:function(){throw Error("This method had to be removed due to a conceptual bug in RTK.\n       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.\n       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.")}}),eW=eH.buildInitiateQuery,eJ=eH.buildInitiateMutation,eQ=eH.getRunningMutationThunk,eG=eH.getRunningMutationsThunk,eY=eH.getRunningQueriesThunk,eX=eH.getRunningQueryThunk,e0=eH.getRunningOperationPromises,e1=eH.removalWarning;return ew(e.util,{getRunningOperationPromises:e0,getRunningOperationPromise:e1,getRunningMutationThunk:eQ,getRunningMutationsThunk:eG,getRunningQueryThunk:eX,getRunningQueriesThunk:eY}),{name:ej,injectEndpoint:function(t,r){var n;(null!=(n=e.endpoints)[t]||(n[t]={}),q(r))?ew(e.endpoints[t],{name:t,select:eq(t,r),initiate:eW(t,r)},eL(eE,t)):r.type===i.mutation&&ew(e.endpoints[t],{name:t,select:eV(),initiate:eJ(t)},eL(eT,t))}}}}},eS=eu(ex())},{"51a55a5d1c6cd353":"7XEqq","@reduxjs/toolkit":"6029V",immer:"aAvhO",reselect:"axB7c","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6029V":[function(e,t,r){var n,a,s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(r),s.export(r,"EnhancerArray",()=>$),s.export(r,"MiddlewareArray",()=>F),s.export(r,"SHOULD_AUTOBATCH",()=>eB),s.export(r,"TaskAbortError",()=>ek),s.export(r,"addListener",()=>eF),s.export(r,"autoBatchEnhancer",()=>eH),s.export(r,"clearAllListeners",()=>e$),s.export(r,"configureStore",()=>V),s.export(r,"createAction",()=>E),s.export(r,"createActionCreatorInvariantMiddleware",()=>L),s.export(r,"createAsyncThunk",()=>es),s.export(r,"createDraftSafeSelector",()=>P),s.export(r,"createEntityAdapter",()=>X),s.export(r,"createImmutableStateInvariantMiddleware",()=>U),s.export(r,"createListenerMiddleware",()=>eU),s.export(r,"createNextState",()=>l.default),s.export(r,"createReducer",()=>H),s.export(r,"createSelector",()=>u.createSelector),s.export(r,"createSerializableStateInvariantMiddleware",()=>Z),s.export(r,"createSlice",()=>W),s.export(r,"current",()=>i.current),s.export(r,"findNonSerializableValue",()=>function e(t,r,n,a,s,i){if(void 0===r&&(r=""),void 0===n&&(n=B),void 0===s&&(s=[]),!n(t))return{keyPath:r||"<root>",value:t};if("object"!=typeof t||null===t||(null==i?void 0:i.has(t)))return!1;for(var o,l=null!=a?a(t):Object.entries(t),u=s.length>0,c=0;c<l.length;c++){var d=l[c],p=function(t,l){var c=r?r+"."+t:t;return u&&s.some(function(e){return e instanceof RegExp?e.test(c):c===e})?"continue":n(l)?"object"==typeof l&&(o=e(l,c,n,a,s,i))?{value:o}:void 0:{value:{keyPath:c,value:l}}}(d[0],d[1]);if("object"==typeof p)return p.value}return i&&function e(t){if(!Object.isFrozen(t))return!1;for(var r=0,n=Object.values(t);r<n.length;r++){var a=n[r];if("object"==typeof a&&null!==a&&!e(a))return!1}return!0}(t)&&i.add(t),!1}),s.export(r,"freeze",()=>i.freeze),s.export(r,"getDefaultMiddleware",()=>q),s.export(r,"getType",()=>M),s.export(r,"isAction",()=>T),s.export(r,"isActionCreator",()=>A),s.export(r,"isAllOf",()=>eu),s.export(r,"isAnyOf",()=>el),s.export(r,"isAsyncThunkAction",()=>function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?function(e){return ec(e,["pending","fulfilled","rejected"])}:ed(t)?function(e){for(var r=[],n=0;n<t.length;n++){var a=t[n];r.push(a.pending,a.rejected,a.fulfilled)}return el.apply(void 0,r)(e)}:e()(t[0])}),s.export(r,"isDraft",()=>i.isDraft),s.export(r,"isFluxStandardAction",()=>R),s.export(r,"isFulfilled",()=>function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?function(e){return ec(e,["fulfilled"])}:ed(t)?function(e){var r=t.map(function(e){return e.fulfilled});return el.apply(void 0,r)(e)}:e()(t[0])}),s.export(r,"isImmutableDefault",()=>z),s.export(r,"isPending",()=>function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?function(e){return ec(e,["pending"])}:ed(t)?function(e){var r=t.map(function(e){return e.pending});return el.apply(void 0,r)(e)}:e()(t[0])}),s.export(r,"isPlain",()=>B),s.export(r,"isPlainObject",()=>I),s.export(r,"isRejected",()=>ep),s.export(r,"isRejectedWithValue",()=>function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===t.length?function(e){return eu(ep.apply(void 0,t),n)(e)}:ed(t)?function(e){return eu(ep.apply(void 0,t),n)(e)}:e()(t[0])}),s.export(r,"miniSerializeError",()=>ea),s.export(r,"nanoid",()=>ee),s.export(r,"original",()=>i.original),s.export(r,"prepareAutoBatched",()=>eZ),s.export(r,"removeListener",()=>eD),s.export(r,"unwrapResult",()=>ei);var i=e("immer"),o=e("redux");s.exportAll(o,r);var l=s.interopDefault(i),u=e("reselect"),c=e("redux-thunk"),d=s.interopDefault(c);e("728135d01089d859");var p=arguments[3],f=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},m=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},g=Object.defineProperty,y=Object.defineProperties,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,j=function(e,t,r){return t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},x=function(e,t){for(var r in t||(t={}))_.call(t,r)&&j(e,r,t[r]);if(b)for(var n=0,a=b(t);n<a.length;n++){var r=a[n];w.call(t,r)&&j(e,r,t[r])}return e},S=function(e,t){return y(e,v(t))},k=function(e,t,r){return new Promise(function(n,a){var s=function(e){try{o(r.next(e))}catch(e){a(e)}},i=function(e){try{o(r.throw(e))}catch(e){a(e)}},o=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(s,i)};o((r=r.apply(e,t)).next())})},P=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,u.createSelector).apply(void 0,e);return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,m([(0,i.isDraft)(e)?(0,i.current)(e):e],t))}},O="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!=arguments.length)return"object"==typeof arguments[0]?o.compose:(0,o.compose).apply(null,arguments)};function I(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var C=function(e){return e&&"function"==typeof e.match};function E(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var a=t.apply(void 0,r);if(!a)throw Error("prepareAction did not return an object");return x(x({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function T(e){return I(e)&&"type"in e}function A(e){return"function"==typeof e&&"type"in e&&C(e)}function R(e){return T(e)&&"string"==typeof e.type&&Object.keys(e).every(N)}function N(e){return["type","payload","error","meta"].indexOf(e)>-1}function M(e){return""+e}function L(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}var F=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return f(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,m([void 0],e[0].concat(this)))):new(t.bind.apply(t,m([void 0],e.concat(this))))},t}(Array),$=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return f(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,m([void 0],e[0].concat(this)))):new(t.bind.apply(t,m([void 0],e.concat(this))))},t}(Array);function D(e){return(0,i.isDraftable)(e)?(0,l.default)(e,function(){}):e}function z(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function U(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function B(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||I(e)}function Z(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function q(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new F;return r&&("boolean"==typeof r?n.push(d.default):n.push((0,d.default).withExtraArgument(r.extraArgument))),n}function V(e){var t,r=function(e){return q(e)},n=e||{},a=n.reducer,s=void 0===a?void 0:a,i=n.middleware,l=void 0===i?r():i,u=n.devTools,c=void 0===u||u,d=n.preloadedState,p=n.enhancers,f=void 0===p?void 0:p;if("function"==typeof s)t=s;else if(I(s))t=(0,o.combineReducers)(s);else throw Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var h=l;"function"==typeof h&&(h=h(r));var g=(0,o.applyMiddleware).apply(void 0,h),y=o.compose;c&&(y=O(x({trace:!1},"object"==typeof c&&c)));var v=new $(g),b=v;Array.isArray(f)?b=m([g],f):"function"==typeof f&&(b=f(v));var _=y.apply(void 0,b);return(0,o.createStore)(t,void 0===d?void 0:d,_)}function K(e){var t,r={},n=[],a={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(!n)throw Error("`builder.addCase` cannot be called with an empty action type");if(n in r)throw Error("`builder.addCase` cannot be called with two reducers for the same action type");return r[n]=t,a},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),a},addDefaultCase:function(e){return t=e,a}};return e(a),[r,n,t]}function H(e,t,r,n){void 0===r&&(r=[]);var a,s="function"==typeof t?K(t):[t,r,n],o=s[0],u=s[1],c=s[2];if("function"==typeof e)a=function(){return D(e())};else{var d=D(e);a=function(){return d}}function p(e,t){void 0===e&&(e=a());var r=m([o[t.type]],u.filter(function(e){return(0,e.matcher)(t)}).map(function(e){return e.reducer}));return 0===r.filter(function(e){return!!e}).length&&(r=[c]),r.reduce(function(e,r){if(r){if((0,i.isDraft)(e)){var n=r(e,t);return void 0===n?e:n}if((0,i.isDraftable)(e))return(0,l.default)(e,function(e){return r(e,t)});var n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e},e)}return p.getInitialState=a,p}function W(e){var t,r=e.name;if(!r)throw Error("`name` is a required option for createSlice");var n="function"==typeof e.initialState?e.initialState:D(e.initialState),a=e.reducers||{},s=Object.keys(a),i={},o={},l={};function u(){var t="function"==typeof e.extraReducers?K(e.extraReducers):[e.extraReducers],r=t[0],a=t[1],s=void 0===a?[]:a,i=t[2],l=void 0===i?void 0:i,u=x(x({},void 0===r?{}:r),o);return H(n,function(e){for(var t in u)e.addCase(t,u[t]);for(var r=0;r<s.length;r++){var n=s[r];e.addMatcher(n.matcher,n.reducer)}l&&e.addDefaultCase(l)})}return s.forEach(function(e){var t,n,s=a[e],u=r+"/"+e;"reducer"in s?(t=s.reducer,n=s.prepare):t=s,i[e]=t,o[u]=t,l[e]=n?E(u,n):E(u)}),{name:r,reducer:function(e,r){return t||(t=u()),t(e,r)},actions:l,caseReducers:i,getInitialState:function(){return t||(t=u()),t.getInitialState()}}}function J(e){return function(t,r){var n=function(t){R(r)?e(r.payload,t):e(r,t)};return(0,i.isDraft)(t)?(n(t),t):(0,l.default)(t,n)}}function Q(e){return Array.isArray(e)||(e=Object.values(e)),e}function G(e,t,r){e=Q(e);for(var n=[],a=[],s=0,i=e;s<i.length;s++){var o=i[s],l=t(o);l in r.entities?a.push({id:l,changes:o}):n.push(o)}return[n,a]}function Y(e){var t,r;function n(t,r){var n=e(t);n in r.entities||(r.ids.push(n),r.entities[n]=t)}function a(e,t){e=Q(e);for(var r=0,a=e;r<a.length;r++)n(a[r],t)}function s(t,r){var n=e(t);n in r.entities||r.ids.push(n),r.entities[n]=t}function i(e,t){var r=!1;e.forEach(function(e){e in t.entities&&(delete t.entities[e],r=!0)}),r&&(t.ids=t.ids.filter(function(e){return e in t.entities}))}function o(t,r){var n={},a={};t.forEach(function(e){e.id in r.entities&&(a[e.id]={id:e.id,changes:x(x({},a[e.id]?a[e.id].changes:null),e.changes)})}),(t=Object.values(a)).length>0&&t.filter(function(t){var a,s,i;return(i=(s=e(a=Object.assign({},r.entities[t.id],t.changes)))!==t.id)&&(n[t.id]=s,delete r.entities[t.id]),r.entities[s]=a,i}).length>0&&(r.ids=Object.keys(r.entities))}function l(t,r){var n=G(t,e,r),s=n[0];o(n[1],r),a(s,r)}return{removeAll:(t=function(e){Object.assign(e,{ids:[],entities:{}})},r=J(function(e,r){return t(r)}),function(e){return r(e,void 0)}),addOne:J(n),addMany:J(a),setOne:J(s),setMany:J(function(e,t){e=Q(e);for(var r=0,n=e;r<n.length;r++)s(n[r],t)}),setAll:J(function(e,t){e=Q(e),t.ids=[],t.entities={},a(e,t)}),updateOne:J(function(e,t){return o([e],t)}),updateMany:J(o),upsertOne:J(function(e,t){return l([e],t)}),upsertMany:J(l),removeOne:J(function(e,t){return i([e],t)}),removeMany:J(i)}}function X(e){void 0===e&&(e={});var t=x({sortComparer:!1,selectId:function(e){return e.id}},e),r=t.selectId,n=t.sortComparer,a=n?function(e,t){var r=Y(e);function n(t,r){var n=(t=Q(t)).filter(function(t){return!(e(t) in r.entities)});0!==n.length&&o(n,r)}function a(e,t){0!==(e=Q(e)).length&&o(e,t)}function s(t,r){for(var n=!1,a=0;a<t.length;a++){var s=t[a],i=r.entities[s.id];if(i){n=!0,Object.assign(i,s.changes);var o=e(i);s.id!==o&&(delete r.entities[s.id],r.entities[o]=i)}}n&&l(r)}function i(t,r){var a=G(t,e,r),i=a[0];s(a[1],r),n(i,r)}function o(t,r){t.forEach(function(t){r.entities[e(t)]=t}),l(r)}function l(r){var n=Object.values(r.entities);n.sort(t);var a=n.map(e);!function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(e[r]!==t[r])return!1;return!0}(r.ids,a)&&(r.ids=a)}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:J(function(e,t){return n([e],t)}),updateOne:J(function(e,t){return s([e],t)}),upsertOne:J(function(e,t){return i([e],t)}),setOne:J(function(e,t){return a([e],t)}),setMany:J(a),setAll:J(function(e,t){e=Q(e),t.entities={},t.ids=[],n(e,t)}),addMany:J(n),updateMany:J(s),upsertMany:J(i)}}(r,n):Y(r);return x(x(x({selectId:r,sortComparer:n},{getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}}),{getSelectors:function(e){var t=function(e){return e.ids},r=function(e){return e.entities},n=P(t,r,function(e,t){return e.map(function(e){return t[e]})}),a=function(e,t){return t},s=function(e,t){return e[t]},i=P(t,function(e){return e.length});if(!e)return{selectIds:t,selectEntities:r,selectAll:n,selectTotal:i,selectById:P(r,a,s)};var o=P(e,r);return{selectIds:P(e,t),selectEntities:o,selectAll:P(e,n),selectTotal:P(e,i),selectById:P(o,a,s)}}}),a)}var ee=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},et=["name","message","stack","code"],er=function(e,t){this.payload=e,this.meta=t},en=function(e,t){this.payload=e,this.meta=t},ea=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0;r<et.length;r++){var n=et[r];"string"==typeof e[n]&&(t[n]=e[n])}return t}return{message:String(e)}},es=function(){function e(e,t,r){var n=E(e+"/fulfilled",function(e,t,r,n){return{payload:e,meta:S(x({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}}),a=E(e+"/pending",function(e,t,r){return{payload:void 0,meta:S(x({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}}),s=E(e+"/rejected",function(e,t,n,a,s){return{payload:a,error:(r&&r.serializeError||ea)(e||"Rejected"),meta:S(x({},s||{}),{arg:n,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:(null==e?void 0:e.name)==="AbortError",condition:(null==e?void 0:e.name)==="ConditionError"})}}),i="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign(function(e){return function(o,l,u){var c,d=(null==r?void 0:r.idGenerator)?r.idGenerator(e):ee(),p=new i;function f(e){c=e,p.abort()}var m=function(){return k(this,null,function(){var i,m,g,y,v,b;return h(this,function(h){switch(h.label){case 0:var _;if(h.trys.push([0,4,,5]),!(null!==(_=y=null==(i=null==r?void 0:r.condition)?void 0:i.call(r,e,{getState:l,extra:u}))&&"object"==typeof _&&"function"==typeof _.then))return[3,2];return[4,y];case 1:y=h.sent(),h.label=2;case 2:if(!1===y||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=new Promise(function(e,t){return p.signal.addEventListener("abort",function(){return t({name:"AbortError",message:c||"Aborted"})})}),o(a(d,e,null==(m=null==r?void 0:r.getPendingMeta)?void 0:m.call(r,{requestId:d,arg:e},{getState:l,extra:u}))),[4,Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:l,extra:u,requestId:d,signal:p.signal,abort:f,rejectWithValue:function(e,t){return new er(e,t)},fulfillWithValue:function(e,t){return new en(e,t)}})).then(function(t){if(t instanceof er)throw t;return t instanceof en?n(t.payload,d,e,t.meta):n(t,d,e)})])];case 3:return g=h.sent(),[3,5];case 4:return g=(b=h.sent())instanceof er?s(null,d,e,b.payload,b.meta):s(b,d,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&s.match(g)&&g.meta.condition||o(g),[2,g]}})})}();return Object.assign(m,{abort:f,requestId:d,arg:e,unwrap:function(){return m.then(ei)}})}},{pending:a,rejected:s,fulfilled:n,typePrefix:e})}return e.withTypes=function(){return e},e}();function ei(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var eo=function(e,t){return C(e)?e.match(t):e(t)};function el(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some(function(e){return eo(e,t)})}}function eu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every(function(e){return eo(e,t)})}}function ec(e,t){if(!e||!e.meta)return!1;var r="string"==typeof e.meta.requestId,n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function ed(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function ep(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return ec(e,["rejected"])}:ed(e)?function(t){var r=e.map(function(e){return e.rejected});return el.apply(void 0,r)(t)}:ep()(e[0])}var ef=function(e,t){if("function"!=typeof e)throw TypeError(t+" is not a function")},eh=function(){},em=function(e,t){return void 0===t&&(t=eh),e.catch(t),e},eg=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},ey=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ev="listener",eb="completed",e_="cancelled",ew="task-"+e_,ej="task-"+eb,ex=ev+"-"+e_,eS=ev+"-"+eb,ek=function(e){this.code=e,this.name="TaskAbortError",this.message="task "+e_+" (reason: "+e+")"},eP=function(e){if(e.aborted)throw new ek(e.reason)};function eO(e,t){var r=eh;return new Promise(function(n,a){var s=function(){return a(new ek(e.reason))};if(e.aborted){s();return}r=eg(e,s),t.finally(function(){return r()}).then(n,a)}).finally(function(){r=eh})}var eI=function(e){return function(t){return em(eO(e,t).then(function(t){return eP(e),t}))}},eC=function(e){var t=eI(e);return function(e){return t(new Promise(function(t){return setTimeout(t,e)}))}},eE=Object.assign,eT={},eA="listenerMiddleware",eR=function(e){var t=e.type,r=e.actionCreator,n=e.matcher,a=e.predicate,s=e.effect;if(t)a=E(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(a);else throw Error("Creating or removing a listener requires one of the known fields for matching an action");return ef(s,"options.listener"),{predicate:a,type:t,effect:s}},eN=function(e){var t=eR(e),r=t.type,n=t.predicate,a=t.effect;return{id:ee(),effect:a,type:r,predicate:n,pending:new Set,unsubscribe:function(){throw Error("Unsubscribe not initialized")}}},eM=function(e){e.pending.forEach(function(e){ey(e,ex)})},eL=function(e,t,r){try{e(t,r)}catch(e){setTimeout(function(){throw e},0)}},eF=E(eA+"/add"),e$=E(eA+"/removeAll"),eD=E(eA+"/remove"),ez=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,m([eA+"/error"],e))};function eU(e){var t=this;void 0===e&&(e={});var r=new Map,n=e.extra,a=e.onError,s=void 0===a?ez:a;ef(s,"onError");var i=function(e){for(var t=0,n=Array.from(r.values());t<n.length;t++){var a=n[t];if(e(a))return a}},o=function(e){var t,n=i(function(t){return t.effect===e.effect});return n||(n=eN(e)),(t=n).unsubscribe=function(){return r.delete(t.id)},r.set(t.id,t),function(e){t.unsubscribe(),(null==e?void 0:e.cancelActive)&&eM(t)}},l=function(e){var t=eR(e),r=t.type,n=t.effect,a=t.predicate,s=i(function(e){return("string"==typeof r?e.type===r:e.predicate===a)&&e.effect===n});return s&&(s.unsubscribe(),e.cancelActive&&eM(s)),!!s},u=function(e,a,i,l){return k(t,null,function(){var t,u,c,d;return h(this,function(p){var f,m,g;switch(p.label){case 0:f=(t=new AbortController).signal,u=function(e,t){return em(k(void 0,null,function(){var r,n,a;return h(this,function(s){switch(s.label){case 0:eP(f),r=function(){},n=[new Promise(function(t,n){var a=o({predicate:e,effect:function(e,r){r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});r=function(){a(),n()}})],null!=t&&n.push(new Promise(function(e){return setTimeout(e,t,null)})),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,eO(f,Promise.race(n))];case 2:return a=s.sent(),eP(f),[2,a];case 3:return r(),[7];case 4:return[2]}})}))},c=[],p.label=1;case 1:return p.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(a,eE({},i,{getOriginalState:l,condition:function(e,t){return u(e,t).then(Boolean)},take:u,delay:eC(t.signal),pause:eI(t.signal),extra:n,signal:t.signal,fork:(m=t.signal,g=c,function(e,t){ef(e,"taskExecutor");var r,n,a=new AbortController;eg(m,function(){return ey(a,m.reason)});var s=(r=function(){return k(void 0,null,function(){var t;return h(this,function(r){switch(r.label){case 0:return eP(m),eP(a.signal),[4,e({pause:eI(a.signal),delay:eC(a.signal),signal:a.signal})];case 1:return t=r.sent(),eP(a.signal),[2,t]}})})},n=function(){return ey(a,ej)},k(void 0,null,function(){var e;return h(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return t.sent(),[4,r()];case 2:return[2,{status:"ok",value:t.sent()}];case 3:return[2,{status:(e=t.sent())instanceof ek?"cancelled":"rejected",error:e}];case 4:return null==n||n(),[7];case 5:return[2]}})}));return(null==t?void 0:t.autoJoin)&&g.push(s),{result:eI(m)(s),cancel:function(){ey(a,ew)}}}),unsubscribe:e.unsubscribe,subscribe:function(){r.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach(function(e,r,n){e!==t&&(ey(e,ex),n.delete(e))})}})))];case 2:return p.sent(),[3,6];case 3:return(d=p.sent())instanceof ek||eL(s,d,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(c)];case 5:return p.sent(),ey(t,eS),e.pending.delete(t),[7];case 6:return[2]}})})},c=function(){r.forEach(eM),r.clear()};return{middleware:function(e){return function(t){return function(n){if(!T(n))return t(n);if(eF.match(n))return o(n.payload);if(e$.match(n)){c();return}if(eD.match(n))return l(n.payload);var a,i=e.getState(),d=function(){if(i===eT)throw Error(eA+": getOriginalState can only be called synchronously");return i};try{if(a=t(n),r.size>0)for(var p=e.getState(),f=Array.from(r.values()),h=0;h<f.length;h++){var m=f[h],g=!1;try{g=m.predicate(n,p,i)}catch(e){g=!1,eL(s,e,{raisedBy:"predicate"})}g&&u(m,n,e,d)}}finally{i=eT}return a}}},startListening:o,stopListening:l,clearListeners:c}}var eB="RTK_autoBatch",eZ=function(){return function(e){var t;return{payload:e,meta:((t={})[eB]=!0,t)}}},eq="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:void 0!==p?p:globalThis):function(e){return(a||(a=Promise.resolve())).then(e).catch(function(e){return setTimeout(function(){throw e},0)})},eV=function(e){return function(t){setTimeout(t,e)}},eK="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:eV(10),eH=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=t.apply(void 0,r),s=!0,i=!1,o=!1,l=new Set,u="tick"===e.type?eq:"raf"===e.type?eK:"callback"===e.type?e.queueNotification:eV(e.timeout),c=function(){o=!1,i&&(i=!1,l.forEach(function(e){return e()}))};return Object.assign({},a,{subscribe:function(e){var t=a.subscribe(function(){return s&&e()});return l.add(e),function(){t(),l.delete(e)}},dispatch:function(e){var t;try{return(i=!(s=!(null==(t=null==e?void 0:e.meta)?void 0:t[eB])))&&!o&&(o=!0,u(c)),a.dispatch(e)}finally{s=!0}}})}}};(0,i.enableES5)()},{"728135d01089d859":"7XEqq",immer:"aAvhO",redux:"5F3Kg",reselect:"axB7c","redux-thunk":"cK6An","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aAvhO:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function s(e){return!!e&&!!e[X]}function i(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===et}(e)||Array.isArray(e)||!!e[Y]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Y])||h(e)||m(e))}function o(e){return s(e)||a(23,e),e[X].t}function l(e,t,r){void 0===r&&(r=!1),0===u(e)?(r?Object.keys:er)(e).forEach(function(n){r&&"symbol"==typeof n||t(n,e[n],e)}):e.forEach(function(r,n){return t(n,r,e)})}function u(e){var t=e[X];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:h(e)?2:m(e)?3:0}function c(e,t){return 2===u(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){return 2===u(e)?e.get(t):e[t]}function p(e,t,r){var n=u(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function f(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){return W&&e instanceof Map}function m(e){return J&&e instanceof Set}function g(e){return e.o||e.t}function y(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=en(e);delete t[X];for(var r=er(t),n=0;n<r.length;n++){var a=r[n],s=t[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function v(e,t){return void 0===t&&(t=!1),_(e)||s(e)||!i(e)||(u(e)>1&&(e.set=e.add=e.clear=e.delete=b),Object.freeze(e),t&&l(e,function(e,t){return v(t,!0)},!0)),e}function b(){a(2)}function _(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function w(e){var t=ea[e];return t||a(18,e),t}function j(e,t){ea[e]||(ea[e]=t)}function x(e,t){t&&(w("Patches"),e.u=[],e.s=[],e.v=t)}function S(e){k(e),e.p.forEach(O),e.p=null}function k(e){e===K&&(K=e.l)}function P(e){return K={p:[],l:K,h:e,m:!0,_:0}}function O(e){var t=e[X];0===t.i||1===t.i?t.j():t.g=!0}function I(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||w("ES5").S(t,e,n),n?(r[X].P&&(S(t),a(4)),i(e)&&(e=C(t,e),t.l||T(t,e)),t.u&&w("Patches").M(r[X].t,e,t.u,t.s)):e=C(t,r,[]),S(t),t.u&&t.v(t.u,t.s),e!==G?e:void 0}function C(e,t,r){if(_(t))return t;var n=t[X];if(!n)return l(t,function(a,s){return E(e,n,t,a,s,r)},!0),t;if(n.A!==e)return t;if(!n.P)return T(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=y(n.k):n.o,s=a,i=!1;3===n.i&&(s=new Set(a),a.clear(),i=!0),l(s,function(t,s){return E(e,n,a,t,s,r,i)}),T(e,a,!1),r&&e.u&&w("Patches").N(n,r,e.u,e.s)}return n.o}function E(e,t,r,n,a,o,l){if(s(a)){var u=C(e,a,o&&t&&3!==t.i&&!c(t.R,n)?o.concat(n):void 0);if(p(r,n,u),!s(u))return;e.m=!1}else l&&r.add(a);if(i(a)&&!_(a)){if(!e.h.D&&e._<1)return;C(e,a),t&&t.A.l||T(e,a)}}function T(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&v(t,r)}function A(e,t){var r=e[X];return(r?g(r):e)[t]}function R(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function N(e){e.P||(e.P=!0,e.l&&N(e.l))}function M(e){e.o||(e.o=y(e.t))}function L(e,t,r){var n,a,s,i,o,l,u,c=h(t)?w("MapSet").F(t,r):m(t)?w("MapSet").T(t,r):e.O?(s=a={i:(n=Array.isArray(t))?1:0,A:r?r.A:K,P:!1,I:!1,R:{},l:r,t:t,k:null,o:null,j:null,C:!1},i=es,n&&(s=[a],i=ei),l=(o=Proxy.revocable(s,i)).revoke,u=o.proxy,a.k=u,a.j=l,u):w("ES5").J(t,r);return(r?r.A:K).p.push(c),c}function F(e){return s(e)||a(22,e),function e(t){if(!i(t))return t;var r,n=t[X],a=u(t);if(n){if(!n.P&&(n.i<4||!w("ES5").K(n)))return n.t;n.I=!0,r=$(t,a),n.I=!1}else r=$(t,a);return l(r,function(t,a){n&&d(n.t,t)===a||p(r,t,e(a))}),3===a?new Set(r):r}(e)}function $(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return y(e)}function D(){function e(e,t){var r=a[e];return r?r.enumerable=t:a[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[X];return es.get(t,e)},set:function(t){var r=this[X];es.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var a=e[t][X];if(!a.P)switch(a.i){case 5:n(a)&&N(a);break;case 4:r(a)&&N(a)}}}function r(e){for(var t=e.t,r=e.k,n=er(r),a=n.length-1;a>=0;a--){var s=n[a];if(s!==X){var i=t[s];if(void 0===i&&!c(t,s))return!0;var o=r[s],l=o&&o[X];if(l?l.t!==i:!f(o,i))return!0}}var u=!!t[X];return n.length!==er(t).length+(u?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var a={};j("ES5",{J:function(t,r){var n=Array.isArray(t),a=function(t,r){if(t){for(var n=Array(r.length),a=0;a<r.length;a++)Object.defineProperty(n,""+a,e(a,!0));return n}var s=en(r);delete s[X];for(var i=er(s),o=0;o<i.length;o++){var l=i[o];s[l]=e(l,t||!!s[l].enumerable)}return Object.create(Object.getPrototypeOf(r),s)}(n,t),s={i:n?5:4,A:r?r.A:K,P:!1,I:!1,R:{},l:r,t:t,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,X,{value:s,writable:!0}),a},S:function(e,r,a){a?s(r)&&r[X].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[X];if(r){var a=r.t,s=r.k,i=r.R,o=r.i;if(4===o)l(s,function(t){t!==X&&(void 0!==a[t]||c(a,t)?i[t]||e(s[t]):(i[t]=!0,N(r)))}),l(a,function(e){void 0!==s[e]||c(s,e)||(i[e]=!1,N(r))});else if(5===o){if(n(r)&&(N(r),i.length=!0),s.length<a.length)for(var u=s.length;u<a.length;u++)i[u]=!1;else for(var d=a.length;d<s.length;d++)i[d]=!0;for(var p=Math.min(s.length,a.length),f=0;f<p;f++)s.hasOwnProperty(f)||(i[f]=!0),void 0===i[f]&&e(s[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}function z(){function e(t){if(!i(t))return t;if(Array.isArray(t))return t.map(e);if(h(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(m(t))return new Set(Array.from(t).map(e));var r=Object.create(Object.getPrototypeOf(t));for(var n in t)r[n]=e(t[n]);return c(t,Y)&&(r[Y]=t[Y]),r}function t(t){return s(t)?e(t):t}j("Patches",{$:function(t,r){return r.forEach(function(r){for(var n=r.path,s=r.op,i=t,o=0;o<n.length-1;o++){var l=u(i),c=n[o];"string"!=typeof c&&"number"!=typeof c&&(c=""+c),0!==l&&1!==l||"__proto__"!==c&&"constructor"!==c||a(24),"function"==typeof i&&"prototype"===c&&a(24),"object"!=typeof(i=d(i,c))&&a(15,n.join("/"))}var p=u(i),f=e(r.value),h=n[n.length-1];switch(s){case"replace":switch(p){case 2:return i.set(h,f);case 3:a(16);default:return i[h]=f}case"add":switch(p){case 1:return"-"===h?i.push(f):i.splice(h,0,f);case 2:return i.set(h,f);case 3:return i.add(f);default:return i[h]=f}case"remove":switch(p){case 1:return i.splice(h,1);case 2:return i.delete(h);case 3:return i.delete(r.value);default:return delete i[h]}default:a(17,s)}}),t},N:function(e,r,n,a){var s,i,o,u,p;switch(e.i){case 0:case 4:case 2:return s=e.t,i=e.o,void l(e.R,function(e,o){var l=d(s,e),u=d(i,e),p=o?c(s,e)?"replace":"add":"remove";if(l!==u||"replace"!==p){var f=r.concat(e);n.push("remove"===p?{op:p,path:f}:{op:p,path:f,value:u}),a.push("add"===p?{op:"remove",path:f}:"remove"===p?{op:"add",path:f,value:t(l)}:{op:"replace",path:f,value:t(l)})}});case 5:case 1:return function(e,r,n,a){var s=e.t,i=e.R,o=e.o;if(o.length<s.length){var l=[o,s];s=l[0],o=l[1];var u=[a,n];n=u[0],a=u[1]}for(var c=0;c<s.length;c++)if(i[c]&&o[c]!==s[c]){var d=r.concat([c]);n.push({op:"replace",path:d,value:t(o[c])}),a.push({op:"replace",path:d,value:t(s[c])})}for(var p=s.length;p<o.length;p++){var f=r.concat([p]);n.push({op:"add",path:f,value:t(o[p])})}s.length<o.length&&a.push({op:"replace",path:r.concat(["length"]),value:s.length})}(e,r,n,a);case 3:return o=e.t,u=e.o,p=0,void(o.forEach(function(e){if(!u.has(e)){var t=r.concat([p]);n.push({op:"remove",path:t,value:e}),a.unshift({op:"add",path:t,value:e})}p++}),p=0,u.forEach(function(e){if(!o.has(e)){var t=r.concat([p]);n.push({op:"add",path:t,value:e}),a.unshift({op:"remove",path:t,value:e})}p++}))}},M:function(e,t,r,n){r.push({op:"replace",path:[],value:t===G?void 0:t}),n.push({op:"replace",path:[],value:e})}})}function U(){function e(e,t){function r(){this.constructor=e}s(e,t),e.prototype=(r.prototype=t.prototype,new r)}function t(e){e.o||(e.R=new Map,e.o=new Map(e.t))}function r(e){e.o||(e.o=new Set,e.t.forEach(function(t){if(i(t)){var r=L(e.A.h,t,e);e.p.set(t,r),e.o.add(r)}else e.o.add(t)}))}function n(e){e.g&&a(3,JSON.stringify(g(e)))}var s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},o=function(){function r(e,t){return this[X]={i:2,l:t,A:t?t.A:K,P:!1,I:!1,o:void 0,R:void 0,t:e,k:this,C:!1,g:!1},this}e(r,Map);var a=r.prototype;return Object.defineProperty(a,"size",{get:function(){return g(this[X]).size}}),a.has=function(e){return g(this[X]).has(e)},a.set=function(e,r){var a=this[X];return n(a),g(a).has(e)&&g(a).get(e)===r||(t(a),N(a),a.R.set(e,!0),a.o.set(e,r),a.R.set(e,!0)),this},a.delete=function(e){if(!this.has(e))return!1;var r=this[X];return n(r),t(r),N(r),r.t.has(e)?r.R.set(e,!1):r.R.delete(e),r.o.delete(e),!0},a.clear=function(){var e=this[X];n(e),g(e).size&&(t(e),N(e),e.R=new Map,l(e.t,function(t){e.R.set(t,!1)}),e.o.clear())},a.forEach=function(e,t){var r=this;g(this[X]).forEach(function(n,a){e.call(t,r.get(a),a,r)})},a.get=function(e){var r=this[X];n(r);var a=g(r).get(e);if(r.I||!i(a)||a!==r.t.get(e))return a;var s=L(r.A.h,a,r);return t(r),r.o.set(e,s),s},a.keys=function(){return g(this[X]).keys()},a.values=function(){var e,t=this,r=this.keys();return(e={})[ee]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},a.entries=function(){var e,t=this,r=this.keys();return(e={})[ee]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var n=t.get(e.value);return{done:!1,value:[e.value,n]}},e},a[ee]=function(){return this.entries()},r}(),u=function(){function t(e,t){return this[X]={i:3,l:t,A:t?t.A:K,P:!1,I:!1,o:void 0,t:e,k:this,p:new Map,g:!1,C:!1},this}e(t,Set);var a=t.prototype;return Object.defineProperty(a,"size",{get:function(){return g(this[X]).size}}),a.has=function(e){var t=this[X];return n(t),t.o?!!t.o.has(e)||!(!t.p.has(e)||!t.o.has(t.p.get(e))):t.t.has(e)},a.add=function(e){var t=this[X];return n(t),this.has(e)||(r(t),N(t),t.o.add(e)),this},a.delete=function(e){if(!this.has(e))return!1;var t=this[X];return n(t),r(t),N(t),t.o.delete(e)||!!t.p.has(e)&&t.o.delete(t.p.get(e))},a.clear=function(){var e=this[X];n(e),g(e).size&&(r(e),N(e),e.o.clear())},a.values=function(){var e=this[X];return n(e),r(e),e.o.values()},a.entries=function(){var e=this[X];return n(e),r(e),e.o.entries()},a.keys=function(){return this.values()},a[ee]=function(){return this.values()},a.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},t}();j("MapSet",{F:function(e,t){return new o(e,t)},T:function(e,t){return new u(e,t)}})}function B(){D(),U(),z()}function Z(e){return e}function q(e){return e}n.defineInteropFlag(r),n.export(r,"Immer",()=>eo),n.export(r,"applyPatches",()=>ef),n.export(r,"castDraft",()=>Z),n.export(r,"castImmutable",()=>q),n.export(r,"createDraft",()=>eh),n.export(r,"current",()=>F),n.export(r,"enableAllPlugins",()=>B),n.export(r,"enableES5",()=>D),n.export(r,"enableMapSet",()=>U),n.export(r,"enablePatches",()=>z),n.export(r,"finishDraft",()=>em),n.export(r,"freeze",()=>v),n.export(r,"immerable",()=>Y),n.export(r,"isDraft",()=>s),n.export(r,"isDraftable",()=>i),n.export(r,"nothing",()=>G),n.export(r,"original",()=>o),n.export(r,"produce",()=>eu),n.export(r,"produceWithPatches",()=>ec),n.export(r,"setAutoFreeze",()=>ed),n.export(r,"setUseProxies",()=>ep);var V,K,H="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),W="undefined"!=typeof Map,J="undefined"!=typeof Set,Q="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,G=H?Symbol.for("immer-nothing"):((V={})["immer-nothing"]=!0,V),Y=H?Symbol.for("immer-draftable"):"__$immer_draftable",X=H?Symbol.for("immer-state"):"__$immer_state",ee="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",et=""+Object.prototype.constructor,er="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,en=Object.getOwnPropertyDescriptors||function(e){var t={};return er(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},ea={},es={get:function(e,t){if(t===X)return e;var r,n,a=g(e);if(!c(a,t))return(n=R(a,t))?"value"in n?n.value:null===(r=n.get)||void 0===r?void 0:r.call(e.k):void 0;var s=a[t];return e.I||!i(s)?s:s===A(e.t,t)?(M(e),e.o[t]=L(e.A.h,s,e)):s},has:function(e,t){return t in g(e)},ownKeys:function(e){return Reflect.ownKeys(g(e))},set:function(e,t,r){var n=R(g(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=A(g(e),t),s=null==a?void 0:a[X];if(s&&s.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(f(r,a)&&(void 0!==r||c(e.t,t)))return!0;M(e),N(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==A(e.t,t)||t in e.t?(e.R[t]=!1,M(e),N(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=g(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){a(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){a(12)}},ei={};l(es,function(e,t){ei[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ei.deleteProperty=function(e,t){return ei.set.call(this,e,t,void 0)},ei.set=function(e,t,r){return es.set.call(this,e[0],t,r,e[0])};var eo=function(){function e(e){var t=this;this.O=Q,this.D=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var s,o=r;return r=e,function(e){var n=this;void 0===e&&(e=o);for(var a=arguments.length,s=Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];return t.produce(e,function(e){var t;return(t=r).call.apply(t,[n,e].concat(s))})}}if("function"!=typeof r&&a(6),void 0!==n&&"function"!=typeof n&&a(7),i(e)){var l=P(t),u=L(t,e,void 0),c=!0;try{s=r(u),c=!1}finally{c?S(l):k(l)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return x(l,n),I(e,l)},function(e){throw S(l),e}):(x(l,n),I(s,l))}if(!e||"object"!=typeof e){if(void 0===(s=r(e))&&(s=e),s===G&&(s=void 0),t.D&&v(s,!0),n){var d=[],p=[];w("Patches").M(e,s,d,p),n(d,p)}return s}a(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return t.produceWithPatches(r,function(t){return e.apply(void 0,[t].concat(a))})};var n,a,s=t.produce(e,r,function(e,t){n=e,a=t});return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return[e,n,a]}):[s,n,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||a(8),s(e)&&(e=F(e));var t=P(this),r=L(this,e,void 0);return r[X].C=!0,k(t),r},t.finishDraft=function(e,t){var r=(e&&e[X]).A;return x(r,t),I(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Q&&a(20),this.O=e},t.applyPatches=function(e,t){for(r=t.length-1;r>=0;r--){var r,n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var a=w("Patches").$;return s(e)?a(e,t):this.produce(e,function(e){return a(e,t)})},e}(),el=new eo,eu=el.produce,ec=el.produceWithPatches.bind(el),ed=el.setAutoFreeze.bind(el),ep=el.setUseProxies.bind(el),ef=el.applyPatches.bind(el),eh=el.createDraft.bind(el),em=el.finishDraft.bind(el);r.default=eu},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],axB7c:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"defaultMemoize",()=>a.defaultMemoize),n.export(r,"defaultEqualityCheck",()=>a.defaultEqualityCheck),n.export(r,"createSelectorCreator",()=>s),n.export(r,"createSelector",()=>i),n.export(r,"createStructuredSelector",()=>o);var a=e("./defaultMemoize");function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t,n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var i=0,o={memoizeOptions:void 0},l=a.pop();if("object"==typeof l&&(o=l,l=a.pop()),"function"!=typeof l)throw Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=o.memoizeOptions,c=void 0===u?r:u,d=Array.isArray(c)?c:[c],p=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e}))throw Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t.map(function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e}).join(", ")+"]");return t}(a),f=e.apply(void 0,[function(){return i++,l.apply(null,arguments)}].concat(d)),h=e(function(){for(var e=[],r=p.length,n=0;n<r;n++)e.push(p[n].apply(null,arguments));return t=f.apply(null,e)});return Object.assign(h,{resultFunc:l,memoizedResultFunc:f,dependencies:p,lastResult:function(){return t},recomputations:function(){return i},resetRecomputations:function(){return i=0}}),h}}var i=s(a.defaultMemoize),o=function(e,t){if(void 0===t&&(t=i),"object"!=typeof e)throw Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var r=Object.keys(e);return t(r.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t,n){return e[r[n]]=t,e},{})})}},{"./defaultMemoize":"bQGKL","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bQGKL:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"defaultEqualityCheck",()=>s),n.export(r,"createCacheKeyComparator",()=>i),n.export(r,"defaultMemoize",()=>o);var a="NOT_FOUND",s=function(e,t){return e===t};function i(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,a=0;a<n;a++)if(!e(t[a],r[a]))return!1;return!0}}function o(e,t){var r,n="object"==typeof t?t:{equalityCheck:t},o=n.equalityCheck,l=n.maxSize,u=void 0===l?1:l,c=n.resultEqualityCheck,d=i(void 0===o?s:o),p=1===u?{get:function(e){return r&&d(r.key,e)?r.value:a},put:function(e,t){r={key:e,value:t}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}:function(e,t){var r=[];function n(e){var n=r.findIndex(function(r){return t(e,r.key)});if(n>-1){var s=r[n];return n>0&&(r.splice(n,1),r.unshift(s)),s.value}return a}return{get:n,put:function(t,s){n(t)===a&&(r.unshift({key:t,value:s}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(u,d);function f(){var t=p.get(arguments);if(t===a){if(t=e.apply(null,arguments),c){var r=p.getEntries().find(function(e){return c(e.value,t)});r&&(t=r.value)}p.put(arguments,t)}return t}return f.clearCache=function(){return p.clear()},f}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],cK6An:[function(e,t,r){function n(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var a=n();a.withExtraArgument=n,r.default=a},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],dF0Dz:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"AnkiClient",()=>a);class a{constructor({key:e}){this.getDeckNames=async({ankiKey:e})=>await fetch("http://localhost:8765",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"deckNames",version:6,key:e})}),this.key=e}invoke(e,t={}){return new Promise((r,n)=>{let a=new XMLHttpRequest;a.addEventListener("error",()=>n("failed to issue request")),a.addEventListener("load",()=>{try{let e=JSON.parse(a.responseText);if(2!=Object.getOwnPropertyNames(e).length)throw"response has an unexpected number of fields";if(!e.hasOwnProperty("error"))throw"response is missing required error field";if(!e.hasOwnProperty("result"))throw"response is missing required result field";if(e.error)throw e.error;r(e.result)}catch(e){n(e)}}),a.open("POST","http://127.0.0.1:8765"),a.send(JSON.stringify({action:e,version:6,params:t,key:this.key}))})}async requestPermission(){let e=await this.invoke("requestPermission",{});return"granted"!=e.permission?new Promise((e,t)=>{throw"Permission to access anki was denied"}):e}async createDeck(e){return await this.invoke("createDeck",{deck:e})}async addNote(e,t,r,n,a,s){await this.createDeck(t);let i=await this.invoke("addNote",{note:{modelName:r,deckName:t,fields:{...n,Text:"{{c1:: placeholder}}"},picture:a,tags:s,options:{allowDuplicate:!0}}});return this.updateNote(i,t,r,n,s,a),i}async updateNote(e,t,r,n,a,s){let i=(await this.invoke("notesInfo",{notes:[e]}))[0];console.debug(i);let o=i.cards;for(let r of(await this.invoke("changeDeck",{cards:o,deck:t}),i.tags))await this.invoke("removeTags",{notes:[e],tags:r});for(let t of a)await this.invoke("addTags",{notes:[e],tags:t});return await this.invoke("clearUnusedTags",{}),await this.invoke("updateNoteFields",{note:{id:e,deckName:t,modelName:r,fields:n,picture:s}})}async deleteNote(e){return await this.invoke("deleteNotes",{notes:[e]})}async guiAddCards(e){return await this.invoke("guiAddCards",{note:e})}async guiBrowse(){return await this.invoke("guiBrowse",{query:"tag:generatedByAi"})}async removeEmptyNotes(){return await this.invoke("removeEmptyNotes",{})}async query(e){return await this.invoke("findNotes",{query:e})}async createBackup(){let e=Date.now();for(let t of(await this.invoke("deckNames",{})))!1===t.includes("::")&&await this.invoke("exportPackage",{deck:t,path:`../ObsidianAnkiSync-Backup-${e}_${t}.apkg`,includeSched:!0})}async createModel(e,t,r,n){(await this.invoke("modelNames",{})).includes(e)||await this.invoke("createModel",{modelName:e,inOrderFields:t,css:"",isCloze:!0,cardTemplates:[{Name:"Card",Front:r,Back:n}]});try{await this.invoke("updateModelTemplates",{model:{name:e,templates:{Card:{Front:r,Back:n}}}})}catch(e){if("save() takes from 1 to 2 positional arguments but 3 were given"==e)console.error(e);else throw e}}async storeMediaFileByUrl(e,t){return await this.invoke("storeMediaFile",{filename:e,url:t})}async storeMediaFileByPath(e,t){return await this.invoke("storeMediaFile",{filename:e,path:t})}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aUMIx:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getAnkiKey",()=>s);var a=e("./proxyStore");let s=()=>(0,a.proxyStore).getState().anki.ankiKey},{"./proxyStore":"glsXe","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],glsXe:[function(e,t,r){let n;var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"proxyStore",()=>n),a.export(r,"setProxyStore",()=>s);let s=e=>{n=e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aIF2y:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let n=(0,e("@reduxjs/toolkit").createSlice)({name:"anki",initialState:{apiKey:"",customBaseUrl:"http://localhost:11434",customModel:"",llmProvider:"openai",ankiKey:"myankikey",ankiDeck:"",isAnkiConnected:!1},reducers:{setApiKey:(e,t)=>{e.apiKey=t.payload},setCustomBaseUrl:(e,t)=>{e.customBaseUrl=t.payload},setCustomModel:(e,t)=>{e.customModel=t.payload},setAnkiKey:(e,t)=>{e.ankiKey=t.payload},setAnkiDeck:(e,t)=>{e.ankiDeck=t.payload},setIsAnkiConnected:(e,t)=>{e.isAnkiConnected=t.payload},setLlmProvider:(e,t)=>{e.llmProvider=t.payload}}});r.default=n},{"@reduxjs/toolkit":"6029V","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],e9O94:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"flashCardsSlice",()=>l),n.export(r,"highlightsSlice",()=>u);var a=e("@reduxjs/toolkit"),s=e("lodash");let i=(0,a.createEntityAdapter)({selectId:e=>e.id,sortComparer:(e,t)=>e.question.localeCompare(t.question)}),o=(0,a.createEntityAdapter)({selectId:e=>e.id,sortComparer:(e,t)=>t.createdAt.localeCompare(e.createdAt)}),l=(0,a.createSlice)({name:"flashCards",initialState:i.getInitialState(),reducers:{...(0,s.omit)(i,["getInitialState","getSelectors","sortComparer","selectId"])}}),u=(0,a.createSlice)({name:"highlights",initialState:o.getInitialState(),reducers:{...(0,s.omit)(o,["getInitialState","getSelectors","sortComparer","selectId"]),addFlashCards:(e,t)=>{let{highlightId:r,flashCards:n}=t.payload,a=e.entities[r];a&&a.flashCards.push(...n)},setFlashCardById:(e,t)=>{let{highlightId:r,flashCardId:n,flashCard:a}=t.payload,s=e.entities[r];s&&(s.flashCards=s.flashCards.map(e=>e.id===n?{...e,...a}:e))},updateFlashCard:(e,t)=>{let{highlightId:r,flashCardId:n,changes:a}=t.payload,s=e.entities[r];s&&(s.flashCards=s.flashCards.map(e=>e.id===n?{...e,...a}:e))},updateAllFlashCards:(e,t)=>{let{highlightId:r,changes:n}=t.payload,a=e.entities[r];a&&(a.flashCards=a.flashCards.map(e=>({...e,...n})))},addFlashCard:(e,t)=>{let{highlightId:r,flashCard:n}=t.payload,a=e.entities[r];a&&a.flashCards.push(n)},removeAllFlashCards:(e,t)=>{let{highlightId:r}=t.payload,n=e.entities[r];n&&(n.flashCards=[])},removeFlashCard:(e,t)=>{let{highlightId:r,flashCardId:n}=t.payload,a=e.entities[r];a&&(a.flashCards=a.flashCards.filter(e=>e.id!==n))}}});i.getSelectors(e=>e.flashCards),o.getSelectors(e=>e.highlights)},{"@reduxjs/toolkit":"6029V",lodash:"cu6CP","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],cu6CP:[function(t,r,n){var a=arguments[3];(function(){var t,s="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",l=1/0,u=0/0,c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],d="[object Arguments]",p="[object Array]",f="[object Boolean]",h="[object Date]",m="[object Error]",g="[object Function]",y="[object GeneratorFunction]",v="[object Map]",b="[object Number]",_="[object Object]",w="[object Promise]",j="[object RegExp]",x="[object Set]",S="[object String]",k="[object Symbol]",P="[object WeakMap]",O="[object ArrayBuffer]",I="[object DataView]",C="[object Float32Array]",E="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",R="[object Int32Array]",N="[object Uint8Array]",M="[object Uint8ClampedArray]",L="[object Uint16Array]",F="[object Uint32Array]",$=/\b__p \+= '';/g,D=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,B=/[&<>"']/g,Z=RegExp(U.source),q=RegExp(B.source),V=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,Y=RegExp(G.source),X=/^\s+/,ee=/\s/,et=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,er=/\{\n\/\* \[wrapped with (.+)\] \*/,en=/,? & /,ea=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,es=/[()=,{}\[\]\/\s]/,ei=/\\(\\)?/g,eo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,el=/\w*$/,eu=/^[-+]0x[0-9a-f]+$/i,ec=/^0b[01]+$/i,ed=/^\[object .+?Constructor\]$/,ep=/^0o[0-7]+$/i,ef=/^(?:0|[1-9]\d*)$/,eh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,em=/($^)/,eg=/['\n\r\u2028\u2029\\]/g,ey="\ud800-\udfff",ev="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",eb="\\u2700-\\u27bf",e_="a-z\\xdf-\\xf6\\xf8-\\xff",ew="A-Z\\xc0-\\xd6\\xd8-\\xde",ej="\\ufe0e\\ufe0f",ex="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eS="['\u2019]",ek="["+ex+"]",eP="["+ev+"]",eO="["+e_+"]",eI="[^"+ey+ex+"\\d+"+eb+e_+ew+"]",eC="\ud83c[\udffb-\udfff]",eE="[^"+ey+"]",eT="(?:\ud83c[\udde6-\uddff]){2}",eA="[\ud800-\udbff][\udc00-\udfff]",eR="["+ew+"]",eN="\\u200d",eM="(?:"+eO+"|"+eI+")",eL="(?:"+eR+"|"+eI+")",eF="(?:"+eS+"(?:d|ll|m|re|s|t|ve))?",e$="(?:"+eS+"(?:D|LL|M|RE|S|T|VE))?",eD="(?:"+eP+"|"+eC+")?",ez="["+ej+"]?",eU="(?:"+eN+"(?:"+[eE,eT,eA].join("|")+")"+ez+eD+")*",eB=ez+eD+eU,eZ="(?:"+["["+eb+"]",eT,eA].join("|")+")"+eB,eq="(?:"+[eE+eP+"?",eP,eT,eA,"["+ey+"]"].join("|")+")",eV=RegExp(eS,"g"),eK=RegExp(eP,"g"),eH=RegExp(eC+"(?="+eC+")|"+eq+eB,"g"),eW=RegExp([eR+"?"+eO+"+"+eF+"(?="+[ek,eR,"$"].join("|")+")",eL+"+"+e$+"(?="+[ek,eR+eM,"$"].join("|")+")",eR+"?"+eM+"+"+eF,eR+"+"+e$,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",eZ].join("|"),"g"),eJ=RegExp("["+eN+ey+ev+ej+"]"),eQ=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eG=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eY=-1,eX={};eX[C]=eX[E]=eX[T]=eX[A]=eX[R]=eX[N]=eX[M]=eX[L]=eX[F]=!0,eX[d]=eX[p]=eX[O]=eX[f]=eX[I]=eX[h]=eX[m]=eX[g]=eX[v]=eX[b]=eX[_]=eX[j]=eX[x]=eX[S]=eX[P]=!1;var e0={};e0[d]=e0[p]=e0[O]=e0[I]=e0[f]=e0[h]=e0[C]=e0[E]=e0[T]=e0[A]=e0[R]=e0[v]=e0[b]=e0[_]=e0[j]=e0[x]=e0[S]=e0[k]=e0[N]=e0[M]=e0[L]=e0[F]=!0,e0[m]=e0[g]=e0[P]=!1;var e1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},e2=parseFloat,e4=parseInt,e3="object"==typeof a&&a&&a.Object===Object&&a,e5="object"==typeof self&&self&&self.Object===Object&&self,e6=e3||e5||Function("return this")(),e9=n&&!n.nodeType&&n,e8=e9&&r&&!r.nodeType&&r,e7=e8&&e8.exports===e9,te=e7&&e3.process,tt=function(){try{var e=e8&&e8.require&&e8.require("util").types;if(e)return e;return te&&te.binding&&te.binding("util")}catch(e){}}(),tr=tt&&tt.isArrayBuffer,tn=tt&&tt.isDate,ta=tt&&tt.isMap,ts=tt&&tt.isRegExp,ti=tt&&tt.isSet,to=tt&&tt.isTypedArray;function tl(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function tu(e,t,r,n){for(var a=-1,s=null==e?0:e.length;++a<s;){var i=e[a];t(n,i,r(i),e)}return n}function tc(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function td(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function tp(e,t){for(var r=-1,n=null==e?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s}function tf(e,t){return!!(null==e?0:e.length)&&tx(e,t,0)>-1}function th(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}function tm(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function tg(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function ty(e,t,r,n){var a=-1,s=null==e?0:e.length;for(n&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}function tv(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function tb(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var t_=tO("length");function tw(e,t,r){var n;return r(e,function(e,r,a){if(t(e,r,a))return n=r,!1}),n}function tj(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return -1}function tx(e,t,r){return t==t?function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return -1}(e,t,r):tj(e,tk,r)}function tS(e,t,r,n){for(var a=r-1,s=e.length;++a<s;)if(n(e[a],t))return a;return -1}function tk(e){return e!=e}function tP(e,t){var r=null==e?0:e.length;return r?tE(e,t)/r:u}function tO(e){return function(r){return null==r?t:r[e]}}function tI(e){return function(r){return null==e?t:e[r]}}function tC(e,t,r,n,a){return a(e,function(e,a,s){r=n?(n=!1,e):t(r,e,a,s)}),r}function tE(e,r){for(var n,a=-1,s=e.length;++a<s;){var i=r(e[a]);i!==t&&(n=n===t?i:n+i)}return n}function tT(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function tA(e){return e?e.slice(0,tW(e)+1).replace(X,""):e}function tR(e){return function(t){return e(t)}}function tN(e,t){return tm(t,function(t){return e[t]})}function tM(e,t){return e.has(t)}function tL(e,t){for(var r=-1,n=e.length;++r<n&&tx(t,e[r],0)>-1;);return r}function tF(e,t){for(var r=e.length;r--&&tx(t,e[r],0)>-1;);return r}var t$=tI({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),tD=tI({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tz(e){return"\\"+e1[e]}function tU(e){return eJ.test(e)}function tB(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function tZ(e,t){return function(r){return e(t(r))}}function tq(e,t){for(var r=-1,n=e.length,a=0,s=[];++r<n;){var i=e[r];(i===t||i===o)&&(e[r]=o,s[a++]=r)}return s}function tV(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function tK(e){return tU(e)?function(e){for(var t=eH.lastIndex=0;eH.test(e);)++t;return t}(e):t_(e)}function tH(e){return tU(e)?e.match(eH)||[]:e.split("")}function tW(e){for(var t=e.length;t--&&ee.test(e.charAt(t)););return t}var tJ=tI({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tQ=function e(r){var n,a,ee,ey,ev=(r=null==r?e6:tQ.defaults(e6.Object(),r,tQ.pick(e6,eG))).Array,eb=r.Date,e_=r.Error,ew=r.Function,ej=r.Math,ex=r.Object,eS=r.RegExp,ek=r.String,eP=r.TypeError,eO=ev.prototype,eI=ew.prototype,eC=ex.prototype,eE=r["__core-js_shared__"],eT=eI.toString,eA=eC.hasOwnProperty,eR=0,eN=(n=/[^.]+$/.exec(eE&&eE.keys&&eE.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",eM=eC.toString,eL=eT.call(ex),eF=e6._,e$=eS("^"+eT.call(eA).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eD=e7?r.Buffer:t,ez=r.Symbol,eU=r.Uint8Array,eB=eD?eD.allocUnsafe:t,eZ=tZ(ex.getPrototypeOf,ex),eq=ex.create,eH=eC.propertyIsEnumerable,eJ=eO.splice,e1=ez?ez.isConcatSpreadable:t,e3=ez?ez.iterator:t,e5=ez?ez.toStringTag:t,e9=function(){try{var e=ap(ex,"defineProperty");return e({},"",{}),e}catch(e){}}(),e8=r.clearTimeout!==e6.clearTimeout&&r.clearTimeout,te=eb&&eb.now!==e6.Date.now&&eb.now,tt=r.setTimeout!==e6.setTimeout&&r.setTimeout,t_=ej.ceil,tI=ej.floor,tG=ex.getOwnPropertySymbols,tY=eD?eD.isBuffer:t,tX=r.isFinite,t0=eO.join,t1=tZ(ex.keys,ex),t2=ej.max,t4=ej.min,t3=eb.now,t5=r.parseInt,t6=ej.random,t9=eO.reverse,t8=ap(r,"DataView"),t7=ap(r,"Map"),re=ap(r,"Promise"),rt=ap(r,"Set"),rr=ap(r,"WeakMap"),rn=ap(ex,"create"),ra=rr&&new rr,rs={},ri=aF(t8),ro=aF(t7),rl=aF(re),ru=aF(rt),rc=aF(rr),rd=ez?ez.prototype:t,rp=rd?rd.valueOf:t,rf=rd?rd.toString:t;function rh(e){if(sq(e)&&!sR(e)&&!(e instanceof rv)){if(e instanceof ry)return e;if(eA.call(e,"__wrapped__"))return a$(e)}return new ry(e)}var rm=function(){function e(){}return function(r){if(!sZ(r))return{};if(eq)return eq(r);e.prototype=r;var n=new e;return e.prototype=t,n}}();function rg(){}function ry(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=t}function rv(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function rb(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function r_(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function rw(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function rj(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new rw;++t<r;)this.add(e[t])}function rx(e){var t=this.__data__=new r_(e);this.size=t.size}function rS(e,t){var r=sR(e),n=!r&&sA(e),a=!r&&!n&&sF(e),s=!r&&!n&&!a&&sY(e),i=r||n||a||s,o=i?tT(e.length,ek):[],l=o.length;for(var u in e)(t||eA.call(e,u))&&!(i&&("length"==u||a&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ab(u,l)))&&o.push(u);return o}function rk(e){var r=e.length;return r?e[nu(0,r-1)]:t}function rP(e,r,n){(n===t||sC(e[r],n))&&(n!==t||r in e)||rT(e,r,n)}function rO(e,r,n){var a=e[r];eA.call(e,r)&&sC(a,n)&&(n!==t||r in e)||rT(e,r,n)}function rI(e,t){for(var r=e.length;r--;)if(sC(e[r][0],t))return r;return -1}function rC(e,t,r,n){return r$(e,function(e,a,s){t(n,e,r(e),s)}),n}function rE(e,t){return e&&nU(t,id(t),e)}function rT(e,t,r){"__proto__"==t&&e9?e9(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function rA(e,r){for(var n=-1,a=r.length,s=ev(a),i=null==e;++n<a;)s[n]=i?t:ii(e,r[n]);return s}function rR(e,r,n){return e==e&&(n!==t&&(e=e<=n?e:n),r!==t&&(e=e>=r?e:r)),e}function rN(e,r,n,a,s,i){var o,l=1&r,u=2&r,c=4&r;if(n&&(o=s?n(e,a,s,i):n(e)),o!==t)return o;if(!sZ(e))return e;var p=sR(e);if(p){if(m=e.length,w=new e.constructor(m),m&&"string"==typeof e[0]&&eA.call(e,"index")&&(w.index=e.index,w.input=e.input),o=w,!l)return nz(e,o)}else{var m,w,P,$,D,z=am(e),U=z==g||z==y;if(sF(e))return nN(e,l);if(z==_||z==d||U&&!s){if(o=u||U?{}:ay(e),!l)return u?(P=(D=o)&&nU(e,ip(e),D),nU(e,ah(e),P)):($=rE(o,e),nU(e,af(e),$))}else{if(!e0[z])return s?e:{};o=function(e,t,r){var n,a,s=e.constructor;switch(t){case O:return nM(e);case f:case h:return new s(+e);case I:return n=r?nM(e.buffer):e.buffer,new e.constructor(n,e.byteOffset,e.byteLength);case C:case E:case T:case A:case R:case N:case M:case L:case F:return nL(e,r);case v:return new s;case b:case S:return new s(e);case j:return(a=new e.constructor(e.source,el.exec(e))).lastIndex=e.lastIndex,a;case x:return new s;case k:return rp?ex(rp.call(e)):{}}}(e,z,l)}}i||(i=new rx);var B=i.get(e);if(B)return B;i.set(e,o),sJ(e)?e.forEach(function(t){o.add(rN(t,r,n,t,e,i))}):sV(e)&&e.forEach(function(t,a){o.set(a,rN(t,r,n,a,e,i))});var Z=c?u?as:aa:u?ip:id,q=p?t:Z(e);return tc(q||e,function(t,a){q&&(t=e[a=t]),rO(o,a,rN(t,r,n,a,e,i))}),o}function rM(e,r,n){var a=n.length;if(null==e)return!a;for(e=ex(e);a--;){var s=n[a],i=r[s],o=e[s];if(o===t&&!(s in e)||!i(o))return!1}return!0}function rL(e,r,n){if("function"!=typeof e)throw new eP(s);return aE(function(){e.apply(t,n)},r)}function rF(e,t,r,n){var a=-1,s=tf,i=!0,o=e.length,l=[],u=t.length;if(!o)return l;r&&(t=tm(t,tR(r))),n?(s=th,i=!1):t.length>=200&&(s=tM,i=!1,t=new rj(t));r:for(;++a<o;){var c=e[a],d=null==r?c:r(c);if(c=n||0!==c?c:0,i&&d==d){for(var p=u;p--;)if(t[p]===d)continue r;l.push(c)}else s(t,d,n)||l.push(c)}return l}rh.templateSettings={escape:V,evaluate:K,interpolate:H,variable:"",imports:{_:rh}},rh.prototype=rg.prototype,rh.prototype.constructor=rh,ry.prototype=rm(rg.prototype),ry.prototype.constructor=ry,rv.prototype=rm(rg.prototype),rv.prototype.constructor=rv,rb.prototype.clear=function(){this.__data__=rn?rn(null):{},this.size=0},rb.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rb.prototype.get=function(e){var r=this.__data__;if(rn){var n=r[e];return n===i?t:n}return eA.call(r,e)?r[e]:t},rb.prototype.has=function(e){var r=this.__data__;return rn?r[e]!==t:eA.call(r,e)},rb.prototype.set=function(e,r){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=rn&&r===t?i:r,this},r_.prototype.clear=function(){this.__data__=[],this.size=0},r_.prototype.delete=function(e){var t=this.__data__,r=rI(t,e);return!(r<0)&&(r==t.length-1?t.pop():eJ.call(t,r,1),--this.size,!0)},r_.prototype.get=function(e){var r=this.__data__,n=rI(r,e);return n<0?t:r[n][1]},r_.prototype.has=function(e){return rI(this.__data__,e)>-1},r_.prototype.set=function(e,t){var r=this.__data__,n=rI(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},rw.prototype.clear=function(){this.size=0,this.__data__={hash:new rb,map:new(t7||r_),string:new rb}},rw.prototype.delete=function(e){var t=ac(this,e).delete(e);return this.size-=t?1:0,t},rw.prototype.get=function(e){return ac(this,e).get(e)},rw.prototype.has=function(e){return ac(this,e).has(e)},rw.prototype.set=function(e,t){var r=ac(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},rj.prototype.add=rj.prototype.push=function(e){return this.__data__.set(e,i),this},rj.prototype.has=function(e){return this.__data__.has(e)},rx.prototype.clear=function(){this.__data__=new r_,this.size=0},rx.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},rx.prototype.get=function(e){return this.__data__.get(e)},rx.prototype.has=function(e){return this.__data__.has(e)},rx.prototype.set=function(e,t){var r=this.__data__;if(r instanceof r_){var n=r.__data__;if(!t7||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new rw(n)}return r.set(e,t),this.size=r.size,this};var r$=nq(rK),rD=nq(rH,!0);function rz(e,t){var r=!0;return r$(e,function(e,n,a){return r=!!t(e,n,a)}),r}function rU(e,r,n){for(var a=-1,s=e.length;++a<s;){var i=e[a],o=r(i);if(null!=o&&(l===t?o==o&&!sG(o):n(o,l)))var l=o,u=i}return u}function rB(e,t){var r=[];return r$(e,function(e,n,a){t(e,n,a)&&r.push(e)}),r}function rZ(e,t,r,n,a){var s=-1,i=e.length;for(r||(r=av),a||(a=[]);++s<i;){var o=e[s];t>0&&r(o)?t>1?rZ(o,t-1,r,n,a):tg(a,o):n||(a[a.length]=o)}return a}var rq=nV(),rV=nV(!0);function rK(e,t){return e&&rq(e,t,id)}function rH(e,t){return e&&rV(e,t,id)}function rW(e,t){return tp(t,function(t){return sz(e[t])})}function rJ(e,r){r=nT(r,e);for(var n=0,a=r.length;null!=e&&n<a;)e=e[aL(r[n++])];return n&&n==a?e:t}function rQ(e,t,r){var n=t(e);return sR(e)?n:tg(n,r(e))}function rG(e){return null==e?e===t?"[object Undefined]":"[object Null]":e5&&e5 in ex(e)?function(e){var r=eA.call(e,e5),n=e[e5];try{e[e5]=t;var a=!0}catch(e){}var s=eM.call(e);return a&&(r?e[e5]=n:delete e[e5]),s}(e):eM.call(e)}function rY(e,t){return e>t}function rX(e,t){return null!=e&&eA.call(e,t)}function r0(e,t){return null!=e&&t in ex(e)}function r1(e,r,n){for(var a=n?th:tf,s=e[0].length,i=e.length,o=i,l=ev(i),u=1/0,c=[];o--;){var d=e[o];o&&r&&(d=tm(d,tR(r))),u=t4(d.length,u),l[o]=!n&&(r||s>=120&&d.length>=120)?new rj(o&&d):t}d=e[0];var p=-1,f=l[0];r:for(;++p<s&&c.length<u;){var h=d[p],m=r?r(h):h;if(h=n||0!==h?h:0,!(f?tM(f,m):a(c,m,n))){for(o=i;--o;){var g=l[o];if(!(g?tM(g,m):a(e[o],m,n)))continue r}f&&f.push(m),c.push(h)}}return c}function r2(e,r,n){r=nT(r,e);var a=null==(e=aO(e,r))?e:e[aL(aJ(r))];return null==a?t:tl(a,e,n)}function r4(e){return sq(e)&&rG(e)==d}function r3(e,r,n,a,s){return e===r||(null!=e&&null!=r&&(sq(e)||sq(r))?function(e,r,n,a,s,i){var o=sR(e),l=sR(r),u=o?p:am(e),c=l?p:am(r);u=u==d?_:u,c=c==d?_:c;var g=u==_,y=c==_,w=u==c;if(w&&sF(e)){if(!sF(r))return!1;o=!0,g=!1}if(w&&!g)return i||(i=new rx),o||sY(e)?ar(e,r,n,a,s,i):function(e,t,r,n,a,s,i){switch(r){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case O:if(e.byteLength!=t.byteLength||!s(new eU(e),new eU(t)))break;return!0;case f:case h:case b:return sC(+e,+t);case m:return e.name==t.name&&e.message==t.message;case j:case S:return e==t+"";case v:var o=tB;case x:var l=1&n;if(o||(o=tV),e.size!=t.size&&!l)break;var u=i.get(e);if(u)return u==t;n|=2,i.set(e,t);var c=ar(o(e),o(t),n,a,s,i);return i.delete(e),c;case k:if(rp)return rp.call(e)==rp.call(t)}return!1}(e,r,u,n,a,s,i);if(!(1&n)){var P=g&&eA.call(e,"__wrapped__"),C=y&&eA.call(r,"__wrapped__");if(P||C){var E=P?e.value():e,T=C?r.value():r;return i||(i=new rx),s(E,T,n,a,i)}}return!!w&&(i||(i=new rx),function(e,r,n,a,s,i){var o=1&n,l=aa(e),u=l.length;if(u!=aa(r).length&&!o)return!1;for(var c=u;c--;){var d=l[c];if(!(o?d in r:eA.call(r,d)))return!1}var p=i.get(e),f=i.get(r);if(p&&f)return p==r&&f==e;var h=!0;i.set(e,r),i.set(r,e);for(var m=o;++c<u;){var g=e[d=l[c]],y=r[d];if(a)var v=o?a(y,g,d,r,e,i):a(g,y,d,e,r,i);if(!(v===t?g===y||s(g,y,n,a,i):v)){h=!1;break}m||(m="constructor"==d)}if(h&&!m){var b=e.constructor,_=r.constructor;b!=_&&"constructor"in e&&"constructor"in r&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(h=!1)}return i.delete(e),i.delete(r),h}(e,r,n,a,s,i))}(e,r,n,a,r3,s):e!=e&&r!=r)}function r5(e,r,n,a){var s=n.length,i=s,o=!a;if(null==e)return!i;for(e=ex(e);s--;){var l=n[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){var u=(l=n[s])[0],c=e[u],d=l[1];if(o&&l[2]){if(c===t&&!(u in e))return!1}else{var p=new rx;if(a)var f=a(c,d,u,e,r,p);if(!(f===t?r3(d,c,3,a,p):f))return!1}}return!0}function r6(e){return!(!sZ(e)||eN&&eN in e)&&(sz(e)?e$:ed).test(aF(e))}function r9(e){return"function"==typeof e?e:null==e?i$:"object"==typeof e?sR(e)?nr(e[0],e[1]):nt(e):iH(e)}function r8(e){if(!aS(e))return t1(e);var t=[];for(var r in ex(e))eA.call(e,r)&&"constructor"!=r&&t.push(r);return t}function r7(e,t){return e<t}function ne(e,t){var r=-1,n=sM(e)?ev(e.length):[];return r$(e,function(e,a,s){n[++r]=t(e,a,s)}),n}function nt(e){var t=ad(e);return 1==t.length&&t[0][2]?ak(t[0][0],t[0][1]):function(r){return r===e||r5(r,e,t)}}function nr(e,r){var n;return aw(e)&&(n=r)==n&&!sZ(n)?ak(aL(e),r):function(n){var a=ii(n,e);return a===t&&a===r?io(n,e):r3(r,a,3)}}function nn(e,r,n,a,s){e!==r&&rq(r,function(i,o){if(s||(s=new rx),sZ(i))(function(e,r,n,a,s,i,o){var l=aI(e,n),u=aI(r,n),c=o.get(u);if(c){rP(e,n,c);return}var d=i?i(l,u,n+"",e,r,o):t,p=d===t;if(p){var f=sR(u),h=!f&&sF(u),m=!f&&!h&&sY(u);d=u,f||h||m?sR(l)?d=l:sL(l)?d=nz(l):h?(p=!1,d=nN(u,!0)):m?(p=!1,d=nL(u,!0)):d=[]:sH(u)||sA(u)?(d=l,sA(l)?d=s6(l):(!sZ(l)||sz(l))&&(d=ay(u))):p=!1}p&&(o.set(u,d),s(d,u,a,i,o),o.delete(u)),rP(e,n,d)})(e,r,o,n,nn,a,s);else{var l=a?a(aI(e,o),i,o+"",e,r,s):t;l===t&&(l=i),rP(e,o,l)}},ip)}function na(e,r){var n=e.length;if(n)return ab(r+=r<0?n:0,n)?e[r]:t}function ns(e,t,r){t=t.length?tm(t,function(e){return sR(e)?function(t){return rJ(t,1===e.length?e[0]:e)}:e}):[i$];var n=-1;return t=tm(t,tR(au())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(ne(e,function(e,r,a){return{criteria:tm(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,a=e.criteria,s=t.criteria,i=a.length,o=r.length;++n<i;){var l=nF(a[n],s[n]);if(l){if(n>=o)return l;return l*("desc"==r[n]?-1:1)}}return e.index-t.index}(e,t,r)})}function ni(e,t,r){for(var n=-1,a=t.length,s={};++n<a;){var i=t[n],o=rJ(e,i);r(o,i)&&np(s,nT(i,e),o)}return s}function no(e,t,r,n){var a=n?tS:tx,s=-1,i=t.length,o=e;for(e===t&&(t=nz(t)),r&&(o=tm(e,tR(r)));++s<i;)for(var l=0,u=t[s],c=r?r(u):u;(l=a(o,c,l,n))>-1;)o!==e&&eJ.call(o,l,1),eJ.call(e,l,1);return e}function nl(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==s){var s=a;ab(a)?eJ.call(e,a,1):nx(e,a)}}return e}function nu(e,t){return e+tI(t6()*(t-e+1))}function nc(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do t%2&&(r+=e),(t=tI(t/2))&&(e+=e);while(t)return r}function nd(e,t){return aT(aP(e,t,i$),e+"")}function np(e,r,n,a){if(!sZ(e))return e;r=nT(r,e);for(var s=-1,i=r.length,o=i-1,l=e;null!=l&&++s<i;){var u=aL(r[s]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)break;if(s!=o){var d=l[u];(c=a?a(d,u,l):t)===t&&(c=sZ(d)?d:ab(r[s+1])?[]:{})}rO(l,u,c),l=l[u]}return e}var nf=ra?function(e,t){return ra.set(e,t),e}:i$,nh=e9?function(e,t){return e9(e,"toString",{configurable:!0,enumerable:!1,value:iM(t),writable:!0})}:i$;function nm(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=ev(a);++n<a;)s[n]=e[n+t];return s}function ng(e,t){var r;return r$(e,function(e,n,a){return!(r=t(e,n,a))}),!!r}function ny(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;n<a;){var s=n+a>>>1,i=e[s];null!==i&&!sG(i)&&(r?i<=t:i<t)?n=s+1:a=s}return a}return nv(e,t,i$,r)}function nv(e,r,n,a){var s=0,i=null==e?0:e.length;if(0===i)return 0;for(var o=(r=n(r))!=r,l=null===r,u=sG(r),c=r===t;s<i;){var d=tI((s+i)/2),p=n(e[d]),f=p!==t,h=null===p,m=p==p,g=sG(p);if(o)var y=a||m;else y=c?m&&(a||f):l?m&&f&&(a||!h):u?m&&f&&!h&&(a||!g):!h&&!g&&(a?p<=r:p<r);y?s=d+1:i=d}return t4(i,4294967294)}function nb(e,t){for(var r=-1,n=e.length,a=0,s=[];++r<n;){var i=e[r],o=t?t(i):i;if(!r||!sC(o,l)){var l=o;s[a++]=0===i?0:i}}return s}function n_(e){return"number"==typeof e?e:sG(e)?u:+e}function nw(e){if("string"==typeof e)return e;if(sR(e))return tm(e,nw)+"";if(sG(e))return rf?rf.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}function nj(e,t,r){var n=-1,a=tf,s=e.length,i=!0,o=[],l=o;if(r)i=!1,a=th;else if(s>=200){var u=t?null:n6(e);if(u)return tV(u);i=!1,a=tM,l=new rj}else l=t?[]:o;r:for(;++n<s;){var c=e[n],d=t?t(c):c;if(c=r||0!==c?c:0,i&&d==d){for(var p=l.length;p--;)if(l[p]===d)continue r;t&&l.push(d),o.push(c)}else a(l,d,r)||(l!==o&&l.push(d),o.push(c))}return o}function nx(e,t){return t=nT(t,e),null==(e=aO(e,t))||delete e[aL(aJ(t))]}function nS(e,t,r,n){return np(e,t,r(rJ(e,t)),n)}function nk(e,t,r,n){for(var a=e.length,s=n?a:-1;(n?s--:++s<a)&&t(e[s],s,e););return r?nm(e,n?0:s,n?s+1:a):nm(e,n?s+1:0,n?a:s)}function nP(e,t){var r=e;return r instanceof rv&&(r=r.value()),ty(t,function(e,t){return t.func.apply(t.thisArg,tg([e],t.args))},r)}function nO(e,t,r){var n=e.length;if(n<2)return n?nj(e[0]):[];for(var a=-1,s=ev(n);++a<n;)for(var i=e[a],o=-1;++o<n;)o!=a&&(s[a]=rF(s[a]||i,e[o],t,r));return nj(rZ(s,1),t,r)}function nI(e,r,n){for(var a=-1,s=e.length,i=r.length,o={};++a<s;){var l=a<i?r[a]:t;n(o,e[a],l)}return o}function nC(e){return sL(e)?e:[]}function nE(e){return"function"==typeof e?e:i$}function nT(e,t){return sR(e)?e:aw(e,t)?[e]:aM(s9(e))}function nA(e,r,n){var a=e.length;return n=n===t?a:n,!r&&n>=a?e:nm(e,r,n)}var nR=e8||function(e){return e6.clearTimeout(e)};function nN(e,t){if(t)return e.slice();var r=e.length,n=eB?eB(r):new e.constructor(r);return e.copy(n),n}function nM(e){var t=new e.constructor(e.byteLength);return new eU(t).set(new eU(e)),t}function nL(e,t){var r=t?nM(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function nF(e,r){if(e!==r){var n=e!==t,a=null===e,s=e==e,i=sG(e),o=r!==t,l=null===r,u=r==r,c=sG(r);if(!l&&!c&&!i&&e>r||i&&o&&u&&!l&&!c||a&&o&&u||!n&&u||!s)return 1;if(!a&&!i&&!c&&e<r||c&&n&&s&&!a&&!i||l&&n&&s||!o&&s||!u)return -1}return 0}function n$(e,t,r,n){for(var a=-1,s=e.length,i=r.length,o=-1,l=t.length,u=t2(s-i,0),c=ev(l+u),d=!n;++o<l;)c[o]=t[o];for(;++a<i;)(d||a<s)&&(c[r[a]]=e[a]);for(;u--;)c[o++]=e[a++];return c}function nD(e,t,r,n){for(var a=-1,s=e.length,i=-1,o=r.length,l=-1,u=t.length,c=t2(s-o,0),d=ev(c+u),p=!n;++a<c;)d[a]=e[a];for(var f=a;++l<u;)d[f+l]=t[l];for(;++i<o;)(p||a<s)&&(d[f+r[i]]=e[a++]);return d}function nz(e,t){var r=-1,n=e.length;for(t||(t=ev(n));++r<n;)t[r]=e[r];return t}function nU(e,r,n,a){var s=!n;n||(n={});for(var i=-1,o=r.length;++i<o;){var l=r[i],u=a?a(n[l],e[l],l,n,e):t;u===t&&(u=e[l]),s?rT(n,l,u):rO(n,l,u)}return n}function nB(e,t){return function(r,n){var a=sR(r)?tu:rC,s=t?t():{};return a(r,e,au(n,2),s)}}function nZ(e){return nd(function(r,n){var a=-1,s=n.length,i=s>1?n[s-1]:t,o=s>2?n[2]:t;for(i=e.length>3&&"function"==typeof i?(s--,i):t,o&&a_(n[0],n[1],o)&&(i=s<3?t:i,s=1),r=ex(r);++a<s;){var l=n[a];l&&e(r,l,a,i)}return r})}function nq(e,t){return function(r,n){if(null==r)return r;if(!sM(r))return e(r,n);for(var a=r.length,s=t?a:-1,i=ex(r);(t?s--:++s<a)&&!1!==n(i[s],s,i););return r}}function nV(e){return function(t,r,n){for(var a=-1,s=ex(t),i=n(t),o=i.length;o--;){var l=i[e?o:++a];if(!1===r(s[l],l,s))break}return t}}function nK(e){return function(r){var n=tU(r=s9(r))?tH(r):t,a=n?n[0]:r.charAt(0),s=n?nA(n,1).join(""):r.slice(1);return a[e]()+s}}function nH(e){return function(t){return ty(iA(iS(t).replace(eV,"")),e,"")}}function nW(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=rm(e.prototype),n=e.apply(r,t);return sZ(n)?n:r}}function nJ(e){return function(r,n,a){var s=ex(r);if(!sM(r)){var i=au(n,3);r=id(r),n=function(e){return i(s[e],e,s)}}var o=e(r,n,a);return o>-1?s[i?r[o]:o]:t}}function nQ(e){return an(function(r){var n=r.length,a=n,i=ry.prototype.thru;for(e&&r.reverse();a--;){var o=r[a];if("function"!=typeof o)throw new eP(s);if(i&&!l&&"wrapper"==ao(o))var l=new ry([],!0)}for(a=l?a:n;++a<n;){var u=ao(o=r[a]),c="wrapper"==u?ai(o):t;l=c&&aj(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[ao(c[0])].apply(l,c[3]):1==o.length&&aj(o)?l[u]():l.thru(o)}return function(){var e=arguments,t=e[0];if(l&&1==e.length&&sR(t))return l.plant(t).value();for(var a=0,s=n?r[a].apply(this,e):t;++a<n;)s=r[a].call(this,s);return s}})}function nG(e,r,n,a,s,i,o,l,u,c){var d=128&r,p=1&r,f=2&r,h=24&r,m=512&r,g=f?t:nW(e);return function y(){for(var v=arguments.length,b=ev(v),_=v;_--;)b[_]=arguments[_];if(h)var w=al(y),j=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(b,w);if(a&&(b=n$(b,a,s,h)),i&&(b=nD(b,i,o,h)),v-=j,h&&v<c){var x=tq(b,w);return n3(e,r,nG,y.placeholder,n,b,x,l,u,c-v)}var S=p?n:this,k=f?S[e]:e;return v=b.length,l?b=function(e,r){for(var n=e.length,a=t4(r.length,n),s=nz(e);a--;){var i=r[a];e[a]=ab(i,n)?s[i]:t}return e}(b,l):m&&v>1&&b.reverse(),d&&u<v&&(b.length=u),this&&this!==e6&&this instanceof y&&(k=g||nW(k)),k.apply(S,b)}}function nY(e,t){return function(r,n){var a,s;return a=t(n),s={},rK(r,function(t,r,n){e(s,a(t),r,n)}),s}}function nX(e,r){return function(n,a){var s;if(n===t&&a===t)return r;if(n!==t&&(s=n),a!==t){if(s===t)return a;"string"==typeof n||"string"==typeof a?(n=nw(n),a=nw(a)):(n=n_(n),a=n_(a)),s=e(n,a)}return s}}function n0(e){return an(function(t){return t=tm(t,tR(au())),nd(function(r){var n=this;return e(t,function(e){return tl(e,n,r)})})})}function n1(e,r){var n=(r=r===t?" ":nw(r)).length;if(n<2)return n?nc(r,e):r;var a=nc(r,t_(e/tK(r)));return tU(r)?nA(tH(a),0,e).join(""):a.slice(0,e)}function n2(e){return function(r,n,a){return a&&"number"!=typeof a&&a_(r,n,a)&&(n=a=t),r=s2(r),n===t?(n=r,r=0):n=s2(n),a=a===t?r<n?1:-1:s2(a),function(e,t,r,n){for(var a=-1,s=t2(t_((t-e)/(r||1)),0),i=ev(s);s--;)i[n?s:++a]=e,e+=r;return i}(r,n,a,e)}}function n4(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=s5(t),r=s5(r)),e(t,r)}}function n3(e,r,n,a,s,i,o,l,u,c){var d=8&r,p=d?o:t,f=d?t:o,h=d?i:t,m=d?t:i;r|=d?32:64,4&(r&=~(d?64:32))||(r&=-4);var g=[e,r,s,h,p,m,f,l,u,c],y=n.apply(t,g);return aj(e)&&aC(y,g),y.placeholder=a,aA(y,e,r)}function n5(e){var t=ej[e];return function(e,r){if(e=s5(e),(r=null==r?0:t4(s4(r),292))&&tX(e)){var n=(s9(e)+"e").split("e");return+((n=(s9(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var n6=rt&&1/tV(new rt([,-0]))[1]==l?function(e){return new rt(e)}:iZ;function n9(e){return function(t){var r,n,a=am(t);return a==v?tB(t):a==x?(r=-1,n=Array(t.size),t.forEach(function(e){n[++r]=[e,e]}),n):tm(e(t),function(e){return[e,t[e]]})}}function n8(e,r,n,a,i,l,u,c){var d=2&r;if(!d&&"function"!=typeof e)throw new eP(s);var p=a?a.length:0;if(p||(r&=-97,a=i=t),u=u===t?u:t2(s4(u),0),c=c===t?c:s4(c),p-=i?i.length:0,64&r){var f=a,h=i;a=i=t}var m=d?t:ai(e),g=[e,r,n,a,i,f,h,l,u,c];if(m&&function(e,t){var r=e[1],n=t[1],a=r|n,s=a<131,i=128==n&&8==r||128==n&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(s||i){1&n&&(e[2]=t[2],a|=1&r?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?n$(u,l,t[4]):l,e[4]=u?tq(e[3],o):t[4]}(l=t[5])&&(u=e[5],e[5]=u?nD(u,l,t[6]):l,e[6]=u?tq(e[5],o):t[6]),(l=t[7])&&(e[7]=l),128&n&&(e[8]=null==e[8]?t[8]:t4(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}}(g,m),e=g[0],r=g[1],n=g[2],a=g[3],i=g[4],(c=g[9]=g[9]===t?d?0:e.length:t2(g[9]-p,0))||!(24&r)||(r&=-25),r&&1!=r)8==r||16==r?(y=e,v=r,b=c,_=nW(y),A=function e(){for(var r=arguments.length,n=ev(r),a=r,s=al(e);a--;)n[a]=arguments[a];var i=r<3&&n[0]!==s&&n[r-1]!==s?[]:tq(n,s);return(r-=i.length)<b?n3(y,v,nG,e.placeholder,t,n,i,t,t,b-r):tl(this&&this!==e6&&this instanceof e?_:y,this,n)}):32!=r&&33!=r||i.length?A=nG.apply(t,g):(w=e,j=r,x=n,S=a,k=1&j,P=nW(w),A=function e(){for(var t=-1,r=arguments.length,n=-1,a=S.length,s=ev(a+r),i=this&&this!==e6&&this instanceof e?P:w;++n<a;)s[n]=S[n];for(;r--;)s[n++]=arguments[++t];return tl(i,k?x:this,s)});else var y,v,b,_,w,j,x,S,k,P,O,I,C,E,T,A=(O=e,I=r,C=n,E=1&I,T=nW(O),function e(){return(this&&this!==e6&&this instanceof e?T:O).apply(E?C:this,arguments)});return aA((m?nf:aC)(A,g),e,r)}function n7(e,r,n,a){return e===t||sC(e,eC[n])&&!eA.call(a,n)?r:e}function ae(e,r,n,a,s,i){return sZ(e)&&sZ(r)&&(i.set(r,e),nn(e,r,t,ae,i),i.delete(r)),e}function at(e){return sH(e)?t:e}function ar(e,r,n,a,s,i){var o=1&n,l=e.length,u=r.length;if(l!=u&&!(o&&u>l))return!1;var c=i.get(e),d=i.get(r);if(c&&d)return c==r&&d==e;var p=-1,f=!0,h=2&n?new rj:t;for(i.set(e,r),i.set(r,e);++p<l;){var m=e[p],g=r[p];if(a)var y=o?a(g,m,p,r,e,i):a(m,g,p,e,r,i);if(y!==t){if(y)continue;f=!1;break}if(h){if(!tb(r,function(e,t){if(!tM(h,t)&&(m===e||s(m,e,n,a,i)))return h.push(t)})){f=!1;break}}else if(!(m===g||s(m,g,n,a,i))){f=!1;break}}return i.delete(e),i.delete(r),f}function an(e){return aT(aP(e,t,aq),e+"")}function aa(e){return rQ(e,id,af)}function as(e){return rQ(e,ip,ah)}var ai=ra?function(e){return ra.get(e)}:iZ;function ao(e){for(var t=e.name+"",r=rs[t],n=eA.call(rs,t)?r.length:0;n--;){var a=r[n],s=a.func;if(null==s||s==e)return a.name}return t}function al(e){return(eA.call(rh,"placeholder")?rh:e).placeholder}function au(){var e=rh.iteratee||iD;return e=e===iD?r9:e,arguments.length?e(arguments[0],arguments[1]):e}function ac(e,t){var r,n=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function ad(e){for(var t=id(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,a==a&&!sZ(a)]}return t}function ap(e,r){var n=null==e?t:e[r];return r6(n)?n:t}var af=tG?function(e){return null==e?[]:tp(tG(e=ex(e)),function(t){return eH.call(e,t)})}:iQ,ah=tG?function(e){for(var t=[];e;)tg(t,af(e)),e=eZ(e);return t}:iQ,am=rG;function ag(e,t,r){t=nT(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var i=aL(t[n]);if(!(s=null!=e&&r(e,i)))break;e=e[i]}return s||++n!=a?s:!!(a=null==e?0:e.length)&&sB(a)&&ab(i,a)&&(sR(e)||sA(e))}function ay(e){return"function"!=typeof e.constructor||aS(e)?{}:rm(eZ(e))}function av(e){return sR(e)||sA(e)||!!(e1&&e&&e[e1])}function ab(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&ef.test(e))&&e>-1&&e%1==0&&e<t}function a_(e,t,r){if(!sZ(r))return!1;var n=typeof t;return("number"==n?!!(sM(r)&&ab(t,r.length)):"string"==n&&t in r)&&sC(r[t],e)}function aw(e,t){if(sR(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||sG(e))||J.test(e)||!W.test(e)||null!=t&&e in ex(t)}function aj(e){var t=ao(e),r=rh[t];if("function"!=typeof r||!(t in rv.prototype))return!1;if(e===r)return!0;var n=ai(r);return!!n&&e===n[0]}(t8&&am(new t8(new ArrayBuffer(1)))!=I||t7&&am(new t7)!=v||re&&am(re.resolve())!=w||rt&&am(new rt)!=x||rr&&am(new rr)!=P)&&(am=function(e){var r=rG(e),n=r==_?e.constructor:t,a=n?aF(n):"";if(a)switch(a){case ri:return I;case ro:return v;case rl:return w;case ru:return x;case rc:return P}return r});var ax=eE?sz:iG;function aS(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||eC)}function ak(e,r){return function(n){return null!=n&&n[e]===r&&(r!==t||e in ex(n))}}function aP(e,r,n){return r=t2(r===t?e.length-1:r,0),function(){for(var t=arguments,a=-1,s=t2(t.length-r,0),i=ev(s);++a<s;)i[a]=t[r+a];a=-1;for(var o=ev(r+1);++a<r;)o[a]=t[a];return o[r]=n(i),tl(e,this,o)}}function aO(e,t){return t.length<2?e:rJ(e,nm(t,0,-1))}function aI(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var aC=aR(nf),aE=tt||function(e,t){return e6.setTimeout(e,t)},aT=aR(nh);function aA(e,t,r){var n,a,s=t+"";return aT(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(et,"{\n/* [wrapped with "+t+"] */\n")}(s,(n=(a=s.match(er))?a[1].split(en):[],tc(c,function(e){var t="_."+e[0];r&e[1]&&!tf(n,t)&&n.push(t)}),n.sort())))}function aR(e){var r=0,n=0;return function(){var a=t3(),s=16-(a-n);if(n=a,s>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(t,arguments)}}function aN(e,r){var n=-1,a=e.length,s=a-1;for(r=r===t?a:r;++n<r;){var i=nu(n,s),o=e[i];e[i]=e[n],e[n]=o}return e.length=r,e}var aM=(ee=(a=sx(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Q,function(e,r,n,a){t.push(n?a.replace(ei,"$1"):r||e)}),t},function(e){return 500===ee.size&&ee.clear(),e})).cache,a);function aL(e){if("string"==typeof e||sG(e))return e;var t=e+"";return"0"==t&&1/e==-l?"-0":t}function aF(e){if(null!=e){try{return eT.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function a$(e){if(e instanceof rv)return e.clone();var t=new ry(e.__wrapped__,e.__chain__);return t.__actions__=nz(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var aD=nd(function(e,t){return sL(e)?rF(e,rZ(t,1,sL,!0)):[]}),az=nd(function(e,r){var n=aJ(r);return sL(n)&&(n=t),sL(e)?rF(e,rZ(r,1,sL,!0),au(n,2)):[]}),aU=nd(function(e,r){var n=aJ(r);return sL(n)&&(n=t),sL(e)?rF(e,rZ(r,1,sL,!0),t,n):[]});function aB(e,t,r){var n=null==e?0:e.length;if(!n)return -1;var a=null==r?0:s4(r);return a<0&&(a=t2(n+a,0)),tj(e,au(t,3),a)}function aZ(e,r,n){var a=null==e?0:e.length;if(!a)return -1;var s=a-1;return n!==t&&(s=s4(n),s=n<0?t2(a+s,0):t4(s,a-1)),tj(e,au(r,3),s,!0)}function aq(e){return(null==e?0:e.length)?rZ(e,1):[]}function aV(e){return e&&e.length?e[0]:t}var aK=nd(function(e){var t=tm(e,nC);return t.length&&t[0]===e[0]?r1(t):[]}),aH=nd(function(e){var r=aJ(e),n=tm(e,nC);return r===aJ(n)?r=t:n.pop(),n.length&&n[0]===e[0]?r1(n,au(r,2)):[]}),aW=nd(function(e){var r=aJ(e),n=tm(e,nC);return(r="function"==typeof r?r:t)&&n.pop(),n.length&&n[0]===e[0]?r1(n,t,r):[]});function aJ(e){var r=null==e?0:e.length;return r?e[r-1]:t}var aQ=nd(aG);function aG(e,t){return e&&e.length&&t&&t.length?no(e,t):e}var aY=an(function(e,t){var r=null==e?0:e.length,n=rA(e,t);return nl(e,tm(t,function(e){return ab(e,r)?+e:e}).sort(nF)),n});function aX(e){return null==e?e:t9.call(e)}var a0=nd(function(e){return nj(rZ(e,1,sL,!0))}),a1=nd(function(e){var r=aJ(e);return sL(r)&&(r=t),nj(rZ(e,1,sL,!0),au(r,2))}),a2=nd(function(e){var r=aJ(e);return r="function"==typeof r?r:t,nj(rZ(e,1,sL,!0),t,r)});function a4(e){if(!(e&&e.length))return[];var t=0;return e=tp(e,function(e){if(sL(e))return t=t2(e.length,t),!0}),tT(t,function(t){return tm(e,tO(t))})}function a3(e,r){if(!(e&&e.length))return[];var n=a4(e);return null==r?n:tm(n,function(e){return tl(r,t,e)})}var a5=nd(function(e,t){return sL(e)?rF(e,t):[]}),a6=nd(function(e){return nO(tp(e,sL))}),a9=nd(function(e){var r=aJ(e);return sL(r)&&(r=t),nO(tp(e,sL),au(r,2))}),a8=nd(function(e){var r=aJ(e);return r="function"==typeof r?r:t,nO(tp(e,sL),t,r)}),a7=nd(a4),se=nd(function(e){var r=e.length,n=r>1?e[r-1]:t;return n="function"==typeof n?(e.pop(),n):t,a3(e,n)});function st(e){var t=rh(e);return t.__chain__=!0,t}function sr(e,t){return t(e)}var sn=an(function(e){var r=e.length,n=r?e[0]:0,a=this.__wrapped__,s=function(t){return rA(t,e)};return!(r>1)&&!this.__actions__.length&&a instanceof rv&&ab(n)?((a=a.slice(n,+n+(r?1:0))).__actions__.push({func:sr,args:[s],thisArg:t}),new ry(a,this.__chain__).thru(function(e){return r&&!e.length&&e.push(t),e})):this.thru(s)}),sa=nB(function(e,t,r){eA.call(e,r)?++e[r]:rT(e,r,1)}),ss=nJ(aB),si=nJ(aZ);function so(e,t){return(sR(e)?tc:r$)(e,au(t,3))}function sl(e,t){return(sR(e)?function(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}:rD)(e,au(t,3))}var su=nB(function(e,t,r){eA.call(e,r)?e[r].push(t):rT(e,r,[t])}),sc=nd(function(e,t,r){var n=-1,a="function"==typeof t,s=sM(e)?ev(e.length):[];return r$(e,function(e){s[++n]=a?tl(t,e,r):r2(e,t,r)}),s}),sd=nB(function(e,t,r){rT(e,r,t)});function sp(e,t){return(sR(e)?tm:ne)(e,au(t,3))}var sf=nB(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),sh=nd(function(e,t){if(null==e)return[];var r=t.length;return r>1&&a_(e,t[0],t[1])?t=[]:r>2&&a_(t[0],t[1],t[2])&&(t=[t[0]]),ns(e,rZ(t,1),[])}),sm=te||function(){return e6.Date.now()};function sg(e,r,n){return r=n?t:r,r=e&&null==r?e.length:r,n8(e,128,t,t,t,t,r)}function sy(e,r){var n;if("function"!=typeof r)throw new eP(s);return e=s4(e),function(){return--e>0&&(n=r.apply(this,arguments)),e<=1&&(r=t),n}}var sv=nd(function(e,t,r){var n=1;if(r.length){var a=tq(r,al(sv));n|=32}return n8(e,n,t,r,a)}),sb=nd(function(e,t,r){var n=3;if(r.length){var a=tq(r,al(sb));n|=32}return n8(t,n,e,r,a)});function s_(e,r,n){var a,i,o,l,u,c,d=0,p=!1,f=!1,h=!0;if("function"!=typeof e)throw new eP(s);function m(r){var n=a,s=i;return a=i=t,d=r,l=e.apply(s,n)}function g(e){var n=e-c,a=e-d;return c===t||n>=r||n<0||f&&a>=o}function y(){var e,t,n,a=sm();if(g(a))return v(a);u=aE(y,(e=a-c,t=a-d,n=r-e,f?t4(n,o-t):n))}function v(e){return(u=t,h&&a)?m(e):(a=i=t,l)}function b(){var e,n=sm(),s=g(n);if(a=arguments,i=this,c=n,s){if(u===t)return d=e=c,u=aE(y,r),p?m(e):l;if(f)return nR(u),u=aE(y,r),m(c)}return u===t&&(u=aE(y,r)),l}return r=s5(r)||0,sZ(n)&&(p=!!n.leading,o=(f="maxWait"in n)?t2(s5(n.maxWait)||0,r):o,h="trailing"in n?!!n.trailing:h),b.cancel=function(){u!==t&&nR(u),d=0,a=c=i=u=t},b.flush=function(){return u===t?l:v(sm())},b}var sw=nd(function(e,t){return rL(e,1,t)}),sj=nd(function(e,t,r){return rL(e,s5(t)||0,r)});function sx(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new eP(s);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var i=e.apply(this,n);return r.cache=s.set(a,i)||s,i};return r.cache=new(sx.Cache||rw),r}function sS(e){if("function"!=typeof e)throw new eP(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}sx.Cache=rw;var sk=nd(function(e,t){var r=(t=1==t.length&&sR(t[0])?tm(t[0],tR(au())):tm(rZ(t,1),tR(au()))).length;return nd(function(n){for(var a=-1,s=t4(n.length,r);++a<s;)n[a]=t[a].call(this,n[a]);return tl(e,this,n)})}),sP=nd(function(e,r){var n=tq(r,al(sP));return n8(e,32,t,r,n)}),sO=nd(function(e,r){var n=tq(r,al(sO));return n8(e,64,t,r,n)}),sI=an(function(e,r){return n8(e,256,t,t,t,r)});function sC(e,t){return e===t||e!=e&&t!=t}var sE=n4(rY),sT=n4(function(e,t){return e>=t}),sA=r4(function(){return arguments}())?r4:function(e){return sq(e)&&eA.call(e,"callee")&&!eH.call(e,"callee")},sR=ev.isArray,sN=tr?tR(tr):function(e){return sq(e)&&rG(e)==O};function sM(e){return null!=e&&sB(e.length)&&!sz(e)}function sL(e){return sq(e)&&sM(e)}var sF=tY||iG,s$=tn?tR(tn):function(e){return sq(e)&&rG(e)==h};function sD(e){if(!sq(e))return!1;var t=rG(e);return t==m||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!sH(e)}function sz(e){if(!sZ(e))return!1;var t=rG(e);return t==g||t==y||"[object AsyncFunction]"==t||"[object Proxy]"==t}function sU(e){return"number"==typeof e&&e==s4(e)}function sB(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function sZ(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function sq(e){return null!=e&&"object"==typeof e}var sV=ta?tR(ta):function(e){return sq(e)&&am(e)==v};function sK(e){return"number"==typeof e||sq(e)&&rG(e)==b}function sH(e){if(!sq(e)||rG(e)!=_)return!1;var t=eZ(e);if(null===t)return!0;var r=eA.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&eT.call(r)==eL}var sW=ts?tR(ts):function(e){return sq(e)&&rG(e)==j},sJ=ti?tR(ti):function(e){return sq(e)&&am(e)==x};function sQ(e){return"string"==typeof e||!sR(e)&&sq(e)&&rG(e)==S}function sG(e){return"symbol"==typeof e||sq(e)&&rG(e)==k}var sY=to?tR(to):function(e){return sq(e)&&sB(e.length)&&!!eX[rG(e)]},sX=n4(r7),s0=n4(function(e,t){return e<=t});function s1(e){if(!e)return[];if(sM(e))return sQ(e)?tH(e):nz(e);if(e3&&e[e3])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[e3]());var t=am(e);return(t==v?tB:t==x?tV:iw)(e)}function s2(e){return e?(e=s5(e))===l||e===-l?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function s4(e){var t=s2(e),r=t%1;return t==t?r?t-r:t:0}function s3(e){return e?rR(s4(e),0,4294967295):0}function s5(e){if("number"==typeof e)return e;if(sG(e))return u;if(sZ(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=sZ(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=tA(e);var r=ec.test(e);return r||ep.test(e)?e4(e.slice(2),r?2:8):eu.test(e)?u:+e}function s6(e){return nU(e,ip(e))}function s9(e){return null==e?"":nw(e)}var s8=nZ(function(e,t){if(aS(t)||sM(t)){nU(t,id(t),e);return}for(var r in t)eA.call(t,r)&&rO(e,r,t[r])}),s7=nZ(function(e,t){nU(t,ip(t),e)}),ie=nZ(function(e,t,r,n){nU(t,ip(t),e,n)}),it=nZ(function(e,t,r,n){nU(t,id(t),e,n)}),ir=an(rA),ia=nd(function(e,r){e=ex(e);var n=-1,a=r.length,s=a>2?r[2]:t;for(s&&a_(r[0],r[1],s)&&(a=1);++n<a;)for(var i=r[n],o=ip(i),l=-1,u=o.length;++l<u;){var c=o[l],d=e[c];(d===t||sC(d,eC[c])&&!eA.call(e,c))&&(e[c]=i[c])}return e}),is=nd(function(e){return e.push(t,ae),tl(im,t,e)});function ii(e,r,n){var a=null==e?t:rJ(e,r);return a===t?n:a}function io(e,t){return null!=e&&ag(e,t,r0)}var il=nY(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eM.call(t)),e[t]=r},iM(i$)),iu=nY(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eM.call(t)),eA.call(e,t)?e[t].push(r):e[t]=[r]},au),ic=nd(r2);function id(e){return sM(e)?rS(e):r8(e)}function ip(e){return sM(e)?rS(e,!0):function(e){if(!sZ(e))return function(e){var t=[];if(null!=e)for(var r in ex(e))t.push(r);return t}(e);var t=aS(e),r=[];for(var n in e)"constructor"==n&&(t||!eA.call(e,n))||r.push(n);return r}(e)}var ih=nZ(function(e,t,r){nn(e,t,r)}),im=nZ(function(e,t,r,n){nn(e,t,r,n)}),ig=an(function(e,t){var r={};if(null==e)return r;var n=!1;t=tm(t,function(t){return t=nT(t,e),n||(n=t.length>1),t}),nU(e,as(e),r),n&&(r=rN(r,7,at));for(var a=t.length;a--;)nx(r,t[a]);return r}),iy=an(function(e,t){return null==e?{}:ni(e,t,function(t,r){return io(e,r)})});function iv(e,t){if(null==e)return{};var r=tm(as(e),function(e){return[e]});return t=au(t),ni(e,r,function(e,r){return t(e,r[0])})}var ib=n9(id),i_=n9(ip);function iw(e){return null==e?[]:tN(e,id(e))}var ij=nH(function(e,t,r){return t=t.toLowerCase(),e+(r?ix(t):t)});function ix(e){return iT(s9(e).toLowerCase())}function iS(e){return(e=s9(e))&&e.replace(eh,t$).replace(eK,"")}var ik=nH(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),iP=nH(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),iO=nK("toLowerCase"),iI=nH(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),iC=nH(function(e,t,r){return e+(r?" ":"")+iT(t)}),iE=nH(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),iT=nK("toUpperCase");function iA(e,r,n){if(e=s9(e),(r=n?t:r)===t){var a;return(a=e,eQ.test(a))?e.match(eW)||[]:e.match(ea)||[]}return e.match(r)||[]}var iR=nd(function(e,r){try{return tl(e,t,r)}catch(e){return sD(e)?e:new e_(e)}}),iN=an(function(e,t){return tc(t,function(t){rT(e,t=aL(t),sv(e[t],e))}),e});function iM(e){return function(){return e}}var iL=nQ(),iF=nQ(!0);function i$(e){return e}function iD(e){return r9("function"==typeof e?e:rN(e,1))}var iz=nd(function(e,t){return function(r){return r2(r,e,t)}}),iU=nd(function(e,t){return function(r){return r2(e,r,t)}});function iB(e,t,r){var n=id(t),a=rW(t,n);null!=r||sZ(t)&&(a.length||!n.length)||(r=t,t=e,e=this,a=rW(t,id(t)));var s=!(sZ(r)&&"chain"in r)||!!r.chain,i=sz(e);return tc(a,function(r){var n=t[r];e[r]=n,i&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__);return(r.__actions__=nz(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,tg([this.value()],arguments))})}),e}function iZ(){}var iq=n0(tm),iV=n0(td),iK=n0(tb);function iH(e){return aw(e)?tO(aL(e)):function(t){return rJ(t,e)}}var iW=n2(),iJ=n2(!0);function iQ(){return[]}function iG(){return!1}var iY=nX(function(e,t){return e+t},0),iX=n5("ceil"),i0=nX(function(e,t){return e/t},1),i1=n5("floor"),i2=nX(function(e,t){return e*t},1),i4=n5("round"),i3=nX(function(e,t){return e-t},0);return rh.after=function(e,t){if("function"!=typeof t)throw new eP(s);return e=s4(e),function(){if(--e<1)return t.apply(this,arguments)}},rh.ary=sg,rh.assign=s8,rh.assignIn=s7,rh.assignInWith=ie,rh.assignWith=it,rh.at=ir,rh.before=sy,rh.bind=sv,rh.bindAll=iN,rh.bindKey=sb,rh.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return sR(e)?e:[e]},rh.chain=st,rh.chunk=function(e,r,n){r=(n?a_(e,r,n):r===t)?1:t2(s4(r),0);var a=null==e?0:e.length;if(!a||r<1)return[];for(var s=0,i=0,o=ev(t_(a/r));s<a;)o[i++]=nm(e,s,s+=r);return o},rh.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var s=e[t];s&&(a[n++]=s)}return a},rh.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ev(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return tg(sR(r)?nz(r):[r],rZ(t,1))},rh.cond=function(e){var t=null==e?0:e.length,r=au();return e=t?tm(e,function(e){if("function"!=typeof e[1])throw new eP(s);return[r(e[0]),e[1]]}):[],nd(function(r){for(var n=-1;++n<t;){var a=e[n];if(tl(a[0],this,r))return tl(a[1],this,r)}})},rh.conforms=function(e){var t,r;return r=id(t=rN(e,1)),function(e){return rM(e,t,r)}},rh.constant=iM,rh.countBy=sa,rh.create=function(e,t){var r=rm(e);return null==t?r:rE(r,t)},rh.curry=function e(r,n,a){n=a?t:n;var s=n8(r,8,t,t,t,t,t,n);return s.placeholder=e.placeholder,s},rh.curryRight=function e(r,n,a){n=a?t:n;var s=n8(r,16,t,t,t,t,t,n);return s.placeholder=e.placeholder,s},rh.debounce=s_,rh.defaults=ia,rh.defaultsDeep=is,rh.defer=sw,rh.delay=sj,rh.difference=aD,rh.differenceBy=az,rh.differenceWith=aU,rh.drop=function(e,r,n){var a=null==e?0:e.length;return a?nm(e,(r=n||r===t?1:s4(r))<0?0:r,a):[]},rh.dropRight=function(e,r,n){var a=null==e?0:e.length;return a?nm(e,0,(r=a-(r=n||r===t?1:s4(r)))<0?0:r):[]},rh.dropRightWhile=function(e,t){return e&&e.length?nk(e,au(t,3),!0,!0):[]},rh.dropWhile=function(e,t){return e&&e.length?nk(e,au(t,3),!0):[]},rh.fill=function(e,r,n,a){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&a_(e,r,n)&&(n=0,a=s),function(e,r,n,a){var s=e.length;for((n=s4(n))<0&&(n=-n>s?0:s+n),(a=a===t||a>s?s:s4(a))<0&&(a+=s),a=n>a?0:s3(a);n<a;)e[n++]=r;return e}(e,r,n,a)):[]},rh.filter=function(e,t){return(sR(e)?tp:rB)(e,au(t,3))},rh.flatMap=function(e,t){return rZ(sp(e,t),1)},rh.flatMapDeep=function(e,t){return rZ(sp(e,t),l)},rh.flatMapDepth=function(e,r,n){return n=n===t?1:s4(n),rZ(sp(e,r),n)},rh.flatten=aq,rh.flattenDeep=function(e){return(null==e?0:e.length)?rZ(e,l):[]},rh.flattenDepth=function(e,r){return(null==e?0:e.length)?rZ(e,r=r===t?1:s4(r)):[]},rh.flip=function(e){return n8(e,512)},rh.flow=iL,rh.flowRight=iF,rh.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n},rh.functions=function(e){return null==e?[]:rW(e,id(e))},rh.functionsIn=function(e){return null==e?[]:rW(e,ip(e))},rh.groupBy=su,rh.initial=function(e){return(null==e?0:e.length)?nm(e,0,-1):[]},rh.intersection=aK,rh.intersectionBy=aH,rh.intersectionWith=aW,rh.invert=il,rh.invertBy=iu,rh.invokeMap=sc,rh.iteratee=iD,rh.keyBy=sd,rh.keys=id,rh.keysIn=ip,rh.map=sp,rh.mapKeys=function(e,t){var r={};return t=au(t,3),rK(e,function(e,n,a){rT(r,t(e,n,a),e)}),r},rh.mapValues=function(e,t){var r={};return t=au(t,3),rK(e,function(e,n,a){rT(r,n,t(e,n,a))}),r},rh.matches=function(e){return nt(rN(e,1))},rh.matchesProperty=function(e,t){return nr(e,rN(t,1))},rh.memoize=sx,rh.merge=ih,rh.mergeWith=im,rh.method=iz,rh.methodOf=iU,rh.mixin=iB,rh.negate=sS,rh.nthArg=function(e){return e=s4(e),nd(function(t){return na(t,e)})},rh.omit=ig,rh.omitBy=function(e,t){return iv(e,sS(au(t)))},rh.once=function(e){return sy(2,e)},rh.orderBy=function(e,r,n,a){return null==e?[]:(sR(r)||(r=null==r?[]:[r]),sR(n=a?t:n)||(n=null==n?[]:[n]),ns(e,r,n))},rh.over=iq,rh.overArgs=sk,rh.overEvery=iV,rh.overSome=iK,rh.partial=sP,rh.partialRight=sO,rh.partition=sf,rh.pick=iy,rh.pickBy=iv,rh.property=iH,rh.propertyOf=function(e){return function(r){return null==e?t:rJ(e,r)}},rh.pull=aQ,rh.pullAll=aG,rh.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?no(e,t,au(r,2)):e},rh.pullAllWith=function(e,r,n){return e&&e.length&&r&&r.length?no(e,r,t,n):e},rh.pullAt=aY,rh.range=iW,rh.rangeRight=iJ,rh.rearg=sI,rh.reject=function(e,t){return(sR(e)?tp:rB)(e,sS(au(t,3)))},rh.remove=function(e,t){var r=[];if(!(e&&e.length))return r;var n=-1,a=[],s=e.length;for(t=au(t,3);++n<s;){var i=e[n];t(i,n,e)&&(r.push(i),a.push(n))}return nl(e,a),r},rh.rest=function(e,r){if("function"!=typeof e)throw new eP(s);return nd(e,r=r===t?r:s4(r))},rh.reverse=aX,rh.sampleSize=function(e,r,n){return r=(n?a_(e,r,n):r===t)?1:s4(r),(sR(e)?function(e,t){return aN(nz(e),rR(t,0,e.length))}:function(e,t){var r=iw(e);return aN(r,rR(t,0,r.length))})(e,r)},rh.set=function(e,t,r){return null==e?e:np(e,t,r)},rh.setWith=function(e,r,n,a){return a="function"==typeof a?a:t,null==e?e:np(e,r,n,a)},rh.shuffle=function(e){return(sR(e)?function(e){return aN(nz(e))}:function(e){return aN(iw(e))})(e)},rh.slice=function(e,r,n){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&a_(e,r,n)?(r=0,n=a):(r=null==r?0:s4(r),n=n===t?a:s4(n)),nm(e,r,n)):[]},rh.sortBy=sh,rh.sortedUniq=function(e){return e&&e.length?nb(e):[]},rh.sortedUniqBy=function(e,t){return e&&e.length?nb(e,au(t,2)):[]},rh.split=function(e,r,n){return(n&&"number"!=typeof n&&a_(e,r,n)&&(r=n=t),n=n===t?4294967295:n>>>0)?(e=s9(e))&&("string"==typeof r||null!=r&&!sW(r))&&!(r=nw(r))&&tU(e)?nA(tH(e),0,n):e.split(r,n):[]},rh.spread=function(e,t){if("function"!=typeof e)throw new eP(s);return t=null==t?0:t2(s4(t),0),nd(function(r){var n=r[t],a=nA(r,0,t);return n&&tg(a,n),tl(e,this,a)})},rh.tail=function(e){var t=null==e?0:e.length;return t?nm(e,1,t):[]},rh.take=function(e,r,n){return e&&e.length?nm(e,0,(r=n||r===t?1:s4(r))<0?0:r):[]},rh.takeRight=function(e,r,n){var a=null==e?0:e.length;return a?nm(e,(r=a-(r=n||r===t?1:s4(r)))<0?0:r,a):[]},rh.takeRightWhile=function(e,t){return e&&e.length?nk(e,au(t,3),!1,!0):[]},rh.takeWhile=function(e,t){return e&&e.length?nk(e,au(t,3)):[]},rh.tap=function(e,t){return t(e),e},rh.throttle=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new eP(s);return sZ(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),s_(e,t,{leading:n,maxWait:t,trailing:a})},rh.thru=sr,rh.toArray=s1,rh.toPairs=ib,rh.toPairsIn=i_,rh.toPath=function(e){return sR(e)?tm(e,aL):sG(e)?[e]:nz(aM(s9(e)))},rh.toPlainObject=s6,rh.transform=function(e,t,r){var n=sR(e),a=n||sF(e)||sY(e);if(t=au(t,4),null==r){var s=e&&e.constructor;r=a?n?new s:[]:sZ(e)&&sz(s)?rm(eZ(e)):{}}return(a?tc:rK)(e,function(e,n,a){return t(r,e,n,a)}),r},rh.unary=function(e){return sg(e,1)},rh.union=a0,rh.unionBy=a1,rh.unionWith=a2,rh.uniq=function(e){return e&&e.length?nj(e):[]},rh.uniqBy=function(e,t){return e&&e.length?nj(e,au(t,2)):[]},rh.uniqWith=function(e,r){return r="function"==typeof r?r:t,e&&e.length?nj(e,t,r):[]},rh.unset=function(e,t){return null==e||nx(e,t)},rh.unzip=a4,rh.unzipWith=a3,rh.update=function(e,t,r){return null==e?e:nS(e,t,nE(r))},rh.updateWith=function(e,r,n,a){return a="function"==typeof a?a:t,null==e?e:nS(e,r,nE(n),a)},rh.values=iw,rh.valuesIn=function(e){return null==e?[]:tN(e,ip(e))},rh.without=a5,rh.words=iA,rh.wrap=function(e,t){return sP(nE(t),e)},rh.xor=a6,rh.xorBy=a9,rh.xorWith=a8,rh.zip=a7,rh.zipObject=function(e,t){return nI(e||[],t||[],rO)},rh.zipObjectDeep=function(e,t){return nI(e||[],t||[],np)},rh.zipWith=se,rh.entries=ib,rh.entriesIn=i_,rh.extend=s7,rh.extendWith=ie,iB(rh,rh),rh.add=iY,rh.attempt=iR,rh.camelCase=ij,rh.capitalize=ix,rh.ceil=iX,rh.clamp=function(e,r,n){return n===t&&(n=r,r=t),n!==t&&(n=(n=s5(n))==n?n:0),r!==t&&(r=(r=s5(r))==r?r:0),rR(s5(e),r,n)},rh.clone=function(e){return rN(e,4)},rh.cloneDeep=function(e){return rN(e,5)},rh.cloneDeepWith=function(e,r){return rN(e,5,r="function"==typeof r?r:t)},rh.cloneWith=function(e,r){return rN(e,4,r="function"==typeof r?r:t)},rh.conformsTo=function(e,t){return null==t||rM(e,t,id(t))},rh.deburr=iS,rh.defaultTo=function(e,t){return null==e||e!=e?t:e},rh.divide=i0,rh.endsWith=function(e,r,n){e=s9(e),r=nw(r);var a=e.length,s=n=n===t?a:rR(s4(n),0,a);return(n-=r.length)>=0&&e.slice(n,s)==r},rh.eq=sC,rh.escape=function(e){return(e=s9(e))&&q.test(e)?e.replace(B,tD):e},rh.escapeRegExp=function(e){return(e=s9(e))&&Y.test(e)?e.replace(G,"\\$&"):e},rh.every=function(e,r,n){var a=sR(e)?td:rz;return n&&a_(e,r,n)&&(r=t),a(e,au(r,3))},rh.find=ss,rh.findIndex=aB,rh.findKey=function(e,t){return tw(e,au(t,3),rK)},rh.findLast=si,rh.findLastIndex=aZ,rh.findLastKey=function(e,t){return tw(e,au(t,3),rH)},rh.floor=i1,rh.forEach=so,rh.forEachRight=sl,rh.forIn=function(e,t){return null==e?e:rq(e,au(t,3),ip)},rh.forInRight=function(e,t){return null==e?e:rV(e,au(t,3),ip)},rh.forOwn=function(e,t){return e&&rK(e,au(t,3))},rh.forOwnRight=function(e,t){return e&&rH(e,au(t,3))},rh.get=ii,rh.gt=sE,rh.gte=sT,rh.has=function(e,t){return null!=e&&ag(e,t,rX)},rh.hasIn=io,rh.head=aV,rh.identity=i$,rh.includes=function(e,t,r,n){e=sM(e)?e:iw(e),r=r&&!n?s4(r):0;var a=e.length;return r<0&&(r=t2(a+r,0)),sQ(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&tx(e,t,r)>-1},rh.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return -1;var a=null==r?0:s4(r);return a<0&&(a=t2(n+a,0)),tx(e,t,a)},rh.inRange=function(e,r,n){var a,s,i;return r=s2(r),n===t?(n=r,r=0):n=s2(n),(a=e=s5(e))>=t4(s=r,i=n)&&a<t2(s,i)},rh.invoke=ic,rh.isArguments=sA,rh.isArray=sR,rh.isArrayBuffer=sN,rh.isArrayLike=sM,rh.isArrayLikeObject=sL,rh.isBoolean=function(e){return!0===e||!1===e||sq(e)&&rG(e)==f},rh.isBuffer=sF,rh.isDate=s$,rh.isElement=function(e){return sq(e)&&1===e.nodeType&&!sH(e)},rh.isEmpty=function(e){if(null==e)return!0;if(sM(e)&&(sR(e)||"string"==typeof e||"function"==typeof e.splice||sF(e)||sY(e)||sA(e)))return!e.length;var t=am(e);if(t==v||t==x)return!e.size;if(aS(e))return!r8(e).length;for(var r in e)if(eA.call(e,r))return!1;return!0},rh.isEqual=function(e,t){return r3(e,t)},rh.isEqualWith=function(e,r,n){var a=(n="function"==typeof n?n:t)?n(e,r):t;return a===t?r3(e,r,t,n):!!a},rh.isError=sD,rh.isFinite=function(e){return"number"==typeof e&&tX(e)},rh.isFunction=sz,rh.isInteger=sU,rh.isLength=sB,rh.isMap=sV,rh.isMatch=function(e,t){return e===t||r5(e,t,ad(t))},rh.isMatchWith=function(e,r,n){return n="function"==typeof n?n:t,r5(e,r,ad(r),n)},rh.isNaN=function(e){return sK(e)&&e!=+e},rh.isNative=function(e){if(ax(e))throw new e_("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return r6(e)},rh.isNil=function(e){return null==e},rh.isNull=function(e){return null===e},rh.isNumber=sK,rh.isObject=sZ,rh.isObjectLike=sq,rh.isPlainObject=sH,rh.isRegExp=sW,rh.isSafeInteger=function(e){return sU(e)&&e>=-9007199254740991&&e<=9007199254740991},rh.isSet=sJ,rh.isString=sQ,rh.isSymbol=sG,rh.isTypedArray=sY,rh.isUndefined=function(e){return e===t},rh.isWeakMap=function(e){return sq(e)&&am(e)==P},rh.isWeakSet=function(e){return sq(e)&&"[object WeakSet]"==rG(e)},rh.join=function(e,t){return null==e?"":t0.call(e,t)},rh.kebabCase=ik,rh.last=aJ,rh.lastIndexOf=function(e,r,n){var a=null==e?0:e.length;if(!a)return -1;var s=a;return n!==t&&(s=(s=s4(n))<0?t2(a+s,0):t4(s,a-1)),r==r?function(e,t,r){for(var n=r+1;n--&&e[n]!==t;);return n}(e,r,s):tj(e,tk,s,!0)},rh.lowerCase=iP,rh.lowerFirst=iO,rh.lt=sX,rh.lte=s0,rh.max=function(e){return e&&e.length?rU(e,i$,rY):t},rh.maxBy=function(e,r){return e&&e.length?rU(e,au(r,2),rY):t},rh.mean=function(e){return tP(e,i$)},rh.meanBy=function(e,t){return tP(e,au(t,2))},rh.min=function(e){return e&&e.length?rU(e,i$,r7):t},rh.minBy=function(e,r){return e&&e.length?rU(e,au(r,2),r7):t},rh.stubArray=iQ,rh.stubFalse=iG,rh.stubObject=function(){return{}},rh.stubString=function(){return""},rh.stubTrue=function(){return!0},rh.multiply=i2,rh.nth=function(e,r){return e&&e.length?na(e,s4(r)):t},rh.noConflict=function(){return e6._===this&&(e6._=eF),this},rh.noop=iZ,rh.now=sm,rh.pad=function(e,t,r){e=s9(e);var n=(t=s4(t))?tK(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return n1(tI(a),r)+e+n1(t_(a),r)},rh.padEnd=function(e,t,r){e=s9(e);var n=(t=s4(t))?tK(e):0;return t&&n<t?e+n1(t-n,r):e},rh.padStart=function(e,t,r){e=s9(e);var n=(t=s4(t))?tK(e):0;return t&&n<t?n1(t-n,r)+e:e},rh.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),t5(s9(e).replace(X,""),t||0)},rh.random=function(e,r,n){if(n&&"boolean"!=typeof n&&a_(e,r,n)&&(r=n=t),n===t&&("boolean"==typeof r?(n=r,r=t):"boolean"==typeof e&&(n=e,e=t)),e===t&&r===t?(e=0,r=1):(e=s2(e),r===t?(r=e,e=0):r=s2(r)),e>r){var a=e;e=r,r=a}if(n||e%1||r%1){var s=t6();return t4(e+s*(r-e+e2("1e-"+((s+"").length-1))),r)}return nu(e,r)},rh.reduce=function(e,t,r){var n=sR(e)?ty:tC,a=arguments.length<3;return n(e,au(t,4),r,a,r$)},rh.reduceRight=function(e,t,r){var n=sR(e)?tv:tC,a=arguments.length<3;return n(e,au(t,4),r,a,rD)},rh.repeat=function(e,r,n){return r=(n?a_(e,r,n):r===t)?1:s4(r),nc(s9(e),r)},rh.replace=function(){var e=arguments,t=s9(e[0]);return e.length<3?t:t.replace(e[1],e[2])},rh.result=function(e,r,n){r=nT(r,e);var a=-1,s=r.length;for(s||(s=1,e=t);++a<s;){var i=null==e?t:e[aL(r[a])];i===t&&(a=s,i=n),e=sz(i)?i.call(e):i}return e},rh.round=i4,rh.runInContext=e,rh.sample=function(e){return(sR(e)?rk:function(e){return rk(iw(e))})(e)},rh.size=function(e){if(null==e)return 0;if(sM(e))return sQ(e)?tK(e):e.length;var t=am(e);return t==v||t==x?e.size:r8(e).length},rh.snakeCase=iI,rh.some=function(e,r,n){var a=sR(e)?tb:ng;return n&&a_(e,r,n)&&(r=t),a(e,au(r,3))},rh.sortedIndex=function(e,t){return ny(e,t)},rh.sortedIndexBy=function(e,t,r){return nv(e,t,au(r,2))},rh.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ny(e,t);if(n<r&&sC(e[n],t))return n}return -1},rh.sortedLastIndex=function(e,t){return ny(e,t,!0)},rh.sortedLastIndexBy=function(e,t,r){return nv(e,t,au(r,2),!0)},rh.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=ny(e,t,!0)-1;if(sC(e[r],t))return r}return -1},rh.startCase=iC,rh.startsWith=function(e,t,r){return e=s9(e),r=null==r?0:rR(s4(r),0,e.length),t=nw(t),e.slice(r,r+t.length)==t},rh.subtract=i3,rh.sum=function(e){return e&&e.length?tE(e,i$):0},rh.sumBy=function(e,t){return e&&e.length?tE(e,au(t,2)):0},rh.template=function(e,r,n){var a=rh.templateSettings;n&&a_(e,r,n)&&(r=t),e=s9(e),r=ie({},r,a,n7);var s,i,o=ie({},r.imports,a.imports,n7),l=id(o),u=tN(o,l),c=0,d=r.interpolate||em,p="__p += '",f=eS((r.escape||em).source+"|"+d.source+"|"+(d===H?eo:em).source+"|"+(r.evaluate||em).source+"|$","g"),h="//# sourceURL="+(eA.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eY+"]")+"\n";e.replace(f,function(t,r,n,a,o,l){return n||(n=a),p+=e.slice(c,l).replace(eg,tz),r&&(s=!0,p+="' +\n__e("+r+") +\n'"),o&&(i=!0,p+="';\n"+o+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),p+="';\n";var m=eA.call(r,"variable")&&r.variable;if(m){if(es.test(m))throw new e_("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(i?p.replace($,""):p).replace(D,"$1").replace(z,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=iR(function(){return ew(l,h+"return "+p).apply(t,u)});if(g.source=p,sD(g))throw g;return g},rh.times=function(e,t){if((e=s4(e))<1||e>9007199254740991)return[];var r=4294967295,n=t4(e,4294967295);t=au(t),e-=4294967295;for(var a=tT(n,t);++r<e;)t(r);return a},rh.toFinite=s2,rh.toInteger=s4,rh.toLength=s3,rh.toLower=function(e){return s9(e).toLowerCase()},rh.toNumber=s5,rh.toSafeInteger=function(e){return e?rR(s4(e),-9007199254740991,9007199254740991):0===e?e:0},rh.toString=s9,rh.toUpper=function(e){return s9(e).toUpperCase()},rh.trim=function(e,r,n){if((e=s9(e))&&(n||r===t))return tA(e);if(!e||!(r=nw(r)))return e;var a=tH(e),s=tH(r),i=tL(a,s),o=tF(a,s)+1;return nA(a,i,o).join("")},rh.trimEnd=function(e,r,n){if((e=s9(e))&&(n||r===t))return e.slice(0,tW(e)+1);if(!e||!(r=nw(r)))return e;var a=tH(e),s=tF(a,tH(r))+1;return nA(a,0,s).join("")},rh.trimStart=function(e,r,n){if((e=s9(e))&&(n||r===t))return e.replace(X,"");if(!e||!(r=nw(r)))return e;var a=tH(e),s=tL(a,tH(r));return nA(a,s).join("")},rh.truncate=function(e,r){var n=30,a="...";if(sZ(r)){var s="separator"in r?r.separator:s;n="length"in r?s4(r.length):n,a="omission"in r?nw(r.omission):a}var i=(e=s9(e)).length;if(tU(e)){var o=tH(e);i=o.length}if(n>=i)return e;var l=n-tK(a);if(l<1)return a;var u=o?nA(o,0,l).join(""):e.slice(0,l);if(s===t)return u+a;if(o&&(l+=u.length-l),sW(s)){if(e.slice(l).search(s)){var c,d=u;for(s.global||(s=eS(s.source,s9(el.exec(s))+"g")),s.lastIndex=0;c=s.exec(d);)var p=c.index;u=u.slice(0,p===t?l:p)}}else if(e.indexOf(nw(s),l)!=l){var f=u.lastIndexOf(s);f>-1&&(u=u.slice(0,f))}return u+a},rh.unescape=function(e){return(e=s9(e))&&Z.test(e)?e.replace(U,tJ):e},rh.uniqueId=function(e){var t=++eR;return s9(e)+t},rh.upperCase=iE,rh.upperFirst=iT,rh.each=so,rh.eachRight=sl,rh.first=aV,iB(rh,(ey={},rK(rh,function(e,t){eA.call(rh.prototype,t)||(ey[t]=e)}),ey),{chain:!1}),rh.VERSION="4.17.21",tc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){rh[e].placeholder=rh}),tc(["drop","take"],function(e,r){rv.prototype[e]=function(n){n=n===t?1:t2(s4(n),0);var a=this.__filtered__&&!r?new rv(this):this.clone();return a.__filtered__?a.__takeCount__=t4(n,a.__takeCount__):a.__views__.push({size:t4(n,4294967295),type:e+(a.__dir__<0?"Right":"")}),a},rv.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),tc(["filter","map","takeWhile"],function(e,t){var r=t+1,n=1==r||3==r;rv.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:au(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),tc(["head","last"],function(e,t){var r="take"+(t?"Right":"");rv.prototype[e]=function(){return this[r](1).value()[0]}}),tc(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");rv.prototype[e]=function(){return this.__filtered__?new rv(this):this[r](1)}}),rv.prototype.compact=function(){return this.filter(i$)},rv.prototype.find=function(e){return this.filter(e).head()},rv.prototype.findLast=function(e){return this.reverse().find(e)},rv.prototype.invokeMap=nd(function(e,t){return"function"==typeof e?new rv(this):this.map(function(r){return r2(r,e,t)})}),rv.prototype.reject=function(e){return this.filter(sS(au(e)))},rv.prototype.slice=function(e,r){e=s4(e);var n=this;return n.__filtered__&&(e>0||r<0)?new rv(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),r!==t&&(n=(r=s4(r))<0?n.dropRight(-r):n.take(r-e)),n)},rv.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},rv.prototype.toArray=function(){return this.take(4294967295)},rK(rv.prototype,function(e,r){var n=/^(?:filter|find|map|reject)|While$/.test(r),a=/^(?:head|last)$/.test(r),s=rh[a?"take"+("last"==r?"Right":""):r],i=a||/^find/.test(r);s&&(rh.prototype[r]=function(){var r=this.__wrapped__,o=a?[1]:arguments,l=r instanceof rv,u=o[0],c=l||sR(r),d=function(e){var t=s.apply(rh,tg([e],o));return a&&p?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var p=this.__chain__,f=!!this.__actions__.length,h=i&&!p,m=l&&!f;if(!i&&c){r=m?r:new rv(this);var g=e.apply(r,o);return g.__actions__.push({func:sr,args:[d],thisArg:t}),new ry(g,p)}return h&&m?e.apply(this,o):(g=this.thru(d),h?a?g.value()[0]:g.value():g)})}),tc(["pop","push","shift","sort","splice","unshift"],function(e){var t=eO[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);rh.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(sR(a)?a:[],e)}return this[r](function(r){return t.apply(sR(r)?r:[],e)})}}),rK(rv.prototype,function(e,t){var r=rh[t];if(r){var n=r.name+"";eA.call(rs,n)||(rs[n]=[]),rs[n].push({name:t,func:r})}}),rs[nG(t,2).name]=[{name:"wrapper",func:t}],rv.prototype.clone=function(){var e=new rv(this.__wrapped__);return e.__actions__=nz(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nz(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nz(this.__views__),e},rv.prototype.reverse=function(){if(this.__filtered__){var e=new rv(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},rv.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=sR(e),n=t<0,a=r?e.length:0,s=function(e,t,r){for(var n=-1,a=r.length;++n<a;){var s=r[n],i=s.size;switch(s.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=t4(t,e+i);break;case"takeRight":e=t2(e,t-i)}}return{start:e,end:t}}(0,a,this.__views__),i=s.start,o=s.end,l=o-i,u=n?o:i-1,c=this.__iteratees__,d=c.length,p=0,f=t4(l,this.__takeCount__);if(!r||!n&&a==l&&f==l)return nP(e,this.__actions__);var h=[];r:for(;l--&&p<f;){for(var m=-1,g=e[u+=t];++m<d;){var y=c[m],v=y.iteratee,b=y.type,_=v(g);if(2==b)g=_;else if(!_){if(1==b)continue r;break r}}h[p++]=g}return h},rh.prototype.at=sn,rh.prototype.chain=function(){return st(this)},rh.prototype.commit=function(){return new ry(this.value(),this.__chain__)},rh.prototype.next=function(){this.__values__===t&&(this.__values__=s1(this.value()));var e=this.__index__>=this.__values__.length,r=e?t:this.__values__[this.__index__++];return{done:e,value:r}},rh.prototype.plant=function(e){for(var r,n=this;n instanceof rg;){var a=a$(n);a.__index__=0,a.__values__=t,r?s.__wrapped__=a:r=a;var s=a;n=n.__wrapped__}return s.__wrapped__=e,r},rh.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof rv){var r=e;return this.__actions__.length&&(r=new rv(this)),(r=r.reverse()).__actions__.push({func:sr,args:[aX],thisArg:t}),new ry(r,this.__chain__)}return this.thru(aX)},rh.prototype.toJSON=rh.prototype.valueOf=rh.prototype.value=function(){return nP(this.__wrapped__,this.__actions__)},rh.prototype.first=rh.prototype.head,e3&&(rh.prototype[e3]=function(){return this}),rh}();"function"==typeof e&&"object"==typeof e.amd&&e.amd?(e6._=tQ,e(function(){return tQ})):e8?((e8.exports=tQ)._=tQ,e9._=tQ):e6._=tQ}).call(this)},{}],fgSQe:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let n=(0,e("@reduxjs/toolkit").createSlice)({name:"input",initialState:{selectedText:void 0},reducers:{setSelectedText:(e,t)=>{e.selectedText=t.payload}}});r.default=n},{"@reduxjs/toolkit":"6029V","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jc8hR:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"youtubeApiSlice",()=>l),n.export(r,"useGetTranscriptQuery",()=>u),n.export(r,"useLazyGetTranscriptQuery",()=>c);var a=e("@reduxjs/toolkit/query/react");let s=(e,t=30)=>{if(!e?.length)return[];let r={s:e[0].s,d:e[0].d,t:e[0].t},n=[r];for(let a=1;a<e.length;a++){let{s,d:i,t:o}=e[a];r.d+i<t?(r.d+=i,r.t+=" "+o):(r={s:s,d:i,t:o},n.push(r))}let a=e=>e<10?"0"+e:e.toString();return n.forEach(e=>{let t=Math.floor(e.s),r=Math.floor(t/3600),n=Math.floor(t%3600/60),s=t%60;e.ts=0===r?`${a(n)}:${a(s)}`:`${a(r)}:${a(n)}:${a(s)}`,delete e.s,delete e.d}),n},i=async e=>{try{let t=await fetch(e),r=await t.text(),n=r.split("ytInitialPlayerResponse =")[1].split(";var")[0],a=JSON.parse(n)?.captions?.playerCaptionsTracklistRenderer?.captionTracks;if(!a){let e=r.split('XSRF_TOKEN":"')[1].split('"')[0],t=JSON.parse(`"${e}"`),n=Math.floor(Date.now()/1e3)+3e3,s=`/watch?v=${new URL(location.href).searchParams.get("v")}&bpctr=${n}&pbj=1`,i=await fetch(s,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:`session_token=${t}`,credentials:"include"}),o=(await i.json())?.[2]?.playerResponse;a=o?.captions?.playerCaptionsTracklistRenderer?.captionTracks}if(!a)return null;let s=a.find(e=>e.vssId.startsWith(".en"))||a.find(e=>"a.en"===e.vssId)||a[0];if(!s)return null;let i=await fetch(`${s.baseUrl}`),o=await i.text(),l=document.createElement("div");return l.innerHTML=o,[...l.querySelectorAll("text")].map(e=>({s:parseFloat(e.getAttribute("start")),d:parseFloat(e.getAttribute("dur")),t:e.innerText.replace(/<\/?[^>]+(>|$)/g,"").replaceAll("&#39;","'").replaceAll("&quot;",'"').replaceAll("\n"," ")}))}catch(e){return console.warn("Failed parsing transcript:",e.message,e),null}},o=(e,t)=>{let r=[],n=null;for(let a of e)n&&a.s-n.s<t?(n.d=Math.max(n.d,a.s+a.d-n.s),n.t+=" "+a.t):(n&&r.push(n),n={...a});return n&&r.push(n),r},l=(0,a.createApi)({reducerPath:"youtubeApi",baseQuery:(0,a.fetchBaseQuery)({baseUrl:""}),endpoints:e=>({getTranscript:e.query({queryFn:async e=>{try{let t=await i(e);if(!t)throw Error("Failed to fetch transcript");return{data:{text:s(t,10).map(e=>`(${e.ts}) ${e.t}`).join(" "),captions:o(t,5)}}}catch(e){throw Error(`Failed to fetch transcript: ${e.message}`)}}})})}),{useGetTranscriptQuery:u,useLazyGetTranscriptQuery:c}=l},{"@reduxjs/toolkit/query/react":"aALcd","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],d5PcS:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"navigationSlice",()=>a);let a=(0,e("@reduxjs/toolkit").createSlice)({name:"navigation",initialState:{currentScreen:"settings"},reducers:{setCurrentScreen:(e,t)=>{e.currentScreen=t.payload}}});r.default=a},{"@reduxjs/toolkit":"6029V","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],iXemX:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"openaiApiSlice",()=>l),n.export(r,"useGetModelsQuery",()=>u),n.export(r,"useLazyGetModelsQuery",()=>c);var a=e("@plasmohq/messaging"),s=e("@reduxjs/toolkit/query/react");let i=e=>["gpt-","o1","o3","o4","chatgpt"].some(t=>e.startsWith(t)),o=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:`http://${e}`:e,l=(0,s.createApi)({reducerPath:"openaiApi",baseQuery:(0,s.fetchBaseQuery)({baseUrl:"/"}),tagTypes:["Models"],endpoints:e=>({getModels:e.query({queryFn:async({apiKey:e,customBaseUrl:t})=>{try{let r=t?o(t):void 0,n=r||"https://api.openai.com",s=n.endsWith("/v1")?`${n}/models`:n.endsWith("/v1/")?`${n}models`:`${n}/v1/models`,l=await (0,a.sendToBackground)({name:"fetchModels",body:{apiKey:e,modelsUrl:s}});if(l.error)return{error:{status:"CUSTOM_ERROR",error:l.error}};let u=l.models??[],c=r?u:u.filter(e=>i(e));return c.sort(),{data:c}}catch(e){return{error:{status:"CUSTOM_ERROR",error:e instanceof Error?e.message:"Failed to fetch models"}}}},providesTags:["Models"]})})}),{useGetModelsQuery:u,useLazyGetModelsQuery:c}=l},{"@plasmohq/messaging":"gtky1","@reduxjs/toolkit/query/react":"aALcd","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gtky1:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"relay",()=>m),n.export(r,"relayMessage",()=>h),n.export(r,"sendToActiveContentScript",()=>f),n.export(r,"sendToBackground",()=>d),n.export(r,"sendToBackgroundViaRelay",()=>g),n.export(r,"sendToContentScript",()=>p),n.export(r,"sendViaRelay",()=>y);var a=e("nanoid"),s=globalThis.browser?.tabs||globalThis.chrome?.tabs,i=()=>{let e=globalThis.browser?.runtime||globalThis.chrome?.runtime;if(!e)throw Error("Extension runtime is not available");return e},o=()=>{if(!s)throw Error("Extension tabs API is not available");return s},l=async()=>{let e=o(),[t]=await e.query({active:!0,currentWindow:!0});return t},u=(e,t)=>!t.__internal&&e.source===globalThis.window&&e.data.name===t.name&&(void 0===t.relayId||e.data.relayId===t.relayId),c=(e,t,r=globalThis.window)=>{let n=async n=>{if(u(n,e)&&!n.data.relayed){let a={name:e.name,relayId:e.relayId,body:n.data.body},s=await t?.(a);r.postMessage({name:e.name,relayId:e.relayId,instanceId:n.data.instanceId,body:s,relayed:!0},{targetOrigin:e.targetOrigin||"/"})}};return r.addEventListener("message",n),()=>r.removeEventListener("message",n)},d=async e=>i().sendMessage(e.extensionId??null,e),p=async e=>{let t="number"==typeof e.tabId?e.tabId:(await l())?.id;if(!t)throw Error("No active tab found to send message to.");return o().sendMessage(t,e)},f=p,h=e=>c(e,d),m=h,g=(e,t=globalThis.window)=>new Promise((r,n)=>{let s=(0,a.nanoid)(),i=new AbortController;t.addEventListener("message",t=>{u(t,e)&&t.data.relayed&&t.data.instanceId===s&&(r(t.data.body),i.abort())},{signal:i.signal}),t.postMessage({...e,instanceId:s},{targetOrigin:e.targetOrigin||"/"})}),y=g},{nanoid:"eAH3z","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],eAH3z:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"urlAlphabet",()=>a.urlAlphabet),n.export(r,"random",()=>s),n.export(r,"customRandom",()=>i),n.export(r,"customAlphabet",()=>o),n.export(r,"nanoid",()=>l);var a=e("./url-alphabet/index.js");let s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*n*t/e.length);return (s=t)=>{let i="";for(;;){let t=r(a),o=a;for(;o--;)if((i+=e[t[o]&n]||"").length===s)return i}}},o=(e,t=21)=>i(e,t,s),l=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"")},{"./url-alphabet/index.js":!1,"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ki7pM:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var n=e("@/domains/openai/generateFlashCard"),a=e("@reduxjs/toolkit");let s={prompt:n.defaultPrompt,additionalPrompt:"",language:"English",model:"gpt-4o-mini"},i=(0,a.createSlice)({name:"prompt",initialState:s,reducers:{setPromptOptions:(e,t)=>{e.prompt=t.payload.prompt,e.additionalPrompt=t.payload.additionalPrompt,e.language=t.payload.language,e.model=t.payload.model}}});r.default=i},{"@/domains/openai/generateFlashCard":"8iJkD","@reduxjs/toolkit":"6029V","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8iJkD":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"defaultPrompt",()=>h),n.export(r,"generateFlashCard",()=>_);var a=e("@plasmohq/messaging/port"),s=e("langchain/callbacks"),i=e("langchain/chat_models/openai"),o=e("langchain/output_parsers"),l=e("langchain/prompts"),u=e("langchain/text_splitter"),c=e("lodash"),d=e("zod"),p=e("./findAndParseJsonLikeText");let f=e=>{let t=(0,p.findAndParseJsonLikeText)(e);return(0,c.isArray)(t)&&(t={flashCards:t}),t?.flashCards?.map(e=>({...e,source:window.location.href}))},h=`You are a professional making flash cards from given text for educational purposes for schools, universities, professional trainnings.
Create as much as needed flash cards following these rules:
- do not do duplicates.
- you only provide the json for the flash cards, do not say anything else in the text, the text will be ignored.
- questions should have all the context necessary for answering it, (not "How was this period called ? " but "How was the period between 1939 and 1945 called ?") because the flash cards will have no other context than the question.
- make global question about the text when it makes sense
- don't invent anything, only use the text
- write in {language}
`,m=(e,t,r)=>new l.PromptTemplate({template:`${e||h}
{additionalPrompt}
{format_instructions}

Here is the text to make flash cards from, remember to follow the rules above, and to use language "{language}":

{text}`,inputVariables:["text","language"],partialVariables:{additionalPrompt:t||"",format_instructions:r}}),g=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:`http://${e}`:e,y=e=>{try{let t=new URL(e);return["http:","https:"].includes(t.protocol)}catch{return!1}},v=(e,t,r,n,s)=>new Promise((i,o)=>{let l=(0,a.getPort)("streamCompletion"),u=e=>{if(e.error){l.onMessage.removeListener(u),o(Error(e.error));return}void 0!==e.fullText&&s(e.fullText),e.done&&(l.onMessage.removeListener(u),i(e.fullText||""))};l.onMessage.addListener(u),l.postMessage({apiKey:e,baseUrl:t,model:r,prompt:n,temperature:0})}),b=(e,t,r,n)=>{let a=n?g(n):void 0;return a&&!(a=a.replace(/\/+$/,"")).endsWith("/v1")&&(a=`${a}/v1`),new i.ChatOpenAI({openAIApiKey:e||"ollama",temperature:0,modelName:r,streaming:!0,callbackManager:(0,s.CallbackManager).fromHandlers({async handleLLMNewToken(e){t(t=>t+e)}}),...a&&{configuration:{basePath:a},prefixMessages:[{role:"system",content:"Respond directly without any internal thinking or reasoning process."}]}})},_=async(e,t,r,n)=>{let a=n?.customBaseUrl?g(n.customBaseUrl):void 0,s="ollama"===n.llmProvider;if(s&&a&&!y(a))throw Error(`Invalid custom base URL: "${n.customBaseUrl}". Must be a valid URL.`);let i=s?null:b(t,r,n?.model),l=new u.RecursiveCharacterTextSplitter({chunkSize:5e3,chunkOverlap:10}),c=await l.createDocuments([e]),p=[];for(let e of c){let l=Math.random().toString(36).substring(7),u=(0,d.z).object({flashCards:(0,d.z).array((0,d.z).object({question:(0,d.z).string().describe("a question"),answer:(0,d.z).string().describe("answer to question"),id:(0,d.z).string().describe(`uuid of the flash card start with ${l} + random string`)}))}),c=(0,o.StructuredOutputParser).fromZodSchema(u).getFormatInstructions(),g=m(n?.prompt??h,n?.additionalPrompt??"",c),y=await g.format({text:e.pageContent,language:n?.language}),b=f(s?await v(t,a,n?.model,y,r):await i.predict(y));if(!b)throw Error("No flash cards found in response.");p.push(...b)}return{flashCards:p}}},{"@plasmohq/messaging/port":"6udnu","langchain/callbacks":"5B7EN","langchain/chat_models/openai":"8GN0O","langchain/output_parsers":"jggPT","langchain/prompts":"8M8ap","langchain/text_splitter":"fQwiJ",lodash:"cu6CP",zod:"jO77f","./findAndParseJsonLikeText":"hNleM","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6udnu":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getPort",()=>i),n.export(r,"listen",()=>l),n.export(r,"removePort",()=>o),globalThis.browser?.tabs||globalThis.chrome?.tabs;var a=()=>{let e=globalThis.browser?.runtime||globalThis.chrome?.runtime;if(!e)throw Error("Extension runtime is not available");return e},s=new Map,i=e=>{let t=s.get(e);if(t)return t;let r=a().connect({name:e});return s.set(e,r),r},o=e=>{s.delete(e)},l=(e,t,r)=>{let n=i(e);function a(){o(e),r?.()}return n.onMessage.addListener(t),n.onDisconnect.addListener(a),{port:n,disconnect:()=>{n.onMessage.removeListener(t),n.onDisconnect.removeListener(a)}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5B7EN":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/callbacks/index.js");n.exportAll(a,r)},{"./dist/callbacks/index.js":"b2DYU","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],b2DYU:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseCallbackHandler",()=>a.BaseCallbackHandler),n.export(r,"BaseTracer",()=>s.BaseTracer),n.export(r,"ConsoleCallbackHandler",()=>i.ConsoleCallbackHandler),n.export(r,"RunCollectorCallbackHandler",()=>o.RunCollectorCallbackHandler),n.export(r,"LangChainTracer",()=>l.LangChainTracer),n.export(r,"LangChainTracerV1",()=>u.LangChainTracerV1),n.export(r,"getTracingCallbackHandler",()=>c.getTracingCallbackHandler),n.export(r,"getTracingV2CallbackHandler",()=>c.getTracingV2CallbackHandler),n.export(r,"CallbackManager",()=>d.CallbackManager),n.export(r,"CallbackManagerForRetrieverRun",()=>d.CallbackManagerForRetrieverRun),n.export(r,"CallbackManagerForChainRun",()=>d.CallbackManagerForChainRun),n.export(r,"CallbackManagerForLLMRun",()=>d.CallbackManagerForLLMRun),n.export(r,"CallbackManagerForToolRun",()=>d.CallbackManagerForToolRun),n.export(r,"TraceGroup",()=>d.TraceGroup),n.export(r,"traceAsGroup",()=>d.traceAsGroup),n.export(r,"awaitAllCallbacks",()=>p.awaitAllCallbacks),n.export(r,"consumeCallback",()=>p.consumeCallback);var a=e("./base.js"),s=e("./handlers/tracer.js"),i=e("./handlers/console.js"),o=e("./handlers/run_collector.js"),l=e("./handlers/tracer_langchain.js"),u=e("./handlers/tracer_langchain_v1.js"),c=e("./handlers/initialize.js"),d=e("./manager.js"),p=e("./promises.js")},{"./base.js":"GL7wf","./handlers/tracer.js":"bfTy4","./handlers/console.js":"eYe8P","./handlers/run_collector.js":"a8vTA","./handlers/tracer_langchain.js":"UR4KT","./handlers/tracer_langchain_v1.js":"d5NXg","./handlers/initialize.js":"6q09U","./manager.js":"4iEvs","./promises.js":"jhcTW","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],GL7wf:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/callbacks/base");n.exportAll(a,r)},{"@langchain/core/callbacks/base":"4N9SZ","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4N9SZ":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/callbacks/base.js");n.exportAll(a,r)},{"../dist/callbacks/base.js":"f3sIf","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],f3sIf:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseCallbackHandler",()=>l);var a=e("uuid"),s=e("../load/serializable.js"),i=e("19649504761b54db");class o{}class l extends o{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,(0,s.get_lc_unique_name)(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0===i||i.env?.LANGCHAIN_CALLBACKS_BACKGROUND!=="true"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return(0,s.Serializable).prototype.toJSON.call(this)}toJSONNotImplemented(){return(0,s.Serializable).prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends l{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:a.v4()}),Object.assign(this,e)}}}}},{"19649504761b54db":"7XEqq",uuid:"l36KR","../load/serializable.js":"ihLrn","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],l36KR:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"v1",()=>s.default),n.export(r,"v3",()=>o.default),n.export(r,"v4",()=>u.default),n.export(r,"v5",()=>d.default),n.export(r,"NIL",()=>f.default),n.export(r,"version",()=>m.default),n.export(r,"validate",()=>y.default),n.export(r,"stringify",()=>b.default),n.export(r,"parse",()=>w.default);var a=e("./v1.js"),s=n.interopDefault(a),i=e("./v3.js"),o=n.interopDefault(i),l=e("./v4.js"),u=n.interopDefault(l),c=e("./v5.js"),d=n.interopDefault(c),p=e("./nil.js"),f=n.interopDefault(p),h=e("./version.js"),m=n.interopDefault(h),g=e("./validate.js"),y=n.interopDefault(g),v=e("./stringify.js"),b=n.interopDefault(v),_=e("./parse.js"),w=n.interopDefault(_)},{"./v1.js":"3PHPC","./v3.js":"3Iz16","./v4.js":"fCvRE","./v5.js":"8bhSy","./nil.js":"8P8RR","./version.js":"amAFP","./validate.js":"dtbjp","./stringify.js":"cQV7f","./parse.js":"aFeXC","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3PHPC":[function(e,t,r){let n,a;var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(r);var i=e("./rng.js"),o=s.interopDefault(i),l=e("./stringify.js");let u=0,c=0;r.default=function(e,t,r){let s=t&&r||0,i=t||Array(16),d=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==p){let t=e.random||(e.rng||(0,o.default))();null==d&&(d=n=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==p&&(p=a=(t[6]<<8|t[7])&16383)}let f=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:c+1,m=f-u+(h-c)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||f>u)&&void 0===e.nsecs&&(h=0),h>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");u=f,c=h,a=p;let g=((268435455&(f+=122192928e5))*1e4+h)%4294967296;i[s++]=g>>>24&255,i[s++]=g>>>16&255,i[s++]=g>>>8&255,i[s++]=255&g;let y=f/4294967296*1e4&268435455;i[s++]=y>>>8&255,i[s++]=255&y,i[s++]=y>>>24&15|16,i[s++]=y>>>16&255,i[s++]=p>>>8|128,i[s++]=255&p;for(let e=0;e<6;++e)i[s+e]=d[e];return t||(0,l.unsafeStringify)(i)}},{"./rng.js":"5NLI7","./stringify.js":"cQV7f","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5NLI7":[function(e,t,r){let n;var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"default",()=>i);let s=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],cQV7f:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"unsafeStringify",()=>o);var a=e("./validate.js"),s=n.interopDefault(a);let i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function o(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}r.default=function(e,t=0){let r=o(e,t);if(!(0,s.default)(r))throw TypeError("Stringified UUID is invalid");return r}},{"./validate.js":"dtbjp","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],dtbjp:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./regex.js"),s=n.interopDefault(a);r.default=function(e){return"string"==typeof e&&(0,s.default).test(e)}},{"./regex.js":"8c6XP","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8c6XP":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3Iz16":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./v35.js"),s=n.interopDefault(a),i=e("./md5.js"),o=n.interopDefault(i);let l=(0,s.default)("v3",48,o.default);r.default=l},{"./v35.js":"izhU4","./md5.js":"i4R3s","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],izhU4:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"DNS",()=>o),n.export(r,"URL",()=>l),n.export(r,"default",()=>u);var a=e("./stringify.js"),s=e("./parse.js"),i=n.interopDefault(s);let o="6ba7b810-9dad-11d1-80b4-00c04fd430c8",l="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function u(e,t,r){function n(e,n,s,o){var l;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,i.default)(n)),(null===(l=n)||void 0===l?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),(u=r(u))[6]=15&u[6]|t,u[8]=63&u[8]|128,s){o=o||0;for(let e=0;e<16;++e)s[o+e]=u[e];return s}return(0,a.unsafeStringify)(u)}try{n.name=e}catch(e){}return n.DNS=o,n.URL=l,n}},{"./stringify.js":"cQV7f","./parse.js":"aFeXC","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aFeXC:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./validate.js"),s=n.interopDefault(a);r.default=function(e){let t;if(!(0,s.default)(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}},{"./validate.js":"dtbjp","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],i4R3s:[function(e,t,r){function n(e){return(e+64>>>9<<4)+14+1}function a(e,t){let r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function s(e,t,r,n,s,i){var o;return a((o=a(a(t,e),a(n,i)))<<s|o>>>32-s,r)}function i(e,t,r,n,a,i,o){return s(t&r|~t&n,e,t,a,i,o)}function o(e,t,r,n,a,i,o){return s(t&n|r&~n,e,t,a,i,o)}function l(e,t,r,n,a,i,o){return s(t^r^n,e,t,a,i,o)}function u(e,t,r,n,a,i,o){return s(r^(t|~n),e,t,a,i,o)}e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){let t=[],r=32*e.length,n="0123456789abcdef";for(let a=0;a<r;a+=8){let r=e[a>>5]>>>a%32&255,s=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,s=-271733879,c=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){let n=r,p=s,f=c,h=d;r=i(r,s,c,d,e[t],7,-680876936),d=i(d,r,s,c,e[t+1],12,-389564586),c=i(c,d,r,s,e[t+2],17,606105819),s=i(s,c,d,r,e[t+3],22,-1044525330),r=i(r,s,c,d,e[t+4],7,-176418897),d=i(d,r,s,c,e[t+5],12,1200080426),c=i(c,d,r,s,e[t+6],17,-1473231341),s=i(s,c,d,r,e[t+7],22,-45705983),r=i(r,s,c,d,e[t+8],7,1770035416),d=i(d,r,s,c,e[t+9],12,-1958414417),c=i(c,d,r,s,e[t+10],17,-42063),s=i(s,c,d,r,e[t+11],22,-1990404162),r=i(r,s,c,d,e[t+12],7,1804603682),d=i(d,r,s,c,e[t+13],12,-40341101),c=i(c,d,r,s,e[t+14],17,-1502002290),s=i(s,c,d,r,e[t+15],22,1236535329),r=o(r,s,c,d,e[t+1],5,-165796510),d=o(d,r,s,c,e[t+6],9,-1069501632),c=o(c,d,r,s,e[t+11],14,643717713),s=o(s,c,d,r,e[t],20,-373897302),r=o(r,s,c,d,e[t+5],5,-701558691),d=o(d,r,s,c,e[t+10],9,38016083),c=o(c,d,r,s,e[t+15],14,-660478335),s=o(s,c,d,r,e[t+4],20,-405537848),r=o(r,s,c,d,e[t+9],5,568446438),d=o(d,r,s,c,e[t+14],9,-1019803690),c=o(c,d,r,s,e[t+3],14,-187363961),s=o(s,c,d,r,e[t+8],20,1163531501),r=o(r,s,c,d,e[t+13],5,-1444681467),d=o(d,r,s,c,e[t+2],9,-51403784),c=o(c,d,r,s,e[t+7],14,1735328473),s=o(s,c,d,r,e[t+12],20,-1926607734),r=l(r,s,c,d,e[t+5],4,-378558),d=l(d,r,s,c,e[t+8],11,-2022574463),c=l(c,d,r,s,e[t+11],16,1839030562),s=l(s,c,d,r,e[t+14],23,-35309556),r=l(r,s,c,d,e[t+1],4,-1530992060),d=l(d,r,s,c,e[t+4],11,1272893353),c=l(c,d,r,s,e[t+7],16,-155497632),s=l(s,c,d,r,e[t+10],23,-1094730640),r=l(r,s,c,d,e[t+13],4,681279174),d=l(d,r,s,c,e[t],11,-358537222),c=l(c,d,r,s,e[t+3],16,-722521979),s=l(s,c,d,r,e[t+6],23,76029189),r=l(r,s,c,d,e[t+9],4,-640364487),d=l(d,r,s,c,e[t+12],11,-421815835),c=l(c,d,r,s,e[t+15],16,530742520),s=l(s,c,d,r,e[t+2],23,-995338651),r=u(r,s,c,d,e[t],6,-198630844),d=u(d,r,s,c,e[t+7],10,1126891415),c=u(c,d,r,s,e[t+14],15,-1416354905),s=u(s,c,d,r,e[t+5],21,-57434055),r=u(r,s,c,d,e[t+12],6,1700485571),d=u(d,r,s,c,e[t+3],10,-1894986606),c=u(c,d,r,s,e[t+10],15,-1051523),s=u(s,c,d,r,e[t+1],21,-2054922799),r=u(r,s,c,d,e[t+8],6,1873313359),d=u(d,r,s,c,e[t+15],10,-30611744),c=u(c,d,r,s,e[t+6],15,-1560198380),s=u(s,c,d,r,e[t+13],21,1309151649),r=u(r,s,c,d,e[t+4],6,-145523070),d=u(d,r,s,c,e[t+11],10,-1120210379),c=u(c,d,r,s,e[t+2],15,718787259),s=u(s,c,d,r,e[t+9],21,-343485551),r=a(r,n),s=a(s,p),c=a(c,f),d=a(d,h)}return[r,s,c,d]}(function(e){if(0===e.length)return[];let t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fCvRE:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./native.js"),s=n.interopDefault(a),i=e("./rng.js"),o=n.interopDefault(i),l=e("./stringify.js");r.default=function(e,t,r){if(s.default.randomUUID&&!t&&!e)return(0,s.default).randomUUID();let n=(e=e||{}).random||(e.rng||(0,o.default))();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return(0,l.unsafeStringify)(n)}},{"./native.js":"36JDj","./rng.js":"5NLI7","./stringify.js":"cQV7f","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"36JDj":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);r.default={randomUUID:n}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8bhSy":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./v35.js"),s=n.interopDefault(a),i=e("./sha1.js"),o=n.interopDefault(i);let l=(0,s.default)("v5",80,o.default);r.default=l},{"./v35.js":"izhU4","./sha1.js":"57fIB","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"57fIB":[function(e,t,r){function n(e,t){return e<<t|e>>>32-t}e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let a=Math.ceil((e.length/4+2)/16),s=Array(a);for(let t=0;t<a;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];s[t]=r}s[a-1][14]=(e.length-1)*8/4294967296,s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<a;++e){let a=new Uint32Array(80);for(let t=0;t<16;++t)a[t]=s[e][t];for(let e=16;e<80;++e)a[e]=n(a[e-3]^a[e-8]^a[e-14]^a[e-16],1);let i=r[0],o=r[1],l=r[2],u=r[3],c=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),s=n(i,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(r,o,l,u)+c+t[r]+a[e]>>>0;c=u,u=l,l=n(o,30)>>>0,o=i,i=s}r[0]=r[0]+i>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+u>>>0,r[4]=r[4]+c>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8P8RR":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default="00000000-0000-0000-0000-000000000000"},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],amAFP:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./validate.js"),s=n.interopDefault(a);r.default=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},{"./validate.js":"dtbjp","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ihLrn:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"get_lc_unique_name",()=>i),n.export(r,"Serializable",()=>o);var a=e("./map_keys.js");function s(e){return Array.isArray(e)?[...e]:{...e}}function i(e){let t=Object.getPrototypeOf(e);return"function"==typeof e.lc_name&&("function"!=typeof t.lc_name||e.lc_name()!==t.lc_name())?e.lc_name():e.name}class o{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,i(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable||this.lc_kwargs instanceof o||"object"!=typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},t={},r=Object.keys(this.lc_kwargs).reduce((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e),{});for(let n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n,"lc_aliases",this)),Object.assign(t,Reflect.get(n,"lc_secrets",this)),Object.assign(r,Reflect.get(n,"lc_attributes",this));return Object.keys(t).forEach(e=>{let t=this,n=r,[a,...s]=e.split(".").reverse();for(let e of s.reverse()){if(!(e in t)||void 0===t[e])return;e in n&&void 0!==n[e]||("object"==typeof t[e]&&null!=t[e]?n[e]={}:Array.isArray(t[e])&&(n[e]=[])),t=t[e],n=n[e]}a in t&&void 0!==t[a]&&(n[a]=n[a]||t[a])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:(0,a.mapKeys)(Object.keys(t).length?function(e,t){let r=s(e);for(let[e,n]of Object.entries(t)){let[t,...a]=e.split(".").reverse(),i=r;for(let e of a.reverse()){if(void 0===i[e])break;i[e]=s(i[e]),i=i[e]}void 0!==i[t]&&(i[t]={lc:1,type:"secret",id:[n]})}return r}(r,t):r,a.keyToJson,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}},{"./map_keys.js":"icngQ","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],icngQ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"keyToJson",()=>l),n.export(r,"keyFromJson",()=>u),n.export(r,"mapKeys",()=>c);var a=e("decamelize"),s=n.interopDefault(a),i=e("camelcase"),o=n.interopDefault(i);function l(e,t){return t?.[e]||(0,s.default)(e)}function u(e,t){return t?.[e]||(0,o.default)(e)}function c(e,t,r){let n={};for(let a in e)Object.hasOwn(e,a)&&(n[t(a,r)]=e[a]);return n}},{decamelize:"ilxwq",camelcase:"9qpt6","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ilxwq:[function(e,t,r){t.exports=function(e,t){if("string"!=typeof e)throw TypeError("Expected a string");return t=void 0===t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},{}],"9qpt6":[function(e,t,r){let n=/[\p{Lu}]/u,a=/[\p{Ll}]/u,s=/^[\p{Lu}](?![\p{Lu}])/gu,i=/([\p{Alpha}\p{N}_]|$)/u,o=/[_.\- ]+/,l=RegExp("^"+o.source),u=RegExp(o.source+i.source,"gu"),c=RegExp("\\d+"+i.source,"gu"),d=(e,t,r)=>{let s=!1,i=!1,o=!1;for(let l=0;l<e.length;l++){let u=e[l];s&&n.test(u)?(e=e.slice(0,l)+"-"+e.slice(l),s=!1,o=i,i=!0,l++):i&&o&&a.test(u)?(e=e.slice(0,l-1)+"-"+e.slice(l-1),o=i,i=!1,s=!0):(s=t(u)===u&&r(u)!==u,o=i,i=r(u)===u&&t(u)!==u)}return e},p=(e,t)=>(s.lastIndex=0,e.replace(s,e=>t(e))),f=(e,t)=>(u.lastIndex=0,c.lastIndex=0,e.replace(u,(e,r)=>t(r)).replace(c,e=>t(e))),h=(e,t)=>{if(!("string"==typeof e||Array.isArray(e)))throw TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length)return"";let r=!1===t.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t.locale),n=!1===t.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t.locale);return 1===e.length?t.pascalCase?n(e):r(e):(e!==r(e)&&(e=d(e,r,n)),e=e.replace(l,""),e=t.preserveConsecutiveUppercase?p(e,r):r(e),t.pascalCase&&(e=n(e.charAt(0))+e.slice(1)),f(e,n))};t.exports=h,t.exports.default=h},{}],bfTy4:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/tracers/base");n.exportAll(a,r)},{"@langchain/core/tracers/base":"bQv1Z","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bQv1Z:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/tracers/base.js");n.exportAll(a,r)},{"../dist/tracers/base.js":"gsfZb","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gsfZb:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseTracer",()=>i);var a=e("../callbacks/base.js");function s(e,t){return e&&!Array.isArray(e)&&"object"==typeof e?e:{[t]:e}}class i extends a.BaseCallbackHandler{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,t){e.child_runs.push(t)}async _startTrace(e){if(void 0!==e.parent_run_id){let t=this.runMap.get(e.parent_run_id);t&&(this._addChildRun(t,e),t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order))}this.runMap.set(e.id,e),await this.onRunCreate?.(e)}async _endTrace(e){let t=void 0!==e.parent_run_id&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await this.onRunUpdate?.(e)}_getExecutionOrder(e){let t=void 0!==e&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,r,n,a,s,i,o){let l=this._getExecutionOrder(n),u=Date.now(),c=i?{...a,metadata:i}:a,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:s||[]};return await this._startTrace(d),await this.onLLMStart?.(d),d}async handleChatModelStart(e,t,r,n,a,s,i,o){let l=this._getExecutionOrder(n),u=Date.now(),c=i?{...a,metadata:i}:a,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:s||[]};return await this._startTrace(d),await this.onLLMStart?.(d),d}async handleLLMEnd(e,t){let r=this.runMap.get(t);if(!r||r?.run_type!=="llm")throw Error("No LLM run to end.");return r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await this.onLLMEnd?.(r),await this._endTrace(r),r}async handleLLMError(e,t){let r=this.runMap.get(t);if(!r||r?.run_type!=="llm")throw Error("No LLM run to end.");return r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await this.onLLMError?.(r),await this._endTrace(r),r}async handleChainStart(e,t,r,n,a,s,i,o){let l=this._getExecutionOrder(n),u=Date.now(),c={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:t,execution_order:l,child_execution_order:l,run_type:i??"chain",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return await this._startTrace(c),await this.onChainStart?.(c),c}async handleChainEnd(e,t,r,n,a){let i=this.runMap.get(t);if(!i)throw Error("No chain run to end.");return i.end_time=Date.now(),i.outputs=s(e,"output"),i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),a?.inputs!==void 0&&(i.inputs=s(a.inputs,"input")),await this.onChainEnd?.(i),await this._endTrace(i),i}async handleChainError(e,t,r,n,a){let i=this.runMap.get(t);if(!i)throw Error("No chain run to end.");return i.end_time=Date.now(),i.error=e.message,i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),a?.inputs!==void 0&&(i.inputs=s(a.inputs,"input")),await this.onChainError?.(i),await this._endTrace(i),i}async handleToolStart(e,t,r,n,a,s,i){let o=this._getExecutionOrder(n),l=Date.now(),u={id:r,name:i??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return await this._startTrace(u),await this.onToolStart?.(u),u}async handleToolEnd(e,t){let r=this.runMap.get(t);if(!r||r?.run_type!=="tool")throw Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await this.onToolEnd?.(r),await this._endTrace(r),r}async handleToolError(e,t){let r=this.runMap.get(t);if(!r||r?.run_type!=="tool")throw Error("No tool run to end");return r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await this.onToolError?.(r),await this._endTrace(r),r}async handleAgentAction(e,t){let r=this.runMap.get(t);r&&r?.run_type==="chain"&&(r.actions=r.actions||[],r.actions.push(e),r.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentAction?.(r))}async handleAgentEnd(e,t){let r=this.runMap.get(t);r&&r?.run_type==="chain"&&(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentEnd?.(r))}async handleRetrieverStart(e,t,r,n,a,s,i){let o=this._getExecutionOrder(n),l=Date.now(),u={id:r,name:i??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:t},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return await this._startTrace(u),await this.onRetrieverStart?.(u),u}async handleRetrieverEnd(e,t){let r=this.runMap.get(t);if(!r||r?.run_type!=="retriever")throw Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await this.onRetrieverEnd?.(r),await this._endTrace(r),r}async handleRetrieverError(e,t){let r=this.runMap.get(t);if(!r||r?.run_type!=="retriever")throw Error("No retriever run to end");return r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await this.onRetrieverError?.(r),await this._endTrace(r),r}async handleText(e,t){let r=this.runMap.get(t);r&&r?.run_type==="chain"&&(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await this.onText?.(r))}async handleLLMNewToken(e,t,r,n,a,s){let i=this.runMap.get(r);if(!i||i?.run_type!=="llm")throw Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return i.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:s?.chunk}}),await this.onLLMNewToken?.(i,e),i}}},{"../callbacks/base.js":"f3sIf","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],eYe8P:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/tracers/console");n.exportAll(a,r)},{"@langchain/core/tracers/console":"fjwOT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fjwOT:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/tracers/console.js");n.exportAll(a,r)},{"../dist/tracers/console.js":"fPFQ8","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fPFQ8:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ConsoleCallbackHandler",()=>d);var a=e("ansi-styles"),s=n.interopDefault(a),i=e("./base.js");function o(e,t){return`${e.open}${t}${e.close}`}function l(e,t){try{return JSON.stringify(e,null,2)}catch(e){return t}}function u(e){if(!e.end_time)return"";let t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}let{color:c}=s.default;class d extends i.BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let t=[],r=e;for(;r.parent_run_id;){let e=this.runMap.get(r.parent_run_id);if(e)t.push(e),r=e;else break}return t}getBreadcrumbs(e){let t=[...this.getParents(e).reverse(),e].map((e,t,r)=>{let n=`${e.execution_order}:${e.run_type}:${e.name}`;return t===r.length-1?o(s.default.bold,n):n}).join(" > ");return o(c.grey,t)}onChainStart(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.green,"[chain/start]")} [${t}] Entering Chain run with input: ${l(e.inputs,"[inputs]")}`)}onChainEnd(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.cyan,"[chain/end]")} [${t}] [${u(e)}] Exiting Chain run with output: ${l(e.outputs,"[outputs]")}`)}onChainError(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.red,"[chain/error]")} [${t}] [${u(e)}] Chain run errored with error: ${l(e.error,"[error]")}`)}onLLMStart(e){let t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(e=>e.trim())}:e.inputs;console.log(`${o(c.green,"[llm/start]")} [${t}] Entering LLM run with input: ${l(r,"[inputs]")}`)}onLLMEnd(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.cyan,"[llm/end]")} [${t}] [${u(e)}] Exiting LLM run with output: ${l(e.outputs,"[response]")}`)}onLLMError(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.red,"[llm/error]")} [${t}] [${u(e)}] LLM run errored with error: ${l(e.error,"[error]")}`)}onToolStart(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.green,"[tool/start]")} [${t}] Entering Tool run with input: "${e.inputs.input?.trim()}"`)}onToolEnd(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.cyan,"[tool/end]")} [${t}] [${u(e)}] Exiting Tool run with output: "${e.outputs?.output?.trim()}"`)}onToolError(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.red,"[tool/error]")} [${t}] [${u(e)}] Tool run errored with error: ${l(e.error,"[error]")}`)}onRetrieverStart(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${l(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.cyan,"[retriever/end]")} [${t}] [${u(e)}] Exiting Retriever run with output: ${l(e.outputs,"[outputs]")}`)}onRetrieverError(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.red,"[retriever/error]")} [${t}] [${u(e)}] Retriever run errored with error: ${l(e.error,"[error]")}`)}onAgentAction(e){let t=this.getBreadcrumbs(e);console.log(`${o(c.blue,"[agent/action]")} [${t}] Agent selected action: ${l(e.actions[e.actions.length-1],"[action]")}`)}}},{"ansi-styles":"26v5d","./base.js":"gsfZb","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"26v5d":[function(e,t,r){let n=(e=0)=>t=>`\u001B[${38+e};5;${t}m`,a=(e=0)=>(t,r,n)=>`\u001B[${38+e};2;${t};${r};${n}m`;Object.defineProperty(t,"exports",{enumerable:!0,get:function(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};for(let[r,n]of(t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright,Object.entries(t))){for(let[r,a]of Object.entries(n))t[r]={open:`\u001B[${a[0]}m`,close:`\u001B[${a[1]}m`},n[r]=t[r],e.set(a[0],a[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1b[39m",t.bgColor.close="\x1b[49m",t.color.ansi256=n(),t.color.ansi16m=a(),t.bgColor.ansi256=n(10),t.bgColor.ansi16m=a(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{let t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:r}=t.groups;3===r.length&&(r=r.split("").map(e=>e+e).join(""));let n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},{}],a8vTA:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/tracers/run_collector");n.exportAll(a,r)},{"@langchain/core/tracers/run_collector":"h6QoJ","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],h6QoJ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/tracers/run_collector.js");n.exportAll(a,r)},{"../dist/tracers/run_collector.js":"3diXQ","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3diXQ":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RunCollectorCallbackHandler",()=>s);var a=e("./base.js");class s extends a.BaseTracer{constructor({exampleId:e}={}){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"run_collector"}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracedRuns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.exampleId=e,this.tracedRuns=[]}async persistRun(e){let t={...e};t.reference_example_id=this.exampleId,this.tracedRuns.push(t)}}},{"./base.js":"gsfZb","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],UR4KT:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/tracers/tracer_langchain");n.exportAll(a,r)},{"@langchain/core/tracers/tracer_langchain":"ckFx0","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ckFx0:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/tracers/tracer_langchain.js");n.exportAll(a,r)},{"../dist/tracers/tracer_langchain.js":"dB0hq","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],dB0hq:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"LangChainTracer",()=>o);var a=e("langsmith"),s=e("../utils/env.js"),i=e("./base.js");class o extends i.BaseTracer{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:t,projectName:r,client:n}=e;this.projectName=r??(0,s.getEnvironmentVariable)("LANGCHAIN_PROJECT")??(0,s.getEnvironmentVariable)("LANGCHAIN_SESSION"),this.exampleId=t,this.client=n??new a.Client({})}async _convertToCreate(e,t){return{...e,extra:{...e.extra,runtime:await (0,s.getRuntimeEnvironment)()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async _persistRunSingle(e){let t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async _updateRunSingle(e){let t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs};await this.client.updateRun(e.id,t)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}},{langsmith:"kvxIp","../utils/env.js":"2Th20","./base.js":"gsfZb","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kvxIp:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/index.js");n.exportAll(a,r)},{"./dist/index.js":"cCB7g","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],cCB7g:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Client",()=>a.Client),n.export(r,"RunTree",()=>s.RunTree),n.export(r,"__version__",()=>i);var a=e("./client.js"),s=e("./run_trees.js");let i="0.0.70"},{"./client.js":"2VxwW","./run_trees.js":"9zMS3","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2VxwW":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Client",()=>g);var a=e("uuid"),s=e("./utils/async_caller.js"),i=e("./utils/messages.js"),o=e("./utils/env.js"),l=e("./index.js");async function u(e){let t=await (0,o.getRuntimeEnvironment)(),r=(0,o.getLangChainEnvVarsMetadata)();return e.map(e=>{let n=e.extra??{},a=n.metadata;return e.extra={...n,runtime:{...t,...n?.runtime},metadata:{...r,...r.revision_id||e.revision_id?{revision_id:e.revision_id??r.revision_id}:{},...a}},e})}let c=()=>{let e=(0,o.getEnvironmentVariable)("LANGCHAIN_TRACING_SAMPLING_RATE");if(void 0===e)return;let t=parseFloat(e);if(t<0||t>1)throw Error(`LANGCHAIN_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t},d=e=>{let t=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===t||"127.0.0.1"===t||"::1"===t},p=async(e,t)=>{let r=await e.text();if(!e.ok)throw Error(`Failed to ${t}: ${e.status} ${e.statusText} ${r}`)};async function f(e){let t=[];for await(let r of e)t.push(r);return t}function h(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function m(e){if(!a.validate(e))throw Error(`Invalid UUID: ${e}`)}class g{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sampledPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pendingAutoBatchedRuns",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50});let t=g.getDefaultClientConfig();this.tracingSampleRate=c(),this.apiUrl=h(e.apiUrl??t.apiUrl)??"",this.apiKey=h(e.apiKey??t.apiKey),this.webUrl=h(e.webUrl??t.webUrl),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??12e3,this.caller=new s.AsyncCaller(e.callerOptions??{}),this.hideInputs=e.hideInputs??t.hideInputs,this.hideOutputs=e.hideOutputs??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.pendingAutoBatchedRunLimit=e.pendingAutoBatchedRunLimit??this.pendingAutoBatchedRunLimit}static getDefaultClientConfig(){let e=(0,o.getEnvironmentVariable)("LANGCHAIN_API_KEY");return{apiUrl:(0,o.getEnvironmentVariable)("LANGCHAIN_ENDPOINT")??"https://api.smith.langchain.com",apiKey:e,webUrl:void 0,hideInputs:"true"===(0,o.getEnvironmentVariable)("LANGCHAIN_HIDE_INPUTS"),hideOutputs:"true"===(0,o.getEnvironmentVariable)("LANGCHAIN_HIDE_OUTPUTS")}}validateApiKeyIfHosted(){if(!d(this.apiUrl)&&!this.apiKey)throw Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return this.webUrl?this.webUrl:d(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){let e={"User-Agent":`langsmith-js/${l.__version__}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs?{}:e}processOutputs(e){return this.hideOutputs?{}:e}prepareRunCreateOrUpdateInputs(e){let t={...e};return void 0!==t.inputs&&(t.inputs=this.processInputs(t.inputs)),void 0!==t.outputs&&(t.outputs=this.processOutputs(t.outputs)),t}async _getResponse(e,t){let r=t?.toString()??"",n=`${this.apiUrl}${e}?${r}`,a=await this.caller.call(fetch,n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);return a}async _get(e,t){return(await this._getResponse(e,t)).json()}async *_getPaginated(e,t=new URLSearchParams){let r=Number(t.get("offset"))||0,n=Number(t.get("limit"))||100;for(;;){t.set("offset",String(r)),t.set("limit",String(n));let a=`${this.apiUrl}${e}?${t}`,s=await this.caller.call(fetch,a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);let i=await s.json();if(0===i.length||(yield i,i.length<n))break;r+=i.length}}async *_getCursorPaginatedList(e,t=null,r="POST",n="runs"){let a=t?{...t}:{};for(;;){let t=await this.caller.call(fetch,`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),body:JSON.stringify(a)}),s=await t.json();if(!s||!s[n])break;yield s[n];let i=s.cursors;if(!i||!i.next)break;a.cursor=i.next}}_filterForSampling(e,t=!1){if(void 0===this.tracingSampleRate)return e;if(t){let t=[];for(let r of e)this.sampledPostUuids.has(r.id)&&(t.push(r),this.sampledPostUuids.delete(r.id));return t}{let t=[];for(let r of e)Math.random()<this.tracingSampleRate&&(t.push(r),this.sampledPostUuids.add(r.id));return t}}async triggerAutoBatchSend(e){let t=e;void 0===t&&(t=this.pendingAutoBatchedRuns.slice(0,this.pendingAutoBatchedRunLimit),this.pendingAutoBatchedRuns=this.pendingAutoBatchedRuns.slice(this.pendingAutoBatchedRunLimit)),await this.batchIngestRuns({runCreates:t.filter(e=>"create"===e.action).map(e=>e.item),runUpdates:t.filter(e=>"update"===e.action).map(e=>e.item)})}appendRunCreateToAutoBatchQueue(e){let t=this.autoBatchTimeout;for(clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,this.pendingAutoBatchedRuns.push(e);this.pendingAutoBatchedRuns.length>=this.pendingAutoBatchedRunLimit;){let e=this.pendingAutoBatchedRuns.slice(0,this.pendingAutoBatchedRunLimit);this.pendingAutoBatchedRuns=this.pendingAutoBatchedRuns.slice(this.pendingAutoBatchedRunLimit),this.triggerAutoBatchSend(e)}this.pendingAutoBatchedRuns.length>0&&(t?this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.triggerAutoBatchSend()},this.autoBatchAggregationDelayMs):this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.triggerAutoBatchSend()},this.autoBatchInitialDelayMs))}async batchEndpointIsSupported(){let e=await fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms)});return!!e.ok||(await e.text(),!1)}async createRun(e){if(!this._filterForSampling([e]).length)return;let t={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;let n=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&void 0!==n.trace_id&&void 0!==n.dotted_order){this.appendRunCreateToAutoBatchQueue({action:"create",item:n});return}let a=await u([n]),s=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:t,body:JSON.stringify(a[0]),signal:AbortSignal.timeout(this.timeout_ms)});await p(s,"create run")}async batchIngestRuns({runCreates:e,runUpdates:t}){if(void 0===e&&void 0===t)return;let r=e?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[],n=t?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[];if(r.length>0&&n.length>0){let e=r.reduce((e,t)=>(t.id&&(e[t.id]=t),e),{}),t=[];for(let r of n)void 0!==r.id&&e[r.id]?e[r.id]={...e[r.id],...r}:t.push(r);r=Object.values(e),n=t}let a={post:this._filterForSampling(r),patch:this._filterForSampling(n,!0)};if(!a.post.length&&!a.patch.length)return;if(r=await u(r),void 0===this.batchEndpointSupported&&(this.batchEndpointSupported=await this.batchEndpointIsSupported()),!this.batchEndpointSupported){for(let e of(this.autoBatchTracing=!1,a.post))await this.createRun(e);for(let e of a.patch)void 0!==e.id&&await this.updateRun(e.id,e);return}let s={...this.headers,"Content-Type":"application/json",Accept:"application/json"},i=await this.caller.call(fetch,`${this.apiUrl}/runs/batch`,{method:"POST",headers:s,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await p(i,"batch create run")}async updateRun(e,t){m(e),t.inputs&&(t.inputs=this.processInputs(t.inputs)),t.outputs&&(t.outputs=this.processOutputs(t.outputs));let r={...t,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&void 0!==r.trace_id&&void 0!==r.dotted_order){this.appendRunCreateToAutoBatchQueue({action:"update",item:r});return}let n={...this.headers,"Content-Type":"application/json"},a=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});await p(a,"update run")}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){m(e);let r=await this._get(`/runs/${e}`);return t&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:t,projectOpts:r}){if(void 0!==t){let e;e=t.session_id?t.session_id:r?.projectName?(await this.readProject({projectName:r?.projectName})).id:r?.projectId?r?.projectId:(await this.readProject({projectName:(0,o.getEnvironmentVariable)("LANGCHAIN_PROJECT")||"default"})).id;let n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${e}/r/${t.id}?poll=true`}if(void 0!==e){let t=await this.readRun(e);if(!t.app_path)throw Error(`Run ${e} has no app_path`);let r=this.getHostUrl();return`${r}${t.app_path}`}throw Error("Must provide either runId or run")}async _loadChildRuns(e){let t=await f(this.listRuns({id:e.child_run_ids})),r={},n={};for(let e of(t.sort((e,t)=>(e?.dotted_order??"").localeCompare(t?.dotted_order??"")),t)){if(null===e.parent_run_id||void 0===e.parent_run_id)throw Error(`Child run ${e.id} has no parent`);e.parent_run_id in r||(r[e.parent_run_id]=[]),r[e.parent_run_id].push(e),n[e.id]=e}for(let t in e.child_runs=r[e.id]||[],r)t!==e.id&&(n[t].child_runs=r[t]);return e}async *listRuns({projectId:e,projectName:t,parentRunId:r,traceId:n,referenceExampleId:a,startTime:s,executionOrder:i,runType:o,error:l,id:u,query:c,filter:d,limit:p}){let f=[];if(e&&(f=Array.isArray(e)?e:[e]),t){let e=Array.isArray(t)?t:[t],r=await Promise.all(e.map(e=>this.readProject({projectName:e}).then(e=>e.id)));f.push(...r)}let h={session:f.length?f:null,run_type:o,reference_example:a,query:c,filter:d,execution_order:i,parent_run:r?[r]:null,start_time:s?s.toISOString():null,error:l,id:u,limit:p,trace:n};for await(let e of this._getCursorPaginatedList("/runs/query",h))yield*e}async shareRun(e,{shareId:t}={}){let r={run_id:e,share_token:t||a.v4()};m(e);let n=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)}),s=await n.json();if(null===s||!("share_token"in s))throw Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){m(e);let t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await p(t,"unshare run")}async readRunSharedLink(e){m(e);let t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)}),r=await t.json();if(null!==r&&"share_token"in r)return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){let r=new URLSearchParams({share_token:e});if(void 0!==t)for(let e of t)r.append("id",e);m(e);let n=await this.caller.call(fetch,`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});return await n.json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),m(e);let r=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)}),n=await r.json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async shareDataset(e,t){if(!e&&!t)throw Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);let r={dataset_id:e};m(e);let n=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)}),a=await n.json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){m(e);let t=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await p(t,"unshare dataset")}async readSharedDataset(e){m(e);let t=await this.caller.call(fetch,`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});return await t.json()}async createProject({projectName:e,description:t=null,metadata:r=null,upsert:n=!1,projectExtra:a=null,referenceDatasetId:s=null}){let i=`${this.apiUrl}/sessions${n?"?upsert=true":""}`,o=a||{};r&&(o.metadata=r);let l={name:e,extra:o,description:t};null!==s&&(l.reference_dataset_id=s);let u=await this.caller.call(fetch,i,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms)}),c=await u.json();if(!u.ok)throw Error(`Failed to create session ${e}: ${u.status} ${u.statusText}`);return c}async updateProject(e,{name:t=null,description:r=null,metadata:n=null,projectExtra:a=null,endTime:s=null}){let i=`${this.apiUrl}/sessions/${e}`,o=a;n&&(o={...o||{},metadata:n});let l={name:t,extra:o,description:r,end_time:s?new Date(s).toISOString():null},u=await this.caller.call(fetch,i,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms)}),c=await u.json();if(!u.ok)throw Error(`Failed to update project ${e}: ${u.status} ${u.statusText}`);return c}async hasProject({projectId:e,projectName:t}){let r="/sessions",n=new URLSearchParams;if(void 0!==e&&void 0!==t)throw Error("Must provide either projectName or projectId, not both");if(void 0!==e)m(e),r+=`/${e}`;else if(void 0!==t)n.append("name",t);else throw Error("Must provide projectName or projectId");let a=await this.caller.call(fetch,`${this.apiUrl}${r}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});try{let e=await a.json();if(!a.ok)return!1;if(Array.isArray(e))return e.length>0;return!0}catch(e){return!1}}async readProject({projectId:e,projectName:t,includeStats:r}){let n,a="/sessions",s=new URLSearchParams;if(void 0!==e&&void 0!==t)throw Error("Must provide either projectName or projectId, not both");if(void 0!==e)m(e),a+=`/${e}`;else if(void 0!==t)s.append("name",t);else throw Error("Must provide projectName or projectId");void 0!==r&&s.append("include_stats",r.toString());let i=await this._get(a,s);if(Array.isArray(i)){if(0===i.length)throw Error(`Project[id=${e}, name=${t}] not found`);n=i[0]}else n=i;return n}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;let e=new URLSearchParams({limit:"1"});for await(let t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw Error("No projects found to resolve tenant.")}async *listProjects({projectIds:e,name:t,nameContains:r,referenceDatasetId:n,referenceDatasetName:a,referenceFree:s}={}){let i=new URLSearchParams;if(void 0!==e)for(let t of e)i.append("id",t);if(void 0!==t&&i.append("name",t),void 0!==r&&i.append("name_contains",r),void 0!==n)i.append("reference_dataset",n);else if(void 0!==a){let e=await this.readDataset({datasetName:a});i.append("reference_dataset",e.id)}for await(let e of(void 0!==s&&i.append("reference_free",s.toString()),this._getPaginated("/sessions",i)))yield*e}async deleteProject({projectId:e,projectName:t}){let r;if(void 0===e&&void 0===t)throw Error("Must provide projectName or projectId");if(void 0!==e&&void 0!==t)throw Error("Must provide either projectName or projectId, not both");m(r=void 0===e?(await this.readProject({projectName:t})).id:e);let n=await this.caller.call(fetch,`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await p(n,`delete session ${r} (${t})`)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:n,description:a,dataType:s,name:i}){let o=`${this.apiUrl}/datasets/upload`,l=new FormData;l.append("file",e,t),r.forEach(e=>{l.append("input_keys",e)}),n.forEach(e=>{l.append("output_keys",e)}),a&&l.append("description",a),s&&l.append("data_type",s),i&&l.append("name",i);let u=await this.caller.call(fetch,o,{method:"POST",headers:this.headers,body:l,signal:AbortSignal.timeout(this.timeout_ms)});if(!u.ok){let e=await u.json();if(e.detail&&e.detail.includes("already exists"))throw Error(`Dataset ${t} already exists`);throw Error(`Failed to upload CSV: ${u.status} ${u.statusText}`)}return await u.json()}async createDataset(e,{description:t,dataType:r}={}){let n={name:e,description:t};r&&(n.data_type=r);let a=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok){let t=await a.json();if(t.detail&&t.detail.includes("already exists"))throw Error(`Dataset ${e} already exists`);throw Error(`Failed to create dataset ${a.status} ${a.statusText}`)}return await a.json()}async readDataset({datasetId:e,datasetName:t}){let r,n="/datasets",a=new URLSearchParams({limit:"1"});if(void 0!==e&&void 0!==t)throw Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)m(e),n+=`/${e}`;else if(void 0!==t)a.append("name",t);else throw Error("Must provide datasetName or datasetId");let s=await this._get(n,a);if(Array.isArray(s)){if(0===s.length)throw Error(`Dataset[id=${e}, name=${t}] not found`);r=s[0]}else r=s;return r}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){if(void 0!==e);else if(void 0!==t)e=(await this.readDataset({datasetName:t})).id;else throw Error("Must provide datasetName or datasetId");let r=await this._getResponse(`/datasets/${e}/openai_ft`);return(await r.text()).trim().split("\n").map(e=>JSON.parse(e))}async *listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:n,datasetNameContains:a}={}){let s=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(void 0!==r)for(let e of r)s.append("id",e);for await(let e of(void 0!==n&&s.append("name",n),void 0!==a&&s.append("name_contains",a),this._getPaginated("/datasets",s)))yield*e}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",n=e;if(void 0!==e&&void 0!==t)throw Error("Must provide either datasetName or datasetId, not both");if(void 0!==t&&(n=(await this.readDataset({datasetName:t})).id),void 0!==n)m(n),r+=`/${n}`;else throw Error("Must provide datasetName or datasetId");let a=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw Error(`Failed to delete ${r}: ${a.status} ${a.statusText}`);await a.json()}async createExample(e,t,{datasetId:r,datasetName:n,createdAt:a,exampleId:s}){let i=r;if(void 0===i&&void 0===n)throw Error("Must provide either datasetName or datasetId");if(void 0!==i&&void 0!==n)throw Error("Must provide either datasetName or datasetId, not both");void 0===i&&(i=(await this.readDataset({datasetName:n})).id);let o=a||new Date,l={dataset_id:i,inputs:e,outputs:t,created_at:o?.toISOString(),id:s},u=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms)});if(!u.ok)throw Error(`Failed to create example: ${u.status} ${u.statusText}`);return await u.json()}async createExamples(e){let{inputs:t,outputs:r,sourceRunIds:n,exampleIds:a,datasetId:s,datasetName:i}=e,o=s;if(void 0===o&&void 0===i)throw Error("Must provide either datasetName or datasetId");if(void 0!==o&&void 0!==i)throw Error("Must provide either datasetName or datasetId, not both");void 0===o&&(o=(await this.readDataset({datasetName:i})).id);let l=t.map((e,t)=>({dataset_id:o,inputs:e,outputs:r?r[t]:void 0,id:a?a[t]:void 0,source_run_id:n?n[t]:void 0})),u=await this.caller.call(fetch,`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms)});if(!u.ok)throw Error(`Failed to create examples: ${u.status} ${u.statusText}`);return await u.json()}async createLLMExample(e,t,r){return this.createExample({input:e},{output:t},r)}async createChatExample(e,t,r){let n=e.map(e=>(0,i.isLangChainMessage)(e)?(0,i.convertLangChainMessageToExample)(e):e),a=(0,i.isLangChainMessage)(t)?(0,i.convertLangChainMessageToExample)(t):t;return this.createExample({input:n},{output:a},r)}async readExample(e){m(e);let t=`/examples/${e}`;return await this._get(t)}async *listExamples({datasetId:e,datasetName:t,exampleIds:r}={}){let n;if(void 0!==e&&void 0!==t)throw Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)n=e;else if(void 0!==t)n=(await this.readDataset({datasetName:t})).id;else throw Error("Must provide a datasetName or datasetId");let a=new URLSearchParams({dataset:n});if(void 0!==r)for(let e of r)a.append("id",e);for await(let e of this._getPaginated("/examples",a))yield*e}async deleteExample(e){m(e);let t=`/examples/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async updateExample(e,t){m(e);let r=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw Error(`Failed to update example ${e}: ${r.status} ${r.statusText}`);return await r.json()}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:n,referenceExample:a}={loadChildRuns:!1}){let s;if("string"==typeof e)s=await this.readRun(e,{loadChildRuns:n});else if("object"==typeof e&&"id"in e)s=e;else throw Error(`Invalid run type: ${typeof e}`);null!==s.reference_example_id&&void 0!==s.reference_example_id&&(a=await this.readExample(s.reference_example_id));let i=await t.evaluateRun(s,a),o=r??{};i.evaluatorInfo&&(o={...o,...i.evaluatorInfo});let l=i.targetRunId??s.id;return await this.createFeedback(l,i.key,{score:i?.score,value:i?.value,comment:i?.comment,correction:i?.correction,sourceInfo:o,feedbackSourceType:"model",sourceRunId:i?.sourceRunId})}async createFeedback(e,t,{score:r,value:n,correction:s,comment:i,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:c,eager:d=!1}){let f={type:l??"api",metadata:o??{}};void 0===u||f?.metadata===void 0||f.metadata.__run||(f.metadata.__run={run_id:u}),f?.metadata!==void 0&&f.metadata.__run?.run_id!==void 0&&m(f.metadata.__run.run_id);let h={id:c??a.v4(),run_id:e,key:t,score:r,value:n,correction:s,comment:i,feedback_source:f},g=`${this.apiUrl}/feedback`+(d?"/eager":""),y=await this.caller.call(fetch,g,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms)});return await p(y,"create feedback"),h}async updateFeedback(e,{score:t,value:r,correction:n,comment:a}){let s={};null!=t&&(s.score=t),null!=r&&(s.value=r),null!=n&&(s.correction=n),null!=a&&(s.comment=a),m(e);let i=await this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)});await p(i,"update feedback")}async readFeedback(e){m(e);let t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){m(e);let t=`/feedback/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async *listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:r}={}){let n=new URLSearchParams;if(e&&n.append("run",e.join(",")),t)for(let e of t)n.append("key",e);if(r)for(let e of r)n.append("source",e);for await(let e of this._getPaginated("/feedback",n))yield*e}}},{uuid:"l36KR","./utils/async_caller.js":"bLfDs","./utils/messages.js":"lQU31","./utils/env.js":"6TaU5","./index.js":"cCB7g","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bLfDs:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"AsyncCaller",()=>c);var a=e("p-retry"),s=n.interopDefault(a),i=e("p-queue"),o=n.interopDefault(i);let l=[400,401,403,404,405,406,407,408],u=[409];class c{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;let t="default"in o.default?o.default.default:o.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>(0,s.default)(()=>e(...t).catch(e=>{if(e instanceof Error)throw e;throw Error(e)}),{onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError")||e?.code==="ECONNABORTED")throw e;let t=e?.response?.status;if(t){if(l.includes(+t))throw e;if(u.includes(+t))return}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(e=>e.ok?e:Promise.reject(e)))}}},{"p-retry":"hDMvm","p-queue":"kO9Cj","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hDMvm:[function(e,t,r){let n=e("67f41b35420203c"),a=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class s extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}let i=(e,t,r)=>{let n=r.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=n,e},o=e=>a.includes(e),l=(e,t)=>new Promise((r,a)=>{t={onFailedAttempt:()=>{},retries:10,...t};let l=n.operation(t);l.attempt(async n=>{try{r(await e(n))}catch(e){if(!(e instanceof Error)){a(TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));return}if(e instanceof s)l.stop(),a(e.originalError);else if(e instanceof TypeError&&!o(e.message))l.stop(),a(e);else{i(e,n,t);try{await t.onFailedAttempt(e)}catch(e){a(e);return}l.retry(e)||a(l.mainError())}}})});t.exports=l,t.exports.default=l,t.exports.AbortError=s},{"67f41b35420203c":"6LrBF"}],"6LrBF":[function(e,t,r){t.exports=e("4f22b206be44b97e")},{"4f22b206be44b97e":"bgrBC"}],bgrBC:[function(e,t,r){var n=e("a628df618ac3d4");r.operation=function(e){return new n(r.timeouts(e),{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},r.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var n=[],a=0;a<t.retries;a++)n.push(this.createTimeout(a,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(a,t)),n.sort(function(e,t){return e-t}),n},r.createTimeout=function(e,t){return Math.min(Math.round((t.randomize?Math.random()+1:1)*Math.max(t.minTimeout,1)*Math.pow(t.factor,e)),t.maxTimeout)},r.wrap=function(e,t,n){if(t instanceof Array&&(n=t,t=null),!n)for(var a in n=[],e)"function"==typeof e[a]&&n.push(a);for(var s=0;s<n.length;s++){var i=n[s],o=e[i];e[i]=(function(n){var a=r.operation(t),s=Array.prototype.slice.call(arguments,1),i=s.pop();s.push(function(e){a.retry(e)||(e&&(arguments[0]=a.mainError()),i.apply(this,arguments))}),a.attempt(function(){n.apply(e,s)})}).bind(e,o),e[i].options=t}}},{a628df618ac3d4:"6sDq5"}],"6sDq5":[function(e,t,r){function n(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var a=this._errors[n],s=a.message,i=(e[s]||0)+1;e[s]=i,i>=r&&(t=a,r=i)}return t}},{}],kO9Cj:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});let n=e("a178093eea54aebd"),a=e("d219d890bb7e8882"),s=e("4a792a8cd58e20a7"),i=()=>{},o=new a.TimeoutError;r.default=class extends n{constructor(e){var t,r,n,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=i,this._resolveIdle=i,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(a=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==a?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=i,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=i,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((r,n)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let s=void 0===this._timeout&&void 0===t.timeout?e():a.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(o)});r(await s)}catch(e){n(e)}this._next()};this._queue.enqueue(s,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},{a178093eea54aebd:"18IC9",d219d890bb7e8882:"1SPZv","4a792a8cd58e20a7":"6J1Cc"}],"18IC9":[function(e,t,r){var n=Object.prototype.hasOwnProperty,a="~";function s(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,r,n,s){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new i(r,n||e,s),l=a?a+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=a?a+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,i=Array(s);n<s;n++)i[n]=r[n].fn;return i},u.prototype.listenerCount=function(e){var t=a?a+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,s,i){var o=a?a+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,s),!0;case 6:return c.fn.call(c.context,t,r,n,s,i),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var p,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(p=1,l=Array(d-1);p<d;p++)l[p-1]=arguments[p];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var s=a?a+e:e;if(!this._events[s])return this;if(!t)return l(this,s),this;var i=this._events[s];if(i.fn)i.fn!==t||n&&!i.once||r&&i.context!==r||l(this,s);else{for(var o=0,u=[],c=i.length;o<c;o++)(i[o].fn!==t||n&&!i[o].once||r&&i[o].context!==r)&&u.push(i[o]);u.length?this._events[s]=1===u.length?u[0]:u:l(this,s)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&l(this,t)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=a,u.EventEmitter=u,t.exports=u},{}],"1SPZv":[function(e,t,r){let n=e("ed36938359c1cb6b");class a extends Error{constructor(e){super(e),this.name="TimeoutError"}}let s=(e,t,r)=>new Promise((s,i)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0){s(e);return}let o=setTimeout(()=>{if("function"==typeof r){try{s(r())}catch(e){i(e)}return}let n="string"==typeof r?r:`Promise timed out after ${t} milliseconds`,o=r instanceof Error?r:new a(n);"function"==typeof e.cancel&&e.cancel(),i(o)},t);n(e.then(s,i),()=>{clearTimeout(o)})});t.exports=s,t.exports.default=s,t.exports.TimeoutError=a},{ed36938359c1cb6b:"bvvkH"}],bvvkH:[function(e,t,r){t.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},{}],"6J1Cc":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});let n=e("9ebe1cec8dfae466");r.default=class{constructor(){this._queue=[]}enqueue(e,t){let r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(r);return}let a=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(a,0,r)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}},{"9ebe1cec8dfae466":"2Nr9E"}],"2Nr9E":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){let n=0,a=e.length;for(;a>0;){let s=a/2|0,i=n+s;0>=r(e[i],t)?(n=++i,a-=s+1):a=s}return n}},{}],lQU31:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return"function"==typeof e?._getType}function s(e){let t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}n.defineInteropFlag(r),n.export(r,"isLangChainMessage",()=>a),n.export(r,"convertLangChainMessageToExample",()=>s)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6TaU5":[function(e,t,r){let n,a,s;var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"isBrowser",()=>u),i.export(r,"isWebWorker",()=>c),i.export(r,"isJsDom",()=>d),i.export(r,"isDeno",()=>p),i.export(r,"isNode",()=>f),i.export(r,"getEnv",()=>h),i.export(r,"getRuntimeEnvironment",()=>m),i.export(r,"getLangChainEnvVars",()=>g),i.export(r,"getLangChainEnvVarsMetadata",()=>y),i.export(r,"getEnvironmentVariables",()=>v),i.export(r,"getEnvironmentVariable",()=>b),i.export(r,"setEnvironmentVariable",()=>_),i.export(r,"getShas",()=>w);var o=e("../index.js"),l=e("6a932e963f932781");let u=()=>"undefined"!=typeof window&&void 0!==window.document,c=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,d=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),p=()=>"undefined"!=typeof Deno,f=()=>void 0!==l&&void 0!==l.versions&&void 0!==l.versions.node&&!p(),h=()=>n||(n=u()?"browser":f()?"node":c()?"webworker":d()?"jsdom":p()?"deno":"other");async function m(){if(void 0===a){let e=h(),t=w();a={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:o.__version__,...t}}return a}function g(){let e=v()||{},t={};for(let[r,n]of Object.entries(e))r.startsWith("LANGCHAIN_")&&"string"==typeof n&&(t[r]=n);for(let e in t)if((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&"string"==typeof t[e]){let r=t[e];t[e]=r.slice(0,2)+"*".repeat(r.length-4)+r.slice(-2)}return t}function y(){let e=v()||{},t={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(let[n,a]of Object.entries(e))!n.startsWith("LANGCHAIN_")||"string"!=typeof a||r.includes(n)||n.toLowerCase().includes("key")||n.toLowerCase().includes("secret")||n.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===n?t.revision_id=a:t[n]=a);return t}function v(){try{if(void 0!==l&&l.env)return Object.entries(l.env).reduce((e,[t,r])=>(e[t]=String(r),e),{});return}catch(e){return}}function b(e){try{return void 0!==l?l.env?.[e]:void 0}catch(e){return}}function _(e,t){}function w(){if(void 0!==s)return s;let e={};for(let t of["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"]){let r=b(t);void 0!==r&&(e[t]=r)}return s=e,e}},{"6a932e963f932781":"7XEqq","../index.js":"cCB7g","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"9zMS3":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"convertToDottedOrderFormat",()=>l),n.export(r,"RunTree",()=>u);var a=e("uuid"),s=e("./utils/env.js"),i=e("./client.js");let o={};function l(e,t){return`${new Date(e).toISOString().slice(0,-1)}000Z`.replace(/[-:.]/g,"")+t}class u{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.assign(this,{...u.getDefaultConfig(),...e}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id:this.trace_id=this.id),!this.dotted_order){let e=l(this.start_time,this.id);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e}}static getDefaultConfig(){return{id:a.v4(),run_type:"chain",project_name:(0,s.getEnvironmentVariable)("LANGCHAIN_PROJECT")??(0,s.getEnvironmentVariable)("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:(0,s.getEnvironmentVariable)("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:(0,s.getEnvironmentVariable)("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{},client:new i.Client({})}}async createChild(e){let t=new u({...e,parent_run:this,project_name:this.project_name,client:this.client});return this.child_runs.push(t),t}async end(e,t,r=Date.now()){this.outputs=e,this.error=t,this.end_time=r}async _convertToCreate(e,t=!0){let r,n;let a=e.extra??{};for(let[e,t]of(a.runtime||(a.runtime={}),Object.entries(await (0,s.getRuntimeEnvironment)())))a.runtime[e]||(a.runtime[e]=t);return t?(n=e.parent_run?.id,r=[]):(r=await Promise.all(e.child_runs.map(e=>this._convertToCreate(e,t))),n=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:a,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:r,parent_run_id:n,trace_id:e.trace_id,dotted_order:e.dotted_order}}async postRun(e=!0){let t=await this._convertToCreate(this,!0);if(await this.client.createRun(t),!e){var r;for(let e of(o[r="Posting with excludeChildRuns=false is deprecated and will be removed in a future version."]||(console.warn(r),o[r]=!0),this.child_runs))await e.postRun(!1)}}async patchRun(){let e={end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:this.parent_run?.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id};await this.client.updateRun(this.id,e)}}},{uuid:"l36KR","./utils/env.js":"6TaU5","./client.js":"2VxwW","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2Th20":[function(e,t,r){let n;var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"isBrowser",()=>i),a.export(r,"isWebWorker",()=>o),a.export(r,"isJsDom",()=>l),a.export(r,"isDeno",()=>u),a.export(r,"isNode",()=>c),a.export(r,"getEnv",()=>d),a.export(r,"getRuntimeEnvironment",()=>p),a.export(r,"getEnvironmentVariable",()=>f);var s=e("d7d668f88b40f2c1");let i=()=>"undefined"!=typeof window&&void 0!==window.document,o=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,l=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),u=()=>"undefined"!=typeof Deno,c=()=>void 0!==s&&void 0!==s.versions&&void 0!==s.versions.node&&!u(),d=()=>i()?"browser":c()?"node":o()?"webworker":l()?"jsdom":u()?"deno":"other";async function p(){return void 0===n&&(n={library:"langchain-js",runtime:d()}),n}function f(e){try{return void 0!==s?s.env?.[e]:void 0}catch(e){return}}},{d7d668f88b40f2c1:"7XEqq","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],d5NXg:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/tracers/tracer_langchain_v1");n.exportAll(a,r)},{"@langchain/core/tracers/tracer_langchain_v1":"04iVd","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"04iVd":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/tracers/tracer_langchain_v1.js");n.exportAll(a,r)},{"../dist/tracers/tracer_langchain_v1.js":"Pa0ga","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],Pa0ga:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"LangChainTracerV1",()=>o);var a=e("../messages/index.js"),s=e("../utils/env.js"),i=e("./base.js");class o extends i.BaseTracer{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.getEnvironmentVariable)("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let e=(0,s.getEnvironmentVariable)("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){let t={start_time:Date.now(),name:e},r=await this.persistSession(t);return this.session=r,r}async loadSession(e){let t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)}async loadDefaultSession(){let e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){let t;let r=this.session??await this.loadDefaultSession(),n=e.serialized;if("llm"===e.run_type){let s=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(e=>(0,a.getBufferString)(e));t={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,prompts:s,response:e.outputs}}else if("chain"===e.run_type){let a=await Promise.all(e.child_runs.map(e=>this.convertV2RunToRun(e)));t={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:a.filter(e=>"llm"===e.type),child_chain_runs:a.filter(e=>"chain"===e.type),child_tool_runs:a.filter(e=>"tool"===e.type)}}else if("tool"===e.run_type){let a=await Promise.all(e.child_runs.map(e=>this.convertV2RunToRun(e)));t={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,tool_input:e.inputs.input,output:e.outputs?.output,action:JSON.stringify(n),child_llm_runs:a.filter(e=>"llm"===e.type),child_chain_runs:a.filter(e=>"chain"===e.type),child_tool_runs:a.filter(e=>"tool"===e.type)}}else throw Error(`Unknown run type: ${e.run_type}`);return t}async persistRun(e){let t,r;t="llm"===(r=void 0!==e.run_type?await this.convertV2RunToRun(e):e).type?`${this.endpoint}/llm-runs`:"chain"===r.type?`${this.endpoint}/chain-runs`:`${this.endpoint}/tool-runs`;let n=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(r)});n.ok||console.error(`Failed to persist run: ${n.status} ${n.statusText}`)}async persistSession(e){let t=`${this.endpoint}/sessions`,r=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return r.ok?{id:(await r.json()).id,...e}:(console.error(`Failed to persist session: ${r.status} ${r.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){let t;let r=await fetch(e,{method:"GET",headers:this.headers});if(!r.ok)return console.error(`Failed to load session: ${r.status} ${r.statusText}`),t={id:1,start_time:Date.now()},this.session=t,t;let n=await r.json();return 0===n.length?t={id:1,start_time:Date.now()}:[t]=n,this.session=t,t}}},{"../messages/index.js":"jMGwo","../utils/env.js":"2Th20","./base.js":"gsfZb","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jMGwo:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseMessage",()=>i),n.export(r,"BaseMessageChunk",()=>l),n.export(r,"HumanMessage",()=>u),n.export(r,"HumanMessageChunk",()=>c),n.export(r,"AIMessage",()=>d),n.export(r,"AIMessageChunk",()=>p),n.export(r,"SystemMessage",()=>f),n.export(r,"SystemMessageChunk",()=>h),n.export(r,"FunctionMessage",()=>m),n.export(r,"FunctionMessageChunk",()=>g),n.export(r,"ToolMessage",()=>y),n.export(r,"ToolMessageChunk",()=>v),n.export(r,"ChatMessage",()=>b),n.export(r,"isBaseMessage",()=>_),n.export(r,"isBaseMessageChunk",()=>w),n.export(r,"coerceMessageLikeToMessage",()=>j),n.export(r,"ChatMessageChunk",()=>x),n.export(r,"getBufferString",()=>S),n.export(r,"mapStoredMessageToChatMessage",()=>k),n.export(r,"mapStoredMessagesToChatMessages",()=>P),n.export(r,"mapChatMessagesToStoredMessages",()=>O);var a=e("../load/serializable.js");function s(e,t){return"string"==typeof e?"string"==typeof t?e+t:[{type:"text",text:e},...t]:Array.isArray(t)?[...e,...t]:[...e,{type:"text",text:t}]}class i extends a.Serializable{get text(){return"string"==typeof this.content?this.content:""}constructor(e,t){"string"==typeof e&&(e={content:e,additional_kwargs:t}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}toChunk(){let e=this._getType();if("human"===e)return new c({...this});if("ai"===e)return new p({...this});if("system"===e)return new h({...this});if("function"===e)return new g({...this});if(b.isInstance(this))return new x({...this});throw Error("Unknown message type.")}}function o(e){return Array.isArray(e)&&e.every(e=>"number"==typeof e.index)}class l extends i{static _mergeAdditionalKwargs(e,t){let r={...e};for(let[e,n]of Object.entries(t))if(void 0===r[e])r[e]=n;else if(typeof r[e]!=typeof n)throw Error(`additional_kwargs[${e}] already exists in the message chunk, but with a different type.`);else if("string"==typeof r[e])r[e]=r[e]+n;else if(Array.isArray(r[e])||"object"!=typeof r[e]){if("tool_calls"===e&&o(r[e])&&o(n))for(let t of n)r[e]?.[t.index]!==void 0?r[e]=r[e]?.map((e,r)=>r!==t.index?e:{...e,...t,function:{name:t.function.name??e.function.name,arguments:(e.function.arguments??"")+(t.function.arguments??"")}}):r[e][t.index]=t;else throw Error(`additional_kwargs[${e}] already exists in this message chunk.`)}else r[e]=this._mergeAdditionalKwargs(r[e],n);return r}}class u extends i{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class c extends l{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new c({content:s(this.content,e.content),additional_kwargs:c._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class d extends i{static lc_name(){return"AIMessage"}_getType(){return"ai"}}class p extends l{static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){return new p({content:s(this.content,e.content),additional_kwargs:p._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class f extends i{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class h extends l{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new h({content:s(this.content,e.content),additional_kwargs:h._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class m extends i{static lc_name(){return"FunctionMessage"}constructor(e,t){"string"==typeof e&&(e={content:e,name:t}),super(e)}_getType(){return"function"}}class g extends l{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new g({content:s(this.content,e.content),additional_kwargs:g._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:this.name??""})}}class y extends i{static lc_name(){return"ToolMessage"}constructor(e,t,r){"string"==typeof e&&(e={content:e,name:r,tool_call_id:t}),super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id}_getType(){return"tool"}}class v extends l{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new v({content:s(this.content,e.content),additional_kwargs:v._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),tool_call_id:this.tool_call_id})}}class b extends i{static lc_name(){return"ChatMessage"}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return"generic"===e._getType()}}function _(e){return"function"==typeof e?._getType}function w(e){return _(e)&&"function"==typeof e.concat}function j(e){if("string"==typeof e)return new u(e);if(_(e))return e;let[t,r]=e;if("human"===t||"user"===t)return new u({content:r});if("ai"===t||"assistant"===t)return new d({content:r});if("system"===t)return new f({content:r});throw Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}class x extends l{static lc_name(){return"ChatMessageChunk"}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new x({content:s(this.content,e.content),additional_kwargs:x._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}}function S(e,t="Human",r="AI"){let n=[];for(let a of e){let e;if("human"===a._getType())e=t;else if("ai"===a._getType())e=r;else if("system"===a._getType())e="System";else if("function"===a._getType())e="Function";else if("tool"===a._getType())e="Tool";else if("generic"===a._getType())e=a.role;else throw Error(`Got unsupported message type: ${a._getType()}`);let s=a.name?`${a.name}, `:"";n.push(`${e}: ${s}${a.content}`)}return n.join("\n")}function k(e){let t=void 0!==e.data?e:{type:e.type,data:{content:e.text,role:e.role,name:void 0,tool_call_id:void 0}};switch(t.type){case"human":return new u(t.data);case"ai":return new d(t.data);case"system":return new f(t.data);case"function":if(void 0===t.data.name)throw Error("Name must be defined for function messages");return new m(t.data);case"tool":if(void 0===t.data.tool_call_id)throw Error("Tool call ID must be defined for tool messages");return new y(t.data);case"chat":if(void 0===t.data.role)throw Error("Role must be defined for chat messages");return new b(t.data);default:throw Error(`Got unexpected type: ${t.type}`)}}function P(e){return e.map(k)}function O(e){return e.map(e=>e.toDict())}},{"../load/serializable.js":"ihLrn","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6q09U":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/tracers/initialize");n.exportAll(a,r)},{"@langchain/core/tracers/initialize":"gkbHS","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gkbHS:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/tracers/initialize.js");n.exportAll(a,r)},{"../dist/tracers/initialize.js":"kuqFT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kuqFT:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getTracingCallbackHandler",()=>i),n.export(r,"getTracingV2CallbackHandler",()=>o);var a=e("./tracer_langchain.js"),s=e("./tracer_langchain_v1.js");async function i(e){let t=new s.LangChainTracerV1;return e?await t.loadSession(e):await t.loadDefaultSession(),t}async function o(){return new a.LangChainTracer}},{"./tracer_langchain.js":"dB0hq","./tracer_langchain_v1.js":"Pa0ga","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4iEvs":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/callbacks/manager");n.exportAll(a,r)},{"@langchain/core/callbacks/manager":"9q1Cx","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"9q1Cx":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/callbacks/manager.js");n.exportAll(a,r)},{"../dist/callbacks/manager.js":"fZx9W","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fZx9W:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"parseCallbackConfigArg",()=>p),n.export(r,"BaseCallbackManager",()=>f),n.export(r,"CallbackManagerForRetrieverRun",()=>m),n.export(r,"CallbackManagerForLLMRun",()=>g),n.export(r,"CallbackManagerForChainRun",()=>y),n.export(r,"CallbackManagerForToolRun",()=>v),n.export(r,"CallbackManager",()=>b),n.export(r,"TraceGroup",()=>w),n.export(r,"traceAsGroup",()=>j);var a=e("uuid"),s=e("./base.js"),i=e("../tracers/console.js"),o=e("../tracers/initialize.js"),l=e("../messages/index.js"),u=e("../utils/env.js"),c=e("../tracers/tracer_langchain.js"),d=e("./promises.js");function p(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}}class f{setHandler(e){return this.setHandlers([e])}}class h{constructor(e,t,r,n,a,s,i,o){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:o})}async handleText(e){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{try{await t.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleText: ${e}`)}},t.awaitHandlers)))}}class m extends h{getChild(e){let t=new b(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleRetriever`)}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleRetrieverError: ${e}`)}},t.awaitHandlers)))}}class g extends h{async handleLLMNewToken(e,t,r,n,a,s){await Promise.all(this.handlers.map(r=>(0,d.consumeCallback)(async()=>{if(!r.ignoreLLM)try{await r.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,s)}catch(e){console.error(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${e}`)}},r.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreLLM)try{await t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${e}`)}},t.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreLLM)try{await t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${e}`)}},t.awaitHandlers)))}}class y extends h{getChild(e){let t=new b(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,n,a){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreChain)try{await t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,a)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleChainError: ${e}`)}},t.awaitHandlers)))}async handleChainEnd(e,t,r,n,a){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreChain)try{await t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,a)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleChainEnd: ${e}`)}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${e}`)}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${e}`)}},t.awaitHandlers)))}}class v extends h{getChild(e){let t=new b(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await t.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${e}`)}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>(0,d.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(e){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${e}`)}},t.awaitHandlers)))}}class b extends f{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}async handleLLMStart(e,t,r,n,s,i,o,l){return Promise.all(t.map(async t=>{let r=(0,a.v4)();return await Promise.all(this.handlers.map(n=>(0,d.consumeCallback)(async()=>{if(!n.ignoreLLM)try{await n.handleLLMStart?.(e,[t],r,this._parentRunId,s,this.tags,this.metadata,l)}catch(e){console.error(`Error in handler ${n.constructor.name}, handleLLMStart: ${e}`)}},n.awaitHandlers))),new g(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r,n,s,i,o,u){return Promise.all(t.map(async t=>{let r=(0,a.v4)();return await Promise.all(this.handlers.map(n=>(0,d.consumeCallback)(async()=>{if(!n.ignoreLLM)try{if(n.handleChatModelStart)await n.handleChatModelStart?.(e,[t],r,this._parentRunId,s,this.tags,this.metadata,u);else if(n.handleLLMStart){let a=(0,l.getBufferString)(t);await n.handleLLMStart?.(e,[a],r,this._parentRunId,s,this.tags,this.metadata,u)}}catch(e){console.error(`Error in handler ${n.constructor.name}, handleLLMStart: ${e}`)}},n.awaitHandlers))),new g(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=(0,a.v4)(),n,s,i,o){return await Promise.all(this.handlers.map(a=>(0,d.consumeCallback)(async()=>{if(!a.ignoreChain)try{await a.handleChainStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,n,o)}catch(e){console.error(`Error in handler ${a.constructor.name}, handleChainStart: ${e}`)}},a.awaitHandlers))),new y(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=(0,a.v4)(),n,s,i,o){return await Promise.all(this.handlers.map(n=>(0,d.consumeCallback)(async()=>{if(!n.ignoreAgent)try{await n.handleToolStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,o)}catch(e){console.error(`Error in handler ${n.constructor.name}, handleToolStart: ${e}`)}},n.awaitHandlers))),new v(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=(0,a.v4)(),n,s,i,o){return await Promise.all(this.handlers.map(n=>(0,d.consumeCallback)(async()=>{if(!n.ignoreRetriever)try{await n.handleRetrieverStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,o)}catch(e){console.error(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${e}`)}},n.awaitHandlers))),new m(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){for(let r of(this.handlers=[],this.inheritableHandlers=[],e))this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){let r=new b(this._parentRunId);for(let e of this.handlers){let t=this.inheritableHandlers.includes(e);r.addHandler(e,t)}for(let e of this.tags){let t=this.inheritableTags.includes(e);r.addTags([e],t)}for(let e of Object.keys(this.metadata)){let t=Object.keys(this.inheritableMetadata).includes(e);r.addMetadata({[e]:this.metadata[e]},t)}for(let n of e)r.handlers.filter(e=>"console_callback_handler"===e.name).some(e=>e.name===n.name)||r.addHandler(n,t);return r}static fromHandlers(e){class t extends s.BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.v4)()}),Object.assign(this,e)}}let r=new this;return r.addHandler(new t),r}static async configure(e,t,r,n,a,s,l){let c;(e||t)&&(Array.isArray(e)||!e?(c=new b).setHandlers(e?.map(_)??[],!0):c=e,c=c.copy(Array.isArray(t)?t.map(_):t?.handlers,!1));let d="true"===(0,u.getEnvironmentVariable)("LANGCHAIN_VERBOSE")||l?.verbose,p="true"===(0,u.getEnvironmentVariable)("LANGCHAIN_TRACING_V2"),f=p||((0,u.getEnvironmentVariable)("LANGCHAIN_TRACING")??!1);if(d||f){if(c||(c=new b),d&&!c.handlers.some(e=>e.name===i.ConsoleCallbackHandler.prototype.name)){let e=new i.ConsoleCallbackHandler;c.addHandler(e,!0)}if(f&&!c.handlers.some(e=>"langchain_tracer"===e.name)){if(p)c.addHandler(await (0,o.getTracingV2CallbackHandler)(),!0);else{let e=(0,u.getEnvironmentVariable)("LANGCHAIN_PROJECT")&&(0,u.getEnvironmentVariable)("LANGCHAIN_SESSION");c.addHandler(await (0,o.getTracingCallbackHandler)(e),!0)}}}return(r||n)&&c&&(c.addTags(r??[]),c.addTags(n??[],!1)),(a||s)&&c&&(c.addMetadata(a??{}),c.addMetadata(s??{},!1)),c}}function _(e){return"name"in e?e:(0,s.BaseCallbackHandler).fromMethods(e)}class w{constructor(e,t){Object.defineProperty(this,"groupName",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"runManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}async getTraceGroupCallbackManager(e,t,r){let n=new c.LangChainTracer(r),a=await b.configure([n]),s=await a?.handleChainStart({lc:1,type:"not_implemented",id:["langchain","callbacks","groups",e]},t??{});if(!s)throw Error("Failed to create run group callback manager.");return s}async start(e){return this.runManager||(this.runManager=await this.getTraceGroupCallbackManager(this.groupName,e,this.options)),this.runManager.getChild()}async error(e){this.runManager&&(await this.runManager.handleChainError(e),this.runManager=void 0)}async end(e){this.runManager&&(await this.runManager.handleChainEnd(e??{}),this.runManager=void 0)}}async function j(e,t,...r){let n=new w(e.name,e),a=await n.start({...r});try{let e=await t(a,...r);return await n.end(e&&!Array.isArray(e)&&"object"==typeof e?e:{output:e}),e}catch(e){throw await n.error(e),e}}},{uuid:"l36KR","./base.js":"f3sIf","../tracers/console.js":"fPFQ8","../tracers/initialize.js":"kuqFT","../messages/index.js":"jMGwo","../utils/env.js":"2Th20","../tracers/tracer_langchain.js":"dB0hq","./promises.js":"3BeNh","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3BeNh":[function(e,t,r){let n;var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"consumeCallback",()=>o),a.export(r,"awaitAllCallbacks",()=>l);var s=e("p-queue"),i=a.interopDefault(s);async function o(e,t){!0===t?await e():(void 0===n&&(n=new("default"in i.default?i.default.default:i.default)({autoStart:!0,concurrency:1})),n.add(e))}function l(){return void 0!==n?n.onIdle():Promise.resolve()}},{"p-queue":"kO9Cj","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jhcTW:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/callbacks/promises");n.exportAll(a,r)},{"@langchain/core/callbacks/promises":"2utgP","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2utgP":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/callbacks/promises.js");n.exportAll(a,r)},{"../dist/callbacks/promises.js":"3BeNh","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8GN0O":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/chat_models/openai.js");n.exportAll(a,r)},{"../dist/chat_models/openai.js":"7ZQZS","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7ZQZS":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ChatOpenAI",()=>g),n.export(r,"PromptLayerChatOpenAI",()=>y);var a=e("openai"),s=e("../schema/index.js"),i=e("../tools/convert_to_openai.js"),o=e("../util/azure.js"),l=e("../util/env.js"),u=e("../util/prompt-layer.js"),c=e("./base.js"),d=e("../util/openai.js"),p=e("../util/openai-format-fndef.js"),f=e("31d71f9c9c51b557");function h(e){let t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!(0,s.ChatMessage).isInstance(e))throw Error("Invalid generic chat message");return"system"!==e.role&&"assistant"!==e.role&&"user"!==e.role&&"function"!==e.role&&"tool"!==e.role&&console.warn(`Unknown message role: ${e.role}`),e.role;default:throw Error(`Unknown message type: ${t}`)}}function m(e){return e.map(e=>({role:h(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id}))}class g extends c.BaseChatModel{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,t){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??(0,l.getEnvironmentVariable)("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??(0,l.getEnvironmentVariable)("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,l.getEnvironmentVariable)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=e?.azureOpenAIApiDeploymentName??(0,l.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??(0,l.getEnvironmentVariable)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,l.getEnvironmentVariable)("AZURE_OPENAI_BASE_PATH"),this.organization=e?.configuration?.organization??(0,l.getEnvironmentVariable)("OPENAI_ORGANIZATION"),this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.maxTokens=e?.maxTokens,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stop,this.user=e?.user,this.streaming=e?.streaming??!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw Error("Azure OpenAI API version not found");this.openAIApiKey=this.openAIApiKey??""}this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,baseURL:t?.basePath??e?.configuration?.basePath,dangerouslyAllowBrowser:!0,defaultHeaders:t?.baseOptions?.headers??e?.configuration?.baseOptions?.headers,defaultQuery:t?.baseOptions?.params??e?.configuration?.baseOptions?.params,...t,...e?.configuration}}invocationParams(e){var t;return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:-1===this.maxTokens?void 0:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stop,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:void 0!==(t=e?.tools)&&t.every(e=>Array.isArray(e.lc_namespace))?e?.tools.map(i.formatToOpenAITool):e?.tools,tool_choice:e?.tool_choice,response_format:e?.response_format,seed:e?.seed,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}async *_streamResponseChunks(e,t,r){let n;let a=m(e),i={...this.invocationParams(t),messages:a,stream:!0};for await(let e of(await this.completionWithRetry(i,t))){let a=e?.choices[0];if(!a)continue;let{delta:i}=a;if(!i)continue;let o=function(e,t){let r;let n=e.role??t,a=e.content??"";return(r=e.function_call?{function_call:e.function_call}:e.tool_calls?{tool_calls:e.tool_calls}:{},"user"===n)?new s.HumanMessageChunk({content:a}):"assistant"===n?new s.AIMessageChunk({content:a,additional_kwargs:r}):"system"===n?new s.SystemMessageChunk({content:a}):"function"===n?new s.FunctionMessageChunk({content:a,additional_kwargs:r,name:e.name}):"tool"===n?new s.ToolMessageChunk({content:a,additional_kwargs:r,tool_call_id:e.tool_call_id}):new s.ChatMessageChunk({content:a,role:n})}(i,n);n=i.role??n;let l={prompt:t.promptIndex??0,completion:a.index??0};if("string"!=typeof o.content){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let u=new s.ChatGenerationChunk({message:o,text:o.content,generationInfo:l});yield u,r?.handleLLMNewToken(u.text??"",l,void 0,void 0,void 0,{chunk:u})}if(t.signal?.aborted)throw Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,t,r){let n={},a=this.invocationParams(t),i=m(e);if(a.stream){let a=this._streamResponseChunks(e,t,r),s={};for await(let e of a){let t=e.generationInfo?.completion??0;void 0===s[t]?s[t]=e:s[t]=s[t].concat(e)}let i=Object.entries(s).sort(([e],[t])=>parseInt(e,10)-parseInt(t,10)).map(([e,t])=>t),{functions:o,function_call:l}=this.invocationParams(t),u=await this.getEstimatedTokenCountFromPrompt(e,o,l),c=await this.getNumTokensFromGenerations(i);return n.promptTokens=u,n.completionTokens=c,n.totalTokens=u+c,{generations:i,llmOutput:{estimatedTokenUsage:n}}}{let e=await this.completionWithRetry({...a,stream:!1,messages:i},{signal:t?.signal,...t?.options}),{completion_tokens:r,prompt_tokens:l,total_tokens:u}=e?.usage??{};r&&(n.completionTokens=(n.completionTokens??0)+r),l&&(n.promptTokens=(n.promptTokens??0)+l),u&&(n.totalTokens=(n.totalTokens??0)+u);let c=[];for(let t of e?.choices??[]){var o;let e={text:t.message?.content??"",message:"assistant"===(o=t.message??{role:"assistant"}).role?new s.AIMessage(o.content||"",{function_call:o.function_call,tool_calls:o.tool_calls}):new s.ChatMessage(o.content||"",o.role??"unknown")};t.finish_reason&&(e.generationInfo={finish_reason:t.finish_reason}),c.push(e)}return{generations:c,llmOutput:{tokenUsage:n}}}}async getEstimatedTokenCountFromPrompt(e,t,r){let n=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&"auto"!==r){let e=(0,p.formatFunctionDefinitions)(t);n+=await this.getNumTokens(e)+9}return t&&e.find(e=>"system"===e._getType())&&(n-=4),"none"===r?n+=1:"object"==typeof r&&(n+=await this.getNumTokens(r.name)+4),n}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async e=>e.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([e.message])).countPerMessage[0]:await this.getNumTokens(e.message.content)))).reduce((e,t)=>e+t,0)}async getNumTokensFromMessages(e){let t=0,r=0,n=0;"gpt-3.5-turbo-0301"===this.modelName?(r=4,n=-1):(r=3,n=1);let a=await Promise.all(e.map(async e=>{let a=await this.getNumTokens(e.content),s=await this.getNumTokens(h(e)),i=void 0!==e.name?n+await this.getNumTokens(e.name):0,o=a+r+s+i;return"function"===e._getType()&&(o-=2),e.additional_kwargs?.function_call&&(o+=3),e?.additional_kwargs.function_call?.name&&(o+=await this.getNumTokens(e.additional_kwargs.function_call?.name)),e.additional_kwargs.function_call?.arguments&&(o+=await this.getNumTokens(JSON.stringify(JSON.parse(e.additional_kwargs.function_call?.arguments)))),t+=o,o}));return{totalCount:t+=3,countPerMessage:a}}async completionWithRetry(e,t){let r=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,r)}catch(e){throw(0,d.wrapOpenAIClientError)(e)}})}_getClientOptions(e){if(!this.client){let e={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},t=(0,o.getEndpoint)(e),r={...this.clientConfig,baseURL:t,timeout:this.timeout,maxRetries:0};r.baseURL||delete r.baseURL,this.client=new a.OpenAI(r)}let t={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),t}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((e,t)=>(t&&t.tokenUsage&&(e.tokenUsage.completionTokens+=t.tokenUsage.completionTokens??0,e.tokenUsage.promptTokens+=t.tokenUsage.promptTokens??0,e.tokenUsage.totalTokens+=t.tokenUsage.totalTokens??0),e),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}}class y extends g{constructor(e){super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.promptLayerApiKey=e?.promptLayerApiKey??(void 0!==f?f.env?.PROMPTLAYER_API_KEY:void 0),this.plTags=e?.plTags??[],this.returnPromptLayerId=e?.returnPromptLayerId??!1}async _generate(e,t,r){let n;let a=Date.now();n=Array.isArray(t)?{stop:t}:t?.timeout&&!t.signal?{...t,signal:AbortSignal.timeout(t.timeout)}:t??{};let s=await super._generate(e,n,r),i=Date.now(),o=e=>{let t;if("human"===e._getType())t={role:"user",content:e.content};else if("ai"===e._getType())t={role:"assistant",content:e.content};else if("function"===e._getType())t={role:"assistant",content:e.content};else if("system"===e._getType())t={role:"system",content:e.content};else if("generic"===e._getType())t={role:e.role,content:e.content};else throw Error(`Got unknown type ${e}`);return t},l=(e,t)=>{let r={...this.invocationParams(),model:this.modelName};if(t?.stop&&Object.keys(r).includes("stop"))throw Error("`stop` found in both the input and default params.");return e.map(e=>o(e))};for(let t=0;t<s.generations.length;t+=1){let r;let o=s.generations[t],c=l(e,n),d=[{content:o.text,role:h(o.message)}],p=await (0,u.promptLayerTrackRequest)(this.caller,"langchain.PromptLayerChatOpenAI",{...this._identifyingParams(),messages:c,stream:!1},this.plTags,d,a,i,this.promptLayerApiKey);!0===this.returnPromptLayerId&&(!0===p.success&&(r=p.request_id),o.generationInfo&&"object"==typeof o.generationInfo||(o.generationInfo={}),o.generationInfo.promptLayerRequestId=r)}return s}}},{"31d71f9c9c51b557":"7XEqq",openai:"j1V7m","../schema/index.js":"gyLhg","../tools/convert_to_openai.js":"hAjqs","../util/azure.js":"elFKd","../util/env.js":"l2Yhq","../util/prompt-layer.js":"70pMn","./base.js":"1gIM4","../util/openai.js":"cZOiV","../util/openai-format-fndef.js":"gwHWa","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],j1V7m:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"OpenAIError",()=>i.OpenAIError),n.export(r,"APIError",()=>i.APIError),n.export(r,"APIConnectionError",()=>i.APIConnectionError),n.export(r,"APIConnectionTimeoutError",()=>i.APIConnectionTimeoutError),n.export(r,"APIUserAbortError",()=>i.APIUserAbortError),n.export(r,"NotFoundError",()=>i.NotFoundError),n.export(r,"ConflictError",()=>i.ConflictError),n.export(r,"RateLimitError",()=>i.RateLimitError),n.export(r,"BadRequestError",()=>i.BadRequestError),n.export(r,"AuthenticationError",()=>i.AuthenticationError),n.export(r,"InternalServerError",()=>i.InternalServerError),n.export(r,"PermissionDeniedError",()=>i.PermissionDeniedError),n.export(r,"UnprocessableEntityError",()=>i.UnprocessableEntityError),n.export(r,"OpenAI",()=>w),n.export(r,"toFile",()=>j),n.export(r,"fileFromPath",()=>x),n.export(r,"AzureOpenAI",()=>S);var a=e("./internal/qs/index.mjs"),s=e("./core.mjs"),i=e("./error.mjs");e("./pagination.mjs");var o=e("./uploads.mjs"),l=e("./resources/index.mjs"),u=e("./resources/batches.mjs"),c=e("./resources/completions.mjs"),d=e("./resources/embeddings.mjs"),p=e("./resources/files.mjs"),f=e("./resources/images.mjs"),h=e("./resources/models.mjs"),m=e("./resources/moderations.mjs"),g=e("./resources/audio/audio.mjs"),y=e("./resources/beta/beta.mjs"),v=e("./resources/chat/chat.mjs"),b=e("./resources/fine-tuning/fine-tuning.mjs"),_=e("./resources/uploads/uploads.mjs");class w extends s.APIClient{constructor({baseURL:e=s.readEnv("OPENAI_BASE_URL"),apiKey:t=s.readEnv("OPENAI_API_KEY"),organization:r=s.readEnv("OPENAI_ORG_ID")??null,project:n=s.readEnv("OPENAI_PROJECT_ID")??null,...a}={}){if(void 0===t)throw new i.OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let o={apiKey:t,organization:r,project:n,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&s.isRunningInBrowser())throw new i.OpenAIError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new l.Completions(this),this.chat=new l.Chat(this),this.embeddings=new l.Embeddings(this),this.files=new l.Files(this),this.images=new l.Images(this),this.audio=new l.Audio(this),this.moderations=new l.Moderations(this),this.models=new l.Models(this),this.fineTuning=new l.FineTuning(this),this.beta=new l.Beta(this),this.batches=new l.Batches(this),this.uploads=new l.Uploads(this),this._options=o,this.apiKey=t,this.organization=r,this.project=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return a.stringify(e,{arrayFormat:"brackets"})}}w.OpenAI=w,w.DEFAULT_TIMEOUT=6e5,w.OpenAIError=i.OpenAIError,w.APIError=i.APIError,w.APIConnectionError=i.APIConnectionError,w.APIConnectionTimeoutError=i.APIConnectionTimeoutError,w.APIUserAbortError=i.APIUserAbortError,w.NotFoundError=i.NotFoundError,w.ConflictError=i.ConflictError,w.RateLimitError=i.RateLimitError,w.BadRequestError=i.BadRequestError,w.AuthenticationError=i.AuthenticationError,w.InternalServerError=i.InternalServerError,w.PermissionDeniedError=i.PermissionDeniedError,w.UnprocessableEntityError=i.UnprocessableEntityError,w.toFile=o.toFile,w.fileFromPath=o.fileFromPath;var j=o.toFile,x=o.fileFromPath;w.Completions=c.Completions,w.Chat=v.Chat,w.Embeddings=d.Embeddings,w.Files=p.Files,w.FileObjectsPage=p.FileObjectsPage,w.Images=f.Images,w.Audio=g.Audio,w.Moderations=m.Moderations,w.Models=h.Models,w.ModelsPage=h.ModelsPage,w.FineTuning=b.FineTuning,w.Beta=y.Beta,w.Batches=u.Batches,w.BatchesPage=u.BatchesPage,w.Uploads=_.Uploads;class S extends w{constructor({baseURL:e=s.readEnv("OPENAI_BASE_URL"),apiKey:t=s.readEnv("AZURE_OPENAI_API_KEY"),apiVersion:r=s.readEnv("OPENAI_API_VERSION"),endpoint:n,deployment:a,azureADTokenProvider:o,dangerouslyAllowBrowser:l,...u}={}){if(!r)throw new i.OpenAIError("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if("function"==typeof o&&(l=!0),!o&&!t)throw new i.OpenAIError("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(o&&t)throw new i.OpenAIError("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(t??(t=P),u.defaultQuery={...u.defaultQuery,"api-version":r},e){if(n)throw new i.OpenAIError("baseURL and endpoint are mutually exclusive")}else{if(n||(n=void 0),!n)throw new i.OpenAIError("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");e=`${n}/openai`}super({apiKey:t,baseURL:e,...u,...void 0!==l?{dangerouslyAllowBrowser:l}:{}}),this.apiVersion="",this._azureADTokenProvider=o,this.apiVersion=r,this._deployment=a}buildRequest(e){if(k.has(e.path)&&"post"===e.method&&void 0!==e.body){if(!s.isObj(e.body))throw Error("Expected request body to be an object");let t=this._deployment||e.body.model;void 0===t||this.baseURL.includes("/deployments")||(e.path=`/deployments/${t}${e.path}`)}return super.buildRequest(e)}async _getAzureADToken(){if("function"==typeof this._azureADTokenProvider){let e=await this._azureADTokenProvider();if(!e||"string"!=typeof e)throw new i.OpenAIError(`Expected 'azureADTokenProvider' argument to return a string but it returned ${e}`);return e}}authHeaders(e){return{}}async prepareOptions(e){if(e.headers?.["api-key"])return super.prepareOptions(e);let t=await this._getAzureADToken();if(e.headers??(e.headers={}),t)e.headers.Authorization=`Bearer ${t}`;else if(this.apiKey!==P)e.headers["api-key"]=this.apiKey;else throw new i.OpenAIError("Unable to handle auth");return super.prepareOptions(e)}}let k=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations"]),P="<Missing Key>";r.default=w},{"./internal/qs/index.mjs":"3jxcB","./core.mjs":"gJfyr","./error.mjs":"7evlg","./pagination.mjs":"hLuYs","./uploads.mjs":"hFjJx","./resources/index.mjs":"9rWkI","./resources/batches.mjs":"gxQDk","./resources/completions.mjs":"9FShi","./resources/embeddings.mjs":"eHHVh","./resources/files.mjs":"5v55L","./resources/images.mjs":"jEf0n","./resources/models.mjs":"4AK6L","./resources/moderations.mjs":"2qkYg","./resources/audio/audio.mjs":"huwUC","./resources/beta/beta.mjs":"ehqdK","./resources/chat/chat.mjs":"g5D3a","./resources/fine-tuning/fine-tuning.mjs":"edwwe","./resources/uploads/uploads.mjs":"3MwQK","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3jxcB":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"stringify",()=>s.stringify),n.export(r,"formats",()=>i);var a=e("./formats.mjs"),s=e("./stringify.mjs");let i={formatters:a.formatters,RFC1738:a.RFC1738,RFC3986:a.RFC3986,default:a.default_format}},{"./formats.mjs":"bdNfR","./stringify.mjs":"03RHB","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bdNfR:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default_format",()=>a),n.export(r,"formatters",()=>s),n.export(r,"RFC1738",()=>i),n.export(r,"RFC3986",()=>o);let a="RFC3986",s={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},i="RFC1738",o="RFC3986"},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"03RHB":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"stringify",()=>h);var a=e("./utils.mjs"),s=e("./formats.mjs");let i=Object.prototype.hasOwnProperty,o={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},l=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,l(t)?t:[t])},d=Date.prototype.toISOString,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:a.encode,encodeValuesOnly:!1,format:s.default_format,formatter:s.formatters[s.default_format],indices:!1,serializeDate:e=>d.call(e),skipNulls:!1,strictNullHandling:!1},f={};function h(e,t={}){let r,n=e,u=function(e=p){let t;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");let r=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=s.default_format;if(void 0!==e.format){if(!i.call(s.formatters,e.format))throw TypeError("Unknown format option provided.");n=e.format}let a=s.formatters[n],u=p.filter;if(("function"==typeof e.filter||l(e.filter))&&(u=e.filter),t=e.arrayFormat&&e.arrayFormat in o?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":p.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let c=void 0===e.allowDots?!0==!!e.encodeDotInKeys||p.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:c,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:t,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:p.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:u,format:n,formatter:a,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?n=(0,u.filter)("",n):l(u.filter)&&(r=u.filter);let d=[];if("object"!=typeof n||null===n)return"";let h=o[u.arrayFormat],m="comma"===h&&u.commaRoundTrip;r||(r=Object.keys(n)),u.sort&&r.sort(u.sort);let g=new WeakMap;for(let e=0;e<r.length;++e){let t=r[e];u.skipNulls&&null===n[t]||c(d,function e(t,r,n,s,i,o,u,d,h,m,g,y,v,b,_,w,j,x){var S;let k,P=t,O=x,I=0,C=!1;for(;void 0!==(O=O.get(f))&&!C;){let e=O.get(t);if(I+=1,void 0!==e){if(e===I)throw RangeError("Cyclic object value");C=!0}void 0===O.get(f)&&(I=0)}if("function"==typeof m?P=m(r,P):P instanceof Date?P=v?.(P):"comma"===n&&l(P)&&(P=(0,a.maybe_map)(P,function(e){return e instanceof Date?v?.(e):e})),null===P){if(o)return h&&!w?h(r,p.encoder,j,"key",b):r;P=""}if("string"==typeof(S=P)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||(0,a.is_buffer)(P)){if(h){let e=w?r:h(r,p.encoder,j,"key",b);return[_?.(e)+"="+_?.(h(P,p.encoder,j,"value",b))]}return[_?.(r)+"="+_?.(String(P))]}let E=[];if(void 0===P)return E;if("comma"===n&&l(P))w&&h&&(P=(0,a.maybe_map)(P,h)),k=[{value:P.length>0?P.join(",")||null:void 0}];else if(l(m))k=m;else{let e=Object.keys(P);k=g?e.sort(g):e}let T=d?String(r).replace(/\./g,"%2E"):String(r),A=s&&l(P)&&1===P.length?T+"[]":T;if(i&&l(P)&&0===P.length)return A+"[]";for(let r=0;r<k.length;++r){let a=k[r],p="object"==typeof a&&void 0!==a.value?a.value:P[a];if(u&&null===p)continue;let S=y&&d?a.replace(/\./g,"%2E"):a,O=l(P)?"function"==typeof n?n(A,S):A:A+(y?"."+S:"["+S+"]");x.set(t,I);let C=new WeakMap;C.set(f,x),c(E,e(p,O,n,s,i,o,u,d,"comma"===n&&w&&l(P)?null:h,m,g,y,v,b,_,w,j,C))}return E}(n[t],t,h,m,u.allowEmptyArrays,u.strictNullHandling,u.skipNulls,u.encodeDotInKeys,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}let y=d.join(u.delimiter),v=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),y.length>0?v+y:""}},{"./utils.mjs":"8T7ef","./formats.mjs":"bdNfR","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8T7ef":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"merge",()=>function e(t,r,n={}){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!s.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);let a=t;return(i(t)&&!i(r)&&(a=function(e,t){let r=t&&t.plainObjects?Object.create(null):{};for(let t=0;t<e.length;++t)void 0!==e[t]&&(r[t]=e[t]);return r}(t,n)),i(t)&&i(r))?(r.forEach(function(r,a){if(s.call(t,a)){let s=t[a];s&&"object"==typeof s&&r&&"object"==typeof r?t[a]=e(s,r,n):t.push(r)}else t[a]=r}),t):Object.keys(r).reduce(function(t,a){let i=r[a];return s.call(t,a)?t[a]=e(t[a],i,n):t[a]=i,t},a)}),n.export(r,"assign_single_source",()=>l),n.export(r,"decode",()=>u),n.export(r,"encode",()=>c),n.export(r,"compact",()=>d),n.export(r,"is_regexp",()=>p),n.export(r,"is_buffer",()=>f),n.export(r,"combine",()=>h),n.export(r,"maybe_map",()=>m);var a=e("./formats.mjs");let s=Object.prototype.hasOwnProperty,i=Array.isArray,o=(()=>{let e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();function l(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)}function u(e,t,r){let n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}}let c=(e,t,r,n,s)=>{if(0===e.length)return e;let i=e;if("symbol"==typeof e?i=Symbol.prototype.toString.call(e):"string"!=typeof e&&(i=String(e)),"iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let l="";for(let e=0;e<i.length;e+=1024){let t=i.length>=1024?i.slice(e,e+1024):i,r=[];for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||s===a.RFC1738&&(40===n||41===n)){r[r.length]=t.charAt(e);continue}if(n<128){r[r.length]=o[n];continue}if(n<2048){r[r.length]=o[192|n>>6]+o[128|63&n];continue}if(n<55296||n>=57344){r[r.length]=o[224|n>>12]+o[128|n>>6&63]+o[128|63&n];continue}e+=1,n=65536+((1023&n)<<10|1023&t.charCodeAt(e)),r[r.length]=o[240|n>>18]+o[128|n>>12&63]+o[128|n>>6&63]+o[128|63&n]}l+=r.join("")}return l};function d(e){let t=[{obj:{o:e},prop:"o"}],r=[];for(let e=0;e<t.length;++e){let n=t[e],a=n.obj[n.prop],s=Object.keys(a);for(let e=0;e<s.length;++e){let n=s[e],i=a[n];"object"==typeof i&&null!==i&&-1===r.indexOf(i)&&(t.push({obj:a,prop:n}),r.push(i))}}return function(e){for(;e.length>1;){let t=e.pop();if(!t)continue;let r=t.obj[t.prop];if(i(r)){let e=[];for(let t=0;t<r.length;++t)void 0!==r[t]&&e.push(r[t]);t.obj[t.prop]=e}}}(t),e}function p(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function f(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function h(e,t){return[].concat(e,t)}function m(e,t){if(i(e)){let r=[];for(let n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)}},{"./formats.mjs":"bdNfR","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gJfyr:[function(e,t,r){let n;var a,s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(r),s.export(r,"maybeMultipartFormRequestOptions",()=>c.maybeMultipartFormRequestOptions),s.export(r,"multipartFormRequestOptions",()=>c.multipartFormRequestOptions),s.export(r,"createForm",()=>c.createForm),s.export(r,"APIPromise",()=>y),s.export(r,"APIClient",()=>v),s.export(r,"AbstractPage",()=>b),s.export(r,"PagePromise",()=>_),s.export(r,"createResponseHeaders",()=>w),s.export(r,"isRequestOptions",()=>x),s.export(r,"safeJSON",()=>I),s.export(r,"sleep",()=>T),s.export(r,"castToError",()=>R),s.export(r,"ensurePresent",()=>N),s.export(r,"readEnv",()=>M),s.export(r,"coerceInteger",()=>L),s.export(r,"coerceFloat",()=>F),s.export(r,"coerceBoolean",()=>$),s.export(r,"maybeCoerceInteger",()=>D),s.export(r,"maybeCoerceFloat",()=>z),s.export(r,"maybeCoerceBoolean",()=>U),s.export(r,"isEmptyObj",()=>B),s.export(r,"hasOwn",()=>Z),s.export(r,"debug",()=>V),s.export(r,"isRunningInBrowser",()=>H),s.export(r,"isHeadersProtocol",()=>W),s.export(r,"getRequiredHeader",()=>J),s.export(r,"getHeader",()=>Q),s.export(r,"toBase64",()=>G),s.export(r,"isObj",()=>Y);var i=e("./version.mjs"),o=e("./streaming.mjs"),l=e("./error.mjs"),u=e("./_shims/index.mjs"),c=e("./uploads.mjs"),d=e("51905e5356e6c477").Buffer,p=e("a122544941e673a0"),f=function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},h=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};async function m(e){let{response:t}=e;if(e.options.stream)return(V("response",t.status,t.url,t.headers,t.body),e.options.__streamClass)?e.options.__streamClass.fromSSEResponse(t,e.controller):(0,o.Stream).fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;let r=t.headers.get("content-type");if(r?.includes("application/json")||r?.includes("application/vnd.api+json")){let e=await t.json();return V("response",t.status,t.url,t.headers,e),g(e,t)}let n=await t.text();return V("response",t.status,t.url,t.headers,n),n}function g(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class y extends Promise{constructor(e,t=m){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new y(this.responsePromise,async t=>g(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class v{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:n,fetch:a}){this.baseURL=e,this.maxRetries=A("maxRetries",t),this.timeout=A("timeout",r),this.httpAgent=n,this.fetch=a??u.fetch}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...O(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${K()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async r=>{let n=r&&(0,c.isBlobLike)(r?.body)?new DataView(await r.body.arrayBuffer()):r?.body instanceof DataView?r.body:r?.body instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r?.body)?new DataView(r.body.buffer):r?.body;return{method:e,path:t,...r,body:n}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if(void 0!==d)return d.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){let{method:r,path:n,query:a,headers:s={}}=e,i=ArrayBuffer.isView(e.body)||e.__binaryRequest&&"string"==typeof e.body?e.body:(0,c.isMultipartBody)(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,o=this.calculateContentLength(i),l=this.buildURL(n,a);"timeout"in e&&A("timeout",e.timeout);let d=e.timeout??this.timeout,p=e.httpAgent??this.httpAgent??(0,u.getDefaultAgent)(l),f=d+1e3;"number"==typeof p?.options?.timeout&&f>(p.options.timeout??0)&&(p.options.timeout=f),this.idempotencyHeader&&"get"!==r&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let h=this.buildHeaders({options:e,headers:s,contentLength:o,retryCount:t});return{req:{method:r,...i&&{body:i},headers:h,...p&&{agent:p},signal:e.signal??null},url:l,timeout:d}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:n}){let a={};r&&(a["content-length"]=r);let s=this.defaultHeaders(e);return q(a,s),q(a,t),(0,c.isMultipartBody)(e.body)&&"node"!==u.kind&&delete a["content-type"],void 0===Q(s,"x-stainless-retry-count")&&void 0===Q(t,"x-stainless-retry-count")&&(a["x-stainless-retry-count"]=String(n)),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,r,n){return(0,l.APIError).generate(e,t,r,n)}request(e,t=null){return new y(this.makeRequest(e,t))}async makeRequest(e,t){let r=await e,n=r.maxRetries??this.maxRetries;null==t&&(t=n),await this.prepareOptions(r);let{req:a,url:s,timeout:i}=this.buildRequest(r,{retryCount:n-t});if(await this.prepareRequest(a,{url:s,options:r}),V("request",s,r,a.headers),r.signal?.aborted)throw new l.APIUserAbortError;let o=new AbortController,u=await this.fetchWithTimeout(s,a,i,o).catch(R);if(u instanceof Error){if(r.signal?.aborted)throw new l.APIUserAbortError;if(t)return this.retryRequest(r,t);if("AbortError"===u.name)throw new l.APIConnectionTimeoutError;throw new l.APIConnectionError({cause:u})}let c=w(u.headers);if(!u.ok){if(t&&this.shouldRetry(u)){let e=`retrying, ${t} attempts remaining`;return V(`response (error; ${e})`,u.status,s,c),this.retryRequest(r,t,c)}let e=await u.text().catch(e=>R(e).message),n=I(e),a=n?void 0:e,i=t?"(error; no more retries left)":"(error; not retryable)";throw V(`response (error; ${i})`,u.status,s,c,a),this.makeStatusError(u.status,n,a,c)}return{response:u,options:r,controller:o}}requestAPIList(e,t){return new _(this,this.makeRequest(t,null),e)}buildURL(e,t){let r=new URL(E(e)?e:this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return B(n)||(t={...n,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new l.OpenAIError(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,n){let{signal:a,...s}=t||{};a&&a.addEventListener("abort",()=>n.abort());let i=setTimeout(()=>n.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:n.signal,...s}).finally(()=>{clearTimeout(i)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r){let n;let a=r?.["retry-after-ms"];if(a){let e=parseFloat(a);Number.isNaN(e)||(n=e)}let s=r?.["retry-after"];if(s&&!n){let e=parseFloat(s);n=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(n&&0<=n&&n<6e4)){let r=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,r)}return await T(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${i.VERSION}`}}class b{constructor(e,t,r,n){a.set(this,void 0),f(this,a,e,"f"),this.options=n,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new l.OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){for(let[r,n]of[...Object.entries(t.query||{}),...e.url.searchParams.entries()])e.url.searchParams.set(r,n);t.query=void 0,t.path=e.url.toString()}return await h(this,a,"f").requestAPIList(this.constructor,t)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(a=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class _ extends y{constructor(e,t,r){super(t,async t=>new r(e,t.response,await m(t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}let w=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){let r=t.toString();return e[r.toLowerCase()]||e[r]}}),j={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},x=e=>"object"==typeof e&&null!==e&&!B(e)&&Object.keys(e).every(e=>Z(j,e)),S=()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":P(Deno.build.os),"X-Stainless-Arch":k(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":p.version};if("[object process]"===Object.prototype.toString.call(void 0!==p?p:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":P(p.platform),"X-Stainless-Arch":k(p.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":p.version};let e=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let r=t.exec(navigator.userAgent);if(r){let t=r[1]||0,n=r[2]||0,a=r[3]||0;return{browser:e,version:`${t}.${n}.${a}`}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},k=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",P=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown",O=()=>n??(n=S()),I=e=>{try{return JSON.parse(e)}catch(e){return}},C=RegExp("^(?:[a-z]+:)?//","i"),E=e=>C.test(e),T=e=>new Promise(t=>setTimeout(t,e)),A=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new l.OpenAIError(`${e} must be an integer`);if(t<0)throw new l.OpenAIError(`${e} must be a positive integer`);return t},R=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return Error(JSON.stringify(e))}catch{}return Error(e)},N=e=>{if(null==e)throw new l.OpenAIError(`Expected a value to be given but received ${e} instead.`);return e},M=e=>void 0!==p?p.env?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0,L=e=>{if("number"==typeof e)return Math.round(e);if("string"==typeof e)return parseInt(e,10);throw new l.OpenAIError(`Could not coerce ${e} (type: ${typeof e}) into a number`)},F=e=>{if("number"==typeof e)return e;if("string"==typeof e)return parseFloat(e);throw new l.OpenAIError(`Could not coerce ${e} (type: ${typeof e}) into a number`)},$=e=>"boolean"==typeof e?e:"string"==typeof e?"true"===e:!!e,D=e=>{if(void 0!==e)return L(e)},z=e=>{if(void 0!==e)return F(e)},U=e=>{if(void 0!==e)return $(e)};function B(e){if(!e)return!0;for(let t in e)return!1;return!0}function Z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function q(e,t){for(let r in t){if(!Z(t,r))continue;let n=r.toLowerCase();if(!n)continue;let a=t[r];null===a?delete e[n]:void 0!==a&&(e[n]=a)}}function V(e,...t){void 0!==p&&p?.env?.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}let K=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),H=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator,W=e=>"function"==typeof e?.get,J=(e,t)=>{let r=Q(e,t);if(void 0===r)throw Error(`Could not find ${t} header`);return r},Q=(e,t)=>{let r=t.toLowerCase();if(W(e)){let n=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,r)=>t+r.toUpperCase());for(let a of[t,r,t.toUpperCase(),n]){let t=e.get(a);if(t)return t}}for(let[n,a]of Object.entries(e))if(n.toLowerCase()===r){if(Array.isArray(a)){if(a.length<=1)return a[0];return console.warn(`Received ${a.length} entries for the ${t} header, using the first entry.`),a[0]}return a}},G=e=>{if(!e)return"";if(void 0!==d)return d.from(e).toString("base64");if("undefined"!=typeof btoa)return btoa(e);throw new l.OpenAIError("Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined")};function Y(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}},{"51905e5356e6c477":"jfRjc",a122544941e673a0:"7XEqq","./version.mjs":"5owqL","./streaming.mjs":"lAnbY","./error.mjs":"7evlg","./_shims/index.mjs":"2tyEA","./uploads.mjs":"hFjJx","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jfRjc:[function(e,t,r){let n,a;var s=Object.create,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),p=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of l(t))c.call(e,a)||a===r||i(e,a,{get:()=>t[a],enumerable:!(n=o(t,a))||n.enumerable});return e},f=(e,t,r)=>(r=null!=e?s(u(e)):{},p(!t&&e&&e.__esModule?r:i(r,"default",{value:e,enumerable:!0}),e)),h=d(e=>{e.byteLength=function(e){var t=o(e),r=t[0],n=t[1];return(r+n)*3/4-n},e.toByteArray=function(e){var t,r,n=o(e),i=n[0],l=n[1],u=new s((i+l)*3/4-l),c=0,d=l>0?i-4:i;for(r=0;r<d;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===l&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===l&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},e.fromByteArray=function(e){for(var t,r=e.length,a=r%3,s=[],i=0,o=r-a;i<o;i+=16383)s.push(function(e,t,r){for(var a,s=[],i=t;i<r;i+=3)s.push(n[(a=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]))>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return s.join("")}(e,i,i+16383>o?o:i+16383));return 1===a?s.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===a&&s.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")};var t,r,n=[],a=[],s="u">typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0,r=i.length;t<r;++t)n[t]=i[t],a[i.charCodeAt(t)]=t;function o(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63}),m=d(e=>{e.read=function(e,t,r,n,a){var s,i,o=8*a-n-1,l=(1<<o)-1,u=l>>1,c=-7,d=r?a-1:0,p=r?-1:1,f=e[t+d];for(d+=p,s=f&(1<<-c)-1,f>>=-c,c+=o;c>0;s=256*s+e[t+d],d+=p,c-=8);for(i=s&(1<<-c)-1,s>>=-c,c+=n;c>0;i=256*i+e[t+d],d+=p,c-=8);if(0===s)s=1-u;else{if(s===l)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,n),s-=u}return(f?-1:1)*i*Math.pow(2,s-n)},e.write=function(e,t,r,n,a,s){var i,o,l,u=8*s-a-1,c=(1<<u)-1,d=c>>1,p=23===a?5960464477539062e-23:0,f=n?0:s-1,h=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(o=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+d>=1?t+=p/l:t+=p*Math.pow(2,1-d),t*l>=2&&(i++,l/=2),i+d>=c?(o=0,i=c):i+d>=1?(o=(t*l-1)*Math.pow(2,a),i+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,a),i=0));a>=8;e[r+f]=255&o,f+=h,o/=256,a-=8);for(i=i<<a|o,u+=a;u>0;e[r+f]=255&i,f+=h,i/=256,u-=8);e[r+f-h]|=128*m}}),g=d(e=>{var t=h(),r=m(),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return l(e)}return i(e,t,r)}function i(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|p(e,t),n=a(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(F(e,Uint8Array)){let t=new Uint8Array(e);return c(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(F(e,ArrayBuffer)||e&&F(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(F(e,SharedArrayBuffer)||e&&F(e.buffer,SharedArrayBuffer)))return c(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return s.from(n,t,r);let i=function(e){var t;if(s.isBuffer(e)){let t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?a(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(i)return i;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return o(e),a(e<0?0:0|d(e))}function u(e){let t=e.length<0?0:0|d(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function c(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),s.prototype),n}function d(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return M(e).length;default:if(a)return n?-1:N(e).length;t=(""+t).toLowerCase(),a=!0}}function f(e,r,n){let a=!1;if((void 0===r||r<0)&&(r=0),r>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let a="";for(let n=t;n<r;++n)a+=$[e[n]];return a}(this,r,n);case"utf8":case"utf-8":return b(this,r,n);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}(this,r,n);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}(this,r,n);case"base64":var s,i;return s=r,i=n,0===s&&i===this.length?t.fromByteArray(this):t.fromByteArray(this.slice(s,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),a="";for(let e=0;e<n.length-1;e+=2)a+=String.fromCharCode(n[e]+256*n[e+1]);return a}(this,r,n);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function g(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,a){var i;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(i=r=+r)!=i&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return -1;r=e.length-1}else if(r<0){if(!a)return -1;r=0}if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,a);throw TypeError("val must be string, number or Buffer")}function v(e,t,r,n,a){let s,i=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;i=2,o/=2,l/=2,r/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){let n=-1;for(s=r;s<o;s++)if(u(e,s)===u(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===l)return n*i}else -1!==n&&(s-=s-n),n=-1}else for(r+l>o&&(r=o-l),s=r;s>=0;s--){let r=!0;for(let n=0;n<l;n++)if(u(e,s+n)!==u(t,n)){r=!1;break}if(r)return s}return -1}function b(e,t,r){r=Math.min(e.length,r);let n=[],a=t;for(;a<r;){let t=e[a],s=null,i=t>239?4:t>223?3:t>191?2:1;if(a+i<=r){let r,n,o,l;switch(i){case 1:t<128&&(s=t);break;case 2:(192&(r=e[a+1]))==128&&(l=(31&t)<<6|63&r)>127&&(s=l);break;case 3:r=e[a+1],n=e[a+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:r=e[a+1],n=e[a+2],o=e[a+3],(192&r)==128&&(192&n)==128&&(192&o)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&o)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),a+=i}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function _(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,n,a,i){if(!s.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function j(e,t,r,n,a){E(t,n,a,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,r}function x(e,t,r,n,a){E(t,n,a,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=i,i>>=8,e[r+2]=i,i>>=8,e[r+1]=i,i>>=8,e[r]=i,r+8}function S(e,t,r,n,a,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function k(e,t,n,a,s){return t=+t,n>>>=0,s||S(e,t,n,4,34028234663852886e22,-34028234663852886e22),r.write(e,t,n,a,23,4),n+4}function P(e,t,n,a,s){return t=+t,n>>>=0,s||S(e,t,n,8,17976931348623157e292,-17976931348623157e292),r.write(e,t,n,a,52,8),n+8}e.Buffer=s,e.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},e.INSPECT_MAX_BYTES=50,e.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!s.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,r){return i(e,t,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,r){return o(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},s.allocUnsafe=function(e){return l(e)},s.allocUnsafeSlow=function(e){return l(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(F(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),F(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let a=0,s=Math.min(r,n);a<s;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let n=s.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){let t=e[r];if(F(t,Uint8Array))a+t.length>n.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(n,a)):Uint8Array.prototype.set.call(n,t,a);else if(s.isBuffer(t))t.copy(n,a);else throw TypeError('"list" argument must be an Array of Buffers');a+=t.length}return n},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):f.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){let t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(e,t,r,n,a){if(F(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;let i=a-n,o=r-t,l=Math.min(i,o),u=this.slice(n,a),c=e.slice(t,r);for(let e=0;e<l;++e)if(u[e]!==c[e]){i=u[e],o=c[e];break}return i<o?-1:o<i?1:0},s.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},s.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},s.prototype.write=function(e,t,r,n){var a,s,i,o,l,u,c,d;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let p=this.length-t;if((void 0===r||r>p)&&(r=p),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let f=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let a;r=Number(r)||0;let s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;let i=t.length;for(n>i/2&&(n=i/2),a=0;a<n;++a){let n=parseInt(t.substr(2*a,2),16);if(n!=n)break;e[r+a]=n}return a}(this,e,t,r);case"utf8":case"utf-8":return a=t,s=r,L(N(e,this.length-a),this,a,s);case"ascii":case"latin1":case"binary":return i=t,o=r,L(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,i,o);case"base64":return l=t,u=r,L(M(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,d=r,L(function(e,t){let r,n,a=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,a.push(r%256),a.push(n);return a}(e,this.length-c),this,c,d);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);let n=this[e],a=1,s=0;for(;++s<t&&(a*=256);)n+=this[e+s]*a;return n},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);let n=this[e+--t],a=1;for(;t>0&&(a*=256);)n+=this[e+--t]*a;return n},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=D(function(e){T(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&A(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],a=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(a)<<BigInt(32))}),s.prototype.readBigUInt64BE=D(function(e){T(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&A(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],a=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(a)}),s.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);let n=this[e],a=1,s=0;for(;++s<t&&(a*=256);)n+=this[e+s]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);let n=t,a=1,s=this[e+--n];for(;n>0&&(a*=256);)s+=this[e+--n]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*t)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),128&this[e]?-((255-this[e]+1)*1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||_(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(e,t){e>>>=0,t||_(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=D(function(e){T(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&A(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),s.prototype.readBigInt64BE=D(function(e){T(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&A(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||_(e,4,this.length),r.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||_(e,4,this.length),r.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||_(e,8,this.length),r.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||_(e,8,this.length),r.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;w(this,e,t,r,n,0)}let a=1,s=0;for(this[t]=255&e;++s<r&&(a*=256);)this[t+s]=e/a&255;return t+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;w(this,e,t,r,n,0)}let a=r-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=D(function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=D(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);w(this,e,t,r,n-1,-n)}let a=0,s=1,i=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===i&&0!==this[t+a-1]&&(i=1),this[t+a]=(e/s>>0)-i&255;return t+r},s.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);w(this,e,t,r,n-1,-n)}let a=r-1,s=1,i=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===i&&0!==this[t+a+1]&&(i=1),this[t+a]=(e/s>>0)-i&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=D(function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=D(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return P(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return P(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let a=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),a},s.prototype.fill=function(e,t,r,n){let a;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{let i=s.isBuffer(e)?e:s.from(e,n),o=i.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=i[a%o]}return this};var O={};function I(e,t,r){O[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function C(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function E(e,t,r,n,a,s){if(e>r||e<t){let n="bigint"==typeof t?"n":"",a;throw a=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(s+1)*8}${n}`:`>= -(2${n} ** ${(s+1)*8-1}${n}) and < 2 ** ${(s+1)*8-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new O.ERR_OUT_OF_RANGE("value",a,e)}T(a,"offset"),(void 0===n[a]||void 0===n[a+s])&&A(a,n.length-(s+1))}function T(e,t){if("number"!=typeof e)throw new O.ERR_INVALID_ARG_TYPE(t,"number",e)}function A(e,t,r){throw Math.floor(e)!==e?(T(e,r),new O.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new O.ERR_BUFFER_OUT_OF_BOUNDS:new O.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}I("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),I("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),I("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,a=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?a=C(String(r)):"bigint"==typeof r&&(a=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(a=C(a)),a+="n"),n+=` It must be ${t}. Received ${a}`},RangeError);var R=/[^+/0-9A-Za-z-_]/g;function N(e,t){t=t||1/0;let r,n=e.length,a=null,s=[];for(let i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!a){if(r>56319||i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),a=r;continue}r=(a-55296<<10|r-56320)+65536}else a&&(t-=3)>-1&&s.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function M(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,r,n){let a;for(a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function F(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var $=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let a=0;a<16;++a)t[n+a]=e[r]+e[a]}return t}();function D(e){return typeof BigInt>"u"?z:e}function z(){throw Error("BigInt not supported")}}),y={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(y,{default:()=>b}),t.exports=p(i({},"__esModule",{value:!0}),y);var v=f(g());n=f(g()),a=t.exports,p(y,n,"default"),a&&p(a,n,"default");var b=v.default;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/},{}],"5owqL":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"VERSION",()=>a);let a="4.71.1"},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],lAnbY:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Stream",()=>o),n.export(r,"_iterSSEMessages",()=>l),n.export(r,"_decodeChunks",()=>d),n.export(r,"readableStreamAsyncIterable",()=>p);var a=e("./_shims/index.mjs"),s=e("./error.mjs"),i=e("./internal/decoders/line.mjs");class o{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;return new o(async function*(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(let r of l(e,t))if(!n){if(r.data.startsWith("[DONE]")){n=!0;continue}if(null===r.event){let e;try{e=JSON.parse(r.data)}catch(e){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),e}if(e&&e.error)throw new s.APIError(void 0,e.error,void 0,void 0);yield e}else{let e;try{e=JSON.parse(r.data)}catch(e){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),e}if("error"==r.event)throw new s.APIError(void 0,e.error,e.message,void 0);yield{event:r.event,data:e}}}n=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{n||t.abort()}},t)}static fromReadableStream(e,t){let r=!1;async function*n(){let t=new i.LineDecoder;for await(let r of p(e))for(let e of t.decode(r))yield e;for(let e of t.flush())yield e}return new o(async function*(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of n())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{e||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){let n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new o(()=>n(e),this.controller),new o(()=>n(t),this.controller)]}toReadableStream(){let e;let t=this,r=new TextEncoder;return new a.ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:n,done:a}=await e.next();if(a)return t.close();let s=r.encode(JSON.stringify(n)+"\n");t.enqueue(s)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*l(e,t){if(!e.body)throw t.abort(),new s.OpenAIError("Attempted to iterate over a response with no body");let r=new c,n=new i.LineDecoder;for await(let t of u(p(e.body)))for(let e of n.decode(t)){let t=r.decode(e);t&&(yield t)}for(let e of n.flush()){let t=r.decode(e);t&&(yield t)}}async function*u(e){let t=new Uint8Array;for await(let r of e){let e;if(null==r)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?new TextEncoder().encode(r):r,a=new Uint8Array(t.length+n.length);for(a.set(t),a.set(n,t.length),t=a;-1!==(e=function(e){for(let t=0;t<e.length-2;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class c{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e,t){let r=e.indexOf(":");return -1!==r?[e.substring(0,r),":",e.substring(r+t.length)]:[e,"",""]}(e,":");return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}function d(e){let t=new i.LineDecoder,r=[];for(let n of e)r.push(...t.decode(n));return r}function p(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}},{"./_shims/index.mjs":"2tyEA","./error.mjs":"7evlg","./internal/decoders/line.mjs":"8YMuC","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2tyEA":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./registry.mjs"),s=e("openai/_shims/auto/runtime");n.exportAll(a,r),a.kind||a.setShims(s.getRuntime(),{auto:!0})},{"./registry.mjs":"2ecRx","openai/_shims/auto/runtime":"eLTMB","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2ecRx":[function(e,t,r){let n,a,s,i,o,l,u,c,d,p,f,h,m;var g=e("@parcel/transformer-js/src/esmodule-helpers.js");g.defineInteropFlag(r),g.export(r,"auto",()=>y),g.export(r,"kind",()=>n),g.export(r,"fetch",()=>a),g.export(r,"Request",()=>s),g.export(r,"Response",()=>i),g.export(r,"Headers",()=>o),g.export(r,"FormData",()=>l),g.export(r,"Blob",()=>u),g.export(r,"File",()=>c),g.export(r,"ReadableStream",()=>d),g.export(r,"getMultipartRequestOptions",()=>p),g.export(r,"getDefaultAgent",()=>f),g.export(r,"fileFromPath",()=>h),g.export(r,"isFsReadStream",()=>m),g.export(r,"setShims",()=>v);let y=!1;function v(e,t={auto:!1}){if(y)throw Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(n)throw Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${n}'\``);y=t.auto,n=e.kind,a=e.fetch,s=e.Request,i=e.Response,o=e.Headers,l=e.FormData,u=e.Blob,c=e.File,d=e.ReadableStream,p=e.getMultipartRequestOptions,f=e.getDefaultAgent,h=e.fileFromPath,m=e.isFsReadStream}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],eLTMB:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../web-runtime.mjs");n.exportAll(a,r)},{"../web-runtime.mjs":"4Rds0","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4Rds0":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getRuntime",()=>s);var a=e("./MultipartBody.mjs");function s({manuallyImported:e}={}){let t,r,n,s;let i=e?"You may need to use polyfills":`Add one of these imports before your first \`import \u2026 from 'openai'\`:
- \`import 'openai/shims/node'\` (if you're running on Node)
- \`import 'openai/shims/web'\` (otherwise)
`;try{t=fetch,r=Request,n=Response,s=Headers}catch(e){throw Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${i}`)}return{kind:"web",fetch:t,Request:r,Response:n,Headers:s,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${i}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${i}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${i}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${i}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new a.MultipartBody(e)}),getDefaultAgent:e=>void 0,fileFromPath:()=>{throw Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}},{"./MultipartBody.mjs":"fSYsJ","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fSYsJ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"MultipartBody",()=>a);class a{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7evlg":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"OpenAIError",()=>s),n.export(r,"APIError",()=>i),n.export(r,"APIUserAbortError",()=>o),n.export(r,"APIConnectionError",()=>l),n.export(r,"APIConnectionTimeoutError",()=>u),n.export(r,"BadRequestError",()=>c),n.export(r,"AuthenticationError",()=>d),n.export(r,"PermissionDeniedError",()=>p),n.export(r,"NotFoundError",()=>f),n.export(r,"ConflictError",()=>h),n.export(r,"UnprocessableEntityError",()=>m),n.export(r,"RateLimitError",()=>g),n.export(r,"InternalServerError",()=>y),n.export(r,"LengthFinishReasonError",()=>v),n.export(r,"ContentFilterFinishReasonError",()=>b);var a=e("./core.mjs");class s extends Error{}class i extends s{constructor(e,t,r,n){super(`${i.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.request_id=n?.["x-request-id"],this.error=t,this.code=t?.code,this.param=t?.param,this.type=t?.type}static makeMessage(e,t,r){let n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e)return new l({message:r,cause:(0,a.castToError)(t)});let s=t?.error;return 400===e?new c(e,s,r,n):401===e?new d(e,s,r,n):403===e?new p(e,s,r,n):404===e?new f(e,s,r,n):409===e?new h(e,s,r,n):422===e?new m(e,s,r,n):429===e?new g(e,s,r,n):e>=500?new y(e,s,r,n):new i(e,s,r,n)}}class o extends i{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class l extends i{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class u extends l{constructor({message:e}={}){super({message:e??"Request timed out."})}}class c extends i{constructor(){super(...arguments),this.status=400}}class d extends i{constructor(){super(...arguments),this.status=401}}class p extends i{constructor(){super(...arguments),this.status=403}}class f extends i{constructor(){super(...arguments),this.status=404}}class h extends i{constructor(){super(...arguments),this.status=409}}class m extends i{constructor(){super(...arguments),this.status=422}}class g extends i{constructor(){super(...arguments),this.status=429}}class y extends i{}class v extends s{constructor(){super("Could not parse response content as the length limit was reached")}}class b extends s{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}},{"./core.mjs":"gJfyr","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8YMuC":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"LineDecoder",()=>i);var a=e("../../error.mjs"),s=e("5deded626eeca5d8").Buffer;class i{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];let r=i.NEWLINE_CHARS.has(t[t.length-1]||""),n=t.split(i.NEWLINE_REGEXP);return(r&&n.pop(),1!==n.length||r)?(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n):(this.buffer.push(n[0]),[])}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if(void 0!==s){if(e instanceof s)return e.toString();if(e instanceof Uint8Array)return s.from(e).toString();throw new a.OpenAIError(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new a.OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new a.OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];let e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}i.NEWLINE_CHARS=new Set(["\n","\r"]),i.NEWLINE_REGEXP=/\r\n|[\n\r]/g},{"5deded626eeca5d8":"jfRjc","../../error.mjs":"7evlg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hFjJx:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"fileFromPath",()=>a.fileFromPath),n.export(r,"isResponseLike",()=>i),n.export(r,"isFileLike",()=>o),n.export(r,"isBlobLike",()=>l),n.export(r,"isUploadable",()=>u),n.export(r,"toFile",()=>c),n.export(r,"isMultipartBody",()=>h),n.export(r,"maybeMultipartFormRequestOptions",()=>m),n.export(r,"multipartFormRequestOptions",()=>g),n.export(r,"createForm",()=>y);var a=e("./_shims/index.mjs"),s=e("ad4891a13ce92a5b").Buffer;let i=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,o=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&l(e),l=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,u=e=>o(e)||i(e)||(0,a.isFsReadStream)(e);async function c(e,t,r){var n;if(o(e=await e))return e;if(i(e)){let n=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");let s=l(n)?[await n.arrayBuffer()]:[n];return new a.File(s,t,r)}let s=await d(e);if(t||(t=(p((n=e).name)||p(n.filename)||p(n.path)?.split(/[\\/]/).pop())??"unknown_file"),!r?.type){let e=s[0]?.type;"string"==typeof e&&(r={...r,type:e})}return new a.File(s,t,r)}async function d(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(l(e))t.push(await e.arrayBuffer());else if(f(e))for await(let r of e)t.push(r);else throw Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){let t=Object.getOwnPropertyNames(e);return`[${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`);return t}let p=e=>"string"==typeof e?e:void 0!==s&&e instanceof s?String(e):void 0,f=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],h=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],m=async e=>{if(!v(e.body))return e;let t=await y(e.body);return(0,a.getMultipartRequestOptions)(t,e)},g=async e=>{let t=await y(e.body);return(0,a.getMultipartRequestOptions)(t,e)},y=async e=>{let t=new a.FormData;return await Promise.all(Object.entries(e||{}).map(([e,r])=>b(t,e,r))),t},v=e=>{if(u(e))return!0;if(Array.isArray(e))return e.some(v);if(e&&"object"==typeof e){for(let t in e)if(v(e[t]))return!0}return!1},b=async(e,t,r)=>{if(void 0!==r){if(null==r)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if(u(r)){let n=await c(r);e.append(t,n)}else if(Array.isArray(r))await Promise.all(r.map(r=>b(e,t+"[]",r)));else if("object"==typeof r)await Promise.all(Object.entries(r).map(([r,n])=>b(e,`${t}[${r}]`,n)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}}},{ad4891a13ce92a5b:"jfRjc","./_shims/index.mjs":"2tyEA","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hLuYs:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Page",()=>s),n.export(r,"CursorPage",()=>i);var a=e("./core.mjs");class s extends a.AbstractPage{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class i extends a.AbstractPage{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;let t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){let e=this.getPaginatedItems();if(!e.length)return null;let t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}},{"./core.mjs":"gJfyr","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"9rWkI":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Audio",()=>i.Audio),n.export(r,"BatchesPage",()=>o.BatchesPage),n.export(r,"Batches",()=>o.Batches),n.export(r,"Beta",()=>l.Beta),n.export(r,"Completions",()=>u.Completions),n.export(r,"Embeddings",()=>c.Embeddings),n.export(r,"FileObjectsPage",()=>d.FileObjectsPage),n.export(r,"Files",()=>d.Files),n.export(r,"FineTuning",()=>p.FineTuning),n.export(r,"Images",()=>f.Images),n.export(r,"ModelsPage",()=>h.ModelsPage),n.export(r,"Models",()=>h.Models),n.export(r,"Moderations",()=>m.Moderations),n.export(r,"Uploads",()=>g.Uploads);var a=e("./chat/index.mjs");n.exportAll(a,r);var s=e("./shared.mjs");n.exportAll(s,r);var i=e("./audio/audio.mjs"),o=e("./batches.mjs"),l=e("./beta/beta.mjs"),u=e("./completions.mjs"),c=e("./embeddings.mjs"),d=e("./files.mjs"),p=e("./fine-tuning/fine-tuning.mjs"),f=e("./images.mjs"),h=e("./models.mjs"),m=e("./moderations.mjs"),g=e("./uploads/uploads.mjs")},{"./chat/index.mjs":"dj93c","./shared.mjs":"1QLRJ","./audio/audio.mjs":"huwUC","./batches.mjs":"gxQDk","./beta/beta.mjs":"ehqdK","./completions.mjs":"9FShi","./embeddings.mjs":"eHHVh","./files.mjs":"5v55L","./fine-tuning/fine-tuning.mjs":"edwwe","./images.mjs":"jEf0n","./models.mjs":"4AK6L","./moderations.mjs":"2qkYg","./uploads/uploads.mjs":"3MwQK","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],dj93c:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Chat",()=>a.Chat),n.export(r,"Completions",()=>s.Completions);var a=e("./chat.mjs"),s=e("./completions.mjs")},{"./chat.mjs":"g5D3a","./completions.mjs":"lCCIS","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],g5D3a:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Chat",()=>i);var a=e("../../resource.mjs"),s=e("./completions.mjs");class i extends a.APIResource{constructor(){super(...arguments),this.completions=new s.Completions(this._client)}}i.Completions=s.Completions},{"../../resource.mjs":"6DOvT","./completions.mjs":"lCCIS","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6DOvT":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"APIResource",()=>a);class a{constructor(e){this._client=e}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],lCCIS:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Completions",()=>s);var a=e("../../resource.mjs");class s extends a.APIResource{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}}},{"../../resource.mjs":"6DOvT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"1QLRJ":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],huwUC:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Audio",()=>l);var a=e("../../resource.mjs"),s=e("./speech.mjs"),i=e("./transcriptions.mjs"),o=e("./translations.mjs");class l extends a.APIResource{constructor(){super(...arguments),this.transcriptions=new i.Transcriptions(this._client),this.translations=new o.Translations(this._client),this.speech=new s.Speech(this._client)}}l.Transcriptions=i.Transcriptions,l.Translations=o.Translations,l.Speech=s.Speech},{"../../resource.mjs":"6DOvT","./speech.mjs":"iJ2aF","./transcriptions.mjs":"PW3Rx","./translations.mjs":"2DAIe","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],iJ2aF:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Speech",()=>s);var a=e("../../resource.mjs");class s extends a.APIResource{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}},{"../../resource.mjs":"6DOvT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],PW3Rx:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Transcriptions",()=>i);var a=e("../../resource.mjs"),s=e("../../core.mjs");class i extends a.APIResource{create(e,t){return this._client.post("/audio/transcriptions",s.multipartFormRequestOptions({body:e,...t}))}}},{"../../resource.mjs":"6DOvT","../../core.mjs":"gJfyr","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2DAIe":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Translations",()=>i);var a=e("../../resource.mjs"),s=e("../../core.mjs");class i extends a.APIResource{create(e,t){return this._client.post("/audio/translations",s.multipartFormRequestOptions({body:e,...t}))}}},{"../../resource.mjs":"6DOvT","../../core.mjs":"gJfyr","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gxQDk:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Batches",()=>o),n.export(r,"BatchesPage",()=>l);var a=e("../resource.mjs"),s=e("../core.mjs"),i=e("../pagination.mjs");class o extends a.APIResource{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return(0,s.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/batches",l,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class l extends i.CursorPage{}o.BatchesPage=l},{"../resource.mjs":"6DOvT","../core.mjs":"gJfyr","../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ehqdK:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Beta",()=>u);var a=e("../../resource.mjs"),s=e("./assistants.mjs"),i=e("./chat/chat.mjs"),o=e("./threads/threads.mjs"),l=e("./vector-stores/vector-stores.mjs");class u extends a.APIResource{constructor(){super(...arguments),this.vectorStores=new l.VectorStores(this._client),this.chat=new i.Chat(this._client),this.assistants=new s.Assistants(this._client),this.threads=new o.Threads(this._client)}}u.VectorStores=l.VectorStores,u.VectorStoresPage=l.VectorStoresPage,u.Assistants=s.Assistants,u.AssistantsPage=s.AssistantsPage,u.Threads=o.Threads},{"../../resource.mjs":"6DOvT","./assistants.mjs":"hP8TC","./chat/chat.mjs":"fP7e4","./threads/threads.mjs":"g04rZ","./vector-stores/vector-stores.mjs":"f5Aks","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hP8TC:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Assistants",()=>o),n.export(r,"AssistantsPage",()=>l);var a=e("../../resource.mjs"),s=e("../../core.mjs"),i=e("../../pagination.mjs");class o extends a.APIResource{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},t){return(0,s.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/assistants",l,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class l extends i.CursorPage{}o.AssistantsPage=l},{"../../resource.mjs":"6DOvT","../../core.mjs":"gJfyr","../../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fP7e4:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Chat",()=>i);var a=e("../../../resource.mjs"),s=e("./completions.mjs");class i extends a.APIResource{constructor(){super(...arguments),this.completions=new s.Completions(this._client)}}(i||(i={})).Completions=s.Completions},{"../../../resource.mjs":"6DOvT","./completions.mjs":"bq84G","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bq84G:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ChatCompletionStreamingRunner",()=>i.ChatCompletionStreamingRunner),n.export(r,"ParsingFunction",()=>u.ParsingFunction),n.export(r,"ParsingToolFunction",()=>u.ParsingToolFunction),n.export(r,"ChatCompletionStream",()=>o.ChatCompletionStream),n.export(r,"ChatCompletionRunner",()=>s.ChatCompletionRunner),n.export(r,"Completions",()=>c);var a=e("../../../resource.mjs"),s=e("../../../lib/ChatCompletionRunner.mjs"),i=e("../../../lib/ChatCompletionStreamingRunner.mjs"),o=e("../../../lib/ChatCompletionStream.mjs"),l=e("../../../lib/parser.mjs"),u=e("../../../lib/RunnableFunction.mjs");class c extends a.APIResource{parse(e,t){return(0,l.validateInputTools)(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>(0,l.parseChatCompletion)(t,e))}runFunctions(e,t){return e.stream?(0,i.ChatCompletionStreamingRunner).runFunctions(this._client,e,t):(0,s.ChatCompletionRunner).runFunctions(this._client,e,t)}runTools(e,t){return e.stream?(0,i.ChatCompletionStreamingRunner).runTools(this._client,e,t):(0,s.ChatCompletionRunner).runTools(this._client,e,t)}stream(e,t){return(0,o.ChatCompletionStream).createChatCompletion(this._client,e,t)}}},{"../../../resource.mjs":"6DOvT","../../../lib/ChatCompletionRunner.mjs":"buaQz","../../../lib/ChatCompletionStreamingRunner.mjs":"4d9Rc","../../../lib/ChatCompletionStream.mjs":"70cQQ","../../../lib/parser.mjs":"iYbRk","../../../lib/RunnableFunction.mjs":"aKBXY","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],buaQz:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ChatCompletionRunner",()=>i);var a=e("./AbstractChatCompletionRunner.mjs"),s=e("./chatCompletionUtils.mjs");class i extends a.AbstractChatCompletionRunner{static runFunctions(e,t,r){let n=new i,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,a)),n}static runTools(e,t,r){let n=new i,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,a)),n}_addMessage(e,t=!0){super._addMessage(e,t),(0,s.isAssistantMessage)(e)&&e.content&&this._emit("content",e.content)}}},{"./AbstractChatCompletionRunner.mjs":"gNafI","./chatCompletionUtils.mjs":"bMy9P","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gNafI:[function(e,t,r){var n,a,s,i,o,l,u,c,d=e("@parcel/transformer-js/src/esmodule-helpers.js");d.defineInteropFlag(r),d.export(r,"AbstractChatCompletionRunner",()=>v);var p=e("../error.mjs"),f=e("./RunnableFunction.mjs"),h=e("./chatCompletionUtils.mjs"),m=e("./EventStream.mjs"),g=e("../lib/parser.mjs"),y=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class v extends m.EventStream{constructor(){super(...arguments),n.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),((0,h.isFunctionMessage)(e)||(0,h.isToolMessage)(e))&&e.content)this._emit("functionCallResult",e.content);else if((0,h.isAssistantMessage)(e)&&e.function_call)this._emit("functionCall",e.function_call);else if((0,h.isAssistantMessage)(e)&&e.tool_calls)for(let t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new p.OpenAIError("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),y(this,n,"m",a).call(this)}async finalMessage(){return await this.done(),y(this,n,"m",s).call(this)}async finalFunctionCall(){return await this.done(),y(this,n,"m",i).call(this)}async finalFunctionCallResult(){return await this.done(),y(this,n,"m",o).call(this)}async totalUsage(){return await this.done(),y(this,n,"m",l).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=y(this,n,"m",s).call(this);t&&this._emit("finalMessage",t);let r=y(this,n,"m",a).call(this);r&&this._emit("finalContent",r);let u=y(this,n,"m",i).call(this);u&&this._emit("finalFunctionCall",u);let c=y(this,n,"m",o).call(this);null!=c&&this._emit("finalFunctionCallResult",c),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",y(this,n,"m",l).call(this))}async _createChatCompletion(e,t,r){let a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),y(this,n,"m",u).call(this,t);let s=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion((0,g.parseChatCompletion)(s,t))}async _runChatCompletion(e,t,r){for(let e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){let a="function",{function_call:s="auto",stream:i,...o}=t,l="string"!=typeof s&&s?.name,{maxChatCompletions:u=10}=r||{},d={};for(let e of t.functions)d[e.name||e.function.name]=e;let h=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<u;++t){let t;let i=await this._createChatCompletion(e,{...o,function_call:s,functions:h,messages:[...this.messages]},r),u=i.choices[0]?.message;if(!u)throw new p.OpenAIError("missing message in ChatCompletion response");if(!u.function_call)return;let{name:m,arguments:g}=u.function_call,v=d[m];if(v){if(l&&l!==m){let e=`Invalid function_call: ${JSON.stringify(m)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:a,name:m,content:e});continue}}else{let e=`Invalid function_call: ${JSON.stringify(m)}. Available options are: ${h.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:a,name:m,content:e});continue}try{t=(0,f.isRunnableFunctionWithParse)(v)?await v.parse(g):g}catch(e){this._addMessage({role:a,name:m,content:e instanceof Error?e.message:String(e)});continue}let b=await v.function(t,this),_=y(this,n,"m",c).call(this,b);if(this._addMessage({role:a,name:m,content:_}),l)return}}async _runTools(e,t,r){let a="tool",{tool_choice:s="auto",stream:i,...o}=t,l="string"!=typeof s&&s?.function?.name,{maxChatCompletions:u=10}=r||{},d=t.tools.map(e=>{if((0,g.isAutoParsableTool)(e)){if(!e.$callback)throw new p.OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),h={};for(let e of d)"function"===e.type&&(h[e.function.name||e.function.function.name]=e.function);let m="tools"in t?d.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<u;++t){let t=await this._createChatCompletion(e,{...o,tool_choice:s,tools:m,messages:[...this.messages]},r),i=t.choices[0]?.message;if(!i)throw new p.OpenAIError("missing message in ChatCompletion response");if(!i.tool_calls?.length)break;for(let e of i.tool_calls){let t;if("function"!==e.type)continue;let r=e.id,{name:s,arguments:i}=e.function,o=h[s];if(o){if(l&&l!==s){let e=`Invalid tool_call: ${JSON.stringify(s)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:a,tool_call_id:r,content:e});continue}}else{let e=`Invalid tool_call: ${JSON.stringify(s)}. Available options are: ${Object.keys(h).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:r,content:e});continue}try{t=(0,f.isRunnableFunctionWithParse)(o)?await o.parse(i):i}catch(t){let e=t instanceof Error?t.message:String(t);this._addMessage({role:a,tool_call_id:r,content:e});continue}let u=await o.function(t,this),d=y(this,n,"m",c).call(this,u);if(this._addMessage({role:a,tool_call_id:r,content:d}),l)return}}}}n=new WeakSet,a=function(){return y(this,n,"m",s).call(this).content??null},s=function(){let e=this.messages.length;for(;e-- >0;){let t=this.messages[e];if((0,h.isAssistantMessage)(t)){let{function_call:e,...r}=t,n={...r,content:t.content??null,refusal:t.refusal??null};return e&&(n.function_call=e),n}}throw new p.OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},i=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if((0,h.isAssistantMessage)(t)&&t?.function_call)return t.function_call;if((0,h.isAssistantMessage)(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},o=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if((0,h.isFunctionMessage)(t)&&null!=t.content||(0,h.isToolMessage)(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},l=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},u=function(e){if(null!=e.n&&e.n>1)throw new p.OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},c=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)}},{"../error.mjs":"7evlg","./RunnableFunction.mjs":"aKBXY","./chatCompletionUtils.mjs":"bMy9P","./EventStream.mjs":"b0ieb","../lib/parser.mjs":"iYbRk","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aKBXY:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return"function"==typeof e.parse}n.defineInteropFlag(r),n.export(r,"isRunnableFunctionWithParse",()=>a),n.export(r,"ParsingFunction",()=>s),n.export(r,"ParsingToolFunction",()=>i);class s{constructor(e){this.function=e.function,this.parse=e.parse,this.parameters=e.parameters,this.description=e.description,this.name=e.name}}class i{constructor(e){this.type="function",this.function=e}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bMy9P:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"isAssistantMessage",()=>a),n.export(r,"isFunctionMessage",()=>s),n.export(r,"isToolMessage",()=>i),n.export(r,"isPresent",()=>o);let a=e=>e?.role==="assistant",s=e=>e?.role==="function",i=e=>e?.role==="tool";function o(e){return null!=e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],b0ieb:[function(e,t,r){var n,a,s,i,o,l,u,c,d,p,f,h,m,g=e("@parcel/transformer-js/src/esmodule-helpers.js");g.defineInteropFlag(r),g.export(r,"EventStream",()=>_);var y=e("../error.mjs"),v=function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},b=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class _{constructor(){n.add(this),this.controller=new AbortController,a.set(this,void 0),s.set(this,()=>{}),i.set(this,()=>{}),o.set(this,void 0),l.set(this,()=>{}),u.set(this,()=>{}),c.set(this,{}),d.set(this,!1),p.set(this,!1),f.set(this,!1),h.set(this,!1),v(this,a,new Promise((e,t)=>{v(this,s,e,"f"),v(this,i,t,"f")}),"f"),v(this,o,new Promise((e,t)=>{v(this,l,e,"f"),v(this,u,t,"f")}),"f"),b(this,a,"f").catch(()=>{}),b(this,o,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},b(this,n,"m",m).bind(this))},0)}_connected(){this.ended||(b(this,s,"f").call(this),this._emit("connect"))}get ended(){return b(this,d,"f")}get errored(){return b(this,p,"f")}get aborted(){return b(this,f,"f")}abort(){this.controller.abort()}on(e,t){return(b(this,c,"f")[e]||(b(this,c,"f")[e]=[])).push({listener:t}),this}off(e,t){let r=b(this,c,"f")[e];if(!r)return this;let n=r.findIndex(e=>e.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(b(this,c,"f")[e]||(b(this,c,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{v(this,h,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){v(this,h,!0,"f"),await b(this,o,"f")}_emit(e,...t){if(b(this,d,"f"))return;"end"===e&&(v(this,d,!0,"f"),b(this,l,"f").call(this));let r=b(this,c,"f")[e];if(r&&(b(this,c,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];b(this,h,"f")||r?.length||Promise.reject(e),b(this,i,"f").call(this,e),b(this,u,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];b(this,h,"f")||r?.length||Promise.reject(e),b(this,i,"f").call(this,e),b(this,u,"f").call(this,e),this._emit("end")}}_emitFinal(){}}a=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,h=new WeakMap,n=new WeakSet,m=function(e){if(v(this,p,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new y.APIUserAbortError),e instanceof y.APIUserAbortError)return v(this,f,!0,"f"),this._emit("abort",e);if(e instanceof y.OpenAIError)return this._emit("error",e);if(e instanceof Error){let t=new y.OpenAIError(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new y.OpenAIError(String(e)))}},{"../error.mjs":"7evlg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],iYbRk:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"makeParseableResponseFormat",()=>s),n.export(r,"isAutoParsableResponseFormat",()=>i),n.export(r,"makeParseableTool",()=>o),n.export(r,"isAutoParsableTool",()=>l),n.export(r,"maybeParseChatCompletion",()=>u),n.export(r,"parseChatCompletion",()=>c),n.export(r,"shouldParseToolCall",()=>d),n.export(r,"hasAutoParseableInput",()=>p),n.export(r,"validateInputTools",()=>f);var a=e("../error.mjs");function s(e,t){let r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),r}function i(e){return e?.$brand==="auto-parseable-response-format"}function o(e,{parser:t,callback:r}){let n={...e};return Object.defineProperties(n,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:t,enumerable:!1},$callback:{value:r,enumerable:!1}}),n}function l(e){return e?.$brand==="auto-parseable-tool"}function u(e,t){return t&&p(t)?c(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,tool_calls:e.message.tool_calls??[]}}))}}function c(e,t){let r=e.choices.map(e=>{var r;if("length"===e.finish_reason)throw new a.LengthFinishReasonError;if("content_filter"===e.finish_reason)throw new a.ContentFilterFinishReasonError;return{...e,message:{...e.message,tool_calls:e.message.tool_calls?.map(e=>(function(e,t){let r=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:l(r)?r.$parseRaw(t.function.arguments):r?.function.strict?JSON.parse(t.function.arguments):null}}})(t,e))??[],parsed:e.message.content&&!e.message.refusal?(r=e.message.content,t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(r):JSON.parse(r):null):null}}});return{...e,choices:r}}function d(e,t){if(!e)return!1;let r=e.tools?.find(e=>e.function?.name===t.function.name);return l(r)||r?.function.strict||!1}function p(e){return!!i(e.response_format)||(e.tools?.some(e=>l(e)||"function"===e.type&&!0===e.function.strict)??!1)}function f(e){for(let t of e??[]){if("function"!==t.type)throw new a.OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new a.OpenAIError(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}},{"../error.mjs":"7evlg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4d9Rc":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ChatCompletionStreamingRunner",()=>s);var a=e("./ChatCompletionStream.mjs");class s extends a.ChatCompletionStream{static fromReadableStream(e){let t=new s(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){let n=new s(null),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,a)),n}static runTools(e,t,r){let n=new s(t),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,a)),n}}},{"./ChatCompletionStream.mjs":"70cQQ","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"70cQQ":[function(e,t,r){var n,a,s,i,o,l,u,c,d,p,f,h,m=e("@parcel/transformer-js/src/esmodule-helpers.js");m.defineInteropFlag(r),m.export(r,"ChatCompletionStream",()=>x);var g=e("../error.mjs"),y=e("./AbstractChatCompletionRunner.mjs"),v=e("../streaming.mjs"),b=e("../lib/parser.mjs"),_=e("../_vendor/partial-json-parser/parser.mjs"),w=function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},j=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class x extends y.AbstractChatCompletionRunner{constructor(e){super(),n.add(this),a.set(this,void 0),s.set(this,void 0),i.set(this,void 0),w(this,a,e,"f"),w(this,s,[],"f")}get currentChatCompletionSnapshot(){return j(this,i,"f")}static fromReadableStream(e){let t=new x(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){let n=new x(t);return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,r){super._createChatCompletion;let a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),j(this,n,"m",o).call(this);let s=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});for await(let e of(this._connected(),s))j(this,n,"m",u).call(this,e);if(s.controller.signal?.aborted)throw new g.APIUserAbortError;return this._addChatCompletion(j(this,n,"m",p).call(this))}async _fromReadableStream(e,t){let r;let a=t?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),j(this,n,"m",o).call(this),this._connected();let s=(0,v.Stream).fromReadableStream(e,this.controller);for await(let e of s)r&&r!==e.id&&this._addChatCompletion(j(this,n,"m",p).call(this)),j(this,n,"m",u).call(this,e),r=e.id;if(s.controller.signal?.aborted)throw new g.APIUserAbortError;return this._addChatCompletion(j(this,n,"m",p).call(this))}[(a=new WeakMap,s=new WeakMap,i=new WeakMap,n=new WeakSet,o=function(){this.ended||w(this,i,void 0,"f")},l=function(e){let t=j(this,s,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},j(this,s,"f")[e.index]=t),t},u=function(e){if(this.ended)return;let t=j(this,n,"m",h).call(this,e);for(let r of(this._emit("chunk",e,t),e.choices)){let e=t.choices[r.index];null!=r.delta.content&&e.message?.role==="assistant"&&e.message?.content&&(this._emit("content",r.delta.content,e.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=r.delta.refusal&&e.message?.role==="assistant"&&e.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:e.message.refusal}),r.logprobs?.content!=null&&e.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:e.logprobs?.content??[]}),r.logprobs?.refusal!=null&&e.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});let a=j(this,n,"m",l).call(this,e);for(let t of(e.finish_reason&&(j(this,n,"m",d).call(this,e),null!=a.current_tool_call_index&&j(this,n,"m",c).call(this,e,a.current_tool_call_index)),r.delta.tool_calls??[]))a.current_tool_call_index!==t.index&&(j(this,n,"m",d).call(this,e),null!=a.current_tool_call_index&&j(this,n,"m",c).call(this,e,a.current_tool_call_index)),a.current_tool_call_index=t.index;for(let t of r.delta.tool_calls??[]){let r=e.message.tool_calls?.[t.index];r?.type&&(r?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:r.function?.name,index:t.index,arguments:r.function.arguments,parsed_arguments:r.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):r?.type)}}},c=function(e,t){if(j(this,n,"m",l).call(this,e).done_tool_calls.has(t))return;let r=e.message.tool_calls?.[t];if(!r)throw Error("no tool call snapshot");if(!r.type)throw Error("tool call snapshot missing `type`");if("function"===r.type){let e=j(this,a,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:t,arguments:r.function.arguments,parsed_arguments:(0,b.isAutoParsableTool)(e)?e.$parseRaw(r.function.arguments):e?.function.strict?JSON.parse(r.function.arguments):null})}else r.type},d=function(e){let t=j(this,n,"m",l).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;let r=j(this,n,"m",f).call(this);this._emit("content.done",{content:e.message.content,parsed:r?r.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},p=function(){if(this.ended)throw new g.OpenAIError("stream has ended, this shouldn't happen");let e=j(this,i,"f");if(!e)throw new g.OpenAIError("request ended without sending any chunks");return w(this,i,void 0,"f"),w(this,s,[],"f"),function(e,t){let{id:r,choices:n,created:a,model:s,system_fingerprint:i,...o}=e,l={...o,id:r,choices:n.map(({message:t,finish_reason:r,index:n,logprobs:a,...s})=>{if(!r)throw new g.OpenAIError(`missing finish_reason for choice ${n}`);let{content:i=null,function_call:o,tool_calls:l,...u}=t,c=t.role;if(!c)throw new g.OpenAIError(`missing role for choice ${n}`);if(o){let{arguments:e,name:l}=o;if(null==e)throw new g.OpenAIError(`missing function_call.arguments for choice ${n}`);if(!l)throw new g.OpenAIError(`missing function_call.name for choice ${n}`);return{...s,message:{content:i,function_call:{arguments:e,name:l},role:c,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:a}}return l?{...s,index:n,finish_reason:r,logprobs:a,message:{...u,role:c,content:i,refusal:t.refusal??null,tool_calls:l.map((t,r)=>{let{function:a,type:s,id:i,...o}=t,{arguments:l,name:u,...c}=a||{};if(null==i)throw new g.OpenAIError(`missing choices[${n}].tool_calls[${r}].id
${S(e)}`);if(null==s)throw new g.OpenAIError(`missing choices[${n}].tool_calls[${r}].type
${S(e)}`);if(null==u)throw new g.OpenAIError(`missing choices[${n}].tool_calls[${r}].function.name
${S(e)}`);if(null==l)throw new g.OpenAIError(`missing choices[${n}].tool_calls[${r}].function.arguments
${S(e)}`);return{...o,id:i,type:s,function:{...c,name:u,arguments:l}}})}}:{...s,message:{...u,content:i,role:c,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:a}}),created:a,model:s,object:"chat.completion",...i?{system_fingerprint:i}:{}};return(0,b.maybeParseChatCompletion)(l,t)}(e,j(this,a,"f"))},f=function(){let e=j(this,a,"f")?.response_format;return(0,b.isAutoParsableResponseFormat)(e)?e:null},h=function(e){var t,r,s,o;let l=j(this,i,"f"),{choices:u,...c}=e;for(let{delta:u,finish_reason:d,index:p,logprobs:h=null,...m}of(l?Object.assign(l,c):l=w(this,i,{...c,choices:[]},"f"),e.choices)){let e=l.choices[p];if(e||(e=l.choices[p]={finish_reason:d,index:p,message:{},logprobs:h,...m}),h){if(e.logprobs){let{content:n,refusal:a,...s}=h;Object.assign(e.logprobs,s),n&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...n)),a&&((r=e.logprobs).refusal??(r.refusal=[]),e.logprobs.refusal.push(...a))}else e.logprobs=Object.assign({},h)}if(d&&(e.finish_reason=d,j(this,a,"f")&&(0,b.hasAutoParseableInput)(j(this,a,"f")))){if("length"===d)throw new g.LengthFinishReasonError;if("content_filter"===d)throw new g.ContentFilterFinishReasonError}if(Object.assign(e,m),!u)continue;let{content:i,refusal:c,function_call:y,role:v,tool_calls:w,...x}=u;if(Object.assign(e.message,x),c&&(e.message.refusal=(e.message.refusal||"")+c),v&&(e.message.role=v),y&&(e.message.function_call?(y.name&&(e.message.function_call.name=y.name),y.arguments&&((s=e.message.function_call).arguments??(s.arguments=""),e.message.function_call.arguments+=y.arguments)):e.message.function_call=y),i&&(e.message.content=(e.message.content||"")+i,!e.message.refusal&&j(this,n,"m",f).call(this)&&(e.message.parsed=(0,_.partialParse)(e.message.content))),w)for(let{index:t,id:r,type:n,function:s,...i}of(e.message.tool_calls||(e.message.tool_calls=[]),w)){let l=(o=e.message.tool_calls)[t]??(o[t]={});Object.assign(l,i),r&&(l.id=r),n&&(l.type=n),s&&(l.function??(l.function={name:s.name??"",arguments:""})),s?.name&&(l.function.name=s.name),s?.arguments&&(l.function.arguments+=s.arguments,(0,b.shouldParseToolCall)(j(this,a,"f"),l)&&(l.function.parsed_arguments=(0,_.partialParse)(l.function.arguments)))}}return l},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("chunk",r=>{let n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),this.on("error",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new v.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function S(e){return JSON.stringify(e)}},{"../error.mjs":"7evlg","./AbstractChatCompletionRunner.mjs":"gNafI","../streaming.mjs":"lAnbY","../lib/parser.mjs":"iYbRk","../_vendor/partial-json-parser/parser.mjs":"6uaMh","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6uaMh":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"partialParse",()=>l),n.export(r,"PartialJSON",()=>s),n.export(r,"MalformedJSON",()=>i);let a={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,ALL:511};class s extends Error{}class i extends Error{}let o=(e,t)=>{let r=e.length,n=0,o=e=>{throw new s(`${e} at position ${n}`)},l=e=>{throw new i(`${e} at position ${n}`)},u=()=>(h(),n>=r&&o("Unexpected end of input"),'"'===e[n])?c():"{"===e[n]?d():"["===e[n]?p():"null"===e.substring(n,n+4)||a.NULL&t&&r-n<4&&"null".startsWith(e.substring(n))?(n+=4,null):"true"===e.substring(n,n+4)||a.BOOL&t&&r-n<4&&"true".startsWith(e.substring(n))?(n+=4,!0):"false"===e.substring(n,n+5)||a.BOOL&t&&r-n<5&&"false".startsWith(e.substring(n))?(n+=5,!1):"Infinity"===e.substring(n,n+8)||a.INFINITY&t&&r-n<8&&"Infinity".startsWith(e.substring(n))?(n+=8,1/0):"-Infinity"===e.substring(n,n+9)||a.MINUS_INFINITY&t&&1<r-n&&r-n<9&&"-Infinity".startsWith(e.substring(n))?(n+=9,-1/0):"NaN"===e.substring(n,n+3)||a.NAN&t&&r-n<3&&"NaN".startsWith(e.substring(n))?(n+=3,NaN):f(),c=()=>{let s=n,i=!1;for(n++;n<r&&('"'!==e[n]||i&&"\\"===e[n-1]);)i="\\"===e[n]&&!i,n++;if('"'==e.charAt(n))try{return JSON.parse(e.substring(s,++n-Number(i)))}catch(e){l(String(e))}else if(a.STR&t)try{return JSON.parse(e.substring(s,n-Number(i))+'"')}catch(t){return JSON.parse(e.substring(s,e.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},d=()=>{n++,h();let s={};try{for(;"}"!==e[n];){if(h(),n>=r&&a.OBJ&t)return s;let i=c();h(),n++;try{let e=u();Object.defineProperty(s,i,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(a.OBJ&t)return s;throw e}h(),","===e[n]&&n++}}catch(e){if(a.OBJ&t)return s;o("Expected '}' at end of object")}return n++,s},p=()=>{n++;let r=[];try{for(;"]"!==e[n];)r.push(u()),h(),","===e[n]&&n++}catch(e){if(a.ARR&t)return r;o("Expected ']' at end of array")}return n++,r},f=()=>{if(0===n){"-"===e&&a.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(e)}catch(r){if(a.NUM&t)try{if("."===e[e.length-1])return JSON.parse(e.substring(0,e.lastIndexOf(".")));return JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}l(String(r))}}let s=n;for("-"===e[n]&&n++;e[n]&&!",]}".includes(e[n]);)n++;n!=r||a.NUM&t||o("Unterminated number literal");try{return JSON.parse(e.substring(s,n))}catch(r){"-"===e.substring(s,n)&&a.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(e.substring(s,e.lastIndexOf("e")))}catch(e){l(String(e))}}},h=()=>{for(;n<r&&" \n\r	".includes(e[n]);)n++};return u()},l=e=>(function(e,t=a.ALL){if("string"!=typeof e)throw TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw Error(`${e} is empty`);return o(e.trim(),t)})(e,a.ALL^a.NUM)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],g04rZ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Threads",()=>u);var a=e("../../../resource.mjs"),s=e("../../../core.mjs"),i=e("../../../lib/AssistantStream.mjs"),o=e("./messages.mjs"),l=e("./runs/runs.mjs");class u extends a.APIResource{constructor(){super(...arguments),this.runs=new l.Runs(this._client),this.messages=new o.Messages(this._client)}create(e={},t){return(0,s.isRequestOptions)(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){let r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return(0,i.AssistantStream).createThreadAssistantStream(e,this._client.beta.threads,t)}}u.Runs=l.Runs,u.RunsPage=l.RunsPage,u.Messages=o.Messages,u.MessagesPage=o.MessagesPage},{"../../../resource.mjs":"6DOvT","../../../core.mjs":"gJfyr","../../../lib/AssistantStream.mjs":"leZTz","./messages.mjs":"famvr","./runs/runs.mjs":"aNbAL","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],leZTz:[function(e,t,r){var n,a,s,i,o,l,u,c,d,p,f,h,m,g,y,v,b,_,w,j,x,S,k=e("@parcel/transformer-js/src/esmodule-helpers.js");k.defineInteropFlag(r),k.export(r,"AssistantStream",()=>A);var P=e("../core.mjs"),O=e("../streaming.mjs"),I=e("../error.mjs"),C=e("./EventStream.mjs"),E=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},T=function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r};class A extends C.EventStream{constructor(){super(...arguments),n.add(this),a.set(this,[]),s.set(this,{}),i.set(this,{}),o.set(this,void 0),l.set(this,void 0),u.set(this,void 0),c.set(this,void 0),d.set(this,void 0),p.set(this,void 0),f.set(this,void 0),h.set(this,void 0),m.set(this,void 0)}[(a=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,n=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("event",r=>{let n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),this.on("error",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let t=new A;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){let r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();let a=(0,O.Stream).fromReadableStream(e,this.controller);for await(let e of a)E(this,n,"m",g).call(this,e);if(a.controller.signal?.aborted)throw new I.APIUserAbortError;return this._addRun(E(this,n,"m",y).call(this))}toReadableStream(){return new O.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,n,a){let s=new A;return s._run(()=>s._runToolAssistantStream(e,t,r,n,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,t,r,a,s){let i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let o={...a,stream:!0},l=await e.submitToolOutputs(t,r,o,{...s,signal:this.controller.signal});for await(let e of(this._connected(),l))E(this,n,"m",g).call(this,e);if(l.controller.signal?.aborted)throw new I.APIUserAbortError;return this._addRun(E(this,n,"m",y).call(this))}static createThreadAssistantStream(e,t,r){let n=new A;return n._run(()=>n._threadAssistantStream(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,t,r,n){let a=new A;return a._run(()=>a._runAssistantStream(e,t,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return E(this,f,"f")}currentRun(){return E(this,h,"f")}currentMessageSnapshot(){return E(this,o,"f")}currentRunStepSnapshot(){return E(this,m,"f")}async finalRunSteps(){return await this.done(),Object.values(E(this,s,"f"))}async finalMessages(){return await this.done(),Object.values(E(this,i,"f"))}async finalRun(){if(await this.done(),!E(this,l,"f"))throw Error("Final run was not received.");return E(this,l,"f")}async _createThreadAssistantStream(e,t,r){let a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));let s={...t,stream:!0},i=await e.createAndRun(s,{...r,signal:this.controller.signal});for await(let e of(this._connected(),i))E(this,n,"m",g).call(this,e);if(i.controller.signal?.aborted)throw new I.APIUserAbortError;return this._addRun(E(this,n,"m",y).call(this))}async _createAssistantStream(e,t,r,a){let s=a?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let i={...r,stream:!0},o=await e.create(t,i,{...a,signal:this.controller.signal});for await(let e of(this._connected(),o))E(this,n,"m",g).call(this,e);if(o.controller.signal?.aborted)throw new I.APIUserAbortError;return this._addRun(E(this,n,"m",y).call(this))}static accumulateDelta(e,t){for(let[r,n]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=n;continue}let t=e[r];if(null==t||"index"===r||"type"===r){e[r]=n;continue}if("string"==typeof t&&"string"==typeof n)t+=n;else if("number"==typeof t&&"number"==typeof n)t+=n;else if(P.isObj(t)&&P.isObj(n))t=this.accumulateDelta(t,n);else if(Array.isArray(t)&&Array.isArray(n)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...n);continue}for(let e of n){if(!P.isObj(e))throw Error(`Expected array delta entry to be an object but got: ${e}`);let r=e.index;if(null==r)throw console.error(e),Error("Expected array delta entry to have an `index` property");if("number"!=typeof r)throw Error(`Expected array delta entry \`index\` property to be a number but got ${r}`);let n=t[r];null==n?t.push(e):t[r]=this.accumulateDelta(n,e)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${n}, accValue: ${t}`);e[r]=t}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,n){return await this._createAssistantStream(t,e,r,n)}async _runToolAssistantStream(e,t,r,n,a){return await this._createToolAssistantStream(r,e,t,n,a)}}g=function(e){if(!this.ended)switch(T(this,f,e,"f"),E(this,n,"m",_).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":E(this,n,"m",S).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":E(this,n,"m",b).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":E(this,n,"m",v).call(this,e);break;case"error":throw Error("Encountered an error event in event processing - errors should be processed earlier")}},y=function(){if(this.ended)throw new I.OpenAIError("stream has ended, this shouldn't happen");if(!E(this,l,"f"))throw Error("Final run has not been received");return E(this,l,"f")},v=function(e){let[t,r]=E(this,n,"m",j).call(this,e,E(this,o,"f"));for(let e of(T(this,o,t,"f"),E(this,i,"f")[t.id]=t,r)){let r=t.content[e.index];r?.type=="text"&&this._emit("textCreated",r.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let r of e.data.delta.content){if("text"==r.type&&r.text){let e=r.text,n=t.content[r.index];if(n&&"text"==n.type)this._emit("textDelta",e,n.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=E(this,u,"f")){if(E(this,c,"f"))switch(E(this,c,"f").type){case"text":this._emit("textDone",E(this,c,"f").text,E(this,o,"f"));break;case"image_file":this._emit("imageFileDone",E(this,c,"f").image_file,E(this,o,"f"))}T(this,u,r.index,"f")}T(this,c,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==E(this,u,"f")){let t=e.data.content[E(this,u,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,E(this,o,"f"));break;case"text":this._emit("textDone",t.text,E(this,o,"f"))}}E(this,o,"f")&&this._emit("messageDone",e.data),T(this,o,void 0,"f")}},b=function(e){let t=E(this,n,"m",w).call(this,e);switch(T(this,m,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let r=e.data.delta;if(r.step_details&&"tool_calls"==r.step_details.type&&r.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(let e of r.step_details.tool_calls)e.index==E(this,d,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(E(this,p,"f")&&this._emit("toolCallDone",E(this,p,"f")),T(this,d,e.index,"f"),T(this,p,t.step_details.tool_calls[e.index],"f"),E(this,p,"f")&&this._emit("toolCallCreated",E(this,p,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":T(this,m,void 0,"f"),"tool_calls"==e.data.step_details.type&&E(this,p,"f")&&(this._emit("toolCallDone",E(this,p,"f")),T(this,p,void 0,"f")),this._emit("runStepDone",e.data,t)}},_=function(e){E(this,a,"f").push(e),this._emit("event",e)},w=function(e){switch(e.event){case"thread.run.step.created":return E(this,s,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=E(this,s,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){let n=A.accumulateDelta(t,r.delta);E(this,s,"f")[e.data.id]=n}return E(this,s,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":E(this,s,"f")[e.data.id]=e.data}if(E(this,s,"f")[e.data.id])return E(this,s,"f")[e.data.id];throw Error("No snapshot available")},j=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(let e of a.delta.content)if(e.index in t.content){let r=t.content[e.index];t.content[e.index]=E(this,n,"m",x).call(this,e,r)}else t.content[e.index]=e,r.push(e);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},x=function(e,t){return A.accumulateDelta(t,e)},S=function(e){switch(T(this,h,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":T(this,l,e.data,"f"),E(this,p,"f")&&(this._emit("toolCallDone",E(this,p,"f")),T(this,p,void 0,"f"))}}},{"../core.mjs":"gJfyr","../streaming.mjs":"lAnbY","../error.mjs":"7evlg","./EventStream.mjs":"b0ieb","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],famvr:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Messages",()=>o),n.export(r,"MessagesPage",()=>l);var a=e("../../../resource.mjs"),s=e("../../../core.mjs"),i=e("../../../pagination.mjs");class o extends a.APIResource{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},r){return(0,s.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,l,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class l extends i.CursorPage{}o.MessagesPage=l},{"../../../resource.mjs":"6DOvT","../../../core.mjs":"gJfyr","../../../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aNbAL:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Runs",()=>u),n.export(r,"RunsPage",()=>c);var a=e("../../../../resource.mjs"),s=e("../../../../core.mjs"),i=e("../../../../lib/AssistantStream.mjs"),o=e("./steps.mjs"),l=e("../../../../pagination.mjs");class u extends a.APIResource{constructor(){super(...arguments),this.steps=new o.Steps(this._client)}create(e,t,r){let{include:n,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:n},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},r){return(0,s.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,c,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,t,r){let n=await this.create(e,t,r);return await this.poll(e,n.id,r)}createAndStream(e,t,r){return(0,i.AssistantStream).createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){let n={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){let{data:a,response:i}=await this.retrieve(e,t,{...r,headers:{...r?.headers,...n}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{let e=i.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(o=t)}}await (0,s.sleep)(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return(0,i.AssistantStream).createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,n){let a=await this.submitToolOutputs(e,t,r,n);return await this.poll(e,a.id,n)}submitToolOutputsStream(e,t,r,n){return(0,i.AssistantStream).createToolAssistantStream(e,t,this._client.beta.threads.runs,r,n)}}class c extends l.CursorPage{}u.RunsPage=c,u.Steps=o.Steps,u.RunStepsPage=o.RunStepsPage},{"../../../../resource.mjs":"6DOvT","../../../../core.mjs":"gJfyr","../../../../lib/AssistantStream.mjs":"leZTz","./steps.mjs":"blVeT","../../../../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],blVeT:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Steps",()=>o),n.export(r,"RunStepsPage",()=>l);var a=e("../../../../resource.mjs"),s=e("../../../../core.mjs"),i=e("../../../../pagination.mjs");class o extends a.APIResource{retrieve(e,t,r,n={},a){return(0,s.isRequestOptions)(n)?this.retrieve(e,t,r,{},n):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:n,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e,t,r={},n){return(0,s.isRequestOptions)(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,l,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class l extends i.CursorPage{}o.RunStepsPage=l},{"../../../../resource.mjs":"6DOvT","../../../../core.mjs":"gJfyr","../../../../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],f5Aks:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"VectorStores",()=>u),n.export(r,"VectorStoresPage",()=>c);var a=e("../../../resource.mjs"),s=e("../../../core.mjs"),i=e("./file-batches.mjs"),o=e("./files.mjs"),l=e("../../../pagination.mjs");class u extends a.APIResource{constructor(){super(...arguments),this.files=new o.Files(this._client),this.fileBatches=new i.FileBatches(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},t){return(0,s.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/vector_stores",c,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class c extends l.CursorPage{}u.VectorStoresPage=c,u.Files=o.Files,u.VectorStoreFilesPage=o.VectorStoreFilesPage,u.FileBatches=i.FileBatches},{"../../../resource.mjs":"6DOvT","../../../core.mjs":"gJfyr","./file-batches.mjs":"3itty","./files.mjs":"2d117","../../../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3itty":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"FileBatches",()=>l),n.export(r,"VectorStoreFilesPage",()=>o.VectorStoreFilesPage);var a=e("../../../resource.mjs"),s=e("../../../core.mjs"),i=e("../../../lib/Util.mjs"),o=e("./files.mjs");class l extends a.APIResource{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,t,r){let n=await this.create(e,t);return await this.poll(e,n.id,r)}listFiles(e,t,r={},n){return(0,s.isRequestOptions)(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,o.VectorStoreFilesPage,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async poll(e,t,r){let n={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){let{data:a,response:i}=await this.retrieve(e,t,{...r,headers:n}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{let e=i.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(o=t)}}await (0,s.sleep)(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},n){if(null==t||0==t.length)throw Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let a=Math.min(n?.maxConcurrency??5,t.length),s=this._client,o=t.values(),l=[...r];async function u(e){for(let t of e){let e=await s.files.create({file:t,purpose:"assistants"},n);l.push(e.id)}}let c=Array(a).fill(o).map(u);return await (0,i.allSettledWithThrow)(c),await this.createAndPoll(e,{file_ids:l})}}},{"../../../resource.mjs":"6DOvT","../../../core.mjs":"gJfyr","../../../lib/Util.mjs":"TuOQk","./files.mjs":"2d117","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],TuOQk:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"allSettledWithThrow",()=>a);let a=async e=>{let t=await Promise.allSettled(e),r=t.filter(e=>"rejected"===e.status);if(r.length){for(let e of r)console.error(e.reason);throw Error(`${r.length} promise(s) failed - see the above errors`)}let n=[];for(let e of t)"fulfilled"===e.status&&n.push(e.value);return n}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2d117":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Files",()=>o),n.export(r,"VectorStoreFilesPage",()=>l);var a=e("../../../resource.mjs"),s=e("../../../core.mjs"),i=e("../../../pagination.mjs");class o extends a.APIResource{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},r){return(0,s.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,l,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,t,r){let n=await this.create(e,t,r);return await this.poll(e,n.id,r)}async poll(e,t,r){let n={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){let a=await this.retrieve(e,t,{...r,headers:n}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{let e=a.response.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(o=t)}}await (0,s.sleep)(o);break;case"failed":case"completed":return i}}}async upload(e,t,r){let n=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:n.id},r)}async uploadAndPoll(e,t,r){let n=await this.upload(e,t,r);return await this.poll(e,n.id,r)}}class l extends i.CursorPage{}o.VectorStoreFilesPage=l},{"../../../resource.mjs":"6DOvT","../../../core.mjs":"gJfyr","../../../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"9FShi":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Completions",()=>s);var a=e("../resource.mjs");class s extends a.APIResource{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}},{"../resource.mjs":"6DOvT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],eHHVh:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Embeddings",()=>s);var a=e("../resource.mjs");class s extends a.APIResource{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}},{"../resource.mjs":"6DOvT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5v55L":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Files",()=>l),n.export(r,"FileObjectsPage",()=>u);var a=e("../resource.mjs"),s=e("../core.mjs"),i=e("../error.mjs"),o=e("../pagination.mjs");class l extends a.APIResource{create(e,t){return this._client.post("/files",s.multipartFormRequestOptions({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return(0,s.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/files",u,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){let n=new Set(["processed","error","deleted"]),a=Date.now(),o=await this.retrieve(e);for(;!o.status||!n.has(o.status);)if(await (0,s.sleep)(t),o=await this.retrieve(e),Date.now()-a>r)throw new i.APIConnectionTimeoutError({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}}class u extends o.CursorPage{}l.FileObjectsPage=u},{"../resource.mjs":"6DOvT","../core.mjs":"gJfyr","../error.mjs":"7evlg","../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],edwwe:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"FineTuning",()=>i);var a=e("../../resource.mjs"),s=e("./jobs/jobs.mjs");class i extends a.APIResource{constructor(){super(...arguments),this.jobs=new s.Jobs(this._client)}}i.Jobs=s.Jobs,i.FineTuningJobsPage=s.FineTuningJobsPage,i.FineTuningJobEventsPage=s.FineTuningJobEventsPage},{"../../resource.mjs":"6DOvT","./jobs/jobs.mjs":"kXjvs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kXjvs:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Jobs",()=>l),n.export(r,"FineTuningJobsPage",()=>u),n.export(r,"FineTuningJobEventsPage",()=>c);var a=e("../../../resource.mjs"),s=e("../../../core.mjs"),i=e("./checkpoints.mjs"),o=e("../../../pagination.mjs");class l extends a.APIResource{constructor(){super(...arguments),this.checkpoints=new i.Checkpoints(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return(0,s.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",u,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return(0,s.isRequestOptions)(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,c,{query:t,...r})}}class u extends o.CursorPage{}class c extends o.CursorPage{}l.FineTuningJobsPage=u,l.FineTuningJobEventsPage=c,l.Checkpoints=i.Checkpoints,l.FineTuningJobCheckpointsPage=i.FineTuningJobCheckpointsPage},{"../../../resource.mjs":"6DOvT","../../../core.mjs":"gJfyr","./checkpoints.mjs":"8qmdK","../../../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8qmdK":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Checkpoints",()=>o),n.export(r,"FineTuningJobCheckpointsPage",()=>l);var a=e("../../../resource.mjs"),s=e("../../../core.mjs"),i=e("../../../pagination.mjs");class o extends a.APIResource{list(e,t={},r){return(0,s.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,l,{query:t,...r})}}class l extends i.CursorPage{}o.FineTuningJobCheckpointsPage=l},{"../../../resource.mjs":"6DOvT","../../../core.mjs":"gJfyr","../../../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jEf0n:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Images",()=>i);var a=e("../resource.mjs"),s=e("../core.mjs");class i extends a.APIResource{createVariation(e,t){return this._client.post("/images/variations",s.multipartFormRequestOptions({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",s.multipartFormRequestOptions({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}},{"../resource.mjs":"6DOvT","../core.mjs":"gJfyr","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4AK6L":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Models",()=>i),n.export(r,"ModelsPage",()=>o);var a=e("../resource.mjs"),s=e("../pagination.mjs");class i extends a.APIResource{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",o,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class o extends s.Page{}i.ModelsPage=o},{"../resource.mjs":"6DOvT","../pagination.mjs":"hLuYs","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2qkYg":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Moderations",()=>s);var a=e("../resource.mjs");class s extends a.APIResource{create(e,t){return this._client.post("/moderations",{body:e,...t})}}},{"../resource.mjs":"6DOvT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3MwQK":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Uploads",()=>i);var a=e("../../resource.mjs"),s=e("./parts.mjs");class i extends a.APIResource{constructor(){super(...arguments),this.parts=new s.Parts(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}i.Parts=s.Parts},{"../../resource.mjs":"6DOvT","./parts.mjs":"fllkv","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fllkv:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Parts",()=>i);var a=e("../../resource.mjs"),s=e("../../core.mjs");class i extends a.APIResource{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,s.multipartFormRequestOptions({body:t,...r}))}}},{"../../resource.mjs":"6DOvT","../../core.mjs":"gJfyr","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gyLhg:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RUN_KEY",()=>i.RUN_KEY),n.export(r,"BaseMessageChunk",()=>a.BaseMessageChunk),n.export(r,"HumanMessageChunk",()=>a.HumanMessageChunk),n.export(r,"AIMessageChunk",()=>a.AIMessageChunk),n.export(r,"SystemMessageChunk",()=>a.SystemMessageChunk),n.export(r,"FunctionMessage",()=>a.FunctionMessage),n.export(r,"FunctionMessageChunk",()=>a.FunctionMessageChunk),n.export(r,"ToolMessage",()=>a.ToolMessage),n.export(r,"ToolMessageChunk",()=>a.ToolMessageChunk),n.export(r,"ChatMessage",()=>a.ChatMessage),n.export(r,"mapStoredMessageToChatMessage",()=>a.mapStoredMessageToChatMessage),n.export(r,"ChatMessageChunk",()=>a.ChatMessageChunk),n.export(r,"coerceMessageLikeToMessage",()=>a.coerceMessageLikeToMessage),n.export(r,"isBaseMessage",()=>a.isBaseMessage),n.export(r,"isBaseMessageChunk",()=>a.isBaseMessageChunk),n.export(r,"GenerationChunk",()=>i.GenerationChunk),n.export(r,"ChatGenerationChunk",()=>i.ChatGenerationChunk),n.export(r,"BasePromptValue",()=>o.BasePromptValue),n.export(r,"BaseChatMessageHistory",()=>l.BaseChatMessageHistory),n.export(r,"BaseListChatMessageHistory",()=>l.BaseListChatMessageHistory),n.export(r,"BaseCache",()=>u.BaseCache),n.export(r,"BaseMessage",()=>a.BaseMessage),n.export(r,"HumanMessage",()=>a.HumanMessage),n.export(r,"AIMessage",()=>a.AIMessage),n.export(r,"SystemMessage",()=>a.SystemMessage),n.export(r,"BaseChatMessage",()=>c),n.export(r,"HumanChatMessage",()=>d),n.export(r,"AIChatMessage",()=>p),n.export(r,"SystemChatMessage",()=>f),n.export(r,"BaseFileStore",()=>h),n.export(r,"BaseEntityStore",()=>m),n.export(r,"Docstore",()=>g);var a=e("@langchain/core/messages"),s=e("../load/serializable.js"),i=e("@langchain/core/outputs"),o=e("@langchain/core/prompt_values"),l=e("@langchain/core/chat_history"),u=e("@langchain/core/caches");let c=a.BaseMessage,d=a.HumanMessage,p=a.AIMessage,f=a.SystemMessage;class h extends s.Serializable{}class m extends s.Serializable{}class g{}},{"@langchain/core/messages":"avKue","../load/serializable.js":"lzycS","@langchain/core/outputs":"fDkg5","@langchain/core/prompt_values":"5IYhT","@langchain/core/chat_history":"j998g","@langchain/core/caches":"lEHU3","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],avKue:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/messages/index.js");n.exportAll(a,r)},{"./dist/messages/index.js":"jMGwo","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],lzycS:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/load/serializable");n.exportAll(a,r)},{"@langchain/core/load/serializable":"5ijQI","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5ijQI":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/load/serializable.js");n.exportAll(a,r)},{"../dist/load/serializable.js":"ihLrn","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fDkg5:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/outputs.js");n.exportAll(a,r)},{"./dist/outputs.js":"l1AvI","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],l1AvI:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RUN_KEY",()=>a),n.export(r,"GenerationChunk",()=>s),n.export(r,"ChatGenerationChunk",()=>i);let a="__run";class s{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new s({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class i extends s{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new i({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5IYhT":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/prompt_values.js");n.exportAll(a,r)},{"./dist/prompt_values.js":"lGT4D","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],lGT4D:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BasePromptValue",()=>i),n.export(r,"StringPromptValue",()=>o),n.export(r,"ChatPromptValue",()=>l);var a=e("./load/serializable.js"),s=e("./messages/index.js");class i extends a.Serializable{}class o extends i{constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new s.HumanMessage(this.value)]}}class l extends i{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return(0,s.getBufferString)(this.messages)}toChatMessages(){return this.messages}}},{"./load/serializable.js":"ihLrn","./messages/index.js":"jMGwo","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],j998g:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/chat_history.js");n.exportAll(a,r)},{"./dist/chat_history.js":"3VCHZ","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3VCHZ":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseChatMessageHistory",()=>i),n.export(r,"BaseListChatMessageHistory",()=>o);var a=e("./load/serializable.js"),s=e("./messages/index.js");class i extends a.Serializable{}class o extends a.Serializable{addUserMessage(e){return this.addMessage(new s.HumanMessage(e))}addAIChatMessage(e){return this.addMessage(new s.AIMessage(e))}}},{"./load/serializable.js":"ihLrn","./messages/index.js":"jMGwo","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],lEHU3:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/caches.js");n.exportAll(a,r)},{"./dist/caches.js":"etUzK","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],etUzK:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getCacheKey",()=>i),n.export(r,"deserializeStoredGeneration",()=>o),n.export(r,"serializeGeneration",()=>l),n.export(r,"BaseCache",()=>u),n.export(r,"InMemoryCache",()=>d);var a=e("./utils/hash.js"),s=e("./messages/index.js");let i=(...e)=>(0,a.insecureHash)(e.join("_"));function o(e){return void 0!==e.message?{text:e.text,message:(0,s.mapStoredMessageToChatMessage)(e.message)}:{text:e.text}}function l(e){let t={text:e.text};return void 0!==e.message&&(t.message=e.message.toDict()),t}class u{}let c=new Map;class d extends u{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(i(e,t))??null)}async update(e,t,r){this.cache.set(i(e,t),r)}static global(){return new d(c)}}},{"./utils/hash.js":"7B4Xv","./messages/index.js":"jMGwo","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7B4Xv":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"insecureHash",()=>a.insecureHash);var a=e("./js-sha1/hash.js")},{"./js-sha1/hash.js":"ee2G9","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ee2G9:[function(e,t,r){/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"insecureHash",()=>c);var a="object"==typeof window?window:{},s="0123456789abcdef".split(""),i=[-2147483648,8388608,32768,128],o=[24,16,8,0],l=[];function u(e){e?(l[0]=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0,this.blocks=l):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}u.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===a.ArrayBuffer&&(e=new Uint8Array(e));for(var r,n,s=0,i=e.length||0,l=this.blocks;s<i;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),t)for(n=this.start;s<i&&n<64;++s)l[n>>2]|=e[s]<<o[3&n++];else for(n=this.start;s<i&&n<64;++s)(r=e.charCodeAt(s))<128?l[n>>2]|=r<<o[3&n++]:(r<2048?l[n>>2]|=(192|r>>6)<<o[3&n++]:(r<55296||r>=57344?l[n>>2]|=(224|r>>12)<<o[3&n++]:(r=65536+((1023&r)<<10|1023&e.charCodeAt(++s)),l[n>>2]|=(240|r>>18)<<o[3&n++],l[n>>2]|=(128|r>>12&63)<<o[3&n++]),l[n>>2]|=(128|r>>6&63)<<o[3&n++]),l[n>>2]|=(128|63&r)<<o[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=l[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},u.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=i[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},u.prototype.hash=function(){var e,t,r,n=this.h0,a=this.h1,s=this.h2,i=this.h3,o=this.h4,l=this.blocks;for(t=16;t<80;++t)r=l[t-3]^l[t-8]^l[t-14]^l[t-16],l[t]=r<<1|r>>>31;for(t=0;t<20;t+=5)e=a&s|~a&i,o=(r=n<<5|n>>>27)+e+o+1518500249+l[t]<<0,e=n&(a=a<<30|a>>>2)|~n&s,i=(r=o<<5|o>>>27)+e+i+1518500249+l[t+1]<<0,e=o&(n=n<<30|n>>>2)|~o&a,s=(r=i<<5|i>>>27)+e+s+1518500249+l[t+2]<<0,e=i&(o=o<<30|o>>>2)|~i&n,a=(r=s<<5|s>>>27)+e+a+1518500249+l[t+3]<<0,e=s&(i=i<<30|i>>>2)|~s&o,n=(r=a<<5|a>>>27)+e+n+1518500249+l[t+4]<<0,s=s<<30|s>>>2;for(;t<40;t+=5)e=a^s^i,o=(r=n<<5|n>>>27)+e+o+1859775393+l[t]<<0,e=n^(a=a<<30|a>>>2)^s,i=(r=o<<5|o>>>27)+e+i+1859775393+l[t+1]<<0,e=o^(n=n<<30|n>>>2)^a,s=(r=i<<5|i>>>27)+e+s+1859775393+l[t+2]<<0,e=i^(o=o<<30|o>>>2)^n,a=(r=s<<5|s>>>27)+e+a+1859775393+l[t+3]<<0,e=s^(i=i<<30|i>>>2)^o,n=(r=a<<5|a>>>27)+e+n+1859775393+l[t+4]<<0,s=s<<30|s>>>2;for(;t<60;t+=5)e=a&s|a&i|s&i,o=(r=n<<5|n>>>27)+e+o-1894007588+l[t]<<0,e=n&(a=a<<30|a>>>2)|n&s|a&s,i=(r=o<<5|o>>>27)+e+i-1894007588+l[t+1]<<0,e=o&(n=n<<30|n>>>2)|o&a|n&a,s=(r=i<<5|i>>>27)+e+s-1894007588+l[t+2]<<0,e=i&(o=o<<30|o>>>2)|i&n|o&n,a=(r=s<<5|s>>>27)+e+a-1894007588+l[t+3]<<0,e=s&(i=i<<30|i>>>2)|s&o|i&o,n=(r=a<<5|a>>>27)+e+n-1894007588+l[t+4]<<0,s=s<<30|s>>>2;for(;t<80;t+=5)e=a^s^i,o=(r=n<<5|n>>>27)+e+o-899497514+l[t]<<0,e=n^(a=a<<30|a>>>2)^s,i=(r=o<<5|o>>>27)+e+i-899497514+l[t+1]<<0,e=o^(n=n<<30|n>>>2)^a,s=(r=i<<5|i>>>27)+e+s-899497514+l[t+2]<<0,e=i^(o=o<<30|o>>>2)^n,a=(r=s<<5|s>>>27)+e+a-899497514+l[t+3]<<0,e=s^(i=i<<30|i>>>2)^o,n=(r=a<<5|a>>>27)+e+n-899497514+l[t+4]<<0,s=s<<30|s>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+a<<0,this.h2=this.h2+s<<0,this.h3=this.h3+i<<0,this.h4=this.h4+o<<0},u.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4;return s[e>>28&15]+s[e>>24&15]+s[e>>20&15]+s[e>>16&15]+s[e>>12&15]+s[e>>8&15]+s[e>>4&15]+s[15&e]+s[t>>28&15]+s[t>>24&15]+s[t>>20&15]+s[t>>16&15]+s[t>>12&15]+s[t>>8&15]+s[t>>4&15]+s[15&t]+s[r>>28&15]+s[r>>24&15]+s[r>>20&15]+s[r>>16&15]+s[r>>12&15]+s[r>>8&15]+s[r>>4&15]+s[15&r]+s[n>>28&15]+s[n>>24&15]+s[n>>20&15]+s[n>>16&15]+s[n>>12&15]+s[n>>8&15]+s[n>>4&15]+s[15&n]+s[a>>28&15]+s[a>>24&15]+s[a>>20&15]+s[a>>16&15]+s[a>>12&15]+s[a>>8&15]+s[a>>4&15]+s[15&a]},u.prototype.toString=u.prototype.hex,u.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a]},u.prototype.array=u.prototype.digest,u.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};let c=e=>new u(!0).update(e).hex()},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hAjqs:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"formatToOpenAIFunction",()=>s),n.export(r,"formatToOpenAITool",()=>i),n.export(r,"formatToOpenAIAssistantTool",()=>o);var a=e("zod-to-json-schema");function s(e){return{name:e.name,description:e.description,parameters:(0,a.zodToJsonSchema)(e.schema)}}function i(e){let t=(0,a.zodToJsonSchema)(e.schema);return{type:"function",function:{name:e.name,description:e.description,parameters:t}}}function o(e){return{type:"function",function:{name:e.name,description:e.description,parameters:(0,a.zodToJsonSchema)(e.schema)}}}},{"zod-to-json-schema":"bNbDp","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bNbDp:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.zodToJsonSchema=void 0;let n=e("f3866ee2cdefb4e3");Object.defineProperty(r,"zodToJsonSchema",{enumerable:!0,get:function(){return n.zodToJsonSchema}}),r.default=n.zodToJsonSchema},{f3866ee2cdefb4e3:"9Kbkg"}],"9Kbkg":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.zodToJsonSchema=void 0;let n=e("36e1736509eafcd6"),a=e("dc5e68830f588762");r.zodToJsonSchema=(e,t)=>{var r;let s=(0,a.getRefs)(t),i="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>{var a;return Object.assign(Object.assign({},e),{[t]:null!==(a=(0,n.parseDef)(r._def,Object.assign(Object.assign({},s),{currentPath:[...s.basePath,s.definitionPath,t]})))&&void 0!==a?a:{}})},{}):void 0,o="string"==typeof t?t:null==t?void 0:t.name,l=null!==(r=(0,n.parseDef)(e._def,void 0===o?s:Object.assign(Object.assign({},s),{currentPath:[...s.basePath,s.definitionPath,o]})))&&void 0!==r?r:{},u=void 0===o?i?Object.assign(Object.assign({},l),{[s.definitionPath]:i}):l:{$ref:[..."relative"===s.$refStrategy?[]:s.basePath,s.definitionPath,o].join("/"),[s.definitionPath]:Object.assign(Object.assign({},i),{[o]:l})};return"jsonSchema7"===s.target&&(u.$schema="http://json-schema.org/draft-07/schema#"),u}},{"36e1736509eafcd6":"kPLE2",dc5e68830f588762:"e0OcL"}],kPLE2:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseDef=void 0;let n=e("abf7d016b5e63592"),a=e("f4d51417532095"),s=e("f407254099e7d0a0"),i=e("9192b446832b8720"),o=e("dc3127bf675e6f25"),l=e("5d822b9a6030004b"),u=e("1c0c3fff4f83a363"),c=e("2d845dfa79071dbd"),d=e("8008d0c84f5f8ce7"),p=e("41c4a9e712de6572"),f=e("e2d079915f2d09a"),h=e("ed10afd563863d27"),m=e("7f3ec1205c9fa6c0"),g=e("8338b05c60a0dfad"),y=e("9e0c620fad60bfbf"),v=e("77618c13aa53bfc8"),b=e("e5f6886fcbbfb090"),_=e("c6d62914921e8cab"),w=e("c891e94ee61a784b"),j=e("a74830155e815ef"),x=e("664d47955d7ee17"),S=e("45f8f526226ece53"),k=e("cee3d06fb565d2e2"),P=e("99757ff2e54569c3"),O=e("22edb22c77567c51"),I=e("2d1b6e8b67f5194c"),C=e("9062e224b3bfbb59"),E=e("966f42eabe3112ec"),T=e("e384e8d0f0ab7529"),A=e("1ff269cb133da2e2");function R(e,t){let r=t.seen.find(t=>Object.is(t.def,e));if(r)return N(r,t);let n={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.push(n);let a=L(e,e.typeName,t);return a&&F(e,a),n.jsonSchema=a,a}r.parseDef=R;let N=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:0===e.path.length?"":1===e.path.length?`${e.path[0]}/`:e.path.join("/")};case"relative":return{$ref:M(t.currentPath,e.path)};case"none":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return e.jsonSchema}},M=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},L=(e,t,r)=>{switch(t){case n.ZodFirstPartyTypeKind.ZodString:return(0,I.parseStringDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNumber:return(0,w.parseNumberDef)(e,r);case n.ZodFirstPartyTypeKind.ZodObject:return(0,j.parseObjectDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBigInt:return(0,i.parseBigintDef)();case n.ZodFirstPartyTypeKind.ZodBoolean:return(0,o.parseBooleanDef)();case n.ZodFirstPartyTypeKind.ZodDate:return(0,c.parseDateDef)();case n.ZodFirstPartyTypeKind.ZodUndefined:return(0,E.parseUndefinedDef)();case n.ZodFirstPartyTypeKind.ZodNull:return(0,b.parseNullDef)(r);case n.ZodFirstPartyTypeKind.ZodArray:return(0,s.parseArrayDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUnion:case n.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,T.parseUnionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodIntersection:return(0,h.parseIntersectionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodTuple:return(0,C.parseTupleDef)(e,r);case n.ZodFirstPartyTypeKind.ZodRecord:return(0,P.parseRecordDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLiteral:return(0,m.parseLiteralDef)(e,r);case n.ZodFirstPartyTypeKind.ZodEnum:return(0,f.parseEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,y.parseNativeEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNullable:return(0,_.parseNullableDef)(e,r);case n.ZodFirstPartyTypeKind.ZodOptional:return(0,x.parseOptionalDef)(e,r);case n.ZodFirstPartyTypeKind.ZodMap:return(0,g.parseMapDef)(e,r);case n.ZodFirstPartyTypeKind.ZodSet:return(0,O.parseSetDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLazy:return R(e.getter()._def,r);case n.ZodFirstPartyTypeKind.ZodPromise:return(0,k.parsePromiseDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNaN:case n.ZodFirstPartyTypeKind.ZodNever:return(0,v.parseNeverDef)();case n.ZodFirstPartyTypeKind.ZodEffects:return(0,p.parseEffectsDef)(e,r);case n.ZodFirstPartyTypeKind.ZodAny:return(0,a.parseAnyDef)();case n.ZodFirstPartyTypeKind.ZodUnknown:return(0,A.parseUnknownDef)();case n.ZodFirstPartyTypeKind.ZodDefault:return(0,d.parseDefaultDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBranded:return(0,l.parseBrandedDef)(e,r);case n.ZodFirstPartyTypeKind.ZodCatch:return(0,u.parseCatchDef)(e,r);case n.ZodFirstPartyTypeKind.ZodPipeline:return(0,S.parsePipelineDef)(e,r);case n.ZodFirstPartyTypeKind.ZodFunction:case n.ZodFirstPartyTypeKind.ZodVoid:case n.ZodFirstPartyTypeKind.ZodSymbol:default:return}},F=(e,t)=>(e.description&&(t.description=e.description),t)},{abf7d016b5e63592:"lqsn8",f4d51417532095:"58jN9",f407254099e7d0a0:"jUBXy","9192b446832b8720":"bZYpS",dc3127bf675e6f25:"9GHjs","5d822b9a6030004b":"1K4x4","1c0c3fff4f83a363":"jodfL","2d845dfa79071dbd":"3sMwi","8008d0c84f5f8ce7":"2OdOr","41c4a9e712de6572":"6pbWw",e2d079915f2d09a:"hiYWX",ed10afd563863d27:"dIQvX","7f3ec1205c9fa6c0":"20PXB","8338b05c60a0dfad":"5TaIq","9e0c620fad60bfbf":"33vCq","77618c13aa53bfc8":"dvscY",e5f6886fcbbfb090:"53xEr",c6d62914921e8cab:"nYFG8",c891e94ee61a784b:"i70u7",a74830155e815ef:"4iJP4","664d47955d7ee17":"fIheH","45f8f526226ece53":"3enQM",cee3d06fb565d2e2:"b9q6l","99757ff2e54569c3":"78DW8","22edb22c77567c51":"djMPA","2d1b6e8b67f5194c":"lmNaM","9062e224b3bfbb59":"77Z7P","966f42eabe3112ec":"lsw40",e384e8d0f0ab7529:"9OF63","1ff269cb133da2e2":"99v0o"}],lqsn8:[function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.z=void 0;let o=s(e("d45fe7b8c9b16455"));r.z=o,i(e("d45fe7b8c9b16455"),r),r.default=o},{d45fe7b8c9b16455:"9jAUR"}],"9jAUR":[function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e("4001cc4e3a7bc5cc"),r),a(e("6e3e8d1fcd1bb517"),r),a(e("a4be7ad02be6b335"),r),a(e("7f57e48db95e0d80"),r),a(e("b66bd39f9e270640"),r),a(e("60a0b50ceab56b7c"),r)},{"4001cc4e3a7bc5cc":"6Qvhy","6e3e8d1fcd1bb517":"cqf4Z",a4be7ad02be6b335:"3RSNa","7f57e48db95e0d80":"bHmLw",b66bd39f9e270640:"iN0uZ","60a0b50ceab56b7c":"bsX6Q"}],"6Qvhy":[function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getErrorMap=r.setErrorMap=r.defaultErrorMap=void 0;let a=n(e("8cfbfbf62f464548"));r.defaultErrorMap=a.default;let s=a.default;r.setErrorMap=function(e){s=e},r.getErrorMap=function(){return s}},{"8cfbfbf62f464548":"1UfJt"}],"1UfJt":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});let n=e("b75868f6b25d7c12"),a=e("deaf0c0f645bf06f");r.default=(e,t)=>{let r;switch(e.code){case a.ZodIssueCode.invalid_type:r=e.received===n.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case a.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.util.jsonStringifyReplacer)}`;break;case a.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.util.joinValues(e.keys,", ")}`;break;case a.ZodIssueCode.invalid_union:r="Invalid input";break;case a.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.util.joinValues(e.options)}`;break;case a.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${n.util.joinValues(e.options)}, received '${e.received}'`;break;case a.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case a.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case a.ZodIssueCode.invalid_date:r="Invalid date";break;case a.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case a.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case a.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case a.ZodIssueCode.custom:r="Invalid input";break;case a.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case a.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case a.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.util.assertNever(e)}return{message:r}}},{b75868f6b25d7c12:"bHmLw",deaf0c0f645bf06f:"bsX6Q"}],bHmLw:[function(e,t,r){var n,a;Object.defineProperty(r,"__esModule",{value:!0}),r.getParsedType=r.ZodParsedType=r.objectUtil=r.util=void 0,(a=n=r.util||(r.util={})).assertEqual=e=>e,a.assertIs=function(e){},a.assertNever=function(e){throw Error()},a.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},a.getValidEnumValues=e=>{let t=a.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(let n of t)r[n]=e[n];return a.objectValues(r)},a.objectValues=e=>a.objectKeys(e).map(function(t){return e[t]}),a.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},a.find=(e,t)=>{for(let r of e)if(t(r))return r},a.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,a.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},a.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(r.objectUtil||(r.objectUtil={})).mergeShapes=(e,t)=>({...e,...t}),r.ZodParsedType=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),r.getParsedType=e=>{switch(typeof e){case"undefined":return r.ZodParsedType.undefined;case"string":return r.ZodParsedType.string;case"number":return isNaN(e)?r.ZodParsedType.nan:r.ZodParsedType.number;case"boolean":return r.ZodParsedType.boolean;case"function":return r.ZodParsedType.function;case"bigint":return r.ZodParsedType.bigint;case"symbol":return r.ZodParsedType.symbol;case"object":if(Array.isArray(e))return r.ZodParsedType.array;if(null===e)return r.ZodParsedType.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return r.ZodParsedType.promise;if("undefined"!=typeof Map&&e instanceof Map)return r.ZodParsedType.map;if("undefined"!=typeof Set&&e instanceof Set)return r.ZodParsedType.set;if("undefined"!=typeof Date&&e instanceof Date)return r.ZodParsedType.date;return r.ZodParsedType.object;default:return r.ZodParsedType.unknown}}},{}],bsX6Q:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ZodError=r.quotelessJson=r.ZodIssueCode=void 0;let n=e("c40b978ff7aeab77");r.ZodIssueCode=n.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),r.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class a extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){let r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof a))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}r.ZodError=a,a.create=e=>new a(e)},{c40b978ff7aeab77:"bHmLw"}],cqf4Z:[function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isAsync=r.isValid=r.isDirty=r.isAborted=r.OK=r.DIRTY=r.INVALID=r.ParseStatus=r.addIssueToContext=r.EMPTY_PATH=r.makeIssue=void 0;let a=e("8e35e30b80b0beb3"),s=n(e("9fcc80c3bf590096"));r.makeIssue=e=>{let{data:t,path:r,errorMaps:n,issueData:a}=e,s=[...r,...a.path||[]],i={...a,path:s};if(void 0!==a.message)return{...a,path:s,message:a.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...a,path:s,message:o}},r.EMPTY_PATH=[],r.addIssueToContext=function(e,t){let n=(0,a.getErrorMap)(),i=(0,r.makeIssue)({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===s.default?void 0:s.default].filter(e=>!!e)});e.common.issues.push(i)};class i{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let a of t){if("aborted"===a.status)return r.INVALID;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return i.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let n={};for(let a of t){let{key:t,value:s}=a;if("aborted"===t.status||"aborted"===s.status)return r.INVALID;"dirty"===t.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==s.value||a.alwaysSet)&&(n[t.value]=s.value)}return{status:e.value,value:n}}}r.ParseStatus=i,r.INVALID=Object.freeze({status:"aborted"}),r.DIRTY=e=>({status:"dirty",value:e}),r.OK=e=>({status:"valid",value:e}),r.isAborted=e=>"aborted"===e.status,r.isDirty=e=>"dirty"===e.status,r.isValid=e=>"valid"===e.status,r.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},{"8e35e30b80b0beb3":"6Qvhy","9fcc80c3bf590096":"1UfJt"}],"3RSNa":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})},{}],iN0uZ:[function(e,t,r){let n;var a,s,i,o,l=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.boolean=r.bigint=r.array=r.any=r.coerce=r.ZodFirstPartyTypeKind=r.late=r.ZodSchema=r.Schema=r.custom=r.ZodReadonly=r.ZodPipeline=r.ZodBranded=r.BRAND=r.ZodNaN=r.ZodCatch=r.ZodDefault=r.ZodNullable=r.ZodOptional=r.ZodTransformer=r.ZodEffects=r.ZodPromise=r.ZodNativeEnum=r.ZodEnum=r.ZodLiteral=r.ZodLazy=r.ZodFunction=r.ZodSet=r.ZodMap=r.ZodRecord=r.ZodTuple=r.ZodIntersection=r.ZodDiscriminatedUnion=r.ZodUnion=r.ZodObject=r.ZodArray=r.ZodVoid=r.ZodNever=r.ZodUnknown=r.ZodAny=r.ZodNull=r.ZodUndefined=r.ZodSymbol=r.ZodDate=r.ZodBoolean=r.ZodBigInt=r.ZodNumber=r.ZodString=r.datetimeRegex=r.ZodType=void 0,r.NEVER=r.void=r.unknown=r.union=r.undefined=r.tuple=r.transformer=r.symbol=r.string=r.strictObject=r.set=r.record=r.promise=r.preprocess=r.pipeline=r.ostring=r.optional=r.onumber=r.oboolean=r.object=r.number=r.nullable=r.null=r.never=r.nativeEnum=r.nan=r.map=r.literal=r.lazy=r.intersection=r.instanceof=r.function=r.enum=r.effect=r.discriminatedUnion=r.date=void 0;let c=e("4a373457de97c953"),d=e("1a7822294384dc88"),p=e("e9c7a884dff41e37"),f=e("a3ec468da7426bd6"),h=e("400c778262c60ffc");class m{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let g=(e,t)=>{if((0,p.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new h.ZodError(e.common.issues);return this._error=t,this._error}}};function y(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{var s,i;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!==(s=null!=o?o:n)&&void 0!==s?s:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(i=null!=o?o:r)&&void 0!==i?i:a.defaultError}},description:a}}class v{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return(0,f.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,f.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new p.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,f.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if((0,p.isAsync)(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,f.getParsedType)(e)},a=this._parseSync({data:e,path:n.path,parent:n});return g(n,a)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,f.getParsedType)(e)},n=this._parse({data:e,path:r.path,parent:r});return g(r,await ((0,p.isAsync)(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let a=e(t),s=()=>n.addIssue({code:h.ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(s(),!1)):!!a||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new el({schema:this,typeName:o.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return eu.create(this,this._def)}nullable(){return ec.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return V.create(this,this._def)}promise(){return eo.create(this,this._def)}or(e){return H.create([this,e],this._def)}and(e){return Q.create(this,e,this._def)}transform(e){return new el({...y(this._def),schema:this,typeName:o.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ed({...y(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:o.ZodDefault})}brand(){return new eh({typeName:o.ZodBranded,type:this,...y(this._def)})}catch(e){return new ep({...y(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:o.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return em.create(this,e)}readonly(){return eg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}r.ZodType=v,r.Schema=v,r.ZodSchema=v;let b=/^c[^\s-]{8,}$/i,_=/^[0-9a-z]+$/,w=/^[0-9A-HJKMNP-TV-Z]{26}$/,j=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,x=/^[a-z0-9_-]{21}$/i,S=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,k=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,P=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,O=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,I=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,C="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",E=RegExp(`^${C}$`);function T(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function A(e){let t=`${C}T${T(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}r.datetimeRegex=A;class R extends v{_parse(e){var t,r;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==f.ZodParsedType.string){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.string,received:t.parsedType}),p.INVALID}let s=new p.ParseStatus;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if("max"===i.kind)e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if("length"===i.kind){let t=e.data.length>i.value,r=e.data.length<i.value;(t||r)&&(a=this._getOrReturnCtx(e,a),t?(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):r&&(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if("email"===i.kind)k.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"email",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty());else if("emoji"===i.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"emoji",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty());else if("uuid"===i.kind)j.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"uuid",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty());else if("nanoid"===i.kind)x.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"nanoid",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty());else if("cuid"===i.kind)b.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"cuid",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty());else if("cuid2"===i.kind)_.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"cuid2",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty());else if("ulid"===i.kind)w.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"ulid",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(t){a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"url",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"regex",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):"datetime"===i.kind?A(i).test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.invalid_string,validation:"datetime",message:i.message}),s.dirty()):"date"===i.kind?E.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.invalid_string,validation:"date",message:i.message}),s.dirty()):"time"===i.kind?RegExp(`^${T(i)}$`).test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{code:h.ZodIssueCode.invalid_string,validation:"time",message:i.message}),s.dirty()):"duration"===i.kind?S.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"duration",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty()):"ip"===i.kind?(t=e.data,("v4"===(r=i.version)||!r)&&P.test(t)||("v6"===r||!r)&&O.test(t)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"ip",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty())):"base64"===i.kind?I.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,p.addIssueToContext)(a,{validation:"base64",code:h.ZodIssueCode.invalid_string,message:i.message}),s.dirty()):f.util.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:h.ZodIssueCode.invalid_string,...d.errorUtil.errToObj(r)})}_addCheck(e){return new R({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...d.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...d.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...d.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...d.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...d.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...d.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...d.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...d.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...d.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...d.errorUtil.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...d.errorUtil.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...d.errorUtil.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...d.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...d.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...d.errorUtil.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...d.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...d.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...d.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...d.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...d.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,d.errorUtil.errToObj(e))}trim(){return new R({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new R({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new R({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}r.ZodString=R,R.create=e=>{var t;return new R({checks:[],typeName:o.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...y(e)})};class N extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==f.ZodParsedType.number){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.number,received:t.parsedType}),p.INVALID}let r=new p.ParseStatus;for(let n of this._def.checks)"int"===n.kind?f.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.not_finite,message:n.message}),r.dirty()):f.util.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,d.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,d.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,d.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,d.errorUtil.toString(t))}setLimit(e,t,r,n){return new N({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:d.errorUtil.toString(n)}]})}_addCheck(e){return new N({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:d.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:d.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:d.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:d.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:d.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:d.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:d.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:d.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:d.errorUtil.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&f.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}r.ZodNumber=N,N.create=e=>new N({checks:[],typeName:o.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...y(e)});class M extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==f.ZodParsedType.bigint){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.bigint,received:t.parsedType}),p.INVALID}let r=new p.ParseStatus;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):f.util.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,d.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,d.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,d.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,d.errorUtil.toString(t))}setLimit(e,t,r,n){return new M({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:d.errorUtil.toString(n)}]})}_addCheck(e){return new M({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:d.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:d.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:d.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:d.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:d.errorUtil.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}r.ZodBigInt=M,M.create=e=>{var t;return new M({checks:[],typeName:o.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...y(e)})};class L extends v{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==f.ZodParsedType.boolean){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.boolean,received:t.parsedType}),p.INVALID}return(0,p.OK)(e.data)}}r.ZodBoolean=L,L.create=e=>new L({typeName:o.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...y(e)});class F extends v{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==f.ZodParsedType.date){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.date,received:t.parsedType}),p.INVALID}if(isNaN(e.data.getTime())){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_date}),p.INVALID}let r=new p.ParseStatus;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(t=this._getOrReturnCtx(e,t),(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):f.util.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new F({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:d.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:d.errorUtil.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}r.ZodDate=F,F.create=e=>new F({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:o.ZodDate,...y(e)});class $ extends v{_parse(e){if(this._getType(e)!==f.ZodParsedType.symbol){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.symbol,received:t.parsedType}),p.INVALID}return(0,p.OK)(e.data)}}r.ZodSymbol=$,$.create=e=>new $({typeName:o.ZodSymbol,...y(e)});class D extends v{_parse(e){if(this._getType(e)!==f.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.undefined,received:t.parsedType}),p.INVALID}return(0,p.OK)(e.data)}}r.ZodUndefined=D,D.create=e=>new D({typeName:o.ZodUndefined,...y(e)});class z extends v{_parse(e){if(this._getType(e)!==f.ZodParsedType.null){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.null,received:t.parsedType}),p.INVALID}return(0,p.OK)(e.data)}}r.ZodNull=z,z.create=e=>new z({typeName:o.ZodNull,...y(e)});class U extends v{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,p.OK)(e.data)}}r.ZodAny=U,U.create=e=>new U({typeName:o.ZodAny,...y(e)});class B extends v{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,p.OK)(e.data)}}r.ZodUnknown=B,B.create=e=>new B({typeName:o.ZodUnknown,...y(e)});class Z extends v{_parse(e){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.never,received:t.parsedType}),p.INVALID}}r.ZodNever=Z,Z.create=e=>new Z({typeName:o.ZodNever,...y(e)});class q extends v{_parse(e){if(this._getType(e)!==f.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.void,received:t.parsedType}),p.INVALID}return(0,p.OK)(e.data)}}r.ZodVoid=q,q.create=e=>new q({typeName:o.ZodVoid,...y(e)});class V extends v{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==f.ZodParsedType.array)return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.array,received:t.parsedType}),p.INVALID;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&((0,p.addIssueToContext)(t,{code:e?h.ZodIssueCode.too_big:h.ZodIssueCode.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&((0,p.addIssueToContext)(t,{code:h.ZodIssueCode.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&((0,p.addIssueToContext)(t,{code:h.ZodIssueCode.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new m(t,e,t.path,r)))).then(e=>p.ParseStatus.mergeArray(r,e));let a=[...t.data].map((e,r)=>n.type._parseSync(new m(t,e,t.path,r)));return p.ParseStatus.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new V({...this._def,minLength:{value:e,message:d.errorUtil.toString(t)}})}max(e,t){return new V({...this._def,maxLength:{value:e,message:d.errorUtil.toString(t)}})}length(e,t){return new V({...this._def,exactLength:{value:e,message:d.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}r.ZodArray=V,V.create=(e,t)=>new V({type:e,minLength:null,maxLength:null,exactLength:null,typeName:o.ZodArray,...y(t)});class K extends v{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=f.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==f.ZodParsedType.object){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.object,received:t.parsedType}),p.INVALID}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof Z&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||s.push(e);let i=[];for(let e of a){let t=n[e],a=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new m(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof Z){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&((0,p.addIssueToContext)(r,{code:h.ZodIssueCode.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new m(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>p.ParseStatus.mergeObjectSync(t,e)):p.ParseStatus.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return d.errorUtil.errToObj,new K({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,a,s,i;let o=null!==(s=null===(a=(n=this._def).errorMap)||void 0===a?void 0:a.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=d.errorUtil.errToObj(e).message)&&void 0!==i?i:o}:{message:o}}}:{}})}strip(){return new K({...this._def,unknownKeys:"strip"})}passthrough(){return new K({...this._def,unknownKeys:"passthrough"})}extend(e){return new K({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new K({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:o.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new K({...this._def,catchall:e})}pick(e){let t={};return f.util.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new K({...this._def,shape:()=>t})}omit(e){let t={};return f.util.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new K({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof K){let r={};for(let n in t.shape){let a=t.shape[n];r[n]=eu.create(e(a))}return new K({...t._def,shape:()=>r})}return t instanceof V?new V({...t._def,type:e(t.element)}):t instanceof eu?eu.create(e(t.unwrap())):t instanceof ec?ec.create(e(t.unwrap())):t instanceof G?G.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return f.util.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new K({...this._def,shape:()=>t})}required(e){let t={};return f.util.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eu;)e=e._def.innerType;t[r]=e}}),new K({...this._def,shape:()=>t})}keyof(){return ea(f.util.objectKeys(this.shape))}}r.ZodObject=K,K.create=(e,t)=>new K({shape:()=>e,unknownKeys:"strip",catchall:Z.create(),typeName:o.ZodObject,...y(t)}),K.strictCreate=(e,t)=>new K({shape:()=>e,unknownKeys:"strict",catchall:Z.create(),typeName:o.ZodObject,...y(t)}),K.lazycreate=(e,t)=>new K({shape:e,unknownKeys:"strip",catchall:Z.create(),typeName:o.ZodObject,...y(t)});class H extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new h.ZodError(e.ctx.common.issues));return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_union,unionErrors:r}),p.INVALID});{let e;let n=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=n.map(e=>new h.ZodError(e));return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_union,unionErrors:a}),p.INVALID}}get options(){return this._def.options}}r.ZodUnion=H,H.create=(e,t)=>new H({options:e,typeName:o.ZodUnion,...y(t)});let W=e=>{if(e instanceof er)return W(e.schema);if(e instanceof el)return W(e.innerType());if(e instanceof en)return[e.value];if(e instanceof es)return e.options;if(e instanceof ei)return f.util.objectValues(e.enum);if(e instanceof ed)return W(e._def.innerType);if(e instanceof D)return[void 0];else if(e instanceof z)return[null];else if(e instanceof eu)return[void 0,...W(e.unwrap())];else if(e instanceof ec)return[null,...W(e.unwrap())];else if(e instanceof eh)return W(e.unwrap());else if(e instanceof eg)return W(e.unwrap());else if(e instanceof ep)return W(e._def.innerType);else return[]};class J extends v{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.ZodParsedType.object)return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.object,received:t.parsedType}),p.INVALID;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):((0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),p.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=W(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(n.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,r)}}return new J({typeName:o.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...y(r)})}}r.ZodDiscriminatedUnion=J;class Q extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if((0,p.isAborted)(e)||(0,p.isAborted)(n))return p.INVALID;let a=function e(t,r){let n=(0,f.getParsedType)(t),a=(0,f.getParsedType)(r);if(t===r)return{valid:!0,data:t};if(n===f.ZodParsedType.object&&a===f.ZodParsedType.object){let n=f.util.objectKeys(r),a=f.util.objectKeys(t).filter(e=>-1!==n.indexOf(e)),s={...t,...r};for(let n of a){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1};s[n]=a.data}return{valid:!0,data:s}}if(n===f.ZodParsedType.array&&a===f.ZodParsedType.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let a=0;a<t.length;a++){let s=e(t[a],r[a]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===f.ZodParsedType.date&&a===f.ZodParsedType.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,n.value);return a.valid?(((0,p.isDirty)(e)||(0,p.isDirty)(n))&&t.dirty(),{status:t.value,value:a.data}):((0,p.addIssueToContext)(r,{code:h.ZodIssueCode.invalid_intersection_types}),p.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}r.ZodIntersection=Q,Q.create=(e,t,r)=>new Q({left:e,right:t,typeName:o.ZodIntersection,...y(r)});class G extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.ZodParsedType.array)return(0,p.addIssueToContext)(r,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.array,received:r.parsedType}),p.INVALID;if(r.data.length<this._def.items.length)return(0,p.addIssueToContext)(r,{code:h.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),p.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,p.addIssueToContext)(r,{code:h.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new m(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>p.ParseStatus.mergeArray(t,e)):p.ParseStatus.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new G({...this._def,rest:e})}}r.ZodTuple=G,G.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new G({items:e,typeName:o.ZodTuple,rest:null,...y(t)})};class Y extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.ZodParsedType.object)return(0,p.addIssueToContext)(r,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.object,received:r.parsedType}),p.INVALID;let n=[],a=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:a._parse(new m(r,e,r.path,e)),value:s._parse(new m(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?p.ParseStatus.mergeObjectAsync(t,n):p.ParseStatus.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new Y(t instanceof v?{keyType:e,valueType:t,typeName:o.ZodRecord,...y(r)}:{keyType:R.create(),valueType:e,typeName:o.ZodRecord,...y(t)})}}r.ZodRecord=Y;class X extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.ZodParsedType.map)return(0,p.addIssueToContext)(r,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.map,received:r.parsedType}),p.INVALID;let n=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new m(r,e,r.path,[s,"key"])),value:a._parse(new m(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return p.INVALID;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return p.INVALID;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}r.ZodMap=X,X.create=(e,t,r)=>new X({valueType:t,keyType:e,typeName:o.ZodMap,...y(r)});class ee extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.ZodParsedType.set)return(0,p.addIssueToContext)(r,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.set,received:r.parsedType}),p.INVALID;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&((0,p.addIssueToContext)(r,{code:h.ZodIssueCode.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&((0,p.addIssueToContext)(r,{code:h.ZodIssueCode.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return p.INVALID;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>a._parse(new m(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new ee({...this._def,minSize:{value:e,message:d.errorUtil.toString(t)}})}max(e,t){return new ee({...this._def,maxSize:{value:e,message:d.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}r.ZodSet=ee,ee.create=(e,t)=>new ee({valueType:e,minSize:null,maxSize:null,typeName:o.ZodSet,...y(t)});class et extends v{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.ZodParsedType.function)return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.function,received:t.parsedType}),p.INVALID;function r(e,r){return(0,p.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,c.getErrorMap)(),c.defaultErrorMap].filter(e=>!!e),issueData:{code:h.ZodIssueCode.invalid_arguments,argumentsError:r}})}function n(e,r){return(0,p.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,c.getErrorMap)(),c.defaultErrorMap].filter(e=>!!e),issueData:{code:h.ZodIssueCode.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof eo){let e=this;return(0,p.OK)(async function(...t){let i=new h.ZodError([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw i.addIssue(n(l,e)),i})})}{let e=this;return(0,p.OK)(function(...t){let i=e._def.args.safeParse(t,a);if(!i.success)throw new h.ZodError([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new h.ZodError([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new et({...this._def,args:G.create(e).rest(B.create())})}returns(e){return new et({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new et({args:e||G.create([]).rest(B.create()),returns:t||B.create(),typeName:o.ZodFunction,...y(r)})}}r.ZodFunction=et;class er extends v{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}r.ZodLazy=er,er.create=(e,t)=>new er({getter:e,typeName:o.ZodLazy,...y(t)});class en extends v{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{received:t.data,code:h.ZodIssueCode.invalid_literal,expected:this._def.value}),p.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ea(e,t){return new es({values:e,typeName:o.ZodEnum,...y(t)})}r.ZodLiteral=en,en.create=(e,t)=>new en({value:e,typeName:o.ZodLiteral,...y(t)});class es extends v{constructor(){super(...arguments),s.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,p.addIssueToContext)(t,{expected:f.util.joinValues(r),received:t.parsedType,code:h.ZodIssueCode.invalid_type}),p.INVALID}if(l(this,s,"f")||u(this,s,new Set(this._def.values),"f"),!l(this,s,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,p.addIssueToContext)(t,{received:t.data,code:h.ZodIssueCode.invalid_enum_value,options:r}),p.INVALID}return(0,p.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return es.create(e,{...this._def,...t})}exclude(e,t=this._def){return es.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}r.ZodEnum=es,s=new WeakMap,es.create=ea;class ei extends v{constructor(){super(...arguments),i.set(this,void 0)}_parse(e){let t=f.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==f.ZodParsedType.string&&r.parsedType!==f.ZodParsedType.number){let e=f.util.objectValues(t);return(0,p.addIssueToContext)(r,{expected:f.util.joinValues(e),received:r.parsedType,code:h.ZodIssueCode.invalid_type}),p.INVALID}if(l(this,i,"f")||u(this,i,new Set(f.util.getValidEnumValues(this._def.values)),"f"),!l(this,i,"f").has(e.data)){let e=f.util.objectValues(t);return(0,p.addIssueToContext)(r,{received:r.data,code:h.ZodIssueCode.invalid_enum_value,options:e}),p.INVALID}return(0,p.OK)(e.data)}get enum(){return this._def.values}}r.ZodNativeEnum=ei,i=new WeakMap,ei.create=(e,t)=>new ei({values:e,typeName:o.ZodNativeEnum,...y(t)});class eo extends v{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.ZodParsedType.promise&&!1===t.common.async)return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.promise,received:t.parsedType}),p.INVALID;let r=t.parsedType===f.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,p.OK)(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}r.ZodPromise=eo,eo.create=(e,t)=>new eo({type:e,typeName:o.ZodPromise,...y(t)});class el extends v{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===o.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{(0,p.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){let e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return p.INVALID;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?p.INVALID:"dirty"===n.status||"dirty"===t.value?(0,p.DIRTY)(n.value):n});{if("aborted"===t.value)return p.INVALID;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?p.INVALID:"dirty"===n.status||"dirty"===t.value?(0,p.DIRTY)(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?p.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?p.INVALID:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,p.isValid)(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,p.isValid)(e))return e;let s=n.transform(e.value,a);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}f.util.assertNever(n)}}r.ZodEffects=el,r.ZodTransformer=el,el.create=(e,t,r)=>new el({schema:e,typeName:o.ZodEffects,effect:t,...y(r)}),el.createWithPreprocess=(e,t,r)=>new el({schema:t,effect:{type:"preprocess",transform:e},typeName:o.ZodEffects,...y(r)});class eu extends v{_parse(e){return this._getType(e)===f.ZodParsedType.undefined?(0,p.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}r.ZodOptional=eu,eu.create=(e,t)=>new eu({innerType:e,typeName:o.ZodOptional,...y(t)});class ec extends v{_parse(e){return this._getType(e)===f.ZodParsedType.null?(0,p.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}r.ZodNullable=ec,ec.create=(e,t)=>new ec({innerType:e,typeName:o.ZodNullable,...y(t)});class ed extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===f.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}r.ZodDefault=ed,ed.create=(e,t)=>new ed({innerType:e,typeName:o.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...y(t)});class ep extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,p.isAsync)(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new h.ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new h.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}r.ZodCatch=ep,ep.create=(e,t)=>new ep({innerType:e,typeName:o.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...y(t)});class ef extends v{_parse(e){if(this._getType(e)!==f.ZodParsedType.nan){let t=this._getOrReturnCtx(e);return(0,p.addIssueToContext)(t,{code:h.ZodIssueCode.invalid_type,expected:f.ZodParsedType.nan,received:t.parsedType}),p.INVALID}return{status:"valid",value:e.data}}}r.ZodNaN=ef,ef.create=e=>new ef({typeName:o.ZodNaN,...y(e)}),r.BRAND=Symbol("zod_brand");class eh extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}r.ZodBranded=eh;class em extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?p.INVALID:"dirty"===e.status?(t.dirty(),(0,p.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?p.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new em({in:e,out:t,typeName:o.ZodPipeline})}}r.ZodPipeline=em;class eg extends v{_parse(e){let t=this._def.innerType._parse(e),r=e=>((0,p.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,p.isAsync)(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function ey(e,t={},r){return e?U.create().superRefine((n,a)=>{var s,i;if(!e(n)){let e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===i||i,l="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...l,fatal:o})}}):U.create()}r.ZodReadonly=eg,eg.create=(e,t)=>new eg({innerType:e,typeName:o.ZodReadonly,...y(t)}),r.custom=ey,r.late={object:K.lazycreate},(a=o=r.ZodFirstPartyTypeKind||(r.ZodFirstPartyTypeKind={})).ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly",r.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>ey(t=>t instanceof e,t);let ev=R.create;r.string=ev;let eb=N.create;r.number=eb;let e_=ef.create;r.nan=e_;let ew=M.create;r.bigint=ew;let ej=L.create;r.boolean=ej;let ex=F.create;r.date=ex;let eS=$.create;r.symbol=eS;let ek=D.create;r.undefined=ek;let eP=z.create;r.null=eP;let eO=U.create;r.any=eO;let eI=B.create;r.unknown=eI;let eC=Z.create;r.never=eC;let eE=q.create;r.void=eE;let eT=V.create;r.array=eT;let eA=K.create;r.object=eA;let eR=K.strictCreate;r.strictObject=eR;let eN=H.create;r.union=eN;let eM=J.create;r.discriminatedUnion=eM;let eL=Q.create;r.intersection=eL;let eF=G.create;r.tuple=eF;let e$=Y.create;r.record=e$;let eD=X.create;r.map=eD;let ez=ee.create;r.set=ez;let eU=et.create;r.function=eU;let eB=er.create;r.lazy=eB;let eZ=en.create;r.literal=eZ;let eq=es.create;r.enum=eq;let eV=ei.create;r.nativeEnum=eV;let eK=eo.create;r.promise=eK;let eH=el.create;r.effect=eH,r.transformer=eH;let eW=eu.create;r.optional=eW;let eJ=ec.create;r.nullable=eJ;let eQ=el.createWithPreprocess;r.preprocess=eQ;let eG=em.create;r.pipeline=eG,r.ostring=()=>ev().optional(),r.onumber=()=>eb().optional(),r.oboolean=()=>ej().optional(),r.coerce={string:e=>R.create({...e,coerce:!0}),number:e=>N.create({...e,coerce:!0}),boolean:e=>L.create({...e,coerce:!0}),bigint:e=>M.create({...e,coerce:!0}),date:e=>F.create({...e,coerce:!0})},r.NEVER=p.INVALID},{"4a373457de97c953":"6Qvhy","1a7822294384dc88":"c6mbz",e9c7a884dff41e37:"cqf4Z",a3ec468da7426bd6:"bHmLw","400c778262c60ffc":"bsX6Q"}],c6mbz:[function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.errorUtil=void 0,(n=r.errorUtil||(r.errorUtil={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},n.toString=e=>"string"==typeof e?e:null==e?void 0:e.message},{}],"58jN9":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseAnyDef=void 0,r.parseAnyDef=function(){return{}}},{}],jUBXy:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseArrayDef=void 0;let n=e("e0c9eda81b2226e9"),a=e("65c7dfaa0253dd49"),s=e("c581eb656b1b60bd");r.parseArrayDef=function(e,t){var r,i;let o={type:"array"};return(null===(i=null===(r=e.type)||void 0===r?void 0:r._def)||void 0===i?void 0:i.typeName)!==n.ZodFirstPartyTypeKind.ZodAny&&(o.items=(0,s.parseDef)(e.type._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items"]}))),e.minLength&&(0,a.setResponseValueAndErrors)(o,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&(0,a.setResponseValueAndErrors)(o,"maxItems",e.maxLength.value,e.maxLength.message,t),o}},{e0c9eda81b2226e9:"lqsn8","65c7dfaa0253dd49":"aLzoF",c581eb656b1b60bd:"kPLE2"}],aLzoF:[function(e,t,r){function n(e,t,r,n){(null==n?void 0:n.errorMessages)&&r&&(e.errorMessage=Object.assign(Object.assign({},e.errorMessage),{[t]:r}))}Object.defineProperty(r,"__esModule",{value:!0}),r.setResponseValueAndErrors=r.addErrorMessage=void 0,r.addErrorMessage=n,r.setResponseValueAndErrors=function(e,t,r,a,s){e[t]=r,n(e,t,a,s)}},{}],bZYpS:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseBigintDef=void 0,r.parseBigintDef=function(){return{type:"integer",format:"int64"}}},{}],"9GHjs":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseBooleanDef=void 0,r.parseBooleanDef=function(){return{type:"boolean"}}},{}],"1K4x4":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseBrandedDef=void 0;let n=e("19039870041b070e");r.parseBrandedDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},{"19039870041b070e":"kPLE2"}],jodfL:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseCatchDef=void 0;let n=e("ae74e8333badc92");r.parseCatchDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},{ae74e8333badc92:"kPLE2"}],"3sMwi":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseDateDef=void 0,r.parseDateDef=function(){return{type:"string",format:"date-time"}}},{}],"2OdOr":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseDefaultDef=void 0;let n=e("2089d79b1ccb2266");r.parseDefaultDef=function(e,t){return Object.assign(Object.assign({},(0,n.parseDef)(e.innerType._def,t)),{default:e.defaultValue()})}},{"2089d79b1ccb2266":"kPLE2"}],"6pbWw":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseEffectsDef=void 0;let n=e("831fc03195f9c05d");r.parseEffectsDef=function(e,t){return"input"===t.effectStrategy?(0,n.parseDef)(e.schema._def,t):{}}},{"831fc03195f9c05d":"kPLE2"}],hiYWX:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseEnumDef=void 0,r.parseEnumDef=function(e){return{type:"string",enum:e.values}}},{}],dIQvX:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseIntersectionDef=void 0;let n=e("6bac9eb26e3ef9fb");r.parseIntersectionDef=function(e,t){let r=[(0,n.parseDef)(e.left._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"allOf","0"]})),(0,n.parseDef)(e.right._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"allOf","1"]}))].filter(e=>!!e);return r.length?{allOf:r}:void 0}},{"6bac9eb26e3ef9fb":"kPLE2"}],"20PXB":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseLiteralDef=void 0,r.parseLiteralDef=function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}},{}],"5TaIq":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseMapDef=void 0;let n=e("81cb9a89b46867d9");r.parseMapDef=function(e,t){return{type:"array",maxItems:125,items:{type:"array",items:[(0,n.parseDef)(e.keyType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items","items","0"]}))||{},(0,n.parseDef)(e.valueType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items","items","1"]}))||{}],minItems:2,maxItems:2}}}},{"81cb9a89b46867d9":"kPLE2"}],"33vCq":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseNativeEnumDef=void 0,r.parseNativeEnumDef=function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}},{}],dvscY:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseNeverDef=void 0,r.parseNeverDef=function(){return{not:{}}}},{}],"53xEr":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseNullDef=void 0,r.parseNullDef=function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}},{}],nYFG8:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseNullableDef=void 0;let n=e("d44e90b253e99fd1"),a=e("6c4aaa726c91b47c");r.parseNullableDef=function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:a.primitiveMappings[e.innerType._def.typeName],nullable:!0}:{type:[a.primitiveMappings[e.innerType._def.typeName],"null"]};let r=(0,n.parseDef)(e.innerType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"anyOf","0"]}));return r?"openApi3"===t.target?Object.assign(Object.assign({},r),{nullable:!0}):{anyOf:[r,{type:"null"}]}:void 0}},{d44e90b253e99fd1:"kPLE2","6c4aaa726c91b47c":"9OF63"}],"9OF63":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseUnionDef=r.primitiveMappings=void 0;let n=e("cb70b5c51dc0a36d");r.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},r.parseUnionDef=function(e,t){if("openApi3"===t.target)return a(e,t);let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in r.primitiveMappings&&(!e._def.checks||!e._def.checks.length))){let e=n.reduce((e,t)=>{let n=r.primitiveMappings[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}if(n.every(e=>"ZodLiteral"===e._def.typeName)){let e=n.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===n.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return a(e,t)};let a=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>(0,n.parseDef)(e._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"anyOf",`${r}`]}))).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0}},{cb70b5c51dc0a36d:"kPLE2"}],i70u7:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseNumberDef=void 0;let n=e("657d70322b0de77b");r.parseNumberDef=function(e,t){let r={type:"number"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"int":r.type="integer",(0,n.addErrorMessage)(r,"type",a.message,t);break;case"min":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,t)}return r}},{"657d70322b0de77b":"aLzoF"}],"4iJP4":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseObjectDef=void 0;let n=e("f8bd781229c736c8");r.parseObjectDef=function(e,t){var r;let a=Object.assign(Object.assign({type:"object"},Object.entries(e.shape()).reduce((e,[r,a])=>{if(void 0===a||void 0===a._def)return e;let s=(0,n.parseDef)(a._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"properties",r],propertyPath:[...t.currentPath,"properties",r]}));return void 0===s?e:{properties:Object.assign(Object.assign({},e.properties),{[r]:s}),required:a.isOptional()?e.required:[...e.required,r]}},{properties:{},required:[]})),{additionalProperties:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:null===(r=(0,n.parseDef)(e.catchall._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"additionalProperties"]})))||void 0===r||r});return a.required.length||delete a.required,a}},{f8bd781229c736c8:"kPLE2"}],fIheH:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseOptionalDef=void 0;let n=e("662c55dba853dc51");r.parseOptionalDef=(e,t)=>{var r;if(t.currentPath.toString()===(null===(r=t.propertyPath)||void 0===r?void 0:r.toString()))return(0,n.parseDef)(e.innerType._def,t);let a=(0,n.parseDef)(e.innerType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"anyOf","1"]}));return a?{anyOf:[{not:{}},a]}:{}}},{"662c55dba853dc51":"kPLE2"}],"3enQM":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parsePipelineDef=void 0;let n=e("288715c6a0626f37");r.parsePipelineDef=(e,t)=>{let r=(0,n.parseDef)(e.in._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"allOf","0"]})),a=(0,n.parseDef)(e.out._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"allOf",r?"1":"0"]}));return{allOf:[r,a].filter(e=>void 0!==e)}}},{"288715c6a0626f37":"kPLE2"}],b9q6l:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parsePromiseDef=void 0;let n=e("40074e5f0281fbf9");r.parsePromiseDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},{"40074e5f0281fbf9":"kPLE2"}],"78DW8":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseRecordDef=void 0;let n=e("2858b2e17cca7add"),a=e("2541601fe90b4c07"),s=e("6f4829975eb6c86e");r.parseRecordDef=function(e,t){var r,i,o;let l={type:"object",additionalProperties:(0,a.parseDef)(e.valueType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))||{}};if((null===(r=e.keyType)||void 0===r?void 0:r._def.typeName)===n.ZodFirstPartyTypeKind.ZodString&&(null===(i=e.keyType._def.checks)||void 0===i?void 0:i.length)){let r=Object.entries((0,s.parseStringDef)(e.keyType._def,t)).reduce((e,[t,r])=>"type"===t?e:Object.assign(Object.assign({},e),{[t]:r}),{});return Object.assign(Object.assign({},l),{propertyNames:r})}return(null===(o=e.keyType)||void 0===o?void 0:o._def.typeName)===n.ZodFirstPartyTypeKind.ZodEnum?Object.assign(Object.assign({},l),{propertyNames:{enum:e.keyType._def.values}}):l}},{"2858b2e17cca7add":"lqsn8","2541601fe90b4c07":"kPLE2","6f4829975eb6c86e":"lmNaM"}],lmNaM:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseStringDef=void 0;let n=e("40f092960ac448be");r.parseStringDef=function(e,t){let r={type:"string"};if(e.checks)for(let i of e.checks)switch(i.kind){case"min":(0,n.setResponseValueAndErrors)(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,i.value):i.value,i.message,t);break;case"max":(0,n.setResponseValueAndErrors)(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,i.value):i.value,i.message,t);break;case"email":(0,n.setResponseValueAndErrors)(r,"format","email",i.message,t);break;case"url":(0,n.setResponseValueAndErrors)(r,"format","uri",i.message,t);break;case"uuid":(0,n.setResponseValueAndErrors)(r,"format","uuid",i.message,t);break;case"regex":s(r,i.regex.source,i.message,t);break;case"cuid":s(r,"^c[^\\s-]{8,}$",i.message,t);break;case"cuid2":s(r,"^[a-z][a-z0-9]*$",i.message,t);break;case"startsWith":s(r,"^"+a(i.value),i.message,t);break;case"endsWith":s(r,a(i.value)+"$",i.message,t);break;case"trim":break;case"datetime":(0,n.setResponseValueAndErrors)(r,"format","date-time",i.message,t);break;case"length":(0,n.setResponseValueAndErrors)(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,i.value):i.value,i.message,t),(0,n.setResponseValueAndErrors)(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,i.value):i.value,i.message,t)}return r};let a=e=>Array.from(e).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),s=(e,t,r,a)=>{var s;e.pattern||(null===(s=e.allOf)||void 0===s?void 0:s.some(e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push(Object.assign({pattern:e.pattern},e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}})),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push(Object.assign({pattern:t},r&&a.errorMessages&&{errorMessage:{pattern:r}}))):(0,n.setResponseValueAndErrors)(e,"pattern",t,r,a)}},{"40f092960ac448be":"aLzoF"}],djMPA:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseSetDef=void 0;let n=e("620d2eaaea837976"),a=e("99aa99a33acf4d40");r.parseSetDef=function(e,t){let r={type:"array",items:(0,a.parseDef)(e.valueType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items"]}))};return e.minSize&&(0,n.setResponseValueAndErrors)(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&(0,n.setResponseValueAndErrors)(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}},{"620d2eaaea837976":"aLzoF","99aa99a33acf4d40":"kPLE2"}],"77Z7P":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseTupleDef=void 0;let n=e("ddd8312871a68d3e");r.parseTupleDef=function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items",`${r}`]}))).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:(0,n.parseDef)(e.rest._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"additionalItems"]}))}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items",`${r}`]}))).reduce((e,t)=>void 0===t?e:[...e,t],[])}}},{ddd8312871a68d3e:"kPLE2"}],lsw40:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseUndefinedDef=void 0,r.parseUndefinedDef=function(){return{not:{}}}},{}],"99v0o":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseUnknownDef=void 0,r.parseUnknownDef=function(){return{}}},{}],e0OcL:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getRefs=void 0;let n=e("6ad46926174233ea");r.getRefs=e=>{let t=(0,n.getDefaultOptions)(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return Object.assign(Object.assign({},t),{currentPath:r,propertyPath:void 0,seen:[]})}},{"6ad46926174233ea":"7AB4t"}],"7AB4t":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultOptions=r.defaultOptions=void 0,r.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1},r.getDefaultOptions=e=>"string"==typeof e?Object.assign(Object.assign({},r.defaultOptions),{name:e}):Object.assign(Object.assign({},r.defaultOptions),e)},{}],elFKd:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){let{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:a,baseURL:s}=e;if(n&&a&&t)return`${a}/${t}`;if(n){if(!r)throw Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${t}`}return s}n.defineInteropFlag(r),n.export(r,"getEndpoint",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],l2Yhq:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"isBrowser",()=>a.isBrowser),n.export(r,"isWebWorker",()=>a.isWebWorker),n.export(r,"isJsDom",()=>a.isJsDom),n.export(r,"isDeno",()=>a.isDeno),n.export(r,"isNode",()=>a.isNode),n.export(r,"getEnv",()=>a.getEnv),n.export(r,"getRuntimeEnvironment",()=>a.getRuntimeEnvironment),n.export(r,"getEnvironmentVariable",()=>a.getEnvironmentVariable);var a=e("@langchain/core/utils/env")},{"@langchain/core/utils/env":"d0G7V","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],d0G7V:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/utils/env.js");n.exportAll(a,r)},{"../dist/utils/env.js":"2Th20","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"70pMn":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"promptLayerTrackRequest",()=>a);let a=async(e,t,r,n,a,s,i,o)=>(await e.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:t,provider:"langchain",kwargs:r,tags:n,request_response:a,request_start_time:Math.floor(s/1e3),request_end_time:Math.floor(i/1e3),api_key:o})})).json()},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"1gIM4":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/language_models/chat_models");n.exportAll(a,r)},{"@langchain/core/language_models/chat_models":"2tLdm","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2tLdm":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/language_models/chat_models.js");n.exportAll(a,r)},{"../dist/language_models/chat_models.js":"75yng","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"75yng":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"createChatMessageChunkEncoderStream",()=>l),n.export(r,"BaseChatModel",()=>u),n.export(r,"SimpleChatModel",()=>c);var a=e("../messages/index.js"),s=e("../outputs.js"),i=e("./base.js"),o=e("../callbacks/manager.js");function l(){let e=new TextEncoder;return new TransformStream({transform(t,r){r.enqueue(e.encode("string"==typeof t.content?t.content:JSON.stringify(t.content)))}})}class u extends i.BaseLanguageModel{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){let[t,r]=super._separateRunnableConfigFromCallOptions(e);return r?.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout)),[t,r]}async invoke(e,t){let r=u._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t?.callbacks)).generations[0][0].message}async *_streamResponseChunks(e,t,r){throw Error("Not implemented.")}async *_streamIterator(e,t){if(this._streamResponseChunks===u.prototype._streamResponseChunks)yield this.invoke(e,t);else{let r;let n=u._convertInputToPromptValue(e).toChatMessages(),[a,s]=this._separateRunnableConfigFromCallOptions(t),i=await (0,o.CallbackManager).configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),l={options:s,invocation_params:this?.invocationParams(s),batch_size:1},c=await i?.handleChatModelStart(this.toJSON(),[n],void 0,void 0,l,void 0,void 0,a.runName);try{for await(let e of this._streamResponseChunks(n,s,c?.[0]))yield e.message,r=r?r.concat(e):e}catch(e){throw await Promise.all((c??[]).map(t=>t?.handleLLMError(e))),e}await Promise.all((c??[]).map(e=>e?.handleLLMEnd({generations:[[r]]})))}}async _generateUncached(e,t,r){let n=e.map(e=>e.map(a.coerceMessageLikeToMessage)),i=await (0,o.CallbackManager).configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),l={options:t,invocation_params:this?.invocationParams(t),batch_size:1},u=await i?.handleChatModelStart(this.toJSON(),n,void 0,void 0,l,void 0,void 0,r.runName),c=await Promise.allSettled(n.map((e,r)=>this._generate(e,{...t,promptIndex:r},u?.[r]))),d=[],p=[];await Promise.all(c.map(async(e,t)=>{if("fulfilled"!==e.status)return await u?.[t]?.handleLLMError(e.reason),Promise.reject(e.reason);{let r=e.value;return d[t]=r.generations,p[t]=r.llmOutput,u?.[t]?.handleLLMEnd({generations:[r.generations],llmOutput:r.llmOutput})}}));let f={generations:d,llmOutput:p.length?this._combineLLMOutput?.(...p):void 0};return Object.defineProperty(f,s.RUN_KEY,{value:u?{runIds:u?.map(e=>e.runId)}:void 0,configurable:!0}),f}async generate(e,t,r){let n;n=Array.isArray(t)?{stop:t}:t;let s=e.map(e=>e.map(a.coerceMessageLikeToMessage)),[i,o]=this._separateRunnableConfigFromCallOptions(n);if(i.callbacks=i.callbacks??r,!this.cache)return this._generateUncached(s,o,i);let{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(o),d=[],p=await Promise.all(s.map(async(e,t)=>{let r=u._convertInputToPromptValue(e).toString(),n=await l.lookup(r,c);return n||d.push(t),n})),f={};if(d.length>0){let e=await this._generateUncached(d.map(e=>s[e]),o,i);await Promise.all(e.generations.map(async(e,t)=>{let r=d[t];p[r]=e;let n=u._convertInputToPromptValue(s[r]).toString();return l.update(n,c,e)})),f=e.llmOutput??{}}return{generations:p,llmOutput:f}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,r){let n=e.map(e=>e.toChatMessages());return this.generate(n,t,r)}async call(e,t,r){return(await this.generate([e.map(a.coerceMessageLikeToMessage)],t,r)).generations[0][0].message}async callPrompt(e,t,r){let n=e.toChatMessages();return this.call(n,t,r)}async predictMessages(e,t,r){return this.call(e,t,r)}async predict(e,t,r){let n=new a.HumanMessage(e),s=await this.call([n],t,r);if("string"!=typeof s.content)throw Error("Cannot use predict when output is not a string.");return s.content}}class c extends u{async _generate(e,t,r){let n=await this._call(e,t,r),s=new a.AIMessage(n);if("string"!=typeof s.content)throw Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:s.content,message:s}]}}}},{"../messages/index.js":"jMGwo","../outputs.js":"l1AvI","./base.js":"fQYj8","../callbacks/manager.js":"fZx9W","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fQYj8:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getModelNameForTiktoken",()=>c),n.export(r,"getEmbeddingContextSize",()=>d),n.export(r,"getModelContextSize",()=>p),n.export(r,"calculateMaxTokens",()=>f),n.export(r,"BaseLangChain",()=>m),n.export(r,"BaseLanguageModel",()=>g);var a=e("../caches.js"),s=e("../prompt_values.js"),i=e("../messages/index.js"),o=e("../utils/async_caller.js"),l=e("../utils/tiktoken.js"),u=e("../runnables/base.js");let c=e=>e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e,d=e=>"text-embedding-ada-002"===e?8191:2046,p=e=>{switch(c(e)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":default:return 4097;case"text-curie-001":case"text-babbage-001":case"text-ada-001":case"code-cushman-001":return 2048;case"code-davinci-002":return 8e3}},f=async({prompt:e,modelName:t})=>{let r;try{r=(await (0,l.encodingForModel)(c(t))).encode(e).length}catch(t){console.warn("Failed to calculate number of tokens, falling back to approximate count"),r=Math.ceil(e.length/4)}return p(t)-r},h=()=>!1;class m extends u.Runnable{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??h(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class g extends m{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){super({callbacks:e??t,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"object"==typeof r.cache?this.cache=r.cache:r.cache?this.cache=(0,a.InMemoryCache).global():this.cache=void 0,this.caller=new o.AsyncCaller(r??{})}async getNumTokens(e){if("string"!=typeof e)return 0;let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await (0,l.encodingForModel)("modelName"in this?c(this.modelName):"gpt2")}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}if(this._encoding)try{t=this._encoding.encode(e).length}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}return t}static _convertInputToPromptValue(e){return"string"==typeof e?new s.StringPromptValue(e):Array.isArray(e)?new s.ChatPromptValue(e.map(i.coerceMessageLikeToMessage)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){return Object.entries({...this._identifyingParams(),...e,_type:this._llmType(),_model:this._modelType()}).filter(([e,t])=>void 0!==t).map(([e,t])=>`${e}:${JSON.stringify(t)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw Error("Use .toJSON() instead")}}},{"../caches.js":"etUzK","../prompt_values.js":"lGT4D","../messages/index.js":"jMGwo","../utils/async_caller.js":"l8CrB","../utils/tiktoken.js":"gODKI","../runnables/base.js":"1qQoT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],l8CrB:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"AsyncCaller",()=>c);var a=e("p-retry"),s=n.interopDefault(a),i=e("p-queue"),o=n.interopDefault(i);let l=[400,401,402,403,404,405,406,407,408,409],u=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||"TimeoutError"===e.name||e.message.startsWith("AbortError")||"AbortError"===e.name||e?.code==="ECONNABORTED")throw e;let t=e?.response?.status??e?.status;if(t&&l.includes(+t))throw e;if(e?.error?.code==="insufficient_quota"){let t=Error(e?.message);throw t.name="InsufficientQuotaError",t}};class c{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??u;let t="default"in o.default?o.default.default:o.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>(0,s.default)(()=>e(...t).catch(e=>{if(e instanceof Error)throw e;throw Error(e)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(e=>e.ok?e:Promise.reject(e)))}}},{"p-retry":"hDMvm","p-queue":"kO9Cj","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gODKI:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getEncoding",()=>l),n.export(r,"encodingForModel",()=>u);var a=e("js-tiktoken/lite"),s=e("./async_caller.js");let i={},o=new s.AsyncCaller({});async function l(e){return e in i||(i[e]=o.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(e=>e.json()).then(e=>new a.Tiktoken(e)).catch(t=>{throw delete i[e],t})),await i[e]}async function u(e){return l((0,a.getEncodingNameForModel)(e))}},{"js-tiktoken/lite":"hrZLc","./async_caller.js":"l8CrB","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hrZLc:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Tiktoken",()=>a.Tiktoken),n.export(r,"getEncodingNameForModel",()=>a.getEncodingNameForModel);var a=e("./chunk-YVJR5WRT.js")},{"./chunk-YVJR5WRT.js":"4sh0B","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4sh0B":[function(e,t,r){let n,a;var s,i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"Tiktoken",()=>p),i.export(r,"getEncodingNameForModel",()=>f),i.export(r,"never",()=>c);var o=e("base64-js"),l=i.interopDefault(o),u=Object.defineProperty;function c(e){}var d=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){for(let[t,r]of(this.patStr=e.pat_str,Object.entries(e.bpe_ranks.split("\n").filter(Boolean).reduce((e,t)=>{let[r,n,...a]=t.split(" "),s=Number.parseInt(n,10);return a.forEach((t,r)=>e[t]=s+r),e},{})))){let e=(0,l.default).toByteArray(t);this.rankMap.set(e.join(","),r),this.textMap.set(r,e)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((e,[t,r])=>(e[r]=this.textEncoder.encode(t),e),{})}encode(e,t=[],r="all"){let n=RegExp(this.patStr,"ug"),a=d.specialTokenRegex(Object.keys(this.specialTokens)),s=[],i=new Set("all"===t?Object.keys(this.specialTokens):t),o=new Set("all"===r?Object.keys(this.specialTokens).filter(e=>!i.has(e)):r);if(o.size>0){let t=d.specialTokenRegex([...o]),r=e.match(t);if(null!=r)throw Error(`The text contains a special token that is not allowed: ${r[0]}`)}let l=0;for(;;){let t=null,r=l;for(;a.lastIndex=r,!(null==(t=a.exec(e))||i.has(t[0]));)r=t.index+1;let o=t?.index??e.length;for(let t of e.substring(l,o).matchAll(n)){let e=this.textEncoder.encode(t[0]),r=this.rankMap.get(e.join(","));if(null!=r){s.push(r);continue}s.push(...function(e,t){return 1===e.length?[t.get(e.join(","))]:(function(e,t){let r=Array.from({length:e.length},(e,t)=>({start:t,end:t+1}));for(;r.length>1;){let n=null;for(let a=0;a<r.length-1;a++){let s=e.slice(r[a].start,r[a+1].end),i=t.get(s.join(","));null!=i&&(null==n||i<n[0])&&(n=[i,a])}if(null!=n){let e=n[1];r[e]={start:r[e].start,end:r[e+1].end},r.splice(e+1,1)}else break}return r})(e,t).map(r=>t.get(e.slice(r.start,r.end).join(","))).filter(e=>null!=e)}(e,this.rankMap))}if(null==t)break;let u=this.specialTokens[t[0]];s.push(u),l=t.index+t[0].length}return s}decode(e){let t=[],r=0;for(let n=0;n<e.length;++n){let a=e[n],s=this.textMap.get(a)??this.inverseSpecialTokens[a];null!=s&&(t.push(s),r+=s.length)}let n=new Uint8Array(r),a=0;for(let e of t)n.set(e,a),a+=e.length;return this.textDecoder.decode(n)}},p=d;function f(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"o1-mini":case"o1-preview":case"o1-preview-2024-09-12":case"o1-mini-2024-09-12":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":return"o200k_base";default:throw Error("Unknown model")}}n="symbol"!=typeof(s="specialTokenRegex")?s+"":s,a=e=>RegExp(e.map(e=>e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")).join("|"),"g"),n in p?u(p,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):p[n]=a},{"base64-js":"jri1H","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jri1H:[function(e,t,r){r.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return(r+n)*3/4-n},r.toByteArray=function(e){var t,r,n=u(e),i=n[0],o=n[1],l=new s((i+o)*3/4-o),c=0,d=o>0?i-4:i;for(r=0;r<d;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===o&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===o&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},r.fromByteArray=function(e){for(var t,r=e.length,a=r%3,s=[],i=0,o=r-a;i<o;i+=16383)s.push(function(e,t,r){for(var a,s=[],i=t;i<r;i+=3)s.push(n[(a=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]))>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return s.join("")}(e,i,i+16383>o?o:i+16383));return 1===a?s.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===a&&s.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")};for(var n=[],a=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=i.length;o<l;++o)n[o]=i[o],a[i.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],"1qQoT":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Runnable",()=>h),n.export(r,"RunnableBinding",()=>m),n.export(r,"RunnableEach",()=>g),n.export(r,"RunnableRetry",()=>y),n.export(r,"RunnableSequence",()=>v),n.export(r,"RunnableMap",()=>b),n.export(r,"RunnableLambda",()=>_),n.export(r,"RunnableParallel",()=>w),n.export(r,"RunnableWithFallbacks",()=>j),n.export(r,"_coerceToRunnable",()=>x);var a=e("p-retry"),s=n.interopDefault(a),i=e("../callbacks/manager.js"),o=e("../tracers/log_stream.js"),l=e("../load/serializable.js"),u=e("../utils/stream.js"),c=e("./config.js"),d=e("../utils/async_caller.js"),p=e("../tracers/root_listener.js");function f(e,t){return e&&!Array.isArray(e)&&"object"==typeof e?e:{[t]:e}}class h extends l.Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new m({bound:this,kwargs:e,config:{}})}map(){return new g({bound:this})}withRetry(e){return new y({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new m({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new j({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e,t=0){if(Array.isArray(e)){if(e.length!==t)throw Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);return e}return Array.from({length:t},()=>e)}async batch(e,t,r){let n=this._getOptionsList(t??{},e.length),a=new d.AsyncCaller({maxConcurrency:r?.maxConcurrency,onFailedAttempt:e=>{throw e}});return Promise.all(e.map((e,t)=>a.call(async()=>{try{return await this.invoke(e,n[t])}catch(e){if(r?.returnExceptions)return e;throw e}})))}async *_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){return(0,u.IterableReadableStream).fromAsyncGenerator(this._streamIterator(e,t))}_separateRunnableConfigFromCallOptions(e={}){let t={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName},r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,[t,r]}async _callWithConfig(e,t,r){let n;let a=await (0,c.getCallbackMangerForConfig)(r),s=await a?.handleChainStart(this.toJSON(),f(t,"input"),void 0,r?.runType,void 0,void 0,r?.runName);try{n=await e.bind(this)(t,r,s)}catch(e){throw await s?.handleChainError(e),e}return await s?.handleChainEnd(f(n,"output")),n}async _batchWithConfig(e,t,r,n){let a;let s=this._getOptionsList(r??{},t.length),i=await Promise.all(s.map(c.getCallbackMangerForConfig)),o=await Promise.all(i.map((e,r)=>e?.handleChainStart(this.toJSON(),f(t[r],"input"),void 0,s[r].runType,void 0,void 0,s[r].runName)));try{a=await e(t,s,o,n)}catch(e){throw await Promise.all(o.map(t=>t?.handleChainError(e))),e}return await Promise.all(o.map(e=>e?.handleChainEnd(f(a,"output")))),a}async *_transformStreamWithConfig(e,t,r){let n,a,s;let i=!0,o=!0,l=await (0,c.getCallbackMangerForConfig)(r),u=this.toJSON(),d=async function*(){for await(let t of e){if(s||(s=await l?.handleChainStart(u,{input:""},void 0,r?.runType,void 0,void 0,r?.runName)),i){if(void 0===n)n=t;else try{n=n.concat(t)}catch{n=void 0,i=!1}}yield t}}();try{for await(let e of t(d,s,r))if(yield e,o){if(void 0===a)a=e;else try{a=a.concat(e)}catch{a=void 0,o=!1}}}catch(e){throw await s?.handleChainError(e,void 0,void 0,void 0,{inputs:f(n,"input")}),e}await s?.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:f(n,"input")})}_patchConfig(e={},t){let r={...e};return void 0!==t?(delete r.runName,{...r,callbacks:t}):r}pipe(e){return new v({first:this,last:x(e)})}async *transform(e,t){let r;for await(let t of e)r=void 0===r?t:r.concat(t);yield*this._streamIterator(r,t)}async *streamLog(e,t,r){let n=new o.LogStreamCallbackHandler({...r,autoClose:!1}),a=t??{},{callbacks:s}=a;if(void 0===s)a.callbacks=[n];else if(Array.isArray(s))a.callbacks=s.concat([n]);else{let e=s.copy();e.inheritableHandlers.push(n),a.callbacks=e}let i=await this.stream(e,a),l=async function(){try{for await(let e of i){let t=new o.RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:e}]});await n.writer.write(t)}}finally{await n.writer.close()}}();try{for await(let e of n)yield e}finally{await l}}static isRunnable(e){return!!e&&e.lc_runnable}withListeners({onStart:e,onEnd:t,onError:r}){return new m({bound:this,config:{},configFactories:[n=>({callbacks:[new p.RootListenersTracer({config:n,onStart:e,onEnd:t,onError:r})]})]})}}class m extends h{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}async _mergeConfig(e){let t=(0,c.mergeConfigs)(this.config,e);return(0,c.mergeConfigs)(t,...this.configFactories?await Promise.all(this.configFactories.map(async e=>await e(t))):[])}bind(e){return this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig({...t,...this.kwargs}))}async batch(e,t,r){let n=Array.isArray(t)?await Promise.all(t.map(async e=>this._mergeConfig({...e,...this.kwargs}))):await this._mergeConfig({...t,...this.kwargs});return this.bound.batch(e,n,r)}async *_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig({...t,...this.kwargs}))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig({...t,...this.kwargs}))}async *transform(e,t){yield*this.bound.transform(e,await this._mergeConfig({...t,...this.kwargs}))}static isRunnableBinding(e){return e.bound&&h.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:r}){return new m({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[n=>({callbacks:[new p.RootListenersTracer({config:n,onStart:e,onEnd:t,onError:r})]})]})}}class g extends h{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new g({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _invoke(e,t,r){return this.bound.batch(e,this._patchConfig(t,r?.getChild()))}withListeners({onStart:e,onEnd:t,onError:r}){return new g({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:r})})}}class y extends m{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){let n=e>1?`retry:attempt:${e}`:void 0;return this._patchConfig(t,r?.getChild(n))}async _invoke(e,t,r){return(0,s.default)(n=>super.invoke(e,this._patchConfigForRetry(n,t,r)),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _batch(e,t,r,n){let a={};try{await (0,s.default)(async s=>{let i;let o=e.map((e,t)=>t).filter(e=>void 0===a[e.toString()]||a[e.toString()]instanceof Error),l=o.map(t=>e[t]),u=o.map(e=>this._patchConfigForRetry(s,t?.[e],r?.[e])),c=await super.batch(l,u,{...n,returnExceptions:!0});for(let e=0;e<c.length;e+=1){let t=c[e],r=o[e];t instanceof Error&&void 0===i&&(i=t),a[r.toString()]=t}if(i)throw i;return c},{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(e){if(n?.returnExceptions!==!0)throw e}return Object.keys(a).sort((e,t)=>parseInt(e,10)-parseInt(t,10)).map(e=>a[parseInt(e,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}}class v extends h{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){let r;let n=await (0,c.getCallbackMangerForConfig)(t),a=await n?.handleChainStart(this.toJSON(),f(e,"input"),void 0,void 0,void 0,void 0,t?.runName),s=e;try{let e=[this.first,...this.middle];for(let r=0;r<e.length;r+=1){let n=e[r];s=await n.invoke(s,this._patchConfig(t,a?.getChild(`seq:step:${r+1}`)))}r=await this.last.invoke(s,this._patchConfig(t,a?.getChild(`seq:step:${this.steps.length}`)))}catch(e){throw await a?.handleChainError(e),e}return await a?.handleChainEnd(f(r,"output")),r}async batch(e,t,r){let n;let a=this._getOptionsList(t??{},e.length),s=await Promise.all(a.map(c.getCallbackMangerForConfig)),i=await Promise.all(s.map((t,r)=>t?.handleChainStart(this.toJSON(),f(e[r],"input"),void 0,void 0,void 0,void 0,a[r].runName))),o=e;try{let e=[this.first,...this.middle];for(let t=0;t<e.length;t+=1){let n=e[t];o=await n.batch(o,i.map((e,r)=>this._patchConfig(a[r],e?.getChild(`seq:step:${t+1}`))),r)}n=await this.last.batch(o,i.map(e=>this._patchConfig(a[this.steps.length-1],e?.getChild(`seq:step:${this.steps.length}`))),r)}catch(e){throw await Promise.all(i.map(t=>t?.handleChainError(e))),e}return await Promise.all(i.map((e,t)=>e?.handleChainEnd(f(n[t],"output")))),n}async *_streamIterator(e,t){let r;let n=await (0,c.getCallbackMangerForConfig)(t),a=await n?.handleChainStart(this.toJSON(),f(e,"input"),void 0,void 0,void 0,void 0,t?.runName),s=[this.first,...this.middle,this.last],i=!0;async function*o(){yield e}try{let e=s[0].transform(o(),this._patchConfig(t,a?.getChild("seq:step:1")));for(let r=1;r<s.length;r+=1){let n=s[r];e=await n.transform(e,this._patchConfig(t,a?.getChild(`seq:step:${r+1}`)))}for await(let t of e)if(yield t,i){if(void 0===r)r=t;else try{r=r.concat(t)}catch(e){r=void 0,i=!1}}}catch(e){throw await a?.handleChainError(e),e}await a?.handleChainEnd(f(r,"output"))}pipe(e){return new v(v.isRunnableSequence(e)?{first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}:{first:this.first,middle:[...this.middle,this.last],last:x(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&h.isRunnable(e)}static from([e,...t]){return new v({first:x(e),middle:t.slice(0,-1).map(x),last:x(t[t.length-1])})}}class b extends h{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){for(let[t,r]of(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={},Object.entries(e.steps)))this.steps[t]=x(r)}static from(e){return new b({steps:e})}async invoke(e,t){let r=await (0,c.getCallbackMangerForConfig)(t),n=await r?.handleChainStart(this.toJSON(),{input:e},void 0,void 0,void 0,void 0,t?.runName),a={};try{await Promise.all(Object.entries(this.steps).map(async([r,s])=>{a[r]=await s.invoke(e,this._patchConfig(t,n?.getChild(r)))}))}catch(e){throw await n?.handleChainError(e),e}return await n?.handleChainEnd(a),a}}class _ extends h{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}static from(e){return new _({func:e})}async _invoke(e,t,r){let n=await this.func(e,{config:t});return n&&h.isRunnable(n)&&(n=await n.invoke(e,this._patchConfig(t,r?.getChild()))),n}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}}class w extends b{}class j extends h{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){for(let e of(yield this.runnable,this.fallbacks))yield e}async invoke(e,t){let r;let n=await (0,i.CallbackManager).configure(t?.callbacks,void 0,t?.tags,void 0,t?.metadata),a=await n?.handleChainStart(this.toJSON(),f(e,"input"),void 0,void 0,void 0,void 0,t?.runName);for(let n of this.runnables())try{let r=await n.invoke(e,this._patchConfig(t,a?.getChild()));return await a?.handleChainEnd(f(r,"output")),r}catch(e){void 0===r&&(r=e)}if(void 0===r)throw Error("No error stored at end of fallback.");throw await a?.handleChainError(r),r}async batch(e,t,r){let n;if(r?.returnExceptions)throw Error("Not implemented.");let a=this._getOptionsList(t??{},e.length),s=await Promise.all(a.map(e=>(0,i.CallbackManager).configure(e?.callbacks,void 0,e?.tags,void 0,e?.metadata))),o=await Promise.all(s.map((t,r)=>t?.handleChainStart(this.toJSON(),f(e[r],"input"),void 0,void 0,void 0,void 0,a[r].runName)));for(let t of this.runnables())try{let n=await t.batch(e,o.map((e,t)=>this._patchConfig(a[t],e?.getChild())),r);return await Promise.all(o.map((e,t)=>e?.handleChainEnd(f(n[t],"output")))),n}catch(e){void 0===n&&(n=e)}if(!n)throw Error("No error stored at end of fallbacks.");throw await Promise.all(o.map(e=>e?.handleChainError(n))),n}}function x(e){if("function"==typeof e)return new _({func:e});if(h.isRunnable(e))return e;if(Array.isArray(e)||"object"!=typeof e)throw Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`);{let t={};for(let[r,n]of Object.entries(e))t[r]=x(n);return new b({steps:t})}}},{"p-retry":"hDMvm","../callbacks/manager.js":"fZx9W","../tracers/log_stream.js":"jD00e","../load/serializable.js":"ihLrn","../utils/stream.js":"faNJA","./config.js":"bd9nP","../utils/async_caller.js":"l8CrB","../tracers/root_listener.js":"i5MBm","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jD00e:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RunLogPatch",()=>o),n.export(r,"RunLog",()=>l),n.export(r,"LogStreamCallbackHandler",()=>u);var a=e("../utils/fast-json-patch/index.js"),s=e("./base.js"),i=e("../utils/stream.js");class o{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops}concat(e){let t=this.ops.concat(e.ops),r=(0,a.applyPatch)({},t);return new l({ops:t,state:r[r.length-1].newDocument})}}class l extends o{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){let t=this.ops.concat(e.ops),r=(0,a.applyPatch)(this.state,e.ops);return new l({ops:t,state:r[r.length-1].newDocument})}}class u extends s.BaseTracer{constructor(e){super(e),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=(0,i.IterableReadableStream).fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(void 0===e.parent_run_id)return!1;let t=e.tags??[],r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async onRunCreate(e){if(void 0===e.parent_run_id&&await this.writer.write(new o({ops:[{op:"replace",path:"",value:{id:e.id,streamed_output:[],final_output:void 0,logs:{}}}]})),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===t?e.name:`${e.name}:${t}`;let r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output_str:[],final_output:void 0,end_time:void 0};await this.writer.write(new o({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{let t=this.keyMapByRunId[e.id];if(void 0===t)return;let r=[{op:"add",path:`/logs/${t}/final_output`,value:e.outputs}];void 0!==e.end_time&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});let n=new o({ops:r});await this.writer.write(n)}finally{if(void 0===e.parent_run_id){let t=new o({ops:[{op:"replace",path:"/final_output",value:e.outputs}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t){let r=this.keyMapByRunId[e.id];if(void 0===r)return;let n=new o({ops:[{op:"add",path:`/logs/${r}/streamed_output_str/-`,value:t}]});await this.writer.write(n)}}},{"../utils/fast-json-patch/index.js":"hrFKE","./base.js":"gsfZb","../utils/stream.js":"faNJA","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hrFKE:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"JsonPatchError",()=>i.PatchError),n.export(r,"deepClone",()=>i._deepClone),n.export(r,"escapePathComponent",()=>i.escapePathComponent),n.export(r,"unescapePathComponent",()=>i.unescapePathComponent);var a=e("./src/core.js");n.exportAll(a,r);var s=e("./src/duplex.js");n.exportAll(s,r);var i=e("./src/helpers.js");r.default={...a,JsonPatchError:i.PatchError,deepClone:i._deepClone,escapePathComponent:i.escapePathComponent,unescapePathComponent:i.unescapePathComponent}},{"./src/core.js":"27Wvc","./src/duplex.js":"9JAeY","./src/helpers.js":"6VGjv","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"27Wvc":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"JsonPatchError",()=>s),n.export(r,"deepClone",()=>i),n.export(r,"getValueByPointer",()=>u),n.export(r,"applyOperation",()=>c),n.export(r,"applyPatch",()=>d),n.export(r,"applyReducer",()=>p),n.export(r,"validator",()=>f),n.export(r,"validate",()=>h),n.export(r,"_areEquals",()=>m);var a=e("./helpers.js");let s=a.PatchError,i=a._deepClone,o={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){let n=u(r,this.path);n&&(n=(0,a._deepClone)(n));let s=c(r,{op:"remove",path:this.from}).removed;return c(r,{op:"add",path:this.path,value:s}),{newDocument:r,removed:n}},copy:function(e,t,r){let n=u(r,this.from);return c(r,{op:"add",path:this.path,value:(0,a._deepClone)(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:m(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}};var l={add:function(e,t,r){return(0,a.isInteger)(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:o.move,copy:o.copy,test:o.test,_get:o._get};function u(e,t){if(""==t)return e;var r={op:"_get",path:t};return c(e,r),r.value}function c(e,t,r=!1,n=!0,i=!0,c=0){if(r&&("function"==typeof r?r(t,0,e,t.path):f(t,0)),""===t.path){let n={newDocument:e};if("add"===t.op)return n.newDocument=t.value,n;if("replace"===t.op)return n.newDocument=t.value,n.removed=e,n;if("move"===t.op||"copy"===t.op)return n.newDocument=u(e,t.from),"move"===t.op&&(n.removed=e),n;if("test"===t.op){if(n.test=m(e,t.value),!1===n.test)throw new s("Test operation failed","TEST_OPERATION_FAILED",c,t,e);return n.newDocument=e,n}else{if("remove"===t.op)return n.removed=e,n.newDocument=null,n;if("_get"===t.op)return t.value=e,n;if(!r)return n;throw new s("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",c,t,e)}}{let u,d,p;n||(e=(0,a._deepClone)(e));let h=(t.path||"").split("/"),m=e,g=1,y=h.length;for(d="function"==typeof r?r:f;;){if((u=h[g])&&-1!=u.indexOf("~")&&(u=(0,a.unescapePathComponent)(u)),i&&("__proto__"==u||"prototype"==u&&g>0&&"constructor"==h[g-1]))throw TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===p&&(void 0===m[u]?p=h.slice(0,g).join("/"):g==y-1&&(p=t.path),void 0!==p&&d(t,0,e,p)),g++,Array.isArray(m)){if("-"===u)u=m.length;else{if(r&&!(0,a.isInteger)(u))throw new s("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",c,t,e);(0,a.isInteger)(u)&&(u=~~u)}if(g>=y){if(r&&"add"===t.op&&u>m.length)throw new s("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",c,t,e);let n=l[t.op].call(t,m,u,e);if(!1===n.test)throw new s("Test operation failed","TEST_OPERATION_FAILED",c,t,e);return n}}else if(g>=y){let r=o[t.op].call(t,m,u,e);if(!1===r.test)throw new s("Test operation failed","TEST_OPERATION_FAILED",c,t,e);return r}if(m=m[u],r&&g<y&&(!m||"object"!=typeof m))throw new s("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",c,t,e)}}}function d(e,t,r,n=!0,i=!0){if(r&&!Array.isArray(t))throw new s("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=(0,a._deepClone)(e));let o=Array(t.length);for(let n=0,a=t.length;n<a;n++)o[n]=c(e,t[n],r,!0,i,n),e=o[n].newDocument;return o.newDocument=e,o}function p(e,t,r){let n=c(e,t);if(!1===n.test)throw new s("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument}function f(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new s("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(o[e.op]){if("string"!=typeof e.path)throw new s("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new s('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new s("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);else if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new s("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);else if(("add"===e.op||"replace"===e.op||"test"===e.op)&&(0,a.hasUndefined)(e.value))throw new s("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);else if(r){if("add"==e.op){var i=e.path.split("/").length,l=n.split("/").length;if(i!==l+1&&i!==l)throw new s("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new s("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var u=h([{op:"_get",path:e.from,value:void 0}],r);if(u&&"OPERATION_PATH_UNRESOLVABLE"===u.name)throw new s("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}}else throw new s("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r)}function h(e,t,r){try{if(!Array.isArray(e))throw new s("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)d((0,a._deepClone)(t),(0,a._deepClone)(e),r||!0);else{r=r||f;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(e){if(e instanceof s)return e;throw e}}function m(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,a,s=Array.isArray(e),i=Array.isArray(t);if(s&&i){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!m(e[r],t[r]))return!1;return!0}if(s!=i)return!1;var o=Object.keys(e);if((n=o.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(o[r]))return!1;for(r=n;0!=r--;)if(!m(e[a=o[r]],t[a]))return!1;return!0}return e!=e&&t!=t}},{"./helpers.js":"6VGjv","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6VGjv":[function(e,t,r){/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"hasOwnProperty",()=>s),n.export(r,"_objectKeys",()=>i),n.export(r,"_deepClone",()=>o),n.export(r,"isInteger",()=>l),n.export(r,"escapePathComponent",()=>u),n.export(r,"unescapePathComponent",()=>c),n.export(r,"_getPathRecursive",()=>d),n.export(r,"getPath",()=>p),n.export(r,"hasUndefined",()=>function e(t){if(void 0===t)return!0;if(t){if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(e(t[r]))return!0}else if("object"==typeof t){let n=i(t),a=n.length;for(var r=0;r<a;r++)if(e(t[n[r]]))return!0}}return!1}),n.export(r,"PatchError",()=>h);let a=Object.prototype.hasOwnProperty;function s(e,t){return a.call(e,t)}function i(e){if(Array.isArray(e)){let t=Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let r in e)s(e,r)&&t.push(r);return t}function o(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function l(e){let t,r=0,n=e.length;for(;r<n;){if((t=e.charCodeAt(r))>=48&&t<=57){r++;continue}return!1}return!0}function u(e){return -1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function d(e,t){let r;for(let n in e)if(s(e,n)){if(e[n]===t)return u(n)+"/";if("object"==typeof e[n]&&""!=(r=d(e[n],t)))return u(n)+"/"+r}return""}function p(e,t){if(e===t)return"/";let r=d(e,t);if(""===r)throw Error("Object not found in root");return`/${r}`}function f(e,t){let r=[e];for(let e in t){let n="object"==typeof t[e]?JSON.stringify(t[e],null,2):t[e];void 0!==n&&r.push(`${e}: ${n}`)}return r.join("\n")}class h extends Error{constructor(e,t,r,n,a){super(f(e,{name:t,index:r,operation:n,tree:a})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.setPrototypeOf(this,new.target.prototype),this.message=f(e,{name:t,index:r,operation:n,tree:a})}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"9JAeY":[function(e,t,r){/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"unobserve",()=>u),n.export(r,"observe",()=>c),n.export(r,"generate",()=>d),n.export(r,"compare",()=>f);var a=e("./helpers.js"),s=e("./core.js"),i=new WeakMap;class o{constructor(e){Object.defineProperty(this,"obj",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.obj=e}}class l{constructor(e,t){Object.defineProperty(this,"callback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callback=e,this.observer=t}}function u(e,t){t.unobserve()}function c(e,t){var r,n=i.get(e);if(n){let e=n.observers.get(t);r=e&&e.observer}else n=new o(e),i.set(e,n);if(r)return r;if(r={},n.value=(0,a._deepClone)(e),t){r.callback=t,r.next=null;var s=()=>{d(r)},u=()=>{clearTimeout(r.next),r.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u))}return r.patches=[],r.object=e,r.unobserve=()=>{d(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(n,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u),window.removeEventListener("change",u))},n.observers.set(t,new l(t,r)),r}function d(e,t=!1){var r=i.get(e.object);p(r.value,e.object,e.patches,"",t),e.patches.length&&(0,s.applyPatch)(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function p(e,t,r,n,s){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=(0,a._objectKeys)(t),o=(0,a._objectKeys)(e),l=!1,u=o.length-1;u>=0;u--){var c=o[u],d=e[c];if((0,a.hasOwnProperty)(t,c)&&!(void 0===t[c]&&void 0!==d&&!1===Array.isArray(t))){var f=t[c];"object"==typeof d&&null!=d&&"object"==typeof f&&null!=f&&Array.isArray(d)===Array.isArray(f)?p(d,f,r,n+"/"+(0,a.escapePathComponent)(c),s):d!==f&&(s&&r.push({op:"test",path:n+"/"+(0,a.escapePathComponent)(c),value:(0,a._deepClone)(d)}),r.push({op:"replace",path:n+"/"+(0,a.escapePathComponent)(c),value:(0,a._deepClone)(f)}))}else Array.isArray(e)===Array.isArray(t)?(s&&r.push({op:"test",path:n+"/"+(0,a.escapePathComponent)(c),value:(0,a._deepClone)(d)}),r.push({op:"remove",path:n+"/"+(0,a.escapePathComponent)(c)}),l=!0):(s&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}))}if(l||i.length!=o.length)for(var u=0;u<i.length;u++){var c=i[u];(0,a.hasOwnProperty)(e,c)||void 0===t[c]||r.push({op:"add",path:n+"/"+(0,a.escapePathComponent)(c),value:(0,a._deepClone)(t[c])})}}}function f(e,t,r=!1){var n=[];return p(e,t,n,"",r),n}},{"./helpers.js":"6VGjv","./core.js":"27Wvc","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],faNJA:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"IterableReadableStream",()=>a);class a extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();return e.done&&this.reader.releaseLock(),{done:e.done,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}static fromReadableStream(e){let t=e.getReader();return new a({start:e=>(function r(){return t.read().then(({done:t,value:n})=>{if(t){e.close();return}return e.enqueue(n),r()})})(),cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new a({async pull(t){let{value:r,done:n}=await e.next();n&&t.close(),t.enqueue(r)}})}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bd9nP:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getCallbackMangerForConfig",()=>s),n.export(r,"mergeConfigs",()=>i);var a=e("../callbacks/manager.js");async function s(e){return(0,a.CallbackManager).configure(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)}function i(e,t){let r={...e};if(t)for(let n of Object.keys(t))if("metadata"===n)r[n]={...r[n],...t[n]};else if("tags"===n)r[n]=(r[n]??[]).concat(t[n]??[]);else if("callbacks"===n){let n=r.callbacks,s=t.callbacks??e.callbacks;if(Array.isArray(s)){if(n){if(Array.isArray(n))r.callbacks=n.concat(s);else{let e=n.copy();for(let t of s)e.addHandler(t,!0);r.callbacks=e}}else r.callbacks=s}else if(s){if(n){if(Array.isArray(n)){let e=s.copy();for(let t of n)e.addHandler(t,!0);r.callbacks=e}else r.callbacks=new a.CallbackManager(s.parentRunId,{handlers:n.handlers.concat(s.handlers),inheritableHandlers:n.inheritableHandlers.concat(s.inheritableHandlers),tags:Array.from(new Set(n.tags.concat(s.tags))),inheritableTags:Array.from(new Set(n.inheritableTags.concat(s.inheritableTags))),metadata:{...n.metadata,...s.metadata}})}else r.callbacks=s}}else r[n]=t[n]??r[n];return r}},{"../callbacks/manager.js":"fZx9W","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],i5MBm:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RootListenersTracer",()=>s);var a=e("./base.js");class s extends a.BaseTracer{constructor({config:e,onStart:t,onEnd:r,onError:n}){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){!this.rootId&&(this.rootId=e.id,this.argOnStart&&(1===this.argOnStart.length?await this.argOnStart(e):2===this.argOnStart.length&&await this.argOnStart(e,this.config)))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&(1===this.argOnError.length?await this.argOnError(e):2===this.argOnError.length&&await this.argOnError(e,this.config)):this.argOnEnd&&(1===this.argOnEnd.length?await this.argOnEnd(e):2===this.argOnEnd.length&&await this.argOnEnd(e,this.config)))}}},{"./base.js":"gsfZb","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],cZOiV:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"wrapOpenAIClientError",()=>s);var a=e("openai");function s(e){let t;return e.constructor.name===a.APIConnectionTimeoutError.name?(t=Error(e.message)).name="TimeoutError":e.constructor.name===a.APIUserAbortError.name?(t=Error(e.message)).name="AbortError":t=e,t}},{openai:"j1V7m","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gwHWa:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){let t=["namespace functions {",""];for(let r of e)r.description&&t.push(`// ${r.description}`),Object.keys(r.parameters.properties??{}).length>0?(t.push(`type ${r.name} = (_: {`),t.push(s(r.parameters,0)),t.push("}) => any;")):t.push(`type ${r.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join("\n")}function s(e,t){let r=[];for(let[n,a]of Object.entries(e.properties??{}))a.description&&t<2&&r.push(`// ${a.description}`),e.required?.includes(n)?r.push(`${n}: ${i(a,t)},`):r.push(`${n}?: ${i(a,t)},`);return r.map(e=>" ".repeat(t)+e).join("\n")}function i(e,t){if(void 0!==e.anyOf&&Array.isArray(e.anyOf))return e.anyOf.map(e=>i(e,t)).join(" | ");switch(e.type){case"string":if(e.enum)return e.enum.map(e=>`"${e}"`).join(" | ");return"string";case"number":if(e.enum)return e.enum.map(e=>`${e}`).join(" | ");return"number";case"integer":if(e.enum)return e.enum.map(e=>`${e}`).join(" | ");return"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",s(e,t+2),"}"].join("\n");case"array":if(e.items)return`${i(e.items,t)}[]`;return"any[]";default:return""}}n.defineInteropFlag(r),n.export(r,"formatFunctionDefinitions",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jggPT:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/output_parsers/index.js");n.exportAll(a,r)},{"./dist/output_parsers/index.js":"3uwuq","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3uwuq":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ListOutputParser",()=>a.ListOutputParser),n.export(r,"CommaSeparatedListOutputParser",()=>a.CommaSeparatedListOutputParser),n.export(r,"RegexParser",()=>s.RegexParser),n.export(r,"StructuredOutputParser",()=>i.StructuredOutputParser),n.export(r,"AsymmetricStructuredOutputParser",()=>i.AsymmetricStructuredOutputParser),n.export(r,"JsonMarkdownStructuredOutputParser",()=>i.JsonMarkdownStructuredOutputParser),n.export(r,"OutputFixingParser",()=>o.OutputFixingParser),n.export(r,"CombiningOutputParser",()=>l.CombiningOutputParser),n.export(r,"RouterOutputParser",()=>u.RouterOutputParser),n.export(r,"CustomListOutputParser",()=>a.CustomListOutputParser),n.export(r,"OutputFunctionsParser",()=>c.OutputFunctionsParser),n.export(r,"JsonOutputFunctionsParser",()=>c.JsonOutputFunctionsParser),n.export(r,"JsonKeyOutputFunctionsParser",()=>c.JsonKeyOutputFunctionsParser),n.export(r,"JsonOutputToolsParser",()=>d.JsonOutputToolsParser),n.export(r,"HttpResponseOutputParser",()=>p.HttpResponseOutputParser);var a=e("./list.js"),s=e("./regex.js"),i=e("./structured.js"),o=e("./fix.js"),l=e("./combining.js"),u=e("./router.js"),c=e("../output_parsers/openai_functions.js"),d=e("../output_parsers/openai_tools.js"),p=e("./http_response.js")},{"./list.js":"4y8ur","./regex.js":"aTIyG","./structured.js":"lB0Tl","./fix.js":"6UHib","./combining.js":"4IDFM","./router.js":"cfmkZ","../output_parsers/openai_functions.js":"i4BBY","../output_parsers/openai_tools.js":"dA3JY","./http_response.js":"heX8Q","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4y8ur":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ListOutputParser",()=>a.ListOutputParser),n.export(r,"CommaSeparatedListOutputParser",()=>a.CommaSeparatedListOutputParser),n.export(r,"CustomListOutputParser",()=>a.CustomListOutputParser);var a=e("@langchain/core/output_parsers")},{"@langchain/core/output_parsers":"lJN8i","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],lJN8i:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/output_parsers/index.js");n.exportAll(a,r)},{"./dist/output_parsers/index.js":"hzU2F","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hzU2F:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./base.js");n.exportAll(a,r);var s=e("./bytes.js");n.exportAll(s,r);var i=e("./list.js");n.exportAll(i,r);var o=e("./string.js");n.exportAll(o,r);var l=e("./transform.js");n.exportAll(l,r)},{"./base.js":"3zc8q","./bytes.js":"dx60x","./list.js":"6V3b3","./string.js":"6QMX2","./transform.js":"bTKRm","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3zc8q":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseLLMOutputParser",()=>s),n.export(r,"BaseOutputParser",()=>i),n.export(r,"OutputParserException",()=>o);var a=e("../runnables/index.js");class s extends a.Runnable{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}async invoke(e,t){return"string"==typeof e?this._callWithConfig(async e=>this.parseResult([{text:e}]),e,{...t,runType:"parser"}):this._callWithConfig(async e=>this.parseResult([{message:e,text:"string"==typeof e.content?e.content:JSON.stringify(e.content)}]),e,{...t,runType:"parser"})}}class i extends s{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw Error("_type not implemented")}}class o extends Error{constructor(e,t,r,n=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=r,this.sendToLLM=n,n&&(void 0===r||void 0===t))throw Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true")}}},{"../runnables/index.js":"5rS6H","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5rS6H":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Runnable",()=>a.Runnable),n.export(r,"RunnableBinding",()=>a.RunnableBinding),n.export(r,"RunnableEach",()=>a.RunnableEach),n.export(r,"RunnableRetry",()=>a.RunnableRetry),n.export(r,"RunnableSequence",()=>a.RunnableSequence),n.export(r,"RunnableMap",()=>a.RunnableMap),n.export(r,"RunnableParallel",()=>a.RunnableParallel),n.export(r,"RunnableLambda",()=>a.RunnableLambda),n.export(r,"RunnableWithFallbacks",()=>a.RunnableWithFallbacks),n.export(r,"_coerceToRunnable",()=>a._coerceToRunnable),n.export(r,"RunnablePassthrough",()=>s.RunnablePassthrough),n.export(r,"RunnableAssign",()=>s.RunnableAssign),n.export(r,"RouterRunnable",()=>i.RouterRunnable),n.export(r,"RunnableBranch",()=>o.RunnableBranch),n.export(r,"RunnableWithMessageHistory",()=>l.RunnableWithMessageHistory);var a=e("./base.js"),s=e("./passthrough.js"),i=e("./router.js"),o=e("./branch.js"),l=e("./history.js")},{"./base.js":"1qQoT","./passthrough.js":"5OMha","./router.js":"khJ4x","./branch.js":"bSfPO","./history.js":"iIyn0","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5OMha":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RunnableAssign",()=>s),n.export(r,"RunnablePassthrough",()=>i);var a=e("./base.js");class s extends a.Runnable{constructor(e){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e}async invoke(e,t){let r=await this.mapper.invoke(e,t);return{...e,...r}}}class i extends a.Runnable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"RunnablePassthrough"}async invoke(e,t){return this._callWithConfig(e=>Promise.resolve(e),e,t)}static assign(e){return new s(new a.RunnableMap({steps:e}))}}},{"./base.js":"1qQoT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],khJ4x:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RouterRunnable",()=>s);var a=e("./base.js");class s extends a.Runnable{static lc_name(){return"RouterRunnable"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnables=e.runnables}async invoke(e,t){let{key:r,input:n}=e,a=this.runnables[r];if(void 0===a)throw Error(`No runnable associated with key "${r}".`);return a.invoke(n,t)}async batch(e,t,r){let n=e.map(e=>e.key),a=e.map(e=>e.input);if(void 0!==n.find(e=>void 0===this.runnables[e]))throw Error("One or more keys do not have a corresponding runnable.");let s=n.map(e=>this.runnables[e]),i=this._getOptionsList(t??{},e.length),o=r?.maxConcurrency&&r.maxConcurrency>0?r?.maxConcurrency:e.length,l=[];for(let e=0;e<a.length;e+=o){let t=a.slice(e,e+o).map((e,t)=>s[t].invoke(e,i[t])),r=await Promise.all(t);l.push(r)}return l.flat()}async stream(e,t){let{key:r,input:n}=e,a=this.runnables[r];if(void 0===a)throw Error(`No runnable associated with key "${r}".`);return a.stream(n,t)}}},{"./base.js":"1qQoT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bSfPO:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RunnableBranch",()=>s);var a=e("./base.js");class s extends a.Runnable{static lc_name(){return"RunnableBranch"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"default",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"branches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.branches=e.branches,this.default=e.default}static from(e){if(e.length<1)throw Error("RunnableBranch requires at least one branch");return new this({branches:e.slice(0,-1).map(([e,t])=>[(0,a._coerceToRunnable)(e),(0,a._coerceToRunnable)(t)]),default:(0,a._coerceToRunnable)(e[e.length-1])})}async _invoke(e,t,r){let n;for(let a=0;a<this.branches.length;a+=1){let[s,i]=this.branches[a];if(await s.invoke(e,this._patchConfig(t,r?.getChild(`condition:${a+1}`)))){n=await i.invoke(e,this._patchConfig(t,r?.getChild(`branch:${a+1}`)));break}}return n||(n=await this.default.invoke(e,this._patchConfig(t,r?.getChild("default")))),n}async invoke(e,t={}){return this._callWithConfig(this._invoke,e,t)}}},{"./base.js":"1qQoT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],iIyn0:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RunnableWithMessageHistory",()=>o);var a=e("../messages/index.js"),s=e("./base.js"),i=e("./passthrough.js");class o extends s.RunnableBinding{constructor(e){let t=new(0,s.RunnableLambda)({func:(e,t)=>this._enterHistory(e,t??{})}).withConfig({runName:"loadHistory"}),r=e.historyMessagesKey??e.inputMessagesKey;r&&(t=(0,i.RunnablePassthrough).assign({[r]:t}).withConfig({runName:"insertHistory"})),super({...e,config:e.config??{},bound:t.pipe(e.runnable.withListeners({onEnd:(e,t)=>this._exitHistory(e,t??{})})).withConfig({runName:"RunnableWithMessageHistory"})}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"historyMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getMessageHistory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){return"string"==typeof e?[new a.HumanMessage(e)]:Array.isArray(e)?e:[e]}_getOutputMessages(e){let t=e;if(Array.isArray(e)||(0,a.isBaseMessage)(e)||"string"==typeof e||(t=e[this.outputMessagesKey??"output"]),"string"==typeof t)return[new a.AIMessage(t)];if(Array.isArray(t))return t;if((0,a.isBaseMessage)(t))return[t];throw Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(t,null,2)}`)}_enterHistory(e,t){let r=t?.config?.configurable?.messageHistory;if(this.historyMessagesKey)return r.messages;let n=e||(this.inputMessagesKey?e[this.inputMessagesKey]:void 0);return[...r?r.messages:[],...this._getInputMessages(n)]}async _exitHistory(e,t){let r=t.configurable?.messageHistory,{inputs:n}=e,a=n[this.inputMessagesKey??"input"],s=this._getInputMessages(a),i=e.outputs;if(!i)throw Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);for await(let e of[...s,...this._getOutputMessages(i)])await r.addMessage(e)}async _mergeConfig(...e){let t=await super._mergeConfig(...e);if(!t.configurable||!t.configurable.sessionId){let e={[this.inputMessagesKey??"input"]:"foo"};throw Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(e)}, ${JSON.stringify({configurable:{sessionId:"123"}})})`)}let{sessionId:r}=t.configurable;return t.configurable.messageHistory=await this.getMessageHistory(r),t}}},{"../messages/index.js":"jMGwo","./base.js":"1qQoT","./passthrough.js":"5OMha","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],dx60x:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BytesOutputParser",()=>s);var a=e("./transform.js");class s extends a.BaseTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","bytes"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"textEncoder",{enumerable:!0,configurable:!0,writable:!0,value:new TextEncoder})}static lc_name(){return"BytesOutputParser"}parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}}},{"./transform.js":"bTKRm","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bTKRm:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseTransformOutputParser",()=>l),n.export(r,"BaseCumulativeTransformOutputParser",()=>u);var a=e("./base.js"),s=e("../messages/index.js"),i=e("../outputs.js"),o=e("../utils/@cfworker/json-schema/index.js");class l extends a.BaseOutputParser{async *_transform(e){for await(let t of e)"string"==typeof t?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:"string"==typeof t.content?t.content:JSON.stringify(t.content)}])}async *transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}class u extends l{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=e?.diff??this.diff}async *_transform(e){let t,r;for await(let n of e){let e;if("string"!=typeof n&&"string"!=typeof n.content)throw Error("Cannot handle non-string output.");if((0,s.isBaseMessageChunk)(n)){if("string"!=typeof n.content)throw Error("Cannot handle non-string message output.");e=new i.ChatGenerationChunk({message:n,text:n.content})}else if((0,s.isBaseMessage)(n)){if("string"!=typeof n.content)throw Error("Cannot handle non-string message output.");e=new i.ChatGenerationChunk({message:n.toChunk(),text:n.content})}else e=new i.GenerationChunk({text:n});r=void 0===r?e:r.concat(e);let a=await this.parsePartialResult([r]);null==a||(0,o.deepCompareStrict)(a,t)||(this.diff?yield this._diff(t,a):yield a,t=a)}}}},{"./base.js":"3zc8q","../messages/index.js":"jMGwo","../outputs.js":"l1AvI","../utils/@cfworker/json-schema/index.js":"51hpx","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"51hpx":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./src/index.js");n.exportAll(a,r)},{"./src/index.js":"7abhE","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7abhE":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./deep-compare-strict.js");n.exportAll(a,r);var s=e("./dereference.js");n.exportAll(s,r);var i=e("./format.js");n.exportAll(i,r);var o=e("./pointer.js");n.exportAll(o,r);var l=e("./types.js");n.exportAll(l,r);var u=e("./ucs2-length.js");n.exportAll(u,r);var c=e("./validate.js");n.exportAll(c,r);var d=e("./validator.js");n.exportAll(d,r)},{"./deep-compare-strict.js":"cXbUU","./dereference.js":"bYI0J","./format.js":"erPEo","./pointer.js":"c8POP","./types.js":"7pwjt","./ucs2-length.js":"7ZTHb","./validate.js":"8Qmxd","./validator.js":"iBo0e","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],cXbUU:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"deepCompareStrict",()=>function e(t,r){let n=typeof t;if(n!==typeof r)return!1;if(Array.isArray(t)){if(!Array.isArray(r))return!1;let n=t.length;if(n!==r.length)return!1;for(let a=0;a<n;a++)if(!e(t[a],r[a]))return!1;return!0}if("object"===n){if(!t||!r)return t===r;let n=Object.keys(t),a=Object.keys(r);if(n.length!==a.length)return!1;for(let a of n)if(!e(t[a],r[a]))return!1;return!0}return t===r})},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bYI0J:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"schemaKeyword",()=>s),n.export(r,"schemaArrayKeyword",()=>i),n.export(r,"schemaMapKeyword",()=>o),n.export(r,"ignoredKeyword",()=>l),n.export(r,"initialBaseURI",()=>u),n.export(r,"dereference",()=>function e(t,r=Object.create(null),n=u,s=""){if(t&&"object"==typeof t&&!Array.isArray(t)){let a=t.$id||t.id;if(a){let i=new URL(a,n.href);i.hash.length>1?r[i.href]=t:(i.hash="",""===s?n=i:e(t,r,n))}}else if(!0!==t&&!1!==t)return r;let c=n.href+(s?"#"+s:"");if(void 0!==r[c])throw Error(`Duplicate schema URI "${c}".`);if(r[c]=t,!0===t||!1===t)return r;if(void 0===t.__absolute_uri__&&Object.defineProperty(t,"__absolute_uri__",{enumerable:!1,value:c}),t.$ref&&void 0===t.__absolute_ref__){let e=new URL(t.$ref,n.href);e.hash=e.hash,Object.defineProperty(t,"__absolute_ref__",{enumerable:!1,value:e.href})}if(t.$recursiveRef&&void 0===t.__absolute_recursive_ref__){let e=new URL(t.$recursiveRef,n.href);e.hash=e.hash,Object.defineProperty(t,"__absolute_recursive_ref__",{enumerable:!1,value:e.href})}for(let u in t.$anchor&&(r[new URL("#"+t.$anchor,n.href).href]=t),t){if(l[u])continue;let c=`${s}/${(0,a.encodePointer)(u)}`,d=t[u];if(Array.isArray(d)){if(i[u]){let t=d.length;for(let a=0;a<t;a++)e(d[a],r,n,`${c}/${a}`)}}else if(o[u])for(let t in d)e(d[t],r,n,`${c}/${(0,a.encodePointer)(t)}`);else e(d,r,n,c)}return r});var a=e("./pointer.js");let s={additionalItems:!0,unevaluatedItems:!0,items:!0,contains:!0,additionalProperties:!0,unevaluatedProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},i={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},o={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},l={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},u="undefined"!=typeof self&&self.location?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker")},{"./pointer.js":"c8POP","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],c8POP:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return encodeURI(s(e))}function s(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}n.defineInteropFlag(r),n.export(r,"encodePointer",()=>a),n.export(r,"escapePointer",()=>s)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],erPEo:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"fullFormat",()=>l),n.export(r,"fastFormat",()=>u);let a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function o(e){return e.test.bind(e)}let l={date:c,time:d.bind(void 0,!1),"date-time":function(e){let t=e.split(p);return 2==t.length&&c(t[0])&&d(!0,t[1])},duration:e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e)),uri:function(e){return f.test(e)&&h.test(e)},"uri-reference":o(/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i),"uri-template":o(/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i),url:o(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu),email:e=>{if('"'===e[0])return!1;let[t,r,...n]=e.split("@");return!(!t||!r||0!==n.length||t.length>64||r.length>253||"."===t[0]||t.endsWith(".")||t.includes(".."))&&!!/^[a-z0-9.-]+$/i.test(r)&&!!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)&&r.split(".").every(e=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(e))},hostname:o(/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i),ipv4:o(/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/),ipv6:o(/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i),regex:function(e){if(m.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:o(/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i),"json-pointer":o(/^(?:\/(?:[^~/]|~0|~1)*)*$/),"json-pointer-uri-fragment":o(/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i),"relative-json-pointer":o(/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/)},u={...l,date:o(/^\d\d\d\d-[0-1]\d-[0-3]\d$/),time:o(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i),"date-time":o(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i),"uri-reference":o(/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i)};function c(e){var t;let r=e.match(a);if(!r)return!1;let n=+r[1],i=+r[2],o=+r[3];return i>=1&&i<=12&&o>=1&&o<=(2==i&&(t=n)%4==0&&(t%100!=0||t%400==0)?29:s[i])}function d(e,t){let r=t.match(i);if(!r)return!1;let n=+r[1],a=+r[2],s=+r[3],o=!!r[5];return(n<=23&&a<=59&&s<=59||23==n&&59==a&&60==s)&&(!e||o)}let p=/t|\s/i,f=/\/|:/,h=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,m=/[^\\]\\Z/},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7pwjt":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7ZTHb":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){let t,r=0,n=e.length,a=0;for(;a<n;)r++,(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<n&&(64512&(t=e.charCodeAt(a)))==56320&&a++;return r}n.defineInteropFlag(r),n.export(r,"ucs2length",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8Qmxd":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"validate",()=>function e(t,r,n="2019-09",u=(0,s.dereference)(r),c=!0,d=null,p="#",f="#",h=Object.create(null)){let m;if(!0===r)return{valid:!0,errors:[]};if(!1===r)return{valid:!1,errors:[{instanceLocation:p,keyword:"false",keywordLocation:p,error:"False boolean schema."}]};let g=typeof t;switch(g){case"boolean":case"number":case"string":m=g;break;case"object":m=null===t?"null":Array.isArray(t)?"array":"object";break;default:throw Error(`Instances of "${g}" type are not supported.`)}let{$ref:y,$recursiveRef:v,$recursiveAnchor:b,type:_,const:w,enum:j,required:x,not:S,anyOf:k,allOf:P,oneOf:O,if:I,then:C,else:E,format:T,properties:A,patternProperties:R,additionalProperties:N,unevaluatedProperties:M,minProperties:L,maxProperties:F,propertyNames:$,dependentRequired:D,dependentSchemas:z,dependencies:U,prefixItems:B,items:Z,additionalItems:q,unevaluatedItems:V,contains:K,minContains:H,maxContains:W,minItems:J,maxItems:Q,uniqueItems:G,minimum:Y,maximum:X,exclusiveMinimum:ee,exclusiveMaximum:et,multipleOf:er,minLength:en,maxLength:ea,pattern:es,__absolute_ref__:ei,__absolute_recursive_ref__:eo}=r,el=[];if(!0===b&&null===d&&(d=r),"#"===v){let a=null===d?u[eo]:d,s=`${f}/$recursiveRef`,i=e(t,null===d?r:d,n,u,c,a,p,s,h);i.valid||el.push({instanceLocation:p,keyword:"$recursiveRef",keywordLocation:s,error:"A subschema had errors."},...i.errors)}if(void 0!==y){let r=u[ei||y];if(void 0===r){let e=`Unresolved $ref "${y}".`;throw ei&&ei!==y&&(e+=`  Absolute URI "${ei}".`),Error(e+=`
Known schemas:
- ${Object.keys(u).join("\n- ")}`)}let a=`${f}/$ref`,s=e(t,r,n,u,c,d,p,a,h);if(s.valid||el.push({instanceLocation:p,keyword:"$ref",keywordLocation:a,error:"A subschema had errors."},...s.errors),"4"===n||"7"===n)return{valid:0===el.length,errors:el}}if(Array.isArray(_)){let e=_.length,r=!1;for(let n=0;n<e;n++)if(m===_[n]||"integer"===_[n]&&"number"===m&&t%1==0&&t==t){r=!0;break}r||el.push({instanceLocation:p,keyword:"type",keywordLocation:`${f}/type`,error:`Instance type "${m}" is invalid. Expected "${_.join('", "')}".`})}else"integer"===_?("number"!==m||t%1||t!=t)&&el.push({instanceLocation:p,keyword:"type",keywordLocation:`${f}/type`,error:`Instance type "${m}" is invalid. Expected "${_}".`}):void 0!==_&&m!==_&&el.push({instanceLocation:p,keyword:"type",keywordLocation:`${f}/type`,error:`Instance type "${m}" is invalid. Expected "${_}".`});if(void 0===w||("object"===m||"array"===m?(0,a.deepCompareStrict)(t,w)||el.push({instanceLocation:p,keyword:"const",keywordLocation:`${f}/const`,error:`Instance does not match ${JSON.stringify(w)}.`}):t!==w&&el.push({instanceLocation:p,keyword:"const",keywordLocation:`${f}/const`,error:`Instance does not match ${JSON.stringify(w)}.`})),void 0===j||("object"===m||"array"===m?j.some(e=>(0,a.deepCompareStrict)(t,e))||el.push({instanceLocation:p,keyword:"enum",keywordLocation:`${f}/enum`,error:`Instance does not match any of ${JSON.stringify(j)}.`}):j.some(e=>t===e)||el.push({instanceLocation:p,keyword:"enum",keywordLocation:`${f}/enum`,error:`Instance does not match any of ${JSON.stringify(j)}.`})),void 0!==S){let r=`${f}/not`;e(t,S,n,u,c,d,p,r).valid&&el.push({instanceLocation:p,keyword:"not",keywordLocation:r,error:'Instance matched "not" schema.'})}let eu=[];if(void 0!==k){let r=`${f}/anyOf`,a=el.length,s=!1;for(let a=0;a<k.length;a++){let i=k[a],o=Object.create(h),l=e(t,i,n,u,c,!0===b?d:null,p,`${r}/${a}`,o);el.push(...l.errors),s=s||l.valid,l.valid&&eu.push(o)}s?el.length=a:el.splice(a,0,{instanceLocation:p,keyword:"anyOf",keywordLocation:r,error:"Instance does not match any subschemas."})}if(void 0!==P){let r=`${f}/allOf`,a=el.length,s=!0;for(let a=0;a<P.length;a++){let i=P[a],o=Object.create(h),l=e(t,i,n,u,c,!0===b?d:null,p,`${r}/${a}`,o);el.push(...l.errors),s=s&&l.valid,l.valid&&eu.push(o)}s?el.length=a:el.splice(a,0,{instanceLocation:p,keyword:"allOf",keywordLocation:r,error:"Instance does not match every subschema."})}if(void 0!==O){let r=`${f}/oneOf`,a=el.length,s=O.filter((a,s)=>{let i=Object.create(h),o=e(t,a,n,u,c,!0===b?d:null,p,`${r}/${s}`,i);return el.push(...o.errors),o.valid&&eu.push(i),o.valid}).length;1===s?el.length=a:el.splice(a,0,{instanceLocation:p,keyword:"oneOf",keywordLocation:r,error:`Instance does not match exactly one subschema (${s} matches).`})}if(("object"===m||"array"===m)&&Object.assign(h,...eu),void 0!==I){let r=`${f}/if`;if(e(t,I,n,u,c,d,p,r,h).valid){if(void 0!==C){let a=e(t,C,n,u,c,d,p,`${f}/then`,h);a.valid||el.push({instanceLocation:p,keyword:"if",keywordLocation:r,error:'Instance does not match "then" schema.'},...a.errors)}}else if(void 0!==E){let a=e(t,E,n,u,c,d,p,`${f}/else`,h);a.valid||el.push({instanceLocation:p,keyword:"if",keywordLocation:r,error:'Instance does not match "else" schema.'},...a.errors)}}if("object"===m){if(void 0!==x)for(let e of x)e in t||el.push({instanceLocation:p,keyword:"required",keywordLocation:`${f}/required`,error:`Instance does not have required property "${e}".`});let r=Object.keys(t);if(void 0!==L&&r.length<L&&el.push({instanceLocation:p,keyword:"minProperties",keywordLocation:`${f}/minProperties`,error:`Instance does not have at least ${L} properties.`}),void 0!==F&&r.length>F&&el.push({instanceLocation:p,keyword:"maxProperties",keywordLocation:`${f}/maxProperties`,error:`Instance does not have at least ${F} properties.`}),void 0!==$){let r=`${f}/propertyNames`;for(let a in t){let t=`${p}/${(0,o.encodePointer)(a)}`,s=e(a,$,n,u,c,d,t,r);s.valid||el.push({instanceLocation:p,keyword:"propertyNames",keywordLocation:r,error:`Property name "${a}" does not match schema.`},...s.errors)}}if(void 0!==D){let e=`${f}/dependantRequired`;for(let r in D)if(r in t)for(let n of D[r])n in t||el.push({instanceLocation:p,keyword:"dependentRequired",keywordLocation:e,error:`Instance has "${r}" but does not have "${n}".`})}if(void 0!==z)for(let r in z){let a=`${f}/dependentSchemas`;if(r in t){let s=e(t,z[r],n,u,c,d,p,`${a}/${(0,o.encodePointer)(r)}`,h);s.valid||el.push({instanceLocation:p,keyword:"dependentSchemas",keywordLocation:a,error:`Instance has "${r}" but does not match dependant schema.`},...s.errors)}}if(void 0!==U){let r=`${f}/dependencies`;for(let a in U)if(a in t){let s=U[a];if(Array.isArray(s))for(let e of s)e in t||el.push({instanceLocation:p,keyword:"dependencies",keywordLocation:r,error:`Instance has "${a}" but does not have "${e}".`});else{let i=e(t,s,n,u,c,d,p,`${r}/${(0,o.encodePointer)(a)}`);i.valid||el.push({instanceLocation:p,keyword:"dependencies",keywordLocation:r,error:`Instance has "${a}" but does not match dependant schema.`},...i.errors)}}}let a=Object.create(null),s=!1;if(void 0!==A){let r=`${f}/properties`;for(let i in A){if(!(i in t))continue;let l=`${p}/${(0,o.encodePointer)(i)}`,f=e(t[i],A[i],n,u,c,d,l,`${r}/${(0,o.encodePointer)(i)}`);if(f.valid)h[i]=a[i]=!0;else if(s=c,el.push({instanceLocation:p,keyword:"properties",keywordLocation:r,error:`Property "${i}" does not match schema.`},...f.errors),s)break}}if(!s&&void 0!==R){let r=`${f}/patternProperties`;for(let i in R){let l=new RegExp(i),f=R[i];for(let m in t){if(!l.test(m))continue;let g=`${p}/${(0,o.encodePointer)(m)}`,y=e(t[m],f,n,u,c,d,g,`${r}/${(0,o.encodePointer)(i)}`);y.valid?h[m]=a[m]=!0:(s=c,el.push({instanceLocation:p,keyword:"patternProperties",keywordLocation:r,error:`Property "${m}" matches pattern "${i}" but does not match associated schema.`},...y.errors))}}}if(s||void 0===N){if(!s&&void 0!==M){let r=`${f}/unevaluatedProperties`;for(let a in t)if(!h[a]){let s=`${p}/${(0,o.encodePointer)(a)}`,i=e(t[a],M,n,u,c,d,s,r);i.valid?h[a]=!0:el.push({instanceLocation:p,keyword:"unevaluatedProperties",keywordLocation:r,error:`Property "${a}" does not match unevaluated properties schema.`},...i.errors)}}}else{let r=`${f}/additionalProperties`;for(let i in t){if(a[i])continue;let l=`${p}/${(0,o.encodePointer)(i)}`,f=e(t[i],N,n,u,c,d,l,r);f.valid?h[i]=!0:(s=c,el.push({instanceLocation:p,keyword:"additionalProperties",keywordLocation:r,error:`Property "${i}" does not match additional properties schema.`},...f.errors))}}}else if("array"===m){void 0!==Q&&t.length>Q&&el.push({instanceLocation:p,keyword:"maxItems",keywordLocation:`${f}/maxItems`,error:`Array has too many items (${t.length} > ${Q}).`}),void 0!==J&&t.length<J&&el.push({instanceLocation:p,keyword:"minItems",keywordLocation:`${f}/minItems`,error:`Array has too few items (${t.length} < ${J}).`});let r=t.length,s=0,i=!1;if(void 0!==B){let a=`${f}/prefixItems`,o=Math.min(B.length,r);for(;s<o;s++){let r=e(t[s],B[s],n,u,c,d,`${p}/${s}`,`${a}/${s}`);if(h[s]=!0,!r.valid&&(i=c,el.push({instanceLocation:p,keyword:"prefixItems",keywordLocation:a,error:"Items did not match schema."},...r.errors),i))break}}if(void 0!==Z){let a=`${f}/items`;if(Array.isArray(Z)){let o=Math.min(Z.length,r);for(;s<o;s++){let r=e(t[s],Z[s],n,u,c,d,`${p}/${s}`,`${a}/${s}`);if(h[s]=!0,!r.valid&&(i=c,el.push({instanceLocation:p,keyword:"items",keywordLocation:a,error:"Items did not match schema."},...r.errors),i))break}}else for(;s<r;s++){let r=e(t[s],Z,n,u,c,d,`${p}/${s}`,a);if(h[s]=!0,!r.valid&&(i=c,el.push({instanceLocation:p,keyword:"items",keywordLocation:a,error:"Items did not match schema."},...r.errors),i))break}if(!i&&void 0!==q){let a=`${f}/additionalItems`;for(;s<r;s++){let r=e(t[s],q,n,u,c,d,`${p}/${s}`,a);h[s]=!0,r.valid||(i=c,el.push({instanceLocation:p,keyword:"additionalItems",keywordLocation:a,error:"Items did not match additional items schema."},...r.errors))}}}if(void 0!==K){if(0===r&&void 0===H)el.push({instanceLocation:p,keyword:"contains",keywordLocation:`${f}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(void 0!==H&&r<H)el.push({instanceLocation:p,keyword:"minContains",keywordLocation:`${f}/minContains`,error:`Array has less items (${r}) than minContains (${H}).`});else{let a=`${f}/contains`,s=el.length,i=0;for(let s=0;s<r;s++){let r=e(t[s],K,n,u,c,d,`${p}/${s}`,a);r.valid?(h[s]=!0,i++):el.push(...r.errors)}i>=(H||0)&&(el.length=s),void 0===H&&void 0===W&&0===i?el.splice(s,0,{instanceLocation:p,keyword:"contains",keywordLocation:a,error:"Array does not contain item matching schema."}):void 0!==H&&i<H?el.push({instanceLocation:p,keyword:"minContains",keywordLocation:`${f}/minContains`,error:`Array must contain at least ${H} items matching schema. Only ${i} items were found.`}):void 0!==W&&i>W&&el.push({instanceLocation:p,keyword:"maxContains",keywordLocation:`${f}/maxContains`,error:`Array may contain at most ${W} items matching schema. ${i} items were found.`})}}if(!i&&void 0!==V){let a=`${f}/unevaluatedItems`;for(;s<r;s++){if(h[s])continue;let r=e(t[s],V,n,u,c,d,`${p}/${s}`,a);h[s]=!0,r.valid||el.push({instanceLocation:p,keyword:"unevaluatedItems",keywordLocation:a,error:"Items did not match unevaluated items schema."},...r.errors)}}if(G)for(let e=0;e<r;e++){let n=t[e],s="object"==typeof n&&null!==n;for(let i=0;i<r;i++){if(e===i)continue;let r=t[i],o="object"==typeof r&&null!==r;(n===r||s&&o&&(0,a.deepCompareStrict)(n,r))&&(el.push({instanceLocation:p,keyword:"uniqueItems",keywordLocation:`${f}/uniqueItems`,error:`Duplicate items at indexes ${e} and ${i}.`}),e=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER)}}}else if("number"===m){if("4"===n?(void 0!==Y&&(!0===ee&&t<=Y||t<Y)&&el.push({instanceLocation:p,keyword:"minimum",keywordLocation:`${f}/minimum`,error:`${t} is less than ${ee?"or equal to ":""} ${Y}.`}),void 0!==X&&(!0===et&&t>=X||t>X)&&el.push({instanceLocation:p,keyword:"maximum",keywordLocation:`${f}/maximum`,error:`${t} is greater than ${et?"or equal to ":""} ${X}.`})):(void 0!==Y&&t<Y&&el.push({instanceLocation:p,keyword:"minimum",keywordLocation:`${f}/minimum`,error:`${t} is less than ${Y}.`}),void 0!==X&&t>X&&el.push({instanceLocation:p,keyword:"maximum",keywordLocation:`${f}/maximum`,error:`${t} is greater than ${X}.`}),void 0!==ee&&t<=ee&&el.push({instanceLocation:p,keyword:"exclusiveMinimum",keywordLocation:`${f}/exclusiveMinimum`,error:`${t} is less than ${ee}.`}),void 0!==et&&t>=et&&el.push({instanceLocation:p,keyword:"exclusiveMaximum",keywordLocation:`${f}/exclusiveMaximum`,error:`${t} is greater than or equal to ${et}.`})),void 0!==er){let e=t%er;Math.abs(0-e)>=11920929e-14&&Math.abs(er-e)>=11920929e-14&&el.push({instanceLocation:p,keyword:"multipleOf",keywordLocation:`${f}/multipleOf`,error:`${t} is not a multiple of ${er}.`})}}else if("string"===m){let e=void 0===en&&void 0===ea?0:(0,l.ucs2length)(t);void 0!==en&&e<en&&el.push({instanceLocation:p,keyword:"minLength",keywordLocation:`${f}/minLength`,error:`String is too short (${e} < ${en}).`}),void 0!==ea&&e>ea&&el.push({instanceLocation:p,keyword:"maxLength",keywordLocation:`${f}/maxLength`,error:`String is too long (${e} > ${ea}).`}),void 0===es||new RegExp(es).test(t)||el.push({instanceLocation:p,keyword:"pattern",keywordLocation:`${f}/pattern`,error:"String does not match pattern."}),void 0!==T&&i.fastFormat[T]&&!(0,i.fastFormat)[T](t)&&el.push({instanceLocation:p,keyword:"format",keywordLocation:`${f}/format`,error:`String does not match format "${T}".`})}return{valid:0===el.length,errors:el}});var a=e("./deep-compare-strict.js"),s=e("./dereference.js"),i=e("./format.js"),o=e("./pointer.js"),l=e("./ucs2-length.js")},{"./deep-compare-strict.js":"cXbUU","./dereference.js":"bYI0J","./format.js":"erPEo","./pointer.js":"c8POP","./ucs2-length.js":"7ZTHb","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],iBo0e:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Validator",()=>i);var a=e("./dereference.js"),s=e("./validate.js");class i{constructor(e,t="2019-09",r=!0){Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"draft",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"shortCircuit",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"lookup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lookup=(0,a.dereference)(e)}validate(e){return(0,s.validate)(e,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(e,t){t&&(e={...e,$id:t}),(0,a.dereference)(e,this.lookup)}}},{"./dereference.js":"bYI0J","./validate.js":"8Qmxd","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6V3b3":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"ListOutputParser",()=>s),n.export(r,"CommaSeparatedListOutputParser",()=>i),n.export(r,"CustomListOutputParser",()=>o);var a=e("./base.js");class s extends a.BaseOutputParser{}class i extends s{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"CommaSeparatedListOutputParser"}async parse(e){try{return e.trim().split(",").map(e=>e.trim())}catch(t){throw new a.OutputParserException(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}}class o extends s{constructor({length:e,separator:t}){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"length",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"separator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.length=e,this.separator=t||","}async parse(e){try{let t=e.trim().split(this.separator).map(e=>e.trim());if(void 0!==this.length&&t.length!==this.length)throw new a.OutputParserException(`Incorrect number of items. Expected ${this.length}, got ${t.length}.`);return t}catch(t){if(Object.getPrototypeOf(t)===a.OutputParserException.prototype)throw t;throw new a.OutputParserException(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${void 0===this.length?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}}},{"./base.js":"3zc8q","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6QMX2":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"StringOutputParser",()=>s);var a=e("./transform.js");class s extends a.BaseTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","string"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}},{"./transform.js":"bTKRm","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],aTIyG:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RegexParser",()=>s);var a=e("../schema/output_parser.js");class s extends a.BaseOutputParser{static lc_name(){return"RegexParser"}get lc_attributes(){return{regex:this.lc_kwargs.regex}}constructor(e,t,r){("string"==typeof e||e instanceof RegExp)&&(e={regex:e,outputKeys:t,defaultOutputKey:r}),e.regex instanceof RegExp&&(e.regex={pattern:e.regex.source,flags:e.regex.flags}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","regex"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"regex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultOutputKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.regex="string"==typeof e.regex?new RegExp(e.regex):"pattern"in e.regex?new RegExp(e.regex.pattern,e.regex.flags):e.regex,this.outputKeys=e.outputKeys,this.defaultOutputKey=e.defaultOutputKey}_type(){return"regex_parser"}async parse(e){let t=e.match(this.regex);if(t)return this.outputKeys.reduce((e,r,n)=>(e[r]=t[n+1],e),{});if(void 0===this.defaultOutputKey)throw new a.OutputParserException(`Could not parse output: ${e}`,e);return this.outputKeys.reduce((t,r)=>(t[r]=r===this.defaultOutputKey?e:"",t),{})}getFormatInstructions(){return`Your response should match the following regex: ${this.regex}`}}},{"../schema/output_parser.js":"16nfg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"16nfg":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/output_parsers");n.exportAll(a,r)},{"@langchain/core/output_parsers":"lJN8i","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],lB0Tl:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"StructuredOutputParser",()=>o),n.export(r,"JsonMarkdownStructuredOutputParser",()=>l),n.export(r,"AsymmetricStructuredOutputParser",()=>u);var a=e("zod"),s=e("zod-to-json-schema"),i=e("../schema/output_parser.js");class o extends i.BaseOutputParser{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){return new this((0,a.z).object(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(0,a.z).string().describe(t)]))))}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify((0,s.zodToJsonSchema)(this.schema))}
\`\`\`
`}async parse(e){try{let t=e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim();return await this.schema.parseAsync(JSON.parse(t))}catch(t){throw new i.OutputParserException(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}}class l extends o{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){let t=e?.interpolationDepth??1;if(t<1)throw Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction((0,s.zodToJsonSchema)(this.schema)).replaceAll("{","{".repeat(t)).replaceAll("}","}".repeat(t))}
\`\`\``}_schemaToInstruction(e,t=2){if("type"in e){let r,n=!1;if(Array.isArray(e.type)){let t=e.type.findIndex(e=>"null"===e);-1!==t&&(n=!0,e.type.splice(t,1)),r=e.type.join(" | ")}else r=e.type;if("object"===e.type&&e.properties){let r=e.description?` // ${e.description}`:"",n=Object.entries(e.properties).map(([r,n])=>{let a=e.required?.includes(r)?"":" (optional)";return`${" ".repeat(t)}"${r}": ${this._schemaToInstruction(n,t+2)}${a}`}).join("\n");return`{
${n}
${" ".repeat(t-2)}}${r}`}if("array"===e.type&&e.items){let r=e.description?` // ${e.description}`:"";return`array[
${" ".repeat(t)}${this._schemaToInstruction(e.items,t+2)}
${" ".repeat(t-2)}] ${r}`}let a=n?" (nullable)":"",s=e.description?` // ${e.description}`:"";return`${r}${s}${a}`}if("anyOf"in e)return e.anyOf.map(e=>this._schemaToInstruction(e,t)).join(`
${" ".repeat(t-2)}`);throw Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){return new this((0,a.z).object(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(0,a.z).string().describe(t)]))))}}class u extends i.BaseOutputParser{constructor({inputSchema:e}){super(...arguments),Object.defineProperty(this,"structuredInputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.structuredInputParser=new l(e)}async parse(e){let t;try{t=await this.structuredInputParser.parse(e)}catch(t){throw new i.OutputParserException(`Failed to parse. Text: "${e}". Error: ${t}`,e)}return this.outputProcessor(t)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}}},{zod:"jO77f","zod-to-json-schema":"bNbDp","../schema/output_parser.js":"16nfg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jO77f:[function(e,t,r){let n;var a,s,i,o,l,u,c,d,p,f=e("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(r),f.export(r,"BRAND",()=>eM),f.export(r,"DIRTY",()=>I),f.export(r,"EMPTY_PATH",()=>S),f.export(r,"INVALID",()=>O),f.export(r,"NEVER",()=>tg),f.export(r,"OK",()=>C),f.export(r,"ParseStatus",()=>P),f.export(r,"Schema",()=>D),f.export(r,"ZodAny",()=>el),f.export(r,"ZodArray",()=>ep),f.export(r,"ZodBigInt",()=>er),f.export(r,"ZodBoolean",()=>en),f.export(r,"ZodBranded",()=>eL),f.export(r,"ZodCatch",()=>eR),f.export(r,"ZodDate",()=>ea),f.export(r,"ZodDefault",()=>eA),f.export(r,"ZodDiscriminatedUnion",()=>eg),f.export(r,"ZodEffects",()=>eC),f.export(r,"ZodEnum",()=>eP),f.export(r,"ZodError",()=>v),f.export(r,"ZodFirstPartyTypeKind",()=>p),f.export(r,"ZodFunction",()=>ej),f.export(r,"ZodIntersection",()=>ey),f.export(r,"ZodIssueCode",()=>g),f.export(r,"ZodLazy",()=>ex),f.export(r,"ZodLiteral",()=>eS),f.export(r,"ZodMap",()=>e_),f.export(r,"ZodNaN",()=>eN),f.export(r,"ZodNativeEnum",()=>eO),f.export(r,"ZodNever",()=>ec),f.export(r,"ZodNull",()=>eo),f.export(r,"ZodNullable",()=>eT),f.export(r,"ZodNumber",()=>et),f.export(r,"ZodObject",()=>ef),f.export(r,"ZodOptional",()=>eE),f.export(r,"ZodParsedType",()=>h),f.export(r,"ZodPipeline",()=>eF),f.export(r,"ZodPromise",()=>eI),f.export(r,"ZodReadonly",()=>e$),f.export(r,"ZodRecord",()=>eb),f.export(r,"ZodSchema",()=>D),f.export(r,"ZodSet",()=>ew),f.export(r,"ZodString",()=>ee),f.export(r,"ZodSymbol",()=>es),f.export(r,"ZodTransformer",()=>eC),f.export(r,"ZodTuple",()=>ev),f.export(r,"ZodType",()=>D),f.export(r,"ZodUndefined",()=>ei),f.export(r,"ZodUnion",()=>eh),f.export(r,"ZodUnknown",()=>eu),f.export(r,"ZodVoid",()=>ed),f.export(r,"addIssueToContext",()=>k),f.export(r,"any",()=>eG),f.export(r,"array",()=>e1),f.export(r,"bigint",()=>eV),f.export(r,"boolean",()=>eK),f.export(r,"coerce",()=>tm),f.export(r,"custom",()=>eD),f.export(r,"date",()=>eH),f.export(r,"datetimeRegex",()=>X),f.export(r,"default",()=>ty),f.export(r,"defaultErrorMap",()=>b),f.export(r,"discriminatedUnion",()=>e5),f.export(r,"effect",()=>to),f.export(r,"enum",()=>ta),f.export(r,"function",()=>tt),f.export(r,"getErrorMap",()=>j),f.export(r,"getParsedType",()=>m),f.export(r,"instanceof",()=>eU),f.export(r,"intersection",()=>e6),f.export(r,"isAborted",()=>E),f.export(r,"isAsync",()=>R),f.export(r,"isDirty",()=>T),f.export(r,"isValid",()=>A),f.export(r,"late",()=>ez),f.export(r,"lazy",()=>tr),f.export(r,"literal",()=>tn),f.export(r,"makeIssue",()=>x),f.export(r,"map",()=>e7),f.export(r,"nan",()=>eq),f.export(r,"nativeEnum",()=>ts),f.export(r,"never",()=>eX),f.export(r,"null",()=>eQ),f.export(r,"nullable",()=>tu),f.export(r,"number",()=>eZ),f.export(r,"object",()=>e2),f.export(r,"objectUtil",()=>l),f.export(r,"oboolean",()=>th),f.export(r,"onumber",()=>tf),f.export(r,"optional",()=>tl),f.export(r,"ostring",()=>tp),f.export(r,"pipeline",()=>td),f.export(r,"preprocess",()=>tc),f.export(r,"promise",()=>ti),f.export(r,"quotelessJson",()=>y),f.export(r,"record",()=>e8),f.export(r,"set",()=>te),f.export(r,"setErrorMap",()=>w),f.export(r,"strictObject",()=>e4),f.export(r,"string",()=>eB),f.export(r,"symbol",()=>eW),f.export(r,"transformer",()=>to),f.export(r,"tuple",()=>e9),f.export(r,"undefined",()=>eJ),f.export(r,"union",()=>e3),f.export(r,"unknown",()=>eY),f.export(r,"util",()=>o),f.export(r,"void",()=>e0),f.export(r,"z",()=>ty),(a=o||(o={})).assertEqual=e=>e,a.assertIs=function(e){},a.assertNever=function(e){throw Error()},a.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},a.getValidEnumValues=e=>{let t=a.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(let n of t)r[n]=e[n];return a.objectValues(r)},a.objectValues=e=>a.objectKeys(e).map(function(t){return e[t]}),a.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},a.find=(e,t)=>{for(let r of e)if(t(r))return r},a.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,a.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},a.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(l||(l={})).mergeShapes=(e,t)=>({...e,...t});let h=o.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),m=e=>{switch(typeof e){case"undefined":return h.undefined;case"string":return h.string;case"number":return isNaN(e)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"symbol":return h.symbol;case"object":if(Array.isArray(e))return h.array;if(null===e)return h.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return h.promise;if("undefined"!=typeof Map&&e instanceof Map)return h.map;if("undefined"!=typeof Set&&e instanceof Set)return h.set;if("undefined"!=typeof Date&&e instanceof Date)return h.date;return h.object;default:return h.unknown}},g=o.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),y=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class v extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){let r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof v))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,o.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}v.create=e=>new v(e);let b=(e,t)=>{let r;switch(e.code){case g.invalid_type:r=e.received===h.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case g.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,o.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:r=`Unrecognized key(s) in object: ${o.joinValues(e.keys,", ")}`;break;case g.invalid_union:r="Invalid input";break;case g.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${o.joinValues(e.options)}`;break;case g.invalid_enum_value:r=`Invalid enum value. Expected ${o.joinValues(e.options)}, received '${e.received}'`;break;case g.invalid_arguments:r="Invalid function arguments";break;case g.invalid_return_type:r="Invalid function return type";break;case g.invalid_date:r="Invalid date";break;case g.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:o.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case g.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case g.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case g.custom:r="Invalid input";break;case g.invalid_intersection_types:r="Intersection results could not be merged";break;case g.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case g.not_finite:r="Number must be finite";break;default:r=t.defaultError,o.assertNever(e)}return{message:r}},_=b;function w(e){_=e}function j(){return _}let x=e=>{let{data:t,path:r,errorMaps:n,issueData:a}=e,s=[...r,...a.path||[]],i={...a,path:s};if(void 0!==a.message)return{...a,path:s,message:a.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...a,path:s,message:o}},S=[];function k(e,t){let r=j(),n=x({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===b?void 0:b].filter(e=>!!e)});e.common.issues.push(n)}class P{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return O;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return P.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:a}=n;if("aborted"===t.status||"aborted"===a.status)return O;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||n.alwaysSet)&&(r[t.value]=a.value)}return{status:e.value,value:r}}}let O=Object.freeze({status:"aborted"}),I=e=>({status:"dirty",value:e}),C=e=>({status:"valid",value:e}),E=e=>"aborted"===e.status,T=e=>"dirty"===e.status,A=e=>"valid"===e.status,R=e=>"undefined"!=typeof Promise&&e instanceof Promise;function N(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function M(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,(s=u||(u={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},s.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class L{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let F=(e,t)=>{if(A(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new v(e.common.issues);return this._error=t,this._error}}};function $(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{var s,i;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!==(s=null!=o?o:n)&&void 0!==s?s:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(i=null!=o?o:r)&&void 0!==i?i:a.defaultError}},description:a}}class D{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return m(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:m(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new P,ctx:{common:e.parent.common,data:e.data,parsedType:m(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(R(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:m(e)},a=this._parseSync({data:e,path:n.path,parent:n});return F(n,a)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:m(e)},n=this._parse({data:e,path:r.path,parent:r});return F(r,await (R(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let a=e(t),s=()=>n.addIssue({code:g.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(s(),!1)):!!a||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eC({schema:this,typeName:p.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return eE.create(this,this._def)}nullable(){return eT.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ep.create(this,this._def)}promise(){return eI.create(this,this._def)}or(e){return eh.create([this,e],this._def)}and(e){return ey.create(this,e,this._def)}transform(e){return new eC({...$(this._def),schema:this,typeName:p.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eA({...$(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:p.ZodDefault})}brand(){return new eL({typeName:p.ZodBranded,type:this,...$(this._def)})}catch(e){return new eR({...$(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:p.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eF.create(this,e)}readonly(){return e$.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let z=/^c[^\s-]{8,}$/i,U=/^[0-9a-z]+$/,B=/^[0-9A-HJKMNP-TV-Z]{26}$/,Z=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,q=/^[a-z0-9_-]{21}$/i,V=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,K=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,H=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,W=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,J=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Q="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",G=RegExp(`^${Q}$`);function Y(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function X(e){let t=`${Q}T${Y(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class ee extends D{_parse(e){var t,r;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==h.string){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.string,received:t.parsedType}),O}let s=new P;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(k(a=this._getOrReturnCtx(e,a),{code:g.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if("max"===i.kind)e.data.length>i.value&&(k(a=this._getOrReturnCtx(e,a),{code:g.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if("length"===i.kind){let t=e.data.length>i.value,r=e.data.length<i.value;(t||r)&&(a=this._getOrReturnCtx(e,a),t?k(a,{code:g.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):r&&k(a,{code:g.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if("email"===i.kind)K.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"email",code:g.invalid_string,message:i.message}),s.dirty());else if("emoji"===i.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"emoji",code:g.invalid_string,message:i.message}),s.dirty());else if("uuid"===i.kind)Z.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"uuid",code:g.invalid_string,message:i.message}),s.dirty());else if("nanoid"===i.kind)q.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"nanoid",code:g.invalid_string,message:i.message}),s.dirty());else if("cuid"===i.kind)z.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"cuid",code:g.invalid_string,message:i.message}),s.dirty());else if("cuid2"===i.kind)U.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"cuid2",code:g.invalid_string,message:i.message}),s.dirty());else if("ulid"===i.kind)B.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"ulid",code:g.invalid_string,message:i.message}),s.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(t){k(a=this._getOrReturnCtx(e,a),{validation:"url",code:g.invalid_string,message:i.message}),s.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"regex",code:g.invalid_string,message:i.message}),s.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(k(a=this._getOrReturnCtx(e,a),{code:g.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(k(a=this._getOrReturnCtx(e,a),{code:g.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(k(a=this._getOrReturnCtx(e,a),{code:g.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):"datetime"===i.kind?X(i).test(e.data)||(k(a=this._getOrReturnCtx(e,a),{code:g.invalid_string,validation:"datetime",message:i.message}),s.dirty()):"date"===i.kind?G.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{code:g.invalid_string,validation:"date",message:i.message}),s.dirty()):"time"===i.kind?RegExp(`^${Y(i)}$`).test(e.data)||(k(a=this._getOrReturnCtx(e,a),{code:g.invalid_string,validation:"time",message:i.message}),s.dirty()):"duration"===i.kind?V.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"duration",code:g.invalid_string,message:i.message}),s.dirty()):"ip"===i.kind?(t=e.data,("v4"===(r=i.version)||!r)&&H.test(t)||("v6"===r||!r)&&W.test(t)||(k(a=this._getOrReturnCtx(e,a),{validation:"ip",code:g.invalid_string,message:i.message}),s.dirty())):"base64"===i.kind?J.test(e.data)||(k(a=this._getOrReturnCtx(e,a),{validation:"base64",code:g.invalid_string,message:i.message}),s.dirty()):o.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:g.invalid_string,...u.errToObj(r)})}_addCheck(e){return new ee({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...u.errToObj(e)})}url(e){return this._addCheck({kind:"url",...u.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...u.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...u.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...u.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...u.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...u.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...u.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...u.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...u.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...u.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...u.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...u.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...u.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...u.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...u.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...u.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...u.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...u.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...u.errToObj(t)})}nonempty(e){return this.min(1,u.errToObj(e))}trim(){return new ee({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ee({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ee({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ee.create=e=>{var t;return new ee({checks:[],typeName:p.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...$(e)})};class et extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==h.number){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.number,received:t.parsedType}),O}let r=new P;for(let n of this._def.checks)"int"===n.kind?o.isInteger(e.data)||(k(t=this._getOrReturnCtx(e,t),{code:g.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(k(t=this._getOrReturnCtx(e,t),{code:g.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(k(t=this._getOrReturnCtx(e,t),{code:g.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,n.value)&&(k(t=this._getOrReturnCtx(e,t),{code:g.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(k(t=this._getOrReturnCtx(e,t),{code:g.not_finite,message:n.message}),r.dirty()):o.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,u.toString(t))}gt(e,t){return this.setLimit("min",e,!1,u.toString(t))}lte(e,t){return this.setLimit("max",e,!0,u.toString(t))}lt(e,t){return this.setLimit("max",e,!1,u.toString(t))}setLimit(e,t,r,n){return new et({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:u.toString(n)}]})}_addCheck(e){return new et({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:u.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:u.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:u.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:u.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:u.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:u.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:u.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:u.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:u.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&o.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}et.create=e=>new et({checks:[],typeName:p.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...$(e)});class er extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==h.bigint){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.bigint,received:t.parsedType}),O}let r=new P;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(k(t=this._getOrReturnCtx(e,t),{code:g.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(k(t=this._getOrReturnCtx(e,t),{code:g.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(k(t=this._getOrReturnCtx(e,t),{code:g.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):o.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,u.toString(t))}gt(e,t){return this.setLimit("min",e,!1,u.toString(t))}lte(e,t){return this.setLimit("max",e,!0,u.toString(t))}lt(e,t){return this.setLimit("max",e,!1,u.toString(t))}setLimit(e,t,r,n){return new er({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:u.toString(n)}]})}_addCheck(e){return new er({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:u.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:u.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:u.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:u.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:u.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}er.create=e=>{var t;return new er({checks:[],typeName:p.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...$(e)})};class en extends D{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==h.boolean){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.boolean,received:t.parsedType}),O}return C(e.data)}}en.create=e=>new en({typeName:p.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...$(e)});class ea extends D{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==h.date){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.date,received:t.parsedType}),O}if(isNaN(e.data.getTime()))return k(this._getOrReturnCtx(e),{code:g.invalid_date}),O;let r=new P;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(k(t=this._getOrReturnCtx(e,t),{code:g.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(k(t=this._getOrReturnCtx(e,t),{code:g.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):o.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ea({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:u.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:u.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ea.create=e=>new ea({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:p.ZodDate,...$(e)});class es extends D{_parse(e){if(this._getType(e)!==h.symbol){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.symbol,received:t.parsedType}),O}return C(e.data)}}es.create=e=>new es({typeName:p.ZodSymbol,...$(e)});class ei extends D{_parse(e){if(this._getType(e)!==h.undefined){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.undefined,received:t.parsedType}),O}return C(e.data)}}ei.create=e=>new ei({typeName:p.ZodUndefined,...$(e)});class eo extends D{_parse(e){if(this._getType(e)!==h.null){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.null,received:t.parsedType}),O}return C(e.data)}}eo.create=e=>new eo({typeName:p.ZodNull,...$(e)});class el extends D{constructor(){super(...arguments),this._any=!0}_parse(e){return C(e.data)}}el.create=e=>new el({typeName:p.ZodAny,...$(e)});class eu extends D{constructor(){super(...arguments),this._unknown=!0}_parse(e){return C(e.data)}}eu.create=e=>new eu({typeName:p.ZodUnknown,...$(e)});class ec extends D{_parse(e){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.never,received:t.parsedType}),O}}ec.create=e=>new ec({typeName:p.ZodNever,...$(e)});class ed extends D{_parse(e){if(this._getType(e)!==h.undefined){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.void,received:t.parsedType}),O}return C(e.data)}}ed.create=e=>new ed({typeName:p.ZodVoid,...$(e)});class ep extends D{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==h.array)return k(t,{code:g.invalid_type,expected:h.array,received:t.parsedType}),O;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&(k(t,{code:e?g.too_big:g.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(k(t,{code:g.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(k(t,{code:g.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new L(t,e,t.path,r)))).then(e=>P.mergeArray(r,e));let a=[...t.data].map((e,r)=>n.type._parseSync(new L(t,e,t.path,r)));return P.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new ep({...this._def,minLength:{value:e,message:u.toString(t)}})}max(e,t){return new ep({...this._def,maxLength:{value:e,message:u.toString(t)}})}length(e,t){return new ep({...this._def,exactLength:{value:e,message:u.toString(t)}})}nonempty(e){return this.min(1,e)}}ep.create=(e,t)=>new ep({type:e,minLength:null,maxLength:null,exactLength:null,typeName:p.ZodArray,...$(t)});class ef extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=o.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==h.object){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.object,received:t.parsedType}),O}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof ec&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||s.push(e);let i=[];for(let e of a){let t=n[e],a=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new L(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ec){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(k(r,{code:g.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new L(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>P.mergeObjectSync(t,e)):P.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return u.errToObj,new ef({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,a,s,i;let o=null!==(s=null===(a=(n=this._def).errorMap)||void 0===a?void 0:a.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=u.errToObj(e).message)&&void 0!==i?i:o}:{message:o}}}:{}})}strip(){return new ef({...this._def,unknownKeys:"strip"})}passthrough(){return new ef({...this._def,unknownKeys:"passthrough"})}extend(e){return new ef({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ef({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:p.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ef({...this._def,catchall:e})}pick(e){let t={};return o.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ef({...this._def,shape:()=>t})}omit(e){let t={};return o.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ef({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof ef){let r={};for(let n in t.shape){let a=t.shape[n];r[n]=eE.create(e(a))}return new ef({...t._def,shape:()=>r})}return t instanceof ep?new ep({...t._def,type:e(t.element)}):t instanceof eE?eE.create(e(t.unwrap())):t instanceof eT?eT.create(e(t.unwrap())):t instanceof ev?ev.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return o.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new ef({...this._def,shape:()=>t})}required(e){let t={};return o.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eE;)e=e._def.innerType;t[r]=e}}),new ef({...this._def,shape:()=>t})}keyof(){return ek(o.objectKeys(this.shape))}}ef.create=(e,t)=>new ef({shape:()=>e,unknownKeys:"strip",catchall:ec.create(),typeName:p.ZodObject,...$(t)}),ef.strictCreate=(e,t)=>new ef({shape:()=>e,unknownKeys:"strict",catchall:ec.create(),typeName:p.ZodObject,...$(t)}),ef.lazycreate=(e,t)=>new ef({shape:e,unknownKeys:"strip",catchall:ec.create(),typeName:p.ZodObject,...$(t)});class eh extends D{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new v(e.ctx.common.issues));return k(t,{code:g.invalid_union,unionErrors:r}),O});{let e;let n=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=n.map(e=>new v(e));return k(t,{code:g.invalid_union,unionErrors:a}),O}}get options(){return this._def.options}}eh.create=(e,t)=>new eh({options:e,typeName:p.ZodUnion,...$(t)});let em=e=>{if(e instanceof ex)return em(e.schema);if(e instanceof eC)return em(e.innerType());if(e instanceof eS)return[e.value];if(e instanceof eP)return e.options;if(e instanceof eO)return o.objectValues(e.enum);if(e instanceof eA)return em(e._def.innerType);if(e instanceof ei)return[void 0];else if(e instanceof eo)return[null];else if(e instanceof eE)return[void 0,...em(e.unwrap())];else if(e instanceof eT)return[null,...em(e.unwrap())];else if(e instanceof eL)return em(e.unwrap());else if(e instanceof e$)return em(e.unwrap());else if(e instanceof eR)return em(e._def.innerType);else return[]};class eg extends D{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.object)return k(t,{code:g.invalid_type,expected:h.object,received:t.parsedType}),O;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(k(t,{code:g.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),O)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=em(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(n.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,r)}}return new eg({typeName:p.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...$(r)})}}class ey extends D{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(E(e)||E(n))return O;let a=function e(t,r){let n=m(t),a=m(r);if(t===r)return{valid:!0,data:t};if(n===h.object&&a===h.object){let n=o.objectKeys(r),a=o.objectKeys(t).filter(e=>-1!==n.indexOf(e)),s={...t,...r};for(let n of a){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1};s[n]=a.data}return{valid:!0,data:s}}if(n===h.array&&a===h.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let a=0;a<t.length;a++){let s=e(t[a],r[a]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===h.date&&a===h.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,n.value);return a.valid?((T(e)||T(n))&&t.dirty(),{status:t.value,value:a.data}):(k(r,{code:g.invalid_intersection_types}),O)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ey.create=(e,t,r)=>new ey({left:e,right:t,typeName:p.ZodIntersection,...$(r)});class ev extends D{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.array)return k(r,{code:g.invalid_type,expected:h.array,received:r.parsedType}),O;if(r.data.length<this._def.items.length)return k(r,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),O;!this._def.rest&&r.data.length>this._def.items.length&&(k(r,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new L(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>P.mergeArray(t,e)):P.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ev({...this._def,rest:e})}}ev.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ev({items:e,typeName:p.ZodTuple,rest:null,...$(t)})};class eb extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.object)return k(r,{code:g.invalid_type,expected:h.object,received:r.parsedType}),O;let n=[],a=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:a._parse(new L(r,e,r.path,e)),value:s._parse(new L(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?P.mergeObjectAsync(t,n):P.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new eb(t instanceof D?{keyType:e,valueType:t,typeName:p.ZodRecord,...$(r)}:{keyType:ee.create(),valueType:e,typeName:p.ZodRecord,...$(t)})}}class e_ extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.map)return k(r,{code:g.invalid_type,expected:h.map,received:r.parsedType}),O;let n=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new L(r,e,r.path,[s,"key"])),value:a._parse(new L(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return O;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return O;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}e_.create=(e,t,r)=>new e_({valueType:t,keyType:e,typeName:p.ZodMap,...$(r)});class ew extends D{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.set)return k(r,{code:g.invalid_type,expected:h.set,received:r.parsedType}),O;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(k(r,{code:g.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(k(r,{code:g.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return O;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>a._parse(new L(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new ew({...this._def,minSize:{value:e,message:u.toString(t)}})}max(e,t){return new ew({...this._def,maxSize:{value:e,message:u.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ew.create=(e,t)=>new ew({valueType:e,minSize:null,maxSize:null,typeName:p.ZodSet,...$(t)});class ej extends D{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.function)return k(t,{code:g.invalid_type,expected:h.function,received:t.parsedType}),O;function r(e,r){return x({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,j(),b].filter(e=>!!e),issueData:{code:g.invalid_arguments,argumentsError:r}})}function n(e,r){return x({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,j(),b].filter(e=>!!e),issueData:{code:g.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof eI){let e=this;return C(async function(...t){let i=new v([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw i.addIssue(n(l,e)),i})})}{let e=this;return C(function(...t){let i=e._def.args.safeParse(t,a);if(!i.success)throw new v([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new v([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ej({...this._def,args:ev.create(e).rest(eu.create())})}returns(e){return new ej({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ej({args:e||ev.create([]).rest(eu.create()),returns:t||eu.create(),typeName:p.ZodFunction,...$(r)})}}class ex extends D{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ex.create=(e,t)=>new ex({getter:e,typeName:p.ZodLazy,...$(t)});class eS extends D{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return k(t,{received:t.data,code:g.invalid_literal,expected:this._def.value}),O}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ek(e,t){return new eP({values:e,typeName:p.ZodEnum,...$(t)})}eS.create=(e,t)=>new eS({value:e,typeName:p.ZodLiteral,...$(t)});class eP extends D{constructor(){super(...arguments),c.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return k(t,{expected:o.joinValues(r),received:t.parsedType,code:g.invalid_type}),O}if(N(this,c,"f")||M(this,c,new Set(this._def.values),"f"),!N(this,c,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return k(t,{received:t.data,code:g.invalid_enum_value,options:r}),O}return C(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eP.create(e,{...this._def,...t})}exclude(e,t=this._def){return eP.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}c=new WeakMap,eP.create=ek;class eO extends D{constructor(){super(...arguments),d.set(this,void 0)}_parse(e){let t=o.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==h.string&&r.parsedType!==h.number){let e=o.objectValues(t);return k(r,{expected:o.joinValues(e),received:r.parsedType,code:g.invalid_type}),O}if(N(this,d,"f")||M(this,d,new Set(o.getValidEnumValues(this._def.values)),"f"),!N(this,d,"f").has(e.data)){let e=o.objectValues(t);return k(r,{received:r.data,code:g.invalid_enum_value,options:e}),O}return C(e.data)}get enum(){return this._def.values}}d=new WeakMap,eO.create=(e,t)=>new eO({values:e,typeName:p.ZodNativeEnum,...$(t)});class eI extends D{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==h.promise&&!1===t.common.async?(k(t,{code:g.invalid_type,expected:h.promise,received:t.parsedType}),O):C((t.parsedType===h.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eI.create=(e,t)=>new eI({type:e,typeName:p.ZodPromise,...$(t)});class eC extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===p.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{k(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){let e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return O;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?O:"dirty"===n.status||"dirty"===t.value?I(n.value):n});{if("aborted"===t.value)return O;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?O:"dirty"===n.status||"dirty"===t.value?I(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?O:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?O:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>A(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!A(e))return e;let s=n.transform(e.value,a);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}o.assertNever(n)}}eC.create=(e,t,r)=>new eC({schema:e,typeName:p.ZodEffects,effect:t,...$(r)}),eC.createWithPreprocess=(e,t,r)=>new eC({schema:t,effect:{type:"preprocess",transform:e},typeName:p.ZodEffects,...$(r)});class eE extends D{_parse(e){return this._getType(e)===h.undefined?C(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eE.create=(e,t)=>new eE({innerType:e,typeName:p.ZodOptional,...$(t)});class eT extends D{_parse(e){return this._getType(e)===h.null?C(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eT.create=(e,t)=>new eT({innerType:e,typeName:p.ZodNullable,...$(t)});class eA extends D{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===h.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eA.create=(e,t)=>new eA({innerType:e,typeName:p.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...$(t)});class eR extends D{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return R(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new v(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new v(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eR.create=(e,t)=>new eR({innerType:e,typeName:p.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...$(t)});class eN extends D{_parse(e){if(this._getType(e)!==h.nan){let t=this._getOrReturnCtx(e);return k(t,{code:g.invalid_type,expected:h.nan,received:t.parsedType}),O}return{status:"valid",value:e.data}}}eN.create=e=>new eN({typeName:p.ZodNaN,...$(e)});let eM=Symbol("zod_brand");class eL extends D{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eF extends D{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?O:"dirty"===e.status?(t.dirty(),I(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?O:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eF({in:e,out:t,typeName:p.ZodPipeline})}}class e$ extends D{_parse(e){let t=this._def.innerType._parse(e),r=e=>(A(e)&&(e.value=Object.freeze(e.value)),e);return R(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eD(e,t={},r){return e?el.create().superRefine((n,a)=>{var s,i;if(!e(n)){let e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===i||i,l="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...l,fatal:o})}}):el.create()}e$.create=(e,t)=>new e$({innerType:e,typeName:p.ZodReadonly,...$(t)});let ez={object:ef.lazycreate};(i=p||(p={})).ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly";let eU=(e,t={message:`Input not instance of ${e.name}`})=>eD(t=>t instanceof e,t),eB=ee.create,eZ=et.create,eq=eN.create,eV=er.create,eK=en.create,eH=ea.create,eW=es.create,eJ=ei.create,eQ=eo.create,eG=el.create,eY=eu.create,eX=ec.create,e0=ed.create,e1=ep.create,e2=ef.create,e4=ef.strictCreate,e3=eh.create,e5=eg.create,e6=ey.create,e9=ev.create,e8=eb.create,e7=e_.create,te=ew.create,tt=ej.create,tr=ex.create,tn=eS.create,ta=eP.create,ts=eO.create,ti=eI.create,to=eC.create,tl=eE.create,tu=eT.create,tc=eC.createWithPreprocess,td=eF.create,tp=()=>eB().optional(),tf=()=>eZ().optional(),th=()=>eK().optional(),tm={string:e=>ee.create({...e,coerce:!0}),number:e=>et.create({...e,coerce:!0}),boolean:e=>en.create({...e,coerce:!0}),bigint:e=>er.create({...e,coerce:!0}),date:e=>ea.create({...e,coerce:!0})},tg=O;var ty=Object.freeze({__proto__:null,defaultErrorMap:b,setErrorMap:w,getErrorMap:j,makeIssue:x,EMPTY_PATH:S,addIssueToContext:k,ParseStatus:P,INVALID:O,DIRTY:I,OK:C,isAborted:E,isDirty:T,isValid:A,isAsync:R,get util(){return o},get objectUtil(){return l},ZodParsedType:h,getParsedType:m,ZodType:D,datetimeRegex:X,ZodString:ee,ZodNumber:et,ZodBigInt:er,ZodBoolean:en,ZodDate:ea,ZodSymbol:es,ZodUndefined:ei,ZodNull:eo,ZodAny:el,ZodUnknown:eu,ZodNever:ec,ZodVoid:ed,ZodArray:ep,ZodObject:ef,ZodUnion:eh,ZodDiscriminatedUnion:eg,ZodIntersection:ey,ZodTuple:ev,ZodRecord:eb,ZodMap:e_,ZodSet:ew,ZodFunction:ej,ZodLazy:ex,ZodLiteral:eS,ZodEnum:eP,ZodNativeEnum:eO,ZodPromise:eI,ZodEffects:eC,ZodTransformer:eC,ZodOptional:eE,ZodNullable:eT,ZodDefault:eA,ZodCatch:eR,ZodNaN:eN,BRAND:eM,ZodBranded:eL,ZodPipeline:eF,ZodReadonly:e$,custom:eD,Schema:D,ZodSchema:D,late:ez,get ZodFirstPartyTypeKind(){return p},coerce:tm,any:eG,array:e1,bigint:eV,boolean:eK,date:eH,discriminatedUnion:e5,effect:to,enum:ta,function:tt,instanceof:eU,intersection:e6,lazy:tr,literal:tn,map:e7,nan:eq,nativeEnum:ts,never:eX,null:eQ,nullable:tu,number:eZ,object:e2,oboolean:th,onumber:tf,optional:tl,ostring:tp,pipeline:td,preprocess:tc,promise:ti,record:e8,set:te,strictObject:e4,string:eB,symbol:eW,transformer:to,tuple:e9,undefined:eJ,union:e3,unknown:eY,void:e0,NEVER:tg,ZodIssueCode:g,quotelessJson:y,ZodError:v})},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6UHib":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"OutputFixingParser",()=>o);var a=e("../schema/output_parser.js"),s=e("../chains/llm_chain.js"),i=e("./prompts.js");class o extends a.BaseOutputParser{static lc_name(){return"OutputFixingParser"}static fromLLM(e,t,r){let n=r?.prompt??i.NAIVE_FIX_PROMPT;return new o({parser:t,retryChain:new s.LLMChain({llm:e,prompt:n})})}constructor({parser:e,retryChain:t}){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","fix"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"parser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.parser=e,this.retryChain=t}async parse(e,t){try{return await this.parser.parse(e,t)}catch(r){if(r instanceof a.OutputParserException){let n=(await this.retryChain.call({instructions:this.parser.getFormatInstructions(),completion:e,error:r},t))[this.retryChain.outputKey];return this.parser.parse(n)}throw r}}getFormatInstructions(){return this.parser.getFormatInstructions()}}},{"../schema/output_parser.js":"16nfg","../chains/llm_chain.js":"h9Hbj","./prompts.js":"ixKtO","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],h9Hbj:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"LLMChain",()=>u);var a=e("./base.js"),s=e("../prompts/base.js"),i=e("../base_language/index.js"),o=e("../output_parsers/noop.js"),l=e("../schema/runnable/base.js");class u extends a.BaseChain{static lc_name(){return"LLMChain"}get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new o.NoOpOutputParser,this.prompt.outputParser){if(e.outputParser)throw Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}getCallKeys(){return"callKeys"in this.llm?this.llm.callKeys:[]}_selectMemoryInputs(e){let t=super._selectMemoryInputs(e);for(let r of this.getCallKeys())r in e&&delete t[r];return t}async _getFinalOutput(e,t,r){return this.outputParser?await this.outputParser.parseResultWithPrompt(e,t,r?.getChild()):e[0].text}call(e,t){return super.call(e,t)}async _call(e,t){let r={...e},n={...this.llmKwargs};for(let t of this.getCallKeys())t in e&&n&&(n[t]=e[t],delete r[t]);let a=await this.prompt.formatPromptValue(r);if("generatePrompt"in this.llm){let{generations:e}=await this.llm.generatePrompt([a],n,t?.getChild());return{[this.outputKey]:await this._getFinalOutput(e[0],a,t)}}let s=this.outputParser?this.llm.pipe(this.outputParser):this.llm,i=await s.invoke(a,t?.getChild());return{[this.outputKey]:i}}async predict(e,t){return(await this.call(e,t))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){let{llm:t,prompt:r}=e;if(!t)throw Error("LLMChain must have llm");if(!r)throw Error("LLMChain must have prompt");return new u({llm:await (0,i.BaseLanguageModel).deserialize(t),prompt:await (0,s.BasePromptTemplate).deserialize(r)})}serialize(){let e="serialize"in this.llm?this.llm.serialize():void 0;return{_type:`${this._chainType()}_chain`,llm:e,prompt:this.prompt.serialize()}}_getNumTokens(e){return(function e(t){if("function"==typeof t._llmType)return t;if("bound"in t&&(0,l.Runnable).isRunnable(t.bound))return e(t.bound);if("runnable"in t&&"fallbacks"in t&&(0,l.Runnable).isRunnable(t.runnable))return e(t.runnable);if("default"in t&&(0,l.Runnable).isRunnable(t.default))return e(t.default);throw Error("Unable to extract BaseLanguageModel from llmLike object.")})(this.llm).getNumTokens(e)}}},{"./base.js":"frbpR","../prompts/base.js":"gDAtu","../base_language/index.js":"is1pt","../output_parsers/noop.js":"5hMVk","../schema/runnable/base.js":"o8TEz","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],frbpR:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseChain",()=>o);var a=e("../schema/index.js"),s=e("../callbacks/manager.js"),i=e("../base_language/index.js");class o extends i.BaseLangChain{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,t,r){if(1!=arguments.length||"object"!=typeof e||"saveContext"in e)super({verbose:t,callbacks:r}),this.memory=e;else{let{memory:t,callbackManager:r,...n}=e;super({...n,callbacks:r??n.callbacks}),this.memory=t}}_selectMemoryInputs(e){let t={...e};return"signal"in t&&delete t.signal,"timeout"in t&&delete t.timeout,t}async invoke(e,t){return this.call(e,t)}_validateOutputs(e){let t=this.outputKeys.filter(t=>!(t in e));if(t.length)throw Error(`Missing output keys: ${t.join(", ")} from chain ${this._chainType()}`)}async prepOutputs(e,t,r=!1){return(this._validateOutputs(t),this.memory&&await this.memory.saveContext(e,t),r)?t:{...e,...t}}serialize(){throw Error("Method not implemented.")}async run(e,t){let r=this.inputKeys.filter(e=>!this.memory?.memoryKeys.includes(e)??!0);if(!(r.length<=1))throw Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);let n=r.length?{[r[0]]:e}:{},a=await this.call(n,t),s=Object.keys(a);if(1===s.length)return a[s[0]];throw Error("return values have multiple keys, `run` only supported when one key currently")}async _formatValues(e){let t={...e};if(t.timeout&&!t.signal&&(t.signal=AbortSignal.timeout(t.timeout),delete t.timeout),null!=this.memory)for(let[r,n]of Object.entries(await this.memory.loadMemoryVariables(this._selectMemoryInputs(e))))t[r]=n;return t}async call(e,t,r){let n;let i=await this._formatValues(e),o=(0,s.parseCallbackConfigArg)(t),l=await (0,s.CallbackManager).configure(o.callbacks,this.callbacks,o.tags||r,this.tags,o.metadata,this.metadata,{verbose:this.verbose}),u=await l?.handleChainStart(this.toJSON(),i,void 0,void 0,void 0,void 0,o.runName);try{n=await (e.signal?Promise.race([this._call(i,u),new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(Error("AbortError"))})})]):this._call(i,u))}catch(e){throw await u?.handleChainError(e),e}return null!=this.memory&&await this.memory.saveContext(this._selectMemoryInputs(e),n),await u?.handleChainEnd(n),Object.defineProperty(n,a.RUN_KEY,{value:u?{runId:u?.runId}:void 0,configurable:!0}),n}async apply(e,t){return Promise.all(e.map(async(e,r)=>this.call(e,t?.[r])))}static async deserialize(t,r={}){switch(t._type){case"llm_chain":{let{LLMChain:r}=await e("2d811e2b51cdeee3");return r.deserialize(t)}case"sequential_chain":{let{SequentialChain:r}=await e("35f78524e5fc8f7c");return r.deserialize(t)}case"simple_sequential_chain":{let{SimpleSequentialChain:r}=await e("35f78524e5fc8f7c");return r.deserialize(t)}case"stuff_documents_chain":{let{StuffDocumentsChain:r}=await e("97a14159688e6a69");return r.deserialize(t)}case"map_reduce_documents_chain":{let{MapReduceDocumentsChain:r}=await e("97a14159688e6a69");return r.deserialize(t)}case"refine_documents_chain":{let{RefineDocumentsChain:r}=await e("97a14159688e6a69");return r.deserialize(t)}case"vector_db_qa":{let{VectorDBQAChain:n}=await e("2c1a009b6d0f14cc");return n.deserialize(t,r)}case"api_chain":{let{APIChain:r}=await e("4a543ae243292fe");return r.deserialize(t)}default:throw Error(`Invalid prompt type in config: ${t._type}`)}}}},{"../schema/index.js":"gyLhg","../callbacks/manager.js":"4iEvs","../base_language/index.js":"is1pt","2d811e2b51cdeee3":"gn4e3","35f78524e5fc8f7c":"47lE4","97a14159688e6a69":"gFGYc","2c1a009b6d0f14cc":"fFFFK","4a543ae243292fe":"lwCgi","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],is1pt:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseLangChain",()=>a.BaseLangChain),n.export(r,"BaseLanguageModel",()=>a.BaseLanguageModel),n.export(r,"calculateMaxTokens",()=>s.calculateMaxTokens),n.export(r,"getModelContextSize",()=>s.getModelContextSize);var a=e("@langchain/core/language_models/base"),s=e("./count_tokens.js")},{"@langchain/core/language_models/base":"jTFIS","./count_tokens.js":"edBJe","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jTFIS:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/language_models/base.js");n.exportAll(a,r)},{"../dist/language_models/base.js":"fQYj8","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],edBJe:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"calculateMaxTokens",()=>a.calculateMaxTokens),n.export(r,"getModelContextSize",()=>a.getModelContextSize),n.export(r,"getEmbeddingContextSize",()=>a.getEmbeddingContextSize);var a=e("@langchain/core/language_models/base")},{"@langchain/core/language_models/base":"jTFIS","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gn4e3:[function(e,t,r){t.exports=e("c9d377672e64fdbd")(e("90a0f385f761c557").getBundleURL("fQq0o")+"../../"+e("c01fae161188c33b").resolve("2qOg2")).then(()=>t.bundle.root("h9Hbj"))},{c9d377672e64fdbd:"jawFo","90a0f385f761c557":"e3Ctf",c01fae161188c33b:"fcUCD"}],jawFo:[function(e,t,r){var n=e("e18e0f4b8102d3ab");t.exports=n(function(e){return new Promise(function(t,r){try{importScripts(e),t()}catch(e){r(e)}})})},{e18e0f4b8102d3ab:"4mYIR"}],"4mYIR":[function(e,t,r){var n={},a={},s={};t.exports=function(e,t){return function(r){var i=function(e){switch(e){case"preload":return a;case"prefetch":return s;default:return n}}(t);return i[r]?i[r]:i[r]=e.apply(null,arguments).catch(function(e){throw delete i[r],e})}}},{}],e3Ctf:[function(e,t,r){var n={};function a(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r.getBundleURL=function(e){var t=n[e];return t||(t=function(){try{throw Error()}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return a(e[2])}return"/"}(),n[e]=t),t},r.getBaseURL=a,r.getOrigin=function(e){var t=(""+e).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^/]+/);if(!t)throw Error("Origin not found");return t[0]}},{}],"47lE4":[function(e,t,r){t.exports=e("376de95015b3bb3d")(e("afc1931b00494d95").getBundleURL("fQq0o")+"../../"+e("696878addb9b3185").resolve("dQ0EI")).then(()=>t.bundle.root("c5l0I"))},{"376de95015b3bb3d":"jawFo",afc1931b00494d95:"e3Ctf","696878addb9b3185":"fcUCD"}],gFGYc:[function(e,t,r){t.exports=e("1dfb0d35dea9302")(e("2cb716426fd5d68f").getBundleURL("fQq0o")+"../../"+e("3e387dea03e2432d").resolve("2AzJW")).then(()=>t.bundle.root("d6V6d"))},{"1dfb0d35dea9302":"jawFo","2cb716426fd5d68f":"e3Ctf","3e387dea03e2432d":"fcUCD"}],fFFFK:[function(e,t,r){t.exports=e("389cd5cabeb1e0d9")(e("4ebd5a9070dfe79a").getBundleURL("fQq0o")+"../../"+e("f11df35c07a3f8a1").resolve("gLhAl")).then(()=>t.bundle.root("aELaP"))},{"389cd5cabeb1e0d9":"jawFo","4ebd5a9070dfe79a":"e3Ctf",f11df35c07a3f8a1:"fcUCD"}],lwCgi:[function(e,t,r){t.exports=e("10707dbb6afa6b")(e("c454ba160857903e").getBundleURL("fQq0o")+"../../"+e("4b872ee320ef63c4").resolve("1KVcI")).then(()=>t.bundle.root("je5T8"))},{"10707dbb6afa6b":"jawFo",c454ba160857903e:"e3Ctf","4b872ee320ef63c4":"fcUCD"}],gDAtu:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseStringPromptTemplate",()=>a.BaseStringPromptTemplate),n.export(r,"BasePromptTemplate",()=>a.BasePromptTemplate),n.export(r,"StringPromptValue",()=>s.StringPromptValue),n.export(r,"BaseExampleSelector",()=>i.BaseExampleSelector);var a=e("@langchain/core/prompts"),s=e("@langchain/core/prompt_values"),i=e("@langchain/core/example_selectors")},{"@langchain/core/prompts":"4KAkE","@langchain/core/prompt_values":"5IYhT","@langchain/core/example_selectors":"bl3jj","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4KAkE":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/prompts/index.js");n.exportAll(a,r)},{"./dist/prompts/index.js":"7121d","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7121d":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./base.js");n.exportAll(a,r);var s=e("./chat.js");n.exportAll(s,r);var i=e("./few_shot.js");n.exportAll(i,r);var o=e("./pipeline.js");n.exportAll(o,r);var l=e("./prompt.js");n.exportAll(l,r);var u=e("./serde.js");n.exportAll(u,r);var c=e("./string.js");n.exportAll(c,r);var d=e("./template.js");n.exportAll(d,r)},{"./base.js":"579yP","./chat.js":"e9TQ6","./few_shot.js":"dlll3","./pipeline.js":"l4ncl","./prompt.js":"2Oph6","./serde.js":"4W5FO","./string.js":"GINku","./template.js":"2ZN2o","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"579yP":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BasePromptTemplate",()=>s);var a=e("../runnables/base.js");class s extends a.Runnable{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{inputVariables:t}=e;if(t.includes("stop"))throw Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){let t=this.partialVariables??{},r={};for(let[e,n]of Object.entries(t))"string"==typeof n?r[e]=n:r[e]=await n();return{...r,...e}}async invoke(e,t){return this._callWithConfig(e=>this.formatPromptValue(e),e,{...t,runType:"prompt"})}serialize(){throw Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{let{PromptTemplate:r}=await e("5074728d6eef1415");return r.deserialize(t)}case void 0:{let{PromptTemplate:r}=await e("5074728d6eef1415");return r.deserialize({...t,_type:"prompt"})}case"few_shot":{let{FewShotPromptTemplate:r}=await e("c2cac79ecf644e72");return r.deserialize(t)}default:throw Error(`Invalid prompt type in config: ${t._type}`)}}}},{"../runnables/base.js":"1qQoT","5074728d6eef1415":"jQnwU",c2cac79ecf644e72:"lCWrW","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],jQnwU:[function(e,t,r){t.exports=e("554ac1f0fa0503ac")(e("1ded3f9845e13a30").getBundleURL("fQq0o")+"../../"+e("852bc5d2253f5c5").resolve("iZHrI")).then(()=>t.bundle.root("2Oph6"))},{"554ac1f0fa0503ac":"jawFo","1ded3f9845e13a30":"e3Ctf","852bc5d2253f5c5":"fcUCD"}],lCWrW:[function(e,t,r){t.exports=e("3b602c56afe882f")(e("3d2fbe2b993302b3").getBundleURL("fQq0o")+"../../"+e("fbb992d1480afff9").resolve("kJFUv")).then(()=>t.bundle.root("dlll3"))},{"3b602c56afe882f":"jawFo","3d2fbe2b993302b3":"e3Ctf",fbb992d1480afff9:"fcUCD"}],e9TQ6:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseMessagePromptTemplate",()=>u),n.export(r,"MessagesPlaceholder",()=>c),n.export(r,"BaseMessageStringPromptTemplate",()=>d),n.export(r,"BaseChatPromptTemplate",()=>p),n.export(r,"ChatMessagePromptTemplate",()=>f),n.export(r,"HumanMessagePromptTemplate",()=>h),n.export(r,"AIMessagePromptTemplate",()=>m),n.export(r,"SystemMessagePromptTemplate",()=>g),n.export(r,"ChatPromptTemplate",()=>y);var a=e("../messages/index.js"),s=e("../prompt_values.js"),i=e("../runnables/base.js"),o=e("./base.js"),l=e("./prompt.js");class u extends i.Runnable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,t){return this._callWithConfig(e=>this.formatMessages(e),e,{...t,runType:"prompt"})}}class c extends u{static lc_name(){return"MessagesPlaceholder"}constructor(e){"string"==typeof e&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName}get inputVariables(){return[this.variableName]}validateInputOrThrow(e,t){if(!(Array.isArray(e)?e.every(e=>(0,a.isBaseMessage)(e)):(0,a.isBaseMessage)(e))){let r="string"==typeof e?e:JSON.stringify(e,null,2),n=Error(`Error: Field "${t}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: ${r}`);throw n.name="InputFormatError",n}return!0}async formatMessages(e){return this.validateInputOrThrow(e[this.variableName],this.variableName),e[this.variableName]}}class d extends u{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class p extends o.BasePromptTemplate{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){let t=await this.formatMessages(e);return new s.ChatPromptValue(t)}}class f extends d{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,t){"prompt"in e||(e={prompt:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new a.ChatMessage(await this.prompt.format(e),this.role)}static fromTemplate(e,t){return new this((0,l.PromptTemplate).fromTemplate(e),t)}}class h extends d{static lc_name(){return"HumanMessagePromptTemplate"}async format(e){return new a.HumanMessage(await this.prompt.format(e))}static fromTemplate(e){return new this((0,l.PromptTemplate).fromTemplate(e))}}class m extends d{static lc_name(){return"AIMessagePromptTemplate"}async format(e){return new a.AIMessage(await this.prompt.format(e))}static fromTemplate(e){return new this((0,l.PromptTemplate).fromTemplate(e))}}class g extends d{static lc_name(){return"SystemMessagePromptTemplate"}async format(e){return new a.SystemMessage(await this.prompt.format(e))}static fromTemplate(e){return new this((0,l.PromptTemplate).fromTemplate(e))}}class y extends p{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let e=new Set;for(let t of this.promptMessages)if(!(t instanceof a.BaseMessage))for(let r of t.inputVariables)e.add(r);let t=this.inputVariables,r=new Set(this.partialVariables?t.concat(Object.keys(this.partialVariables)):t),n=new Set([...r].filter(t=>!e.has(t)));if(n.size>0)throw Error(`Input variables \`${[...n]}\` are not used in any of the prompt messages.`);let s=new Set([...e].filter(e=>!r.has(e)));if(s.size>0)throw Error(`Input variables \`${[...s]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,t){if("string"==typeof e.content)return e;let r=await Promise.all(e.content.map(async e=>{if("image_url"!==e.type||"string"==typeof e.image_url||!e.image_url?.url)return e;let r=e.image_url.url,n=(0,l.PromptTemplate).fromTemplate(r),a=await n.format(t);return e.image_url.url=a,e}));return e.content=r,e}async formatMessages(e){let t=await this.mergePartialAndUserVariables(e),r=[];for(let e of this.promptMessages)if(e instanceof a.BaseMessage)r.push(await this._parseImagePrompts(e,t));else{let n=e.inputVariables.reduce((e,r)=>{if(!(r in t))throw Error(`Missing value for input variable \`${r.toString()}\``);return e[r]=t[r],e},{}),a=await e.formatMessages(n);r=r.concat(a)}return r}async partial(e){let t=this.inputVariables.filter(t=>!(t in e)),r={...this.partialVariables??{},...e};return new y({...this,inputVariables:t,partialVariables:r})}static fromTemplate(e){let t=new h({prompt:(0,l.PromptTemplate).fromTemplate(e)});return this.fromMessages([t])}static fromMessages(e){let t=e.reduce((e,t)=>e.concat(t instanceof y?t.promptMessages:[function(e){if("function"==typeof e.formatMessages||(0,a.isBaseMessage)(e))return e;let t=(0,a.coerceMessageLikeToMessage)(e);if("human"===t._getType())return h.fromTemplate(t.content);if("ai"===t._getType())return m.fromTemplate(t.content);if("system"===t._getType())return g.fromTemplate(t.content);if((0,a.ChatMessage).isInstance(t))return f.fromTemplate(t.content,t.role);throw Error(`Could not coerce message prompt template from input. Received message type: "${t._getType()}".`)}(t)]),[]),r=e.reduce((e,t)=>t instanceof y?Object.assign(e,t.partialVariables):e,Object.create(null)),n=new Set;for(let e of t)if(!(e instanceof a.BaseMessage))for(let t of e.inputVariables)t in r||n.add(t);return new y({inputVariables:[...n],promptMessages:t,partialVariables:r})}static fromPromptMessages(e){return this.fromMessages(e)}}},{"../messages/index.js":"jMGwo","../prompt_values.js":"lGT4D","../runnables/base.js":"1qQoT","./base.js":"579yP","./prompt.js":"2Oph6","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2Oph6":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"PromptTemplate",()=>i);var a=e("./string.js"),s=e("./template.js");class i extends a.BaseStringPromptTemplate{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),(0,s.checkValidTemplate)(this.template,this.templateFormat,e)}}_getPromptType(){return"prompt"}async format(e){let t=await this.mergePartialAndUserVariables(e);return(0,s.renderTemplate)(this.template,this.templateFormat,t)}static fromExamples(e,t,r,n="\n\n",a=""){return new i({inputVariables:r,template:[a,...e,t].join(n)})}static fromTemplate(e,{templateFormat:t="f-string",...r}={}){let n=new Set;return(0,s.parseTemplate)(e,t).forEach(e=>{"variable"===e.type&&n.add(e.name)}),new i({inputVariables:[...n],templateFormat:t,template:e,...r})}async partial(e){let t=this.inputVariables.filter(t=>!(t in e)),r={...this.partialVariables??{},...e};return new i({...this,inputVariables:t,partialVariables:r})}serialize(){if(void 0!==this.outputParser)throw Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw Error("Prompt template must have a template");return new i({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}},{"./string.js":"GINku","./template.js":"2ZN2o","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],GINku:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseStringPromptTemplate",()=>i);var a=e("../prompt_values.js"),s=e("./base.js");class i extends s.BasePromptTemplate{async formatPromptValue(e){let t=await this.format(e);return new a.StringPromptValue(t)}}},{"../prompt_values.js":"lGT4D","./base.js":"579yP","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2ZN2o":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"parseFString",()=>a),n.export(r,"interpolateFString",()=>s),n.export(r,"DEFAULT_FORMATTER_MAPPING",()=>i),n.export(r,"DEFAULT_PARSER_MAPPING",()=>o),n.export(r,"renderTemplate",()=>l),n.export(r,"parseTemplate",()=>u),n.export(r,"checkValidTemplate",()=>c);let a=e=>{let t=e.split(""),r=[],n=(e,r)=>{for(let n=r;n<t.length;n+=1)if(e.includes(t[n]))return n;return -1},a=0;for(;a<t.length;)if("{"===t[a]&&a+1<t.length&&"{"===t[a+1])r.push({type:"literal",text:"{"}),a+=2;else if("}"===t[a]&&a+1<t.length&&"}"===t[a+1])r.push({type:"literal",text:"}"}),a+=2;else if("{"===t[a]){let e=n("}",a);if(e<0)throw Error("Unclosed '{' in template.");r.push({type:"variable",name:t.slice(a+1,e).join("")}),a=e+1}else if("}"===t[a])throw Error("Single '}' in template.");else{let e=n("{}",a),s=(e<0?t.slice(a):t.slice(a,e)).join("");r.push({type:"literal",text:s}),a=e<0?t.length:e}return r},s=(e,t)=>a(e).reduce((e,r)=>{if("variable"===r.type){if(r.name in t)return e+t[r.name];throw Error(`Missing value for input ${r.name}`)}return e+r.text},""),i={"f-string":s},o={"f-string":a},l=(e,t,r)=>i[t](e,r),u=(e,t)=>o[t](e),c=(e,t,r)=>{if(!(t in i)){let e=Object.keys(i);throw Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${e}`)}try{let n=r.reduce((e,t)=>(e[t]="foo",e),{});l(e,t,n)}catch(e){throw Error(`Invalid prompt schema: ${e.message}`)}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],dlll3:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"FewShotPromptTemplate",()=>l),n.export(r,"FewShotChatMessagePromptTemplate",()=>u);var a=e("./string.js"),s=e("./template.js"),i=e("./prompt.js"),o=e("./chat.js");class l extends a.BaseStringPromptTemplate{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:"\n\n"}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),void 0!==this.examples&&void 0!==this.exampleSelector)throw Error("Only one of 'examples' and 'example_selector' should be provided");if(void 0===this.examples&&void 0===this.exampleSelector)throw Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),(0,s.checkValidTemplate)(this.prefix+this.suffix,this.templateFormat,e)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(e){if(void 0!==this.examples)return this.examples;if(void 0!==this.exampleSelector)return this.exampleSelector.selectExamples(e);throw Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){let t=this.inputVariables.filter(t=>!(t in e)),r={...this.partialVariables??{},...e};return new l({...this,inputVariables:t,partialVariables:r})}async format(e){let t=await this.mergePartialAndUserVariables(e),r=await this.getExamples(t),n=await Promise.all(r.map(e=>this.examplePrompt.format(e))),a=[this.prefix,...n,this.suffix].join(this.exampleSeparator);return(0,s.renderTemplate)(a,this.templateFormat,t)}serialize(){if(this.exampleSelector||!this.examples)throw Error("Serializing an example selector is not currently supported");if(void 0!==this.outputParser)throw Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){let t;let{example_prompt:r}=e;if(!r)throw Error("Missing example prompt");let n=await (0,i.PromptTemplate).deserialize(r);if(Array.isArray(e.examples))t=e.examples;else throw Error("Invalid examples format. Only list or string are supported.");return new l({inputVariables:e.input_variables,examplePrompt:n,examples:t,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}}class u extends o.BaseChatPromptTemplate{_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:"\n\n"}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.examples=e.examples,this.examplePrompt=e.examplePrompt,this.exampleSeparator=e.exampleSeparator??"\n\n",this.exampleSelector=e.exampleSelector,this.prefix=e.prefix??"",this.suffix=e.suffix??"",this.templateFormat=e.templateFormat??"f-string",this.validateTemplate=e.validateTemplate??!0,void 0!==this.examples&&void 0!==this.exampleSelector)throw Error("Only one of 'examples' and 'example_selector' should be provided");if(void 0===this.examples&&void 0===this.exampleSelector)throw Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),(0,s.checkValidTemplate)(this.prefix+this.suffix,this.templateFormat,e)}}async getExamples(e){if(void 0!==this.examples)return this.examples;if(void 0!==this.exampleSelector)return this.exampleSelector.selectExamples(e);throw Error("One of 'examples' and 'example_selector' should be provided")}async formatMessages(e){let t=await this.mergePartialAndUserVariables(e),r=await this.getExamples(t);r=r.map(e=>{let t={};return this.examplePrompt.inputVariables.forEach(r=>{t[r]=e[r]}),t});let n=[];for(let e of r){let t=await this.examplePrompt.formatMessages(e);n.push(...t)}return n}async format(e){let t=await this.mergePartialAndUserVariables(e),r=await this.getExamples(t),n=(await Promise.all(r.map(e=>this.examplePrompt.formatMessages(e)))).flat().map(e=>e.content),a=[this.prefix,...n,this.suffix].join(this.exampleSeparator);return(0,s.renderTemplate)(a,this.templateFormat,t)}async partial(e){let t=this.inputVariables.filter(t=>!(t in e)),r={...this.partialVariables??{},...e};return new u({...this,inputVariables:t,partialVariables:r})}}},{"./string.js":"GINku","./template.js":"2ZN2o","./prompt.js":"2Oph6","./chat.js":"e9TQ6","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],l4ncl:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"PipelinePromptTemplate",()=>i);var a=e("./base.js"),s=e("./chat.js");class i extends a.BasePromptTemplate{static lc_name(){return"PipelinePromptTemplate"}constructor(e){super({...e,inputVariables:[]}),Object.defineProperty(this,"pipelinePrompts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"finalPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pipelinePrompts=e.pipelinePrompts,this.finalPrompt=e.finalPrompt,this.inputVariables=this.computeInputValues()}computeInputValues(){let e=this.pipelinePrompts.map(e=>e.name);return[...new Set(this.pipelinePrompts.map(t=>t.prompt.inputVariables.filter(t=>!e.includes(t))).flat())]}static extractRequiredInputValues(e,t){return t.reduce((t,r)=>(t[r]=e[r],t),{})}async formatPipelinePrompts(e){let t=await this.mergePartialAndUserVariables(e);for(let{name:e,prompt:r}of this.pipelinePrompts){let n=i.extractRequiredInputValues(t,r.inputVariables);r instanceof s.ChatPromptTemplate?t[e]=await r.formatMessages(n):t[e]=await r.format(n)}return i.extractRequiredInputValues(t,this.finalPrompt.inputVariables)}async formatPromptValue(e){return this.finalPrompt.formatPromptValue(await this.formatPipelinePrompts(e))}async format(e){return this.finalPrompt.format(await this.formatPipelinePrompts(e))}async partial(e){let t={...this};return t.inputVariables=this.inputVariables.filter(t=>!(t in e)),t.partialVariables={...this.partialVariables??{},...e},new i(t)}serialize(){throw Error("Not implemented.")}_getPromptType(){return"pipeline"}}},{"./base.js":"579yP","./chat.js":"e9TQ6","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4W5FO":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bl3jj:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/example_selectors/index.js");n.exportAll(a,r)},{"./dist/example_selectors/index.js":"eunkP","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],eunkP:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./base.js");n.exportAll(a,r);var s=e("./conditional.js");n.exportAll(s,r);var i=e("./length_based.js");n.exportAll(i,r);var o=e("./semantic_similarity.js");n.exportAll(o,r)},{"./base.js":"kdOmw","./conditional.js":"by0Rq","./length_based.js":"6Q0Rh","./semantic_similarity.js":"hNj0Q","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kdOmw:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseExampleSelector",()=>s);var a=e("../load/serializable.js");class s extends a.Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","example_selectors","base"]})}}},{"../load/serializable.js":"ihLrn","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],by0Rq:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BasePromptSelector",()=>a),n.export(r,"ConditionalPromptSelector",()=>s),n.export(r,"isLLM",()=>i),n.export(r,"isChatModel",()=>o);class a{async getPromptAsync(e,t){return this.getPrompt(e).partial(t?.partialVariables??{})}}class s extends a{constructor(e,t=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(let[t,r]of this.conditionals)if(t(e))return r;return this.defaultPrompt}}function i(e){return"base_llm"===e._modelType()}function o(e){return"base_chat_model"===e._modelType()}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6Q0Rh":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"LengthBasedExampleSelector",()=>i);var a=e("./base.js");function s(e){return e.split(/\n| /).length}class i extends a.BaseExampleSelector{constructor(e){super(e),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getTextLength",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,writable:!0,value:2048}),Object.defineProperty(this,"exampleTextLengths",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.examplePrompt=e.examplePrompt,this.maxLength=e.maxLength??2048,this.getTextLength=e.getTextLength??s}async addExample(e){this.examples.push(e);let t=await this.examplePrompt.format(e);this.exampleTextLengths.push(this.getTextLength(t))}async calculateExampleTextLengths(e,t){if(e.length>0)return e;let{examples:r,examplePrompt:n}=t;return(await Promise.all(r.map(e=>n.format(e)))).map(e=>this.getTextLength(e))}async selectExamples(e){let t=Object.values(e).join(" "),r=this.maxLength-this.getTextLength(t),n=0,a=[];for(;r>0&&n<this.examples.length;){let e=r-this.exampleTextLengths[n];if(e<0)break;a.push(this.examples[n]),r=e,n+=1}return a}static async fromExamples(e,t){let r=new i(t);return await Promise.all(e.map(e=>r.addExample(e))),r}}},{"./base.js":"kdOmw","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hNj0Q:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"SemanticSimilarityExampleSelector",()=>o);var a=e("../documents/document.js"),s=e("./base.js");function i(e){return Object.keys(e).sort().map(t=>e[t])}class o extends s.BaseExampleSelector{constructor(e){if(super(e),Object.defineProperty(this,"vectorStoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.exampleKeys=e.exampleKeys,this.inputKeys=e.inputKeys,void 0!==e.vectorStore)this.vectorStoreRetriever=e.vectorStore.asRetriever({k:e.k??4,filter:e.filter});else if(e.vectorStoreRetriever)this.vectorStoreRetriever=e.vectorStoreRetriever;else throw Error('You must specify one of "vectorStore" and "vectorStoreRetriever".')}async addExample(e){let t=i((this.inputKeys??Object.keys(e)).reduce((t,r)=>({...t,[r]:e[r]}),{})).join(" ");await this.vectorStoreRetriever.addDocuments([new a.Document({pageContent:t,metadata:e})])}async selectExamples(e){let t=i((this.inputKeys??Object.keys(e)).reduce((t,r)=>({...t,[r]:e[r]}),{})).join(" "),r=(await this.vectorStoreRetriever.invoke(t)).map(e=>e.metadata);return this.exampleKeys?r.map(e=>this.exampleKeys.reduce((t,r)=>({...t,[r]:e[r]}),{})):r}static async fromExamples(e,t,r,n={}){let a=n.inputKeys??null,s=e.map(e=>i(a?a.reduce((t,r)=>({...t,[r]:e[r]}),{}):e).join(" "));return new o({vectorStore:await r.fromTexts(s,e,t,n),k:n.k??4,exampleKeys:n.exampleKeys,inputKeys:n.inputKeys})}}},{"../documents/document.js":"ehyuz","./base.js":"kdOmw","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ehyuz:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Document",()=>a);class a{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent?e.pageContent.toString():this.pageContent,this.metadata=e.metadata??{}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5hMVk":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"NoOpOutputParser",()=>s);var a=e("../schema/output_parser.js");class s extends a.BaseOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"NoOpOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}},{"../schema/output_parser.js":"16nfg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],o8TEz:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Runnable",()=>a.Runnable),n.export(r,"RunnableBinding",()=>a.RunnableBinding),n.export(r,"RunnableEach",()=>a.RunnableEach),n.export(r,"RunnableRetry",()=>a.RunnableRetry),n.export(r,"RunnableSequence",()=>a.RunnableSequence),n.export(r,"RunnableMap",()=>a.RunnableMap),n.export(r,"RunnableLambda",()=>a.RunnableLambda),n.export(r,"RunnableWithFallbacks",()=>a.RunnableWithFallbacks),n.export(r,"_coerceToRunnable",()=>a._coerceToRunnable);var a=e("@langchain/core/runnables")},{"@langchain/core/runnables":"3oXTe","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3oXTe":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/runnables/index.js");n.exportAll(a,r)},{"./dist/runnables/index.js":"5rS6H","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ixKtO:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"NAIVE_FIX_TEMPLATE",()=>s),n.export(r,"NAIVE_FIX_PROMPT",()=>i);var a=e("../prompts/prompt.js");let s=`Instructions:
--------------
{instructions}
--------------
Completion:
--------------
{completion}
--------------

Above, the Completion did not satisfy the constraints given in the Instructions.
Error:
--------------
{error}
--------------

Please try again. Please only respond with an answer that satisfies the constraints laid out in the Instructions:`,i=(0,a.PromptTemplate).fromTemplate(s)},{"../prompts/prompt.js":"7jSxq","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7jSxq":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"PromptTemplate",()=>a.PromptTemplate);var a=e("@langchain/core/prompts")},{"@langchain/core/prompts":"4KAkE","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4IDFM":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"CombiningOutputParser",()=>s);var a=e("../schema/output_parser.js");class s extends a.BaseOutputParser{static lc_name(){return"CombiningOutputParser"}constructor(e,...t){!(t.length>0)&&"parsers"in e||(e={parsers:[e,...t]}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","combining"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"parsers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputDelimiter",{enumerable:!0,configurable:!0,writable:!0,value:"-----"}),this.parsers=e.parsers}async parse(e,t){let r=e.trim().split(RegExp(`${this.outputDelimiter}Output \\d+${this.outputDelimiter}`)).slice(1),n={};for(let[a,s]of this.parsers.entries()){let i;try{let e=r[a].includes("```")?r[a].trim().split(/```/)[1]:r[a].trim();e.endsWith(this.outputDelimiter)&&(e=e.slice(0,-this.outputDelimiter.length)),i=await s.parse(e,t)}catch(r){i=await s.parse(e.trim(),t)}Object.assign(n,i)}return n}getFormatInstructions(){return`${[`Return the following ${this.parsers.length} outputs, each formatted as described below. Include the delimiter characters "${this.outputDelimiter}" in your response:`,...this.parsers.map((e,t)=>`${this.outputDelimiter}Output ${t+1}${this.outputDelimiter}
${e.getFormatInstructions().trim()}
${this.outputDelimiter}`)].join("\n\n")}
`}}},{"../schema/output_parser.js":"16nfg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],cfmkZ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"RouterOutputParser",()=>i);var a=e("./structured.js"),s=e("../schema/output_parser.js");class i extends a.JsonMarkdownStructuredOutputParser{constructor(e,t){super(e),Object.defineProperty(this,"defaultDestination",{enumerable:!0,configurable:!0,writable:!0,value:"DEFAULT"}),this.defaultDestination=t?.defaultDestination??this.defaultDestination}async parse(e){try{let t=await super.parse(e);return t.destination?.toLowerCase()===this.defaultDestination.toLowerCase()&&(t.destination=null),t}catch(t){throw new s.OutputParserException(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}}},{"./structured.js":"lB0Tl","../schema/output_parser.js":"16nfg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],i4BBY:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"OutputFunctionsParser",()=>o),n.export(r,"JsonOutputFunctionsParser",()=>l),n.export(r,"JsonKeyOutputFunctionsParser",()=>u);var a=e("@langchain/core/utils/json_patch"),s=e("../schema/output_parser.js"),i=e("./json.js");class o extends s.BaseLLMOutputParser{static lc_name(){return"OutputFunctionsParser"}constructor(e){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"argsOnly",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.argsOnly=e?.argsOnly??this.argsOnly}async parseResult(e){if("message"in e[0]){let t=e[0].message.additional_kwargs.function_call;if(!t)throw Error(`No function_call in message ${JSON.stringify(e)}`);if(!t.arguments)throw Error(`No arguments in function_call ${JSON.stringify(e)}`);return this.argsOnly?t.arguments:JSON.stringify(t)}throw Error(`No message in generations ${JSON.stringify(e)}`)}}class l extends s.BaseCumulativeTransformOutputParser{static lc_name(){return"JsonOutputFunctionsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argsOnly",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.argsOnly=e?.argsOnly??this.argsOnly,this.outputParser=new o(e)}_diff(e,t){if(t)return(0,a.compare)(e??{},t)}async parsePartialResult(e){let t=e[0];if(!t.message)return;let{message:r}=t,n=r.additional_kwargs.function_call;if(n)return this.argsOnly?(0,i.parsePartialJson)(n.arguments):{...n,arguments:(0,i.parsePartialJson)(n.arguments)}}async parseResult(e){let t=await this.outputParser.parseResult(e);if(!t)throw Error(`No result from "OutputFunctionsParser" ${JSON.stringify(e)}`);return this.parse(t)}async parse(e){let t=JSON.parse(e);return this.argsOnly||(t.arguments=JSON.parse(t.arguments)),t}getFormatInstructions(){return""}}class u extends s.BaseLLMOutputParser{static lc_name(){return"JsonKeyOutputFunctionsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:new l}),Object.defineProperty(this,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.attrName=e.attrName}async parseResult(e){return(await this.outputParser.parseResult(e))[this.attrName]}}},{"@langchain/core/utils/json_patch":"bzNfP","../schema/output_parser.js":"16nfg","./json.js":"hGQMu","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],bzNfP:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/utils/json_patch.js");n.exportAll(a,r)},{"../dist/utils/json_patch.js":"lndYQ","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],lndYQ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"compare",()=>a.compare),n.export(r,"applyPatch",()=>a.applyPatch);var a=e("./fast-json-patch/index.js")},{"./fast-json-patch/index.js":"hrFKE","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hGQMu:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){if(void 0===e)return null;try{return JSON.parse(e)}catch(e){}let t="",r=[],n=!1,a=!1;for(let s of e){if(n)'"'!==s||a?"\n"!==s||a?a="\\"===s&&!a:s="\\n":n=!1;else if('"'===s)n=!0,a=!1;else if("{"===s)r.push("}");else if("["===s)r.push("]");else if("}"===s||"]"===s){if(!r||r[r.length-1]!==s)return null;r.pop()}t+=s}n&&(t+='"');for(let e=r.length-1;e>=0;e-=1)t+=r[e];try{return JSON.parse(t)}catch(e){return null}}n.defineInteropFlag(r),n.export(r,"parsePartialJson",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],dA3JY:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"JsonOutputToolsParser",()=>s);var a=e("../schema/output_parser.js");class s extends a.BaseLLMOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputToolsParser"}async parseResult(e){let t=e[0].message.additional_kwargs.tool_calls;if(!t)throw Error(`No tools_call in message ${JSON.stringify(e)}`);let r=JSON.parse(JSON.stringify(t)),n=[];for(let e of r)if(void 0!==e.function){let t=e.function.arguments;n.push({name:e.function.name,arguments:JSON.parse(t)})}return n}}},{"../schema/output_parser.js":"16nfg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],heX8Q:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"HttpResponseOutputParser",()=>s);var a=e("../schema/output_parser.js");class s extends a.BaseTransformOutputParser{static lc_name(){return"HttpResponseOutputParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parser"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:new a.StringOutputParser}),Object.defineProperty(this,"contentType",{enumerable:!0,configurable:!0,writable:!0,value:"text/plain"}),this.outputParser=e?.outputParser??this.outputParser,this.contentType=e?.contentType??this.contentType}async *_transform(e){for await(let t of this.outputParser._transform(e))"string"==typeof t?yield this.parse(t):yield this.parse(JSON.stringify(t));if("text/event-stream"===this.contentType){let e=new TextEncoder;yield e.encode(`event: end

`)}}async parse(e){let t;let r=await this.outputParser.parse(e),n=new TextEncoder;return"text/event-stream"===this.contentType?n.encode(`event: data
data: ${JSON.stringify(r)}

`):(t="string"==typeof r?r:JSON.stringify(r),n.encode(t))}getFormatInstructions(){return""}}},{"../schema/output_parser.js":"16nfg","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8M8ap":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/prompts/index.js");n.exportAll(a,r)},{"./dist/prompts/index.js":"kIn2y","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],kIn2y:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BasePromptTemplate",()=>a.BasePromptTemplate),n.export(r,"StringPromptValue",()=>a.StringPromptValue),n.export(r,"BaseStringPromptTemplate",()=>a.BaseStringPromptTemplate),n.export(r,"BaseExampleSelector",()=>s.BaseExampleSelector),n.export(r,"PromptTemplate",()=>i.PromptTemplate),n.export(r,"BasePromptSelector",()=>o.BasePromptSelector),n.export(r,"ConditionalPromptSelector",()=>o.ConditionalPromptSelector),n.export(r,"isChatModel",()=>o.isChatModel),n.export(r,"isLLM",()=>o.isLLM),n.export(r,"LengthBasedExampleSelector",()=>l.LengthBasedExampleSelector),n.export(r,"SemanticSimilarityExampleSelector",()=>u.SemanticSimilarityExampleSelector),n.export(r,"FewShotPromptTemplate",()=>c.FewShotPromptTemplate),n.export(r,"FewShotChatMessagePromptTemplate",()=>c.FewShotChatMessagePromptTemplate),n.export(r,"ChatPromptTemplate",()=>d.ChatPromptTemplate),n.export(r,"HumanMessagePromptTemplate",()=>d.HumanMessagePromptTemplate),n.export(r,"AIMessagePromptTemplate",()=>d.AIMessagePromptTemplate),n.export(r,"SystemMessagePromptTemplate",()=>d.SystemMessagePromptTemplate),n.export(r,"ChatMessagePromptTemplate",()=>d.ChatMessagePromptTemplate),n.export(r,"MessagesPlaceholder",()=>d.MessagesPlaceholder),n.export(r,"BaseChatPromptTemplate",()=>d.BaseChatPromptTemplate),n.export(r,"parseTemplate",()=>p.parseTemplate),n.export(r,"renderTemplate",()=>p.renderTemplate),n.export(r,"checkValidTemplate",()=>p.checkValidTemplate),n.export(r,"PipelinePromptTemplate",()=>f.PipelinePromptTemplate);var a=e("./base.js"),s=e("@langchain/core/example_selectors"),i=e("./prompt.js"),o=e("./selectors/conditional.js"),l=e("./selectors/LengthBasedExampleSelector.js"),u=e("./selectors/SemanticSimilarityExampleSelector.js"),c=e("./few_shot.js"),d=e("./chat.js"),p=e("./template.js"),f=e("./pipeline.js")},{"./base.js":"gDAtu","@langchain/core/example_selectors":"bl3jj","./prompt.js":"7jSxq","./selectors/conditional.js":"4qqzx","./selectors/LengthBasedExampleSelector.js":"2iDpy","./selectors/SemanticSimilarityExampleSelector.js":"5KwjZ","./few_shot.js":"de7gb","./chat.js":"9rxa0","./template.js":"7nauy","./pipeline.js":"hzNSY","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"4qqzx":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BasePromptSelector",()=>a.BasePromptSelector),n.export(r,"ConditionalPromptSelector",()=>a.ConditionalPromptSelector),n.export(r,"isLLM",()=>a.isLLM),n.export(r,"isChatModel",()=>a.isChatModel);var a=e("@langchain/core/example_selectors")},{"@langchain/core/example_selectors":"bl3jj","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2iDpy":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"LengthBasedExampleSelector",()=>a.LengthBasedExampleSelector);var a=e("@langchain/core/example_selectors")},{"@langchain/core/example_selectors":"bl3jj","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5KwjZ":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/example_selectors");n.exportAll(a,r)},{"@langchain/core/example_selectors":"bl3jj","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],de7gb:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"FewShotPromptTemplate",()=>a.FewShotPromptTemplate),n.export(r,"FewShotChatMessagePromptTemplate",()=>a.FewShotChatMessagePromptTemplate);var a=e("@langchain/core/prompts")},{"@langchain/core/prompts":"4KAkE","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"9rxa0":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseMessagePromptTemplate",()=>a.BaseMessagePromptTemplate),n.export(r,"MessagesPlaceholder",()=>a.MessagesPlaceholder),n.export(r,"BaseMessageStringPromptTemplate",()=>a.BaseMessageStringPromptTemplate),n.export(r,"BaseChatPromptTemplate",()=>a.BaseChatPromptTemplate),n.export(r,"ChatMessagePromptTemplate",()=>a.ChatMessagePromptTemplate),n.export(r,"HumanMessagePromptTemplate",()=>a.HumanMessagePromptTemplate),n.export(r,"AIMessagePromptTemplate",()=>a.AIMessagePromptTemplate),n.export(r,"SystemMessagePromptTemplate",()=>a.SystemMessagePromptTemplate),n.export(r,"ChatPromptTemplate",()=>a.ChatPromptTemplate),n.export(r,"ChatPromptValue",()=>s.ChatPromptValue);var a=e("@langchain/core/prompts"),s=e("@langchain/core/prompt_values")},{"@langchain/core/prompts":"4KAkE","@langchain/core/prompt_values":"5IYhT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7nauy":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"parseFString",()=>a.parseFString),n.export(r,"interpolateFString",()=>a.interpolateFString),n.export(r,"DEFAULT_FORMATTER_MAPPING",()=>a.DEFAULT_FORMATTER_MAPPING),n.export(r,"DEFAULT_PARSER_MAPPING",()=>a.DEFAULT_PARSER_MAPPING),n.export(r,"renderTemplate",()=>a.renderTemplate),n.export(r,"parseTemplate",()=>a.parseTemplate),n.export(r,"checkValidTemplate",()=>a.checkValidTemplate);var a=e("@langchain/core/prompts")},{"@langchain/core/prompts":"4KAkE","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hzNSY:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"PipelinePromptTemplate",()=>a.PipelinePromptTemplate);var a=e("@langchain/core/prompts")},{"@langchain/core/prompts":"4KAkE","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fQwiJ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/text_splitter.js");n.exportAll(a,r)},{"./dist/text_splitter.js":"2884W","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2884W":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"TextSplitter",()=>o),n.export(r,"CharacterTextSplitter",()=>l),n.export(r,"SupportedTextSplitterLanguages",()=>u),n.export(r,"RecursiveCharacterTextSplitter",()=>c),n.export(r,"TokenTextSplitter",()=>d),n.export(r,"MarkdownTextSplitter",()=>p),n.export(r,"LatexTextSplitter",()=>f);var a=e("./document.js"),s=e("./util/tiktoken.js"),i=e("./schema/document.js");class o extends i.BaseDocumentTransformer{constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=e?.chunkSize??this.chunkSize,this.chunkOverlap=e?.chunkOverlap??this.chunkOverlap,this.keepSeparator=e?.keepSeparator??this.keepSeparator,this.lengthFunction=e?.lengthFunction??(e=>e.length),this.chunkOverlap>=this.chunkSize)throw Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(e,t={}){return this.splitDocuments(e,t)}splitOnSeparator(e,t){let r;if(t){if(this.keepSeparator){let n=t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");r=e.split(RegExp(`(?=${n})`))}else r=e.split(t)}else r=e.split("");return r.filter(e=>""!==e)}async createDocuments(e,t=[],r={}){let n=t.length>0?t:Array(e.length).fill({}),{chunkHeader:s="",chunkOverlapHeader:i="(cont'd) ",appendChunkOverlapHeader:o=!1}=r,l=[];for(let t=0;t<e.length;t+=1){let r=e[t],u=1,c=null,d=-1;for(let e of(await this.splitText(r))){let p=s,f=r.indexOf(e,d+1);if(null===c)u+=this.numberOfNewLines(r,0,f);else{let e=d+await this.lengthFunction(c);e<f?u+=this.numberOfNewLines(r,e,f):e>f&&(u-=this.numberOfNewLines(r,f,e)),o&&(p+=i)}let h=this.numberOfNewLines(e),m=n[t].loc&&"object"==typeof n[t].loc?{...n[t].loc}:{};m.lines={from:u,to:u+h};let g={...n[t],loc:m};p+=e,l.push(new a.Document({pageContent:p,metadata:g})),u+=h,c=e,d=f}}return l}numberOfNewLines(e,t,r){return(e.slice(t,r).match(/\n/g)||[]).length}async splitDocuments(e,t={}){let r=e.filter(e=>void 0!==e.pageContent),n=r.map(e=>e.pageContent),a=r.map(e=>e.metadata);return this.createDocuments(n,a,t)}joinDocs(e,t){let r=e.join(t).trim();return""===r?null:r}async mergeSplits(e,t){let r=[],n=[],a=0;for(let s of e){let e=await this.lengthFunction(s);if(a+e+(n.length>0?t.length:0)>this.chunkSize&&(a>this.chunkSize&&console.warn(`Created a chunk of size ${a}, +
which is longer than the specified ${this.chunkSize}`),n.length>0)){let s=this.joinDocs(n,t);for(null!==s&&r.push(s);a>this.chunkOverlap||a+e>this.chunkSize&&a>0;)a-=await this.lengthFunction(n[0]),n.shift()}n.push(s),a+=e}let s=this.joinDocs(n,t);return null!==s&&r.push(s),r}}class l extends o{static lc_name(){return"CharacterTextSplitter"}constructor(e){super(e),Object.defineProperty(this,"separator",{enumerable:!0,configurable:!0,writable:!0,value:"\n\n"}),this.separator=e?.separator??this.separator}async splitText(e){let t=this.splitOnSeparator(e,this.separator);return this.mergeSplits(t,this.keepSeparator?"":this.separator)}}let u=["cpp","go","java","js","php","proto","python","rst","ruby","rust","scala","swift","markdown","latex","html","sol"];class c extends o{static lc_name(){return"RecursiveCharacterTextSplitter"}constructor(e){super(e),Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:["\n\n","\n"," ",""]}),this.separators=e?.separators??this.separators,this.keepSeparator=e?.keepSeparator??!0}async _splitText(e,t){let r;let n=[],a=t[t.length-1];for(let n=0;n<t.length;n+=1){let s=t[n];if(""===s){a=s;break}if(e.includes(s)){a=s,r=t.slice(n+1);break}}let s=this.splitOnSeparator(e,a),i=[],o=this.keepSeparator?"":a;for(let e of s)if(await this.lengthFunction(e)<this.chunkSize)i.push(e);else{if(i.length){let e=await this.mergeSplits(i,o);n.push(...e),i=[]}if(r){let t=await this._splitText(e,r);n.push(...t)}else n.push(e)}if(i.length){let e=await this.mergeSplits(i,o);n.push(...e)}return n}async splitText(e){return this._splitText(e,this.separators)}static fromLanguage(e,t){return new c({...t,separators:c.getSeparatorsForLanguage(e)})}static getSeparatorsForLanguage(e){if("cpp"===e)return["\nclass ","\nvoid ","\nint ","\nfloat ","\ndouble ","\nif ","\nfor ","\nwhile ","\nswitch ","\ncase ","\n\n","\n"," ",""];if("go"===e)return["\nfunc ","\nvar ","\nconst ","\ntype ","\nif ","\nfor ","\nswitch ","\ncase ","\n\n","\n"," ",""];if("java"===e)return["\nclass ","\npublic ","\nprotected ","\nprivate ","\nstatic ","\nif ","\nfor ","\nwhile ","\nswitch ","\ncase ","\n\n","\n"," ",""];if("js"===e)return["\nfunction ","\nconst ","\nlet ","\nvar ","\nclass ","\nif ","\nfor ","\nwhile ","\nswitch ","\ncase ","\ndefault ","\n\n","\n"," ",""];if("php"===e)return["\nfunction ","\nclass ","\nif ","\nforeach ","\nwhile ","\ndo ","\nswitch ","\ncase ","\n\n","\n"," ",""];if("proto"===e)return["\nmessage ","\nservice ","\nenum ","\noption ","\nimport ","\nsyntax ","\n\n","\n"," ",""];if("python"===e)return["\nclass ","\ndef ","\n	def ","\n\n","\n"," ",""];else if("rst"===e)return["\n===\n","\n---\n","\n***\n","\n.. ","\n\n","\n"," ",""];else if("ruby"===e)return["\ndef ","\nclass ","\nif ","\nunless ","\nwhile ","\nfor ","\ndo ","\nbegin ","\nrescue ","\n\n","\n"," ",""];else if("rust"===e)return["\nfn ","\nconst ","\nlet ","\nif ","\nwhile ","\nfor ","\nloop ","\nmatch ","\nconst ","\n\n","\n"," ",""];else if("scala"===e)return["\nclass ","\nobject ","\ndef ","\nval ","\nvar ","\nif ","\nfor ","\nwhile ","\nmatch ","\ncase ","\n\n","\n"," ",""];else if("swift"===e)return["\nfunc ","\nclass ","\nstruct ","\nenum ","\nif ","\nfor ","\nwhile ","\ndo ","\nswitch ","\ncase ","\n\n","\n"," ",""];else if("markdown"===e)return["\n## ","\n### ","\n#### ","\n##### ","\n###### ","```\n\n","\n\n***\n\n","\n\n---\n\n","\n\n___\n\n","\n\n","\n"," ",""];else if("latex"===e)return["\n\\chapter{","\n\\section{","\n\\subsection{","\n\\subsubsection{","\n\\begin{enumerate}","\n\\begin{itemize}","\n\\begin{description}","\n\\begin{list}","\n\\begin{quote}","\n\\begin{quotation}","\n\\begin{verse}","\n\\begin{verbatim}","\n\\begin{align}","$$","$","\n\n","\n"," ",""];else if("html"===e)return["<body>","<div>","<p>","<br>","<li>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<span>","<table>","<tr>","<td>","<th>","<ul>","<ol>","<header>","<footer>","<nav>","<head>","<style>","<script>","<meta>","<title>"," ",""];else if("sol"===e)return["\npragma ","\nusing ","\ncontract ","\ninterface ","\nlibrary ","\nconstructor ","\ntype ","\nfunction ","\nevent ","\nmodifier ","\nerror ","\nstruct ","\nenum ","\nif ","\nfor ","\nwhile ","\ndo while ","\nassembly ","\n\n","\n"," ",""];else throw Error(`Language ${e} is not supported.`)}}class d extends o{static lc_name(){return"TokenTextSplitter"}constructor(e){super(e),Object.defineProperty(this,"encodingName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disallowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tokenizer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.encodingName=e?.encodingName??"gpt2",this.allowedSpecial=e?.allowedSpecial??[],this.disallowedSpecial=e?.disallowedSpecial??"all"}async splitText(e){this.tokenizer||(this.tokenizer=await (0,s.getEncoding)(this.encodingName));let t=[],r=this.tokenizer.encode(e,this.allowedSpecial,this.disallowedSpecial),n=0,a=Math.min(0+this.chunkSize,r.length),i=r.slice(n,a);for(;n<r.length;)t.push(this.tokenizer.decode(i)),n+=this.chunkSize-this.chunkOverlap,a=Math.min(n+this.chunkSize,r.length),i=r.slice(n,a);return t}}class p extends c{constructor(e){super({...e,separators:c.getSeparatorsForLanguage("markdown")})}}class f extends c{constructor(e){super({...e,separators:c.getSeparatorsForLanguage("latex")})}}},{"./document.js":"iouw6","./util/tiktoken.js":"5pvZi","./schema/document.js":"7OlRi","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],iouw6:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Document",()=>a.Document);var a=e("@langchain/core/documents")},{"@langchain/core/documents":"79DTE","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"79DTE":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./dist/documents/index.js");n.exportAll(a,r)},{"./dist/documents/index.js":"8aSS3","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"8aSS3":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("./document.js");n.exportAll(a,r);var s=e("./transformers.js");n.exportAll(s,r)},{"./document.js":"ehyuz","./transformers.js":"lKSBF","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],lKSBF:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseDocumentTransformer",()=>s),n.export(r,"MappingDocumentTransformer",()=>i);var a=e("../runnables/base.js");class s extends a.Runnable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(e,t){return this.transformDocuments(e)}}class i extends s{async transformDocuments(e){let t=[];for(let r of e){let e=await this._transformDocument(r);t.push(e)}return t}}},{"../runnables/base.js":"1qQoT","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5pvZi":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getEncoding",()=>l),n.export(r,"encodingForModel",()=>u);var a=e("js-tiktoken/lite"),s=e("./async_caller.js");let i={},o=new s.AsyncCaller({});async function l(e,t){return e in i||(i[e]=o.fetch(`https://tiktoken.pages.dev/js/${e}.json`,{signal:t?.signal}).then(e=>e.json()).catch(t=>{throw delete i[e],t})),new a.Tiktoken(await i[e],t?.extendedSpecialTokens)}async function u(e,t){return l((0,a.getEncodingNameForModel)(e),t)}},{"js-tiktoken/lite":"hrZLc","./async_caller.js":"eLiL8","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],eLiL8:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("@langchain/core/utils/async_caller");n.exportAll(a,r)},{"@langchain/core/utils/async_caller":"3P9kI","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3P9kI":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("../dist/utils/async_caller.js");n.exportAll(a,r)},{"../dist/utils/async_caller.js":"l8CrB","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"7OlRi":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"BaseDocumentTransformer",()=>a.BaseDocumentTransformer),n.export(r,"MappingDocumentTransformer",()=>s);var a=e("@langchain/core/documents");class s extends a.BaseDocumentTransformer{async transformDocuments(e){let t=[];for(let r of e){let e=await this._transformDocument(r);t.push(e)}return t}}},{"@langchain/core/documents":"79DTE","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],hNleM:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"findAndParseJsonLikeText",()=>s);var a=e("best-effort-json-parser");function s(e){try{let t=e.match(/\{.*/gs);return(0,a.parse)(t[0])}catch(e){return null}}},{"best-effort-json-parser":"3MsgV","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"3MsgV":[function(e,t,r){function n(e){if(void 0!==e){if(null===e)return null;if(""===e)return"";e=e.replace(/\\+$/,e=>e.length%2==0?e:e.slice(0,-1));try{return JSON.parse(e)}catch(s){let[t,r]=":"===e.trimLeft()[0]?a(e,s):a(e,s,f);return n.lastParseReminding=r,n.onExtraToken&&r.length>0&&n.onExtraToken(e,t,r),t}}}function a(e,t,r){let n=s[e[0]]||r;if(!n)throw console.error(`no parser registered for ${JSON.stringify(e[0])}:`,{s:e}),t;return n(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.parse=void 0,r.parse=n,(n=r.parse||(r.parse={})).onExtraToken=(e,t,r)=>{console.error("parsed json with extra tokens:",{text:e,data:t,reminding:r})};let s={};function i(e){return e.trimLeft()}function o(e,t){return a(e=i(e),t)}for(let e of(s[" "]=o,s["\r"]=o,s["\n"]=o,s["	"]=o,s["["]=function(e,t){e=e.substr(1);let r=[];for(e=i(e);e.length>0;){if("]"===e[0]){e=e.substr(1);break}let n=a(e,t,(e,t)=>f(e,t,[",","]"]));r.push(n[0]),","===(e=i(e=n[1]))[0]&&(e=i(e=e.substring(1)))}return[r,e]},"0123456789.-".slice()))s[e]=l;function l(e){for(let t=0;t<e.length;t++){if(s[e[t]]===l)continue;let r=e.substring(0,t);return e=e.substring(t),[u(r),e]}return[u(e),""]}function u(e){if("-"===e)return -0;let t=+e;return Number.isNaN(t)?e:t}function c(e){for(let t=1;t<e.length;t++){let r=e[t];if("\\"===r){t++;continue}if('"'===r){let r=d(e.substring(0,t+1));return e=e.substring(t+1),[JSON.parse(r),e]}}return[JSON.parse(d(e)+'"'),""]}function d(e){return e.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}function p(e){for(let t=1;t<e.length;t++){let r=e[t];if("\\"===r){t++;continue}if("'"===r){let r=d(e.substring(0,t+1));return e=e.substring(t+1),[JSON.parse('"'+r.slice(1,-1)+'"'),e]}}return[JSON.parse('"'+d(e.slice(1))+'"'),""]}function f(e,t,r=[" "]){let n=Math.min(...r.map(t=>{let r=e.indexOf(t);return -1===r?e.length:r}));return[e.substring(0,n).trim(),e.substring(n)]}function h(e,t,r,n){for(let n=t.length;n>=1;n--)if(e.startsWith(t.slice(0,n)))return[r,e.slice(n)];{let r=JSON.stringify(e.slice(0,t.length));throw console.error(`unknown token starting with ${r}:`,{s:e}),n}}s['"']=c,s["'"]=p,s["{"]=function(e,t){e=e.substr(1);let r={};for(e=i(e);e.length>0;){var n,s;if("}"===e[0]){e=e.substr(1);break}let o=(s=[":","}"],'"'===(n=e)[0]?c(n):"'"===n[0]?p(n):f(n,t,s)),l=o[0];if(":"!==(e=i(e=o[1]))[0]||0===(e=i(e=e.substr(1))).length){r[l]=void 0;break}let u=a(e,t);r[l]=u[0],","===(e=i(e=u[1]))[0]&&(e=i(e=e.substr(1)))}return[r,e]},s.t=function(e,t){return h(e,"true",!0,t)},s.f=function(e,t){return h(e,"false",!1,t)},s.n=function(e,t){return h(e,"null",null,t)}},{}],ccLxl:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let n=(0,e("@reduxjs/toolkit").createSlice)({name:"settings",initialState:{isOnToolbar:!1,isOnContextMenus:!1,isOnNotifications:!1,hasShortcuts:!0,isOnChromeSidePanel:!1},reducers:{setIsOnToolbar:(e,t)=>{e.isOnToolbar=t.payload},setIsOnContextMenus:(e,t)=>{e.isOnContextMenus=t.payload},setIsOnNotifications:(e,t)=>{e.isOnNotifications=t.payload},setHasShortcuts:(e,t)=>{e.hasShortcuts=t.payload},setIsOnChromeSidepanel:(e,t)=>{e.isOnChromeSidePanel=t.payload}}});r.default=n},{"@reduxjs/toolkit":"6029V","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],fZTrC:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let n=(0,e("@reduxjs/toolkit").createSlice)({name:"sidebar",initialState:{open:!0,position:"right"},reducers:{open:e=>{e.open=!0},close:e=>{e.open=!1},toggle:e=>{e.open=!e.open},position:(e,t)=>{e.position=t.payload}}});r.default=n},{"@reduxjs/toolkit":"6029V","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],ftIi2:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let n=(0,e("@reduxjs/toolkit").createSlice)({name:"theme",initialState:{colorMode:"dark"},reducers:{setColorMode:(e,t)=>{e.colorMode=t.payload},toggleColorMode:e=>{e.colorMode="light"===e.colorMode?"dark":"light"}}});r.default=n},{"@reduxjs/toolkit":"6029V","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6LJzq":[function(e,t,r){var n=s(e("8253905a44c13076")),a=s(e("e75c3c86eb97c0ea"));function s(e){return e&&e.__esModule?e:{default:e}}t.exports={localStorage:n.default,syncStorage:a.default}},{"8253905a44c13076":"en4Zd",e75c3c86eb97c0ea:"5hVzb"}],en4Zd:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,a=(n=e("9f02686d05d39ebd"))&&n.__esModule?n:{default:n};r.default=(0,a.default)("local")},{"9f02686d05d39ebd":"kzZwY"}],kzZwY:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return{getItem:function(t){return new Promise(function(r,n){chrome.storage[e].get(t,function(e){null==chrome.runtime.lastError?r(e[t]):n()})})},removeItem:function(t){return new Promise(function(r,n){chrome.storage[e].remove(t,function(){null==chrome.runtime.lastError?r():n()})})},setItem:function(t,r){return new Promise(function(n,a){var s;chrome.storage[e].set((t in(s={})?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s),function(){null==chrome.runtime.lastError?n():a()})})}}}},{}],"5hVzb":[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,a=(n=e("8ec019344f969d8f"))&&n.__esModule?n:{default:n};r.default=(0,a.default)("sync")},{"8ec019344f969d8f":"kzZwY"}],"5KEGu":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"getDeviceType",()=>o),n.export(r,"appConfig",()=>l);var a=e("@capacitor/core"),s=e("7b26541459da14f0");let i=(()=>{try{return{PLASMO_PUBLIC_APP_TYPE:"extension",...s.env}}catch(e){return{}}})();function o(){return i?.PLASMO_PUBLIC_APP_TYPE==="extension"?"extension":(0,a.Capacitor).isNativePlatform()?"android":"web"}let l={isExtension:i?.PLASMO_PUBLIC_APP_TYPE==="extension",device:o()}},{"7b26541459da14f0":"7XEqq","@capacitor/core":"2zaa8","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2zaa8":[function(e,t,r){let n,a;/*! Capacitor: https://capacitorjs.com/ - MIT License */var s,i,o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"Capacitor",()=>m),o.export(r,"CapacitorCookies",()=>S),o.export(r,"CapacitorException",()=>f),o.export(r,"CapacitorHttp",()=>E),o.export(r,"CapacitorPlatforms",()=>u),o.export(r,"ExceptionCode",()=>i),o.export(r,"Plugins",()=>y),o.export(r,"WebPlugin",()=>b),o.export(r,"WebView",()=>_),o.export(r,"addPlatform",()=>c),o.export(r,"buildRequestInit",()=>I),o.export(r,"registerPlugin",()=>g),o.export(r,"registerWebPlugin",()=>v),o.export(r,"setPlatform",()=>d);var l=arguments[3];let u=(n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==l?l:{}).CapacitorPlatforms=(e=>{let t=new Map;t.set("web",{name:"web"});let r=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return r.addPlatform=(e,t)=>{r.platforms.set(e,t)},r.setPlatform=e=>{r.platforms.has(e)&&(r.currentPlatform=r.platforms.get(e))},r})(n),c=u.addPlatform,d=u.setPlatform,p=(e,t)=>{var r;let n=t.config,a=e.Plugins;if(!(null==n?void 0:n.name))throw Error('Capacitor WebPlugin is using the deprecated "registerWebPlugin()" function, but without the config. Please use "registerPlugin()" instead to register this web plugin."');console.warn(`Capacitor plugin "${n.name}" is using the deprecated "registerWebPlugin()" function`),(!a[n.name]||(null===(r=null==n?void 0:n.platforms)||void 0===r?void 0:r.includes(e.getPlatform())))&&(a[n.name]=t)};(s=i||(i={})).Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE";class f extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}let h=e=>{var t,r;return(null==e?void 0:e.androidBridge)?"android":(null===(r=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===r?void 0:r.bridge)?"ios":"web"},m=(a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==l?l:{}).Capacitor=(e=>{var t,r,n,a,s;let o=e.CapacitorCustomPlatform||null,l=e.Capacitor||{},u=l.Plugins=l.Plugins||{},c=e.CapacitorPlatforms,d=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==o?o.name:h(e)),p=(null===(r=null==c?void 0:c.currentPlatform)||void 0===r?void 0:r.isNativePlatform)||(()=>"web"!==d()),m=(null===(n=null==c?void 0:c.currentPlatform)||void 0===n?void 0:n.isPluginAvailable)||(e=>{let t=y.get(e);return!!((null==t?void 0:t.platforms.has(d()))||g(e))}),g=(null===(a=null==c?void 0:c.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||(e=>{var t;return null===(t=l.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)}),y=new Map,v=(null===(s=null==c?void 0:c.currentPlatform)||void 0===s?void 0:s.registerPlugin)||((e,t={})=>{let r;let n=y.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;let a=d(),s=g(e),c=async()=>(!r&&a in t?r=r="function"==typeof t[a]?await t[a]():t[a]:null!==o&&!r&&"web"in t&&(r=r="function"==typeof t.web?await t.web():t.web),r),p=(t,r)=>{var n,o;if(s){let a=null==s?void 0:s.methods.find(e=>r===e.name);if(a)return"promise"===a.rtype?t=>l.nativePromise(e,r.toString(),t):(t,n)=>l.nativeCallback(e,r.toString(),t,n);if(t)return null===(n=t[r])||void 0===n?void 0:n.bind(t)}else if(t)return null===(o=t[r])||void 0===o?void 0:o.bind(t);else throw new f(`"${e}" plugin is not implemented on ${a}`,i.Unimplemented)},h=t=>{let r;let n=(...n)=>{let s=c().then(s=>{let o=p(s,t);if(o){let e=o(...n);return r=null==e?void 0:e.remove,e}throw new f(`"${e}.${t}()" is not implemented on ${a}`,i.Unimplemented)});return"addListener"===t&&(s.remove=async()=>r()),s};return n.toString=()=>`${t.toString()}() { [capacitor code] }`,Object.defineProperty(n,"name",{value:t,writable:!1,configurable:!1}),n},m=h("addListener"),v=h("removeListener"),b=(e,t)=>{let r=m({eventName:e},t),n=async()=>{v({eventName:e,callbackId:await r},t)},a=new Promise(e=>r.then(()=>e({remove:n})));return a.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()},a},_=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return s?b:m;case"removeListener":return v;default:return h(t)}}});return u[e]=_,y.set(e,{name:e,proxy:_,platforms:new Set([...Object.keys(t),...s?[a]:[]])}),_});return l.convertFileSrc||(l.convertFileSrc=e=>e),l.getPlatform=d,l.handleError=t=>e.console.error(t),l.isNativePlatform=p,l.isPluginAvailable=m,l.pluginMethodNoop=(e,t,r)=>Promise.reject(`${r} does not have an implementation of "${t}".`),l.registerPlugin=v,l.Exception=f,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l})(a),g=m.registerPlugin,y=m.Plugins,v=e=>p(m,e);class b{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);let r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);let n=async()=>this.removeListener(e,t),a=Promise.resolve({remove:n});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()}}),a}async removeAllListeners(){for(let e in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){let r=this.listeners[e];r&&r.forEach(e=>e(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new m.Exception(e,i.Unimplemented)}unavailable(e="not available"){return new m.Exception(e,i.Unavailable)}async removeListener(e,t){let r=this.listeners[e];if(!r)return;let n=r.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}let _=g("WebView"),w=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),j=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class x extends b{async getCookies(){let e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[r,n]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=j(r).trim(),n=j(n).trim(),t[r]=n}),t}async setCookie(e){try{let t=w(e.key),r=w(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),s=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${n}; path=${a}; ${s};`}catch(e){return Promise.reject(e)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}}async clearCookies(){try{for(let e of document.cookie.split(";")||[])document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}let S=g("CapacitorCookies",{web:()=>new x}),k=async e=>new Promise((t,r)=>{let n=new FileReader;n.onload=()=>{let e=n.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},n.onerror=e=>r(e),n.readAsDataURL(e)}),P=(e={})=>{let t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((r,n,a)=>(r[n]=e[t[a]],r),{})},O=(e,t=!0)=>e?Object.entries(e).reduce((e,r)=>{let n,a;let[s,i]=r;return Array.isArray(i)?(a="",i.forEach(e=>{n=t?encodeURIComponent(e):e,a+=`${s}=${n}&`}),a.slice(0,-1)):(n=t?encodeURIComponent(i):i,a=`${s}=${n}`),`${e}&${a}`},"").substr(1):null,I=(e,t={})=>{let r=Object.assign({method:e.method||"GET",headers:e.headers},t),n=P(e.headers)["content-type"]||"";if("string"==typeof e.data)r.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){let t=new URLSearchParams;for(let[r,n]of Object.entries(e.data||{}))t.set(r,n);r.body=t.toString()}else if(n.includes("multipart/form-data")||e.data instanceof FormData){let t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,r)=>{t.append(r,e)});else for(let r of Object.keys(e.data))t.append(r,e.data[r]);r.body=t;let n=new Headers(r.headers);n.delete("content-type"),r.headers=n}else(n.includes("application/json")||"object"==typeof e.data)&&(r.body=JSON.stringify(e.data));return r};class C extends b{async request(e){let t,r;let n=I(e,e.webFetchExtra),a=O(e.params,e.shouldEncodeUrlParams),s=a?`${e.url}?${a}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"",{responseType:l="text"}=i.ok?e:{};switch(o.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":r=await i.blob(),t=await k(r);break;case"json":t=await i.json();break;default:t=await i.text()}let u={};return i.headers.forEach((e,t)=>{u[t]=e}),{data:t,headers:u,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}let E=g("CapacitorHttp",{web:()=>new C})},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],dbQNg:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let n=async(e,t)=>{let{apiKey:r,baseUrl:n,model:a,prompt:s,temperature:i=0}=e.body;console.log("[fetchCompletion] Received request:",{baseUrl:n,model:a,promptLength:s?.length});try{let e=n.endsWith("/v1")?`${n}/chat/completions`:n.endsWith("/v1/")?`${n}chat/completions`:`${n}/v1/chat/completions`;console.log("[fetchCompletion] Calling:",e);let o={"Content-Type":"application/json"};r&&(o.Authorization=`Bearer ${r}`);let l=await fetch(e,{method:"POST",headers:o,body:JSON.stringify({model:a,messages:[{role:"user",content:s}],temperature:i,stream:!1})});if(!l.ok){let e=await l.text();t.send({error:`Completion failed: ${l.status} ${l.statusText} - ${e}`});return}let u=await l.json(),c=u.choices?.[0]?.message?.content;if(null==c){t.send({error:"Unexpected API response format: missing choices[0].message.content"});return}t.send({text:c})}catch(e){t.send({error:e instanceof Error?e.message:"Failed to fetch completion"})}};r.default=n},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"2DMD5":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let n=async(e,t)=>{let{apiKey:r,modelsUrl:n}=e.body;try{let e={"Content-Type":"application/json"};r&&(e.Authorization=`Bearer ${r}`);let a=await fetch(n,{headers:e});if(!a.ok){t.send({error:`Failed to fetch models: ${a.status} ${a.statusText}`});return}let s=((await a.json()).data??[]).map(e=>e.id);t.send({models:s})}catch(e){t.send({error:e instanceof Error?e.message:"Failed to fetch models"})}};r.default=n},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],gi3oQ:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var a=e("~/domains/redux/store"),s=e("~/domains/settings/store/settingsSlice"),i=n.interopDefault(s);let o=async(e,t)=>{try{(0,a.store).getState().settings.isOnChromeSidePanel?(chrome.sidePanel.setOptions({enabled:!1}),(0,a.store).dispatch((0,i.default).actions.setIsOnChromeSidepanel(!1))):(chrome.sidePanel.setOptions({enabled:!0}),chrome.sidePanel.open({windowId:e.sender.tab?.windowId}),(0,a.store).dispatch((0,i.default).actions.setIsOnChromeSidepanel(!0))),t.send({message:"ok"})}catch(e){t.send({message:{error:e}})}};r.default=o},{"~/domains/redux/store":"8W8rk","~/domains/settings/store/settingsSlice":"ccLxl","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"5wQxf":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let n=async(e,t)=>{let{apiKey:r,baseUrl:n,model:a,prompt:s,temperature:i=0}=e.body||e;console.log("[streamCompletion] Starting stream:",{baseUrl:n,model:a,hasApiKey:!!r,promptLength:s?.length});try{let e=n.endsWith("/v1")?`${n}/chat/completions`:n.endsWith("/v1/")?`${n}chat/completions`:`${n}/v1/chat/completions`;console.log("[streamCompletion] Calling:",e);let o={"Content-Type":"application/json"};r&&(o.Authorization=`Bearer ${r}`);let l=await fetch(e,{method:"POST",headers:o,body:JSON.stringify({model:a,messages:[{role:"user",content:s}],temperature:i,stream:!0})});if(!l.ok){let e=await l.text();console.log("[streamCompletion] Error:",l.status,e),t.send({error:`Completion failed: ${l.status} ${l.statusText} - ${e}`,done:!0});return}let u=l.body?.getReader();if(!u){t.send({error:"No response body",done:!0});return}let c=new TextDecoder,d="";for(;;){let{done:e,value:r}=await u.read();if(e)break;for(let e of c.decode(r,{stream:!0}).split("\n").filter(e=>""!==e.trim()))if(e.startsWith("data: ")){let r=e.slice(6);if("[DONE]"===r)continue;try{let e=JSON.parse(r),n=e.choices?.[0]?.delta?.content||"";n&&(d+=n,t.send({chunk:n,fullText:d,done:!1}))}catch(e){console.warn("[streamCompletion] Failed to parse chunk:",r.slice(0,100))}}}console.log("[streamCompletion] Stream complete, total length:",d.length),t.send({chunk:"",fullText:d,done:!0})}catch(e){console.log("[streamCompletion] Error:",e),t.send({error:e instanceof Error?e.message:"Failed to stream completion",done:!0})}};r.default=n},{"@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}],"6LUM3":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js"),a=e("~/domains/input/inputSlice"),s=n.interopDefault(a),i=e("~/domains/redux/store"),o=e("~/domains/sidebar/sidebarSlice"),l=n.interopDefault(o);chrome.action.onClicked.addListener(function(e){(0,i.store).getState().sidebar.open&&(0,i.store).dispatch((0,s.default).actions.setSelectedText(void 0)),(0,i.store).dispatch((0,l.default).actions.toggle()),(0,i.store).getState().settings.isOnChromeSidePanel&&((0,i.store).getState().sidebar.open?(chrome.sidePanel.setOptions({enabled:!0}),chrome.sidePanel.open({windowId:e.windowId})):chrome.sidePanel.setOptions({enabled:!1}))}),chrome.contextMenus.create({id:"open-in-anki-gpt",title:"Open in anki gpt to creat flashcard",contexts:["selection"]}),chrome.contextMenus.onClicked.addListener(function(e){let{menuItemId:t}=e;if("open-in-anki-gpt"===t){let t=e.selectionText;(0,i.store).dispatch((0,l.default).actions.open()),(0,i.store).dispatch((0,s.default).actions.setSelectedText(t))}})},{"~/domains/input/inputSlice":"fgSQe","~/domains/redux/store":"8W8rk","~/domains/sidebar/sidebarSlice":"fZTrC","@parcel/transformer-js/src/esmodule-helpers.js":"2SNmR"}]},["41cPv","iCFoN"],"iCFoN","parcelRequire3d47"),globalThis.define=t;